(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{552:function(t,s,a){t.exports=a.p+"assets/img/image-20220106144900720.957f0164.png"},553:function(t,s,a){t.exports=a.p+"assets/img/image-20220305101949058.dbe740e3.png"},554:function(t,s,a){t.exports=a.p+"assets/img/image-20220305100920241.880365d9.png"},555:function(t,s,a){t.exports=a.p+"assets/img/image-20220305102552432.669bec1d.png"},556:function(t,s,a){t.exports=a.p+"assets/img/image-20220305102822478.e000715f.png"},557:function(t,s,a){t.exports=a.p+"assets/img/image-20220305102934542.c0f04723.png"},558:function(t,s,a){t.exports=a.p+"assets/img/image-20220305102626916.c92cd6c3.png"},559:function(t,s,a){t.exports=a.p+"assets/img/image-20220305103419728.ea62058f.png"},677:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[t._v("#")]),t._v(" npm")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#npm的介绍"}},[t._v("npm的介绍")])]),s("li",[s("a",{attrs:{href:"#创建包管理文件"}},[t._v("创建包管理文件")])]),s("li",[s("a",{attrs:{href:"#npm常用命令"}},[t._v("npm常用命令")]),s("ul",[s("li",[s("a",{attrs:{href:"#常用命令"}},[t._v("常用命令")])]),s("li",[s("a",{attrs:{href:"#查看命令"}},[t._v("查看命令")])]),s("li",[s("a",{attrs:{href:"#基础配置"}},[t._v("基础配置")])]),s("li",[s("a",{attrs:{href:"#配置淘宝镜像"}},[t._v("配置淘宝镜像")])]),s("li",[s("a",{attrs:{href:"#其他资源镜像"}},[t._v("其他资源镜像")])])])]),s("li",[s("a",{attrs:{href:"#cmd窗口"}},[t._v("CMD窗口")]),s("ul",[s("li",[s("a",{attrs:{href:"#常用的命令"}},[t._v("常用的命令")])]),s("li",[s("a",{attrs:{href:"#环境变量-window系统变量"}},[t._v("环境变量(window系统变量)")])])])]),s("li",[s("a",{attrs:{href:"#npm-script"}},[t._v("npm script")]),s("ul",[s("li",[s("a",{attrs:{href:"#使用-npm-script"}},[t._v("使用npm script")])]),s("li",[s("a",{attrs:{href:"#原理"}},[t._v("原理")])]),s("li",[s("a",{attrs:{href:"#通配符"}},[t._v("通配符")])]),s("li",[s("a",{attrs:{href:"#传参"}},[t._v("传参")])]),s("li",[s("a",{attrs:{href:"#执行顺序"}},[t._v("执行顺序")])]),s("li",[s("a",{attrs:{href:"#默认值"}},[t._v("默认值")])]),s("li",[s("a",{attrs:{href:"#钩子"}},[t._v("钩子")])]),s("li",[s("a",{attrs:{href:"#变量"}},[t._v("变量")])])])]),s("li",[s("a",{attrs:{href:"#npx"}},[t._v("npx")]),s("ul",[s("li",[s("a",{attrs:{href:"#npx查找原理"}},[t._v("npx查找原理")])])])]),s("li",[s("a",{attrs:{href:"#npmrc"}},[t._v(".npmrc")]),s("ul",[s("li",[s("a",{attrs:{href:"#优先级"}},[t._v("优先级")])])])]),s("li",[s("a",{attrs:{href:"#npm-开发工具包"}},[t._v("npm 开发工具包")]),s("ul",[s("li",[s("a",{attrs:{href:"#npm-本地开发"}},[t._v("npm 本地开发")])]),s("li",[s("a",{attrs:{href:"#npm发布"}},[t._v("npm发布")]),s("ul",[s("li",[s("a",{attrs:{href:"#发布命名空间的包"}},[t._v("发布命名空间的包")])])])])])]),s("li",[s("a",{attrs:{href:"#npm-create"}},[t._v("npm create")])]),s("li",[s("a",{attrs:{href:"#npm-init"}},[t._v("npm init")])]),s("li",[s("a",{attrs:{href:"#语义化版本"}},[t._v("语义化版本")])]),s("li",[s("a",{attrs:{href:"#npm-第三方库"}},[t._v("npm 第三方库")]),s("ul",[s("li",[s("a",{attrs:{href:"#前端工具包"}},[t._v("前端工具包")])]),s("li",[s("a",{attrs:{href:"#服务端工具包"}},[t._v("服务端工具包")])]),s("li",[s("a",{attrs:{href:"#终端工具"}},[t._v("终端工具")])])])]),s("li",[s("a",{attrs:{href:"#nvm"}},[t._v("nvm")]),s("ul",[s("li",[s("a",{attrs:{href:"#设置镜像源"}},[t._v("设置镜像源")])]),s("li",[s("a",{attrs:{href:"#安装指定版本号的node"}},[t._v("安装指定版本号的node")])]),s("li",[s("a",{attrs:{href:"#查看所有的node版本"}},[t._v("查看所有的node版本")])]),s("li",[s("a",{attrs:{href:"#列出本地的node版本目录"}},[t._v("列出本地的node版本目录")])]),s("li",[s("a",{attrs:{href:"#使用指定版本node"}},[t._v("使用指定版本node")])]),s("li",[s("a",{attrs:{href:"#卸载指定版本node"}},[t._v("卸载指定版本node")])]),s("li",[s("a",{attrs:{href:"#其他命令"}},[t._v("其他命令")])])])]),s("li",[s("a",{attrs:{href:"#multirepo"}},[t._v("multirepo")]),s("ul",[s("li",[s("a",{attrs:{href:"#multirepo缺点"}},[t._v("MultiRepo缺点")])])])]),s("li",[s("a",{attrs:{href:"#monorepo"}},[t._v("monorepo")])]),s("li",[s("a",{attrs:{href:"#yarn"}},[t._v("yarn")])]),s("li",[s("a",{attrs:{href:"#pnpm"}},[t._v("pnpm")]),s("ul",[s("li",[s("a",{attrs:{href:"#npm或yarn-转-pnpm"}},[t._v("npm或yarn 转 pnpm")])]),s("li",[s("a",{attrs:{href:"#monorepo"}},[t._v("monorepo")]),s("ul",[s("li",[s("a",{attrs:{href:"#安装依赖"}},[t._v("安装依赖")]),s("ul",[s("li",[s("a",{attrs:{href:"#全局的公共依赖包"}},[t._v("全局的公共依赖包")])]),s("li",[s("a",{attrs:{href:"#安装到某个模块中"}},[t._v("安装到某个模块中")]),s("ul",[s("li",[s("a",{attrs:{href:"#filter的其他操作"}},[t._v("filter的其他操作")])])])]),s("li",[s("a",{attrs:{href:"#模块之间的相互依赖"}},[t._v("模块之间的相互依赖")])])])]),s("li",[s("a",{attrs:{href:"#只允许pnpm"}},[t._v("只允许pnpm")])])])]),s("li",[s("a",{attrs:{href:"#release工作流"}},[t._v("release工作流")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"npm的介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm的介绍"}},[t._v("#")]),t._v(" npm的介绍")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.npmjs.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm"),s("OutboundLink")],1),t._v(" 是 Node.js 的包管理工具, 用来安装各种 Node.js 的第三方库")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.npmjs.com/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方教程"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/commands/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm cli"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰教程"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"创建包管理文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建包管理文件"}},[t._v("#")]),t._v(" 创建包管理文件")]),t._v(" "),s("p",[t._v("相关属性详解见: "),s("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("pageage.json"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("code",[t._v("npm init")]),t._v(" 命令 初始化一个包管理文件")]),t._v(" "),s("p",[s("code",[t._v("npm init -y")]),t._v("命令 初始化全是默认值的包(括号里的就是默认值)")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# code xxx 使用VS Code打开指定的目录需要将VS Code 安装目录添加到系统变量 path 中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" myproject "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" myproject "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" index.ts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" code "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("package name: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("testnpm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 包名字\nversion: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(".0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 版本号\ndescription: 描述\nentry point: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 入口js文件\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" command: 测试命令\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" repository: 代码需要git仓库管理的话加上该仓库地址\nkeywords: 关键字\nauthor: 开发者\nlicense: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ISC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 授权协议\nIs this OK? "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 再次确认  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("得到 "),s("code",[t._v("package.json")]),t._v(" 文件, 大致内容如下:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yang"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我的第一个NPM项目"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 运行脚本")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"yjb"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"author"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yjb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"license"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ISC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 运行依赖, 依赖的项该是正常运行该包时所需要的依赖项")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"excel"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.0.1"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"devDependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发依赖, 开发的时候需要的依赖项")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("h2",{attrs:{id:"npm常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm常用命令"}},[t._v("#")]),t._v(" npm常用命令")]),t._v(" "),s("p",[t._v("命令行输入"),s("code",[t._v("npm help npm")]),t._v("可以npm本地文档, 使用"),s("code",[t._v("npm help xxx")]),t._v("则是打开对应命令的文档")]),t._v(" "),s("h3",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装项目的所有依赖， install 简写 i")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局安装, --global 简写 -g")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--save")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到 dependencies, --save 简写 -S")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名 --save-dev "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到 devDependencies, --save-dev 简写 -D")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名@版本号 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装指定版本号的包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名1 包名2 包名3 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一次性安装多个包")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" uninstall 包名 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载当前项目的包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" uninstall 包名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载全局安装的包")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" update 包名名 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新当前项目包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" update 包名名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新全局包")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看当前项目安装的包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看全局安装的包")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" prune "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 清除没有使用到的包")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h3",{attrs:{id:"查看命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看命令"}},[t._v("#")]),t._v(" 查看命令")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" root "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看项目中包名所在的目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" root "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看全局安装的包名所在目录")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看npm版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" version "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看更详细的版本信息")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" view 包名 version "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看包的最新版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" view 包名 versions "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看包的历史版本")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" info 包名 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看包的更多信息")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config list "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看npm配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config edit "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编辑npm配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有的npm默认配置")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h3",{attrs:{id:"基础配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础配置"}},[t._v("#")]),t._v(" 基础配置")]),t._v(" "),s("p",[t._v("npm的基础常用配置如下:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@anlib/sqlite-orm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 项目名称")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"private"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否是私有包, 一般用于 monorepo 项目")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 版本")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"module"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// module | commonjs")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib/src/index.d.ts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类型文件")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"一个简单的 sqlite orm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 项目描述")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib/bundle.esm.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Commonjs 模块入口(require 引入)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"module"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib/bundle.esm.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ECMA Script 模块入口(import 引入)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"unpkg"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib/bundle.browser.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 直接 script 标签的 src 引入")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"homepage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/yang-Ann/sqlite-orm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主页地址")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"bugs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// issues 地址")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/yang-Ann/sqlite-orm/issues"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"engines"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置指定的包版本")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"node"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('">=14.0.0 <16.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"npm"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('">=6.0.0"')]),t._v("  \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"keywords"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发布到 npm 之后可以搜索的关键字")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sqlite"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orm"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"author"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"An <331536495@qq.com> (https://ann-yang.gitee.io/note-sites/)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 作者信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"repository"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 源代码仓库")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/sqlite-orm"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"files"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里声明的文件会被上传到 npm ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"license"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MIT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开源协议")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rollup -c ./rollup.config.ts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node --loader ts-node/esm ./src/index.ts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev:nodemon"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nodemon --watch ./dist ./dist/index.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint src --ext .ts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prettier"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prettier --write src"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"release"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bumpp -r"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vitest ./src/test/index.test.ts"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发依赖")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"devDependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生产依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br")])]),s("h3",{attrs:{id:"配置淘宝镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置淘宝镜像"}},[t._v("#")]),t._v(" 配置淘宝镜像")]),t._v(" "),s("p",[t._v("使用 npm 安装第三方库需要访问国外的网络, 默认为"),s("code",[t._v("https://registry.npmjs.org/")]),t._v("会比较慢, 可以配置"),s("a",{attrs:{href:"https://npmmirror.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("淘宝镜像"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看源(默认为 https://registry.npmjs.org/)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" get registry\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换源(推荐)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" https://registry.npmmirror.com\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("也可以通过"),s("code",[t._v("C:/Users/用户名/.npmrc")]),t._v("文件添加镜像源, 如下:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("registry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npmmirror.com "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm 淘宝源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("disturl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npmmirror.com/node\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("electron_mirror")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npmmirror.com/electron/\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[s("code",[t._v("cnpm")]),s("strong",[t._v("不生成 lock 文件, 也不会识别项目中的lock文件")]),t._v("，如果是多人开发，建议使用"),s("code",[t._v("npm")]),t._v("或者其他包管理工具安装插件")])]),t._v(" "),s("blockquote",[s("p",[t._v("也可以使用"),s("a",{attrs:{href:"https://www.npmjs.com/package/nrm",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("nrm")]),s("OutboundLink")],1),t._v("来管理npm镜像配置")])]),t._v(" "),s("h3",{attrs:{id:"其他资源镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他资源镜像"}},[t._v("#")]),t._v(" 其他资源镜像")]),t._v(" "),s("p",[t._v("配置到"),s("code",[t._v(".npmrc")]),t._v("中")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://github.com/cnpm/binary-mirror-config/blob/master/package.json#L53")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NODEJS_ORG_MIRROR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/node"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NVM_NODEJS_ORG_MIRROR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/node"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PHANTOMJS_CDNURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/phantomjs"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CHROMEDRIVER_CDNURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/chromedriver"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("OPERADRIVER_CDNURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/operadriver"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ELECTRON_MIRROR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/electron/"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ELECTRON_BUILDER_BINARIES_MIRROR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/electron-builder-binaries/"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SASS_BINARY_SITE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/node-sass"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SWC_BINARY_SITE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/node-swc"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NWJS_URLBASE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/nwjs/v"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("PUPPETEER_DOWNLOAD_HOST")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SENTRYCLI_CDNURL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/sentry-cli"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SAUCECTL_INSTALL_BINARY_MIRROR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/saucectl"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("npm_config_sharp_binary_host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/sharp"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("npm_config_sharp_libvips_binary_host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/sharp-libvips"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("npm_config_robotjs_binary_host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.npmmirror.com/binaries/robotj"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For Cypress >=10.6.0, https://docs.cypress.io/guides/references/changelog#10-6-0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CYPRESS_DOWNLOAD_PATH_TEMPLATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://cdn.npmmirror.com/binaries/cypress/${version}/${platform}-${arch}/cypress.zip'")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("h2",{attrs:{id:"cmd窗口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cmd窗口"}},[t._v("#")]),t._v(" CMD窗口")]),t._v(" "),s("h3",{attrs:{id:"常用的命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用的命令"}},[t._v("#")]),t._v(" 常用的命令")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("dir: 列出当前目录下的所有文件\nmd 目录名: 创建一个文件夹\nrd 目录名: 删除一个文件夹\n\n盘符: "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 进入指定的盘\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 进入当前目录\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 返回上一级目录\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 进入当前的根目录下\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /d D:/xxx/xxx 进去这个指定的目录\n\ncls: 请空屏幕的命令\n直接在某个文件夹地址栏输入 cmd 直接打开当前目录下的 cmd 窗口\n\ncmd /? "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 查看cmd命令的参数\n命令 /? "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 对应的命令帮助\nipconfig "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 查看自己的ip信息\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),t._v(" ip地址: 检查本机到指定ip地址的连通性"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("加上 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" 就会一直 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("netstat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-ano")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 查看网络连接、状态以及对应的进程id\ntracert "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 也被称为Windows路由跟踪实用程序, 在命令提示符（cmd）中使用tracert命令可以用于确定IP数据包访问目标时所选择的路径\n    例如: tracert www.baidu.com\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"环境变量-window系统变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量-window系统变量"}},[t._v("#")]),t._v(" 环境变量(window系统变量)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("path (路径变量)")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("我们在命令行窗口打开一个文件, 或是调用一个程序时, \n系统会首先在当前目录下寻找文件程序, 如果找到则直接打开,\n如果没有找到则会依次到环境变量 path 的路径中寻找, 直到找到为之\n如果没有找到则报错, 可以将一些经常需要访问的程序和文件的路径添加到 path 中,\n这样我们就可以在任意位置来访问这些文件和程序了\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])])]),t._v(" "),s("h2",{attrs:{id:"npm-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-script"}},[t._v("#")]),t._v(" npm script")]),t._v(" "),s("h3",{attrs:{id:"使用npm-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用npm-script"}},[t._v("#")]),t._v(" 使用"),s("strong",[t._v("npm script")])]),t._v(" "),s("p",[t._v("npm 允许在"),s("code",[t._v("package.json")]),t._v("文件里面，使用"),s("code",[t._v("scripts")]),t._v("字段定义脚本命令")]),t._v(" "),s("p",[s("img",{attrs:{src:a(552),alt:"image-20220106144900720"}})]),t._v(" "),s("p",[s("code",[t._v("scripts")]),t._v("字段是一个对象, 它的每一个属性，对应一段脚本")]),t._v(" "),s("p",[t._v("比如，"),s("code",[t._v("dev")]),t._v("命令对应的脚本就是"),s("code",[t._v("nodemon ./app.js || node ./app.js")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n// 等同于执行\n$ nodemon ./app.js "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("node")]),t._v(" ./app.js\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[t._v("script 里还可以使用"),s("code",[t._v("&&")]),t._v("具体效果和js中的逻辑运算符一样")])]),t._v(" "),s("p",[t._v("这些定义在"),s("code",[t._v("package.json")]),t._v("里面的脚本，就称为 npm 脚本它的优点很多:")]),t._v(" "),s("ul",[s("li",[t._v("项目的相关脚本，可以集中在一个地方")]),t._v(" "),s("li",[t._v("不同项目的脚本命令，只要功能相同，就可以有同样的对外接口用户不需要知道怎么测试你的项目，只要运行"),s("code",[t._v("npm run xxx")]),t._v("即可")]),t._v(" "),s("li",[t._v("可以利用 npm 提供的很多辅助功能")])]),t._v(" "),s("p",[t._v("查看当前项目的所有 npm 脚本命令，可以使用不带任何参数的"),s("code",[t._v("npm run")]),t._v("命令")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),s("p",[t._v("npm 脚本的原理非常简单, 每当执行"),s("code",[t._v("npm run")]),t._v("，就会自动新建一个 "),s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/56532223",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shell"),s("OutboundLink")],1),t._v("，在这个 Shell 里面执行指定的脚本命")]),t._v(" "),s("p",[t._v("令因此，只要是 Shell（一般是 "),s("a",{attrs:{href:"https://baike.baidu.com/item/Bash",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bash"),s("OutboundLink")],1),t._v("）可以运行的命令，就可以写在 npm 脚本里面")]),t._v(" "),s("p",[t._v("比较特别的是，"),s("code",[t._v("npm run")]),t._v("新建的这个 Shell，会将当前目录的"),s("code",[t._v("node_modules/.bin")]),t._v("子目录加入"),s("code",[t._v("PATH")]),t._v("变量，")]),t._v(" "),s("p",[t._v("执行结束后，再将"),s("code",[t._v("PATH")]),t._v("变量恢复原样")]),t._v(" "),s("p",[t._v("这意味着，当前目录的"),s("code",[t._v("node_modules/.bin")]),t._v("子目录里面的所有脚本，都可以直接用脚本名调用，而不必加上路")]),t._v(" "),s("p",[t._v("径比如，当前项目的依赖里面有"),s("strong",[t._v("nodemon")]),t._v("，只要直接写"),s("code",[t._v("nodemon xxx")]),t._v("就可以了")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nodemon ./app.js"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("而不用写成下面这样")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./node_modules/.bin/nodemon ./app.js"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("由于 npm 脚本的唯一要求就是可以在 Shell 执行, 因此它不一定是 Node 脚本, 任何可执行文件都可以写在里面")]),t._v(" "),s("p",[t._v("npm 脚本的退出码, 也遵守 "),s("a",{attrs:{href:"https://blog.csdn.net/qq_41891805/article/details/104490404",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shell 脚本规则"),s("OutboundLink")],1),t._v("如果退出码不是"),s("code",[t._v("0")]),t._v("，npm 就认为这个脚本执行失败")]),t._v(" "),s("h3",{attrs:{id:"通配符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[t._v("#")]),t._v(" 通配符")]),t._v(" "),s("p",[t._v("由于 npm 脚本就是 Shell 脚本，因为可以使用 Shell 通配符")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jshint *.js"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jshint **/*.js"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("上面代码中，"),s("code",[t._v("*")]),t._v("表示任意文件名，"),s("code",[t._v("**")]),t._v("表示任意一层子目录")]),t._v(" "),s("p",[t._v("如果要将通配符传入原始命令, 防止被 Shell 转义, 要将星号转义")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tap test/\\*.js"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"传参"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传参"}},[t._v("#")]),t._v(" 传参")]),t._v(" "),s("p",[t._v("向 npm 脚本传入参数，要使用"),s("code",[t._v("--")]),t._v("标明")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run lint --  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--reporter")]),t._v(" checkstyle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" checkstyle.xml\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("也可以在"),s("code",[t._v("package.json")]),t._v("里面再封装一个命令")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jshint **.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint:checkstyle"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run lint -- --reporter checkstyle > checkstyle.xml"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"执行顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行顺序"}},[t._v("#")]),t._v(" 执行顺序")]),t._v(" "),s("p",[t._v("如果 npm 脚本里面需要执行多个任务，那么需要明确它们的执行顺序")]),t._v(" "),s("p",[t._v("如果是并行执行（即同时的平行执行），可以使用"),s("code",[t._v("|")]),t._v("符号")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run xxx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run xxx\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"默认值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认值"}},[t._v("#")]),t._v(" 默认值")]),t._v(" "),s("p",[t._v("一般来说 npm 脚本由用户提供, 但是 npm 对两个脚本提供了默认值, 也就是说这两个脚本命令不用定义，就可以直接使用")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"start"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node server.js"')]),t._v("，\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"install"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node-gyp rebuild"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("上面代码中, "),s("code",[t._v("npm run start")]),t._v("的默认值是"),s("code",[t._v("node server.js")]),t._v(", 前提是项目根目录下有"),s("code",[t._v("server.js")]),t._v("这个脚")]),t._v(" "),s("p",[t._v("本, "),s("code",[t._v("npm run install")]),t._v("的默认值是"),s("code",[t._v("node-gyp rebuild")]),t._v(", 前提是项目根目录下有"),s("code",[t._v("binding.gyp")]),t._v("文件")]),t._v(" "),s("h3",{attrs:{id:"钩子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#钩子"}},[t._v("#")]),t._v(" 钩子")]),t._v(" "),s("p",[t._v("npm 脚本有"),s("code",[t._v("pre")]),t._v("和"),s("code",[t._v("post")]),t._v("两个钩子, 举例来说，"),s("code",[t._v("build")]),t._v("脚本命令的钩子就是"),s("code",[t._v("prebuild")]),t._v("和"),s("code",[t._v("postbuild")])]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prebuild"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo build命令之前构子"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node -v"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"postbuild"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo build命令之后构子"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("用户执行"),s("code",[t._v("npm run build")]),t._v("的时候，会自动按照下面的顺序执行")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run prebuild "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run postbuild\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("blockquote",[s("p",[t._v("因此，可以在这两个钩子里面，完成一些准备工作和清理工作")])]),t._v(" "),s("p",[t._v("npm 默认提供下面这些钩子:")]),t._v(" "),s("ul",[s("li",[t._v("prepublish，postpublish")]),t._v(" "),s("li",[t._v("preinstall，postinstall")]),t._v(" "),s("li",[t._v("preuninstall，postuninstall")]),t._v(" "),s("li",[t._v("preversion，postversion")]),t._v(" "),s("li",[t._v("pretest，posttest")]),t._v(" "),s("li",[t._v("prestop，poststop")]),t._v(" "),s("li",[t._v("prestart，poststart")]),t._v(" "),s("li",[t._v("prerestart，postrestart")])]),t._v(" "),s("p",[t._v("自定义的脚本命令也可以加上"),s("code",[t._v("pre")]),t._v("和"),s("code",[t._v("post")]),t._v("钩子比如，"),s("code",[t._v("myscript")]),t._v("这个脚本命令，也有"),s("code",[t._v("premyscript")]),t._v("和")]),t._v(" "),s("p",[s("code",[t._v("postmyscript")]),t._v("钩子不过，双重的"),s("code",[t._v("pre")]),t._v("和"),s("code",[t._v("post")]),t._v("无效，比如"),s("code",[t._v("prepretest")]),t._v("和"),s("code",[t._v("postposttest")]),t._v("是无效的")]),t._v(" "),s("p",[t._v("npm 提供一个"),s("code",[t._v("npm_lifecycle_event")]),t._v("变量，返回当前正在运行的脚本名称, 可以利用这个变量，在同一个脚本")]),t._v(" "),s("p",[t._v("文件里面，为不同的"),s("code",[t._v("npm scripts")]),t._v("命令编写代码:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TARGET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("npm_lifecycle_event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("执行的命令是: npm run ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TARGET")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("blockquote",[s("p",[t._v("一定要使用"),s("code",[t._v("npm run xxx")]),t._v("的形式才有"),s("code",[t._v("process.env.npm_lifecycle_event")]),t._v("变量的值")])]),t._v(" "),s("h3",{attrs:{id:"变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[t._v("#")]),t._v(" 变量")]),t._v(" "),s("p",[t._v("npm 脚本有一个非常强大的功能，就是可以使用 npm 的内部变量")]),t._v(" "),s("p",[t._v("通过"),s("code",[t._v("npm_package_xxx")]),t._v(", npm 脚本可以拿到"),s("code",[t._v("package.json")]),t._v("里面的字段, 例如: 下面是一个"),s("code",[t._v("package.json")])]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"view"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node ./view.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("那么，变量"),s("code",[t._v("npm_package_name")]),t._v("返回"),s("code",[t._v("node")]),t._v("，变量"),s("code",[t._v("npm_package_main")]),t._v("返回"),s("code",[t._v("index.js")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("npm_package_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// foo")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("npm_package_main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("上面代码中通过环境变量"),s("code",[t._v("process.env")]),t._v("对象，拿到"),s("code",[t._v("package.json")]),t._v("的字段值")]),t._v(" "),s("blockquote",[s("p",[t._v("如果是 Bash 脚本，可以用"),s("code",[t._v("$npm_package_name")]),t._v("和"),s("code",[t._v("$npm_package_version")]),t._v("取到这两个值")])]),t._v(" "),s("p",[s("code",[t._v("npm_package_")]),t._v("前缀也支持嵌套的"),s("code",[t._v("package.json")]),t._v("字段")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"myObj"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"myName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zhangsan"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n...\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("上面的package.json文件中, "),s("code",[t._v("myObj")]),t._v("字段的"),s("code",[t._v("myName")]),t._v("属性，可以通过"),s("code",[t._v("npm_package_myObj_myName")]),t._v("取到")]),t._v(" "),s("p",[s("code",[t._v("env")]),t._v("命令可以列出所有环境变量")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"npx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npx"}},[t._v("#")]),t._v(" npx")]),t._v(" "),s("p",[s("code",[t._v("npx")]),t._v("是 "),s("code",[t._v("npm5.2.0")]),t._v("版本新增的一个工具包，定义为"),s("code",[t._v("npm")]),t._v("包的执行者，相比"),s("code",[t._v("npm")]),t._v("，"),s("code",[t._v("npx")]),t._v(" "),s("strong",[t._v("会自动安装依赖包并执行某个命令, 用完以后就会删除")])]),t._v(" "),s("h3",{attrs:{id:"npx查找原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npx查找原理"}},[t._v("#")]),t._v(" npx查找原理")]),t._v(" "),s("p",[s("code",[t._v("npx")]),t._v(" 会在当前目录下的"),s("code",[t._v("./node_modules/.bin")]),t._v("里去查找是否有可执行的命令，没有找到的话再从全局里查找是否有安装对应的模块，全局也没有的话就会自动下载对应的模块, "),s("code",[t._v("npx")]),t._v("经常用在一些"),s("code",[t._v("cli")]),t._v(", "),s("code",[t._v("校验工具")]),t._v("等, 一般只会执行一次的地方, 如: "),s("code",[t._v("npx create-react-app xxx")]),t._v(", "),s("code",[t._v("npx vue create xxx")]),t._v(","),s("code",[t._v("npx eslint")])]),t._v(" "),s("h2",{attrs:{id:"npmrc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npmrc"}},[t._v("#")]),t._v(" .npmrc")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/using-npm/config#npmrc-files",target:"_blank",rel:"noopener noreferrer"}},[t._v("npmrc"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("code",[t._v(".npmrc")]),t._v("文件可以修改"),s("code",[t._v("npm")]),t._v("项目级别的配置, 例如, 下面是一个典型的"),s("code",[t._v("pnpm monorepo")]),t._v("项目:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 镜像修改")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("registry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npmjs.org/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布包是不检查 git 是否提交")]),t._v("\ngit-checks"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定包为公开的包, 常用于作用域包, 如: @vue/router, @react/router等")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("access")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("public\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 支持配置某些包的镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("chromedriver_cdnurl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npmmirror.com/mirrors/chromedriver"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("electron_mirror")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npm.taobao.org/mirrors/electron/"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##### 以下是 pnpm 支持的配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用严格依赖")]),t._v("\nstrict-peer-dependencies"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pnpm i 不安装工作区下的所有包的依赖")]),t._v("\nrecursive-install"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pnpm i 不自动依赖 workspace 里的包, 仍然可以使用 workspace: 依赖")]),t._v("\nlink-workspace-packages"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h3",{attrs:{id:"优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优先级"}},[t._v("#")]),t._v(" 优先级")]),t._v(" "),s("p",[s("code",[t._v(".npmrc")]),t._v("的配置存在优先级，当我们在多个配置文件中定义相同的键时，"),s("code",[t._v("npm")]),t._v("将按照以下顺序查找和应用配置：")]),t._v(" "),s("ol",[s("li",[t._v("项目根目录下的"),s("code",[t._v(".npmrc")]),t._v("文件")]),t._v(" "),s("li",[t._v("用户主目录下的"),s("code",[t._v(".npmrc")]),t._v("文件")]),t._v(" "),s("li",[s("code",[t._v("npm")]),t._v("内置的默认配置")])]),t._v(" "),s("p",[t._v("可以通过"),s("code",[t._v("npm config list")]),t._v("来查看")]),t._v(" "),s("h2",{attrs:{id:"npm-开发工具包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-开发工具包"}},[t._v("#")]),t._v(" npm 开发工具包")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方教程"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"npm-本地开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-本地开发"}},[t._v("#")]),t._v(" npm 本地开发")]),t._v(" "),s("p",[t._v("初始化"),s("code",[t._v("package.json")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 正常初始化")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建带命名空间的包, 例如: @vue/cli")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" project\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" project\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scoped")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("@myName "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对应的包名则叫 @myName/project, 会自动拼接")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("添加"),s("code",[t._v("package.json")]),t._v("中"),s("code",[t._v("bin")]),t._v("字段可以添加可执行文件安装到路径中, "),s("code",[t._v("key")]),t._v("表示命令, "),s("code",[t._v("value")]),t._v("命令执行的文件, 例如:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"bin"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应 npm create 命令, 执行的文件是 ./dist/bin/index.js")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"create"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/bin/index.js"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("需要注意的是被执行的文件头部必须添加特殊说明使用node解释器去执行:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须添加如下的")]),t._v("\n#"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("env node\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将本地包链接到全局(调试全局命令的包)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" unlink xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消链接")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("通过"),s("code",[t._v("npm ls -g")]),t._v("可以查看本地链接的包, 如下:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v("\nC:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Program Files"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("nodejs -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n├── @anlib/cli@0.0.1 -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("project"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("cli\n├── corepack@0.12.1\n├── front-frame-cli@0.1.2 -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("D:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("project"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("front-frame-cli\n├── npm@8.15.0\n├── pnpm@7.25.1\n├── typescript@4.9.4\n└── yarn@1.22.19\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h3",{attrs:{id:"npm发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm发布"}},[t._v("#")]),t._v(" npm发布")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" pack "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地模拟打包发布的产物")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" adduser "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加用户帐户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" login "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 登录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("logout")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 登出")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("whoami")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看当前登录用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" version patch "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自动修改版本并 commit(支持很多的参数可见 npm version -h)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" publish "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" unpublish 包名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除一个包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" unpublish 包名@0.0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定版本的包")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("如果配置了淘宝源则需要修改为官方源"),s("code",[t._v("npm config set registry https://registry.npmjs.org")]),t._v(", 然后重新安装依赖再发布")]),t._v(" "),s("blockquote",[s("p",[t._v("如果报"),s("code",[t._v("TLS 1.2")]),t._v("错误需要将"),s("code",[t._v(".npmrc")]),t._v("的"),s("code",[t._v("registry")]),t._v("从"),s("code",[t._v("http")]),t._v("修改为"),s("code",[t._v("https")])])]),t._v(" "),s("h4",{attrs:{id:"发布命名空间的包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布命名空间的包"}},[t._v("#")]),t._v(" 发布命名空间的包")]),t._v(" "),s("blockquote",[s("p",[t._v("使用命名空间的包发布的话还需要在npm上新建一个对应命名空间的"),s("a",{attrs:{href:"https://www.npmjs.com/org/create",target:"_blank",rel:"noopener noreferrer"}},[t._v("组织"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" publish "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--access")]),t._v(" public "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布私有包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" access ls-packages "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看当前用户的组织")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("可以配置"),s("code",[t._v("npm")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" access public\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("或者在"),s("code",[t._v("package.json")]),t._v("添加如下的配置:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"publishConfig"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"access"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"public"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://registry.npmjs.org/"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"npm-create"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-create"}},[t._v("#")]),t._v(" npm create")]),t._v(" "),s("p",[s("code",[t._v("npm create xxx")]),t._v("是很常见的一个命令, 常常被用于创建各种脚手架, 以"),s("code",[t._v("npm create vite")]),t._v("为例, 具体的执行流程如下:")]),t._v(" "),s("ul",[s("li",[t._v("命令行执行"),s("code",[t._v("npm create vite")]),t._v("会先去找"),s("code",[t._v("create-vite")]),t._v("这个包")]),t._v(" "),s("li",[t._v("执行"),s("code",[t._v("npm exec create-vite")]),t._v("命令")]),t._v(" "),s("li",[t._v("执行"),s("code",[t._v("create-vite")]),t._v("包里的"),s("code",[t._v("create-vite")]),t._v("命令(由"),s("code",[t._v("package.json")]),t._v("里的"),s("code",[t._v("bin")]),t._v("字段定义)")])]),t._v(" "),s("h2",{attrs:{id:"npm-init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-init"}},[t._v("#")]),t._v(" npm init")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.npmjs.com/cli/v6/commands/npm-init#examples",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("init")]),s("OutboundLink")],1),t._v("命令如果后面添加了参数的话, 将转换为相应的"),s("code",[t._v("npx")]),t._v("操作, 如下所示")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("npm init foo")]),t._v(" -> "),s("code",[t._v("npx create-foo")])]),t._v(" "),s("li",[s("code",[t._v("npm init @usr/foo")]),t._v(" -> "),s("code",[t._v("npx @usr/create-foo")])]),t._v(" "),s("li",[s("code",[t._v("npm init @usr")]),t._v(" -> "),s("code",[t._v("npx @usr/create")])])]),t._v(" "),s("h2",{attrs:{id:"语义化版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语义化版本"}},[t._v("#")]),t._v(" 语义化版本")]),t._v(" "),s("p",[t._v("可以直接使用"),s("a",{attrs:{href:"https://www.npmjs.com/package/semver",target:"_blank",rel:"noopener noreferrer"}},[t._v("semver"),s("OutboundLink")],1),t._v("包来完成, 具体的规范可见"),s("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[t._v("语义化版本"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("=: 精确匹配版本\n>: 大于指定版本\n>=: 大于或等于指定版本\n<: 小于指定版本\n<=: 小于或等于指定版本\n~: 兼容补丁版本（即第二位和第三位数字可以改变）\n^: 兼容次要版本（即第一位数字不能改变，但第二位和第三位数字可以改变）\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"npm-第三方库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-第三方库"}},[t._v("#")]),t._v(" npm 第三方库")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/sindresorhus/awesome-nodejs",target:"_blank",rel:"noopener noreferrer"}},[t._v("awesome-nodejs"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"前端工具包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端工具包"}},[t._v("#")]),t._v(" 前端工具包")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("包名")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("serve")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("快速的为一个文件夹生成一个静态的 http 服务")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("axios")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("网络请求库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("ESLint")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("代码检查工具")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("prettier")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("代码风格修正工具")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("nanoid")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("可以快速生成唯一的 id")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("lodash")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("JavaScript 实用函数库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("ramda")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("JavaScript 实用函数库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("dayjs")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("日期处理库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("mathjs")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("数学库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("jsonwebtoken")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("根据给定的数据生成 token")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("cheerio")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("基于JQuery的node模块, 可用于web爬取, 解析html")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("jsdom")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("文档对象模型模拟器(一般都是配合cheerio使用)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("puppeteer")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("生成页面 PDF, 抓取 SPA, 自动提交表单, 进行 UI 测试, 键盘输入等, 功能很强大"),s("br"),t._v("可以配合 Headless Recorder 插件进行录制操作")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("fabric")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("canvas库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("xlsx")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("读取和写入excel")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("javascript-obfuscator")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("js代码混淆")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("markdown-it")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("markdown解析")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("monaco-editor")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("vscode web版编辑器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("qrcode")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("生成二维码")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("relationship.js")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("亲戚关系计算")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("js-base64")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("base64编解码")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("jsencrypt")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("rsa加解密")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("nprogress")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("页面顶部进度条")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("validator")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("字符串校验")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("mitt")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("最小的事件发射器实现")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("croner")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("无任何依赖的"),s("code",[t._v("cron")]),t._v("表达式实现")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("url-parse")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("url解析")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("semver")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("版本号生成工具")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("dot-prop")]),t._v(","),s("code",[t._v("get-value")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("使用"),s("code",[t._v(".")]),t._v("获取对象中的属性")])])])]),t._v(" "),s("h3",{attrs:{id:"服务端工具包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务端工具包"}},[t._v("#")]),t._v(" 服务端工具包")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("包名")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("xlsx")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("读取和写入excel")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("fs-extra")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("封装了fs")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("body-parser")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("解析 post 请求体数据到 req.body")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("bcrypt")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("密码加密")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("compression")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("可以通过压缩大大减小响应体的大小，从而提高 Web 应用程序的速度")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("connect-history-api-fallback")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("express中适配history路由")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("axios")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("网络请求库(前后端同构)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("request")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("node网络请求库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("pkg")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("将 node 文件打包成 二进制文件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("forever")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("后台持续运行 node")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("pm2")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("后台持续运行 node, 比 forever 强大")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("winston"),s("br"),t._v("winston-daily-rotate-file")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("日志库"),s("br"),t._v("根据日期分割文件名")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("log4js")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("日志库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("textract")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("可以读取 DOCX, PDF, HTML, PPTX等数据")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("pdf2json")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("读取 PDF 数据")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("mysql")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("mysql包")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("mongobd")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("mangodb包")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("knex")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("sql语句查询构建器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("exceljs")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("node操作excel工具库, 支持excel的几乎全部操作")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("node-xlsx")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("node读取和写入excel")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("ws")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("用于WebSocket")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("cross-env")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("使脚本能够跨平台设置和使用环境变量")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("glob")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("使用 shell 的模式匹配文件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("fast-glob")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("根据 global 遍历文件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("walkdir")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("遍历目录树")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("find-up")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("通过遍历父目录来查找文件或目录")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("piscina")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("多线程实现")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("node-fetch")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("node中的fetch实现")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("tsx")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("直接运行 ts文件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("open")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("可以编程的打开图片, 网站, 应用")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("js-yaml")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("js实现解析yaml文件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("dotenv")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("解析"),s("code",[t._v(".env")]),t._v("文件内容到环境变量("),s("code",[t._v("process.env")]),t._v(")中")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("tesseract.js")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("包装"),s("a",{attrs:{href:"https://github.com/tesseract-ocr/tesseract",target:"_blank",rel:"noopener noreferrer"}},[t._v("tesseract"),s("OutboundLink")],1),t._v("的js库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("alasql")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("内存sql数据库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("sql.js")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("sqlite操作库(可以在浏览器运行)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("better-sqlite3")]),t._v(", "),s("code",[t._v("sqlite3")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("sqlite操作库")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("drizzle-orm")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("sql rom")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("mime-types")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("解析MIME type")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("concurrently")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("同时运行多个命令, 启动多个服务")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("npm-run-all")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("用于并行或顺序运行多个 npm 脚本")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("esprima")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("将js源代码将转成AST")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("estraverse")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("遍历"),s("code",[t._v("esprima")]),t._v("生成的AST")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("escodegen")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("将"),s("code",[t._v("esprima")]),t._v("生成的AST转换为源代码")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("acorn")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("js解析器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("ssh2")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ssh实现")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("ssh2-sftp-client")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("ftp实现")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("dotenvPath")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("加载"),s("code",[t._v(".env")]),t._v("文件到"),s("code",[t._v("process.env")]),t._v("中")])])])]),t._v(" "),s("h3",{attrs:{id:"终端工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#终端工具"}},[t._v("#")]),t._v(" 终端工具")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("包名")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("nodemon")]),t._v(" "),s("td",[t._v("可以监视 node 文件的变化自动更新")])]),t._v(" "),s("tr",[s("td",[t._v("rimraf")]),t._v(" "),s("td",[t._v("跨平台使用 UNIX 命令 "),s("code",[t._v("rm -rf")]),t._v(" , 需以管理员身份安装")])]),t._v(" "),s("tr",[s("td",[t._v("shelljs")]),t._v(" "),s("td",[t._v("执行 shell 命令")])]),t._v(" "),s("tr",[s("td",[t._v("zx")]),t._v(" "),s("td",[t._v("更方便的编写shell命令(兼容性不是很好)")])]),t._v(" "),s("tr",[s("td",[t._v("commander")]),t._v(" "),s("td",[t._v("命令行界面库")])]),t._v(" "),s("tr",[s("td",[t._v("minimist")]),t._v(" "),s("td",[t._v("解析命令行参数")])]),t._v(" "),s("tr",[s("td",[t._v("chalk")]),t._v(" "),s("td",[t._v("终端字符串美化库")])]),t._v(" "),s("tr",[s("td",[t._v("picocolors")]),t._v(" "),s("td",[t._v("也是终端字符串美化库, 但是比 "),s("code",[t._v("chalk")]),t._v(" 要小")])]),t._v(" "),s("tr",[s("td",[t._v("log-symbols")]),t._v(" "),s("td",[t._v("终端图标库")])]),t._v(" "),s("tr",[s("td",[t._v("ora")]),t._v(" "),s("td",[t._v("终端加载动画")])]),t._v(" "),s("tr",[s("td",[t._v("ink")]),t._v(" "),s("td",[t._v("命令行反应库(使用类似于React的语法编写命令行程序)")])]),t._v(" "),s("tr",[s("td",[t._v("prompts")]),t._v(" "),s("td",[t._v("命令行询问选择")])]),t._v(" "),s("tr",[s("td",[t._v("inquirer")]),t._v(" "),s("td",[t._v("命令行交互")])]),t._v(" "),s("tr",[s("td",[t._v("figlet")]),t._v(" "),s("td",[t._v("生成基于 ASCII 的艺术字")])]),t._v(" "),s("tr",[s("td",[t._v("progress")]),t._v(" "),s("td",[t._v("进度条")])]),t._v(" "),s("tr",[s("td",[t._v("update-notifier")]),t._v(" "),s("td",[t._v("应用更新通知")])]),t._v(" "),s("tr",[s("td",[t._v("which-pm-runs")]),t._v(" "),s("td",[t._v("检查当前使用的包管理器")])]),t._v(" "),s("tr",[s("td",[t._v("bumpp")]),t._v(" "),s("td",[t._v("交互式更新package版本")])])])]),t._v(" "),s("h2",{attrs:{id:"nvm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nvm"}},[t._v("#")]),t._v(" nvm")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/coreybutler/nvm-windows/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("nvm"),s("OutboundLink")],1),t._v("是node版本管理器，用于管理多个活动Node.js版本的简单bash脚本，让我们可以设置默认node版本，并在不同开发环境中切换不同版本")]),t._v(" "),s("p",[t._v("在安装nvm时如果本地已经安装有node了会提示是否把本地的node纳入版本管理")]),t._v(" "),s("p",[s("code",[t._v("nvm v")]),t._v(" 查看版本测试是否安装成功")]),t._v(" "),s("p",[s("img",{attrs:{src:a(553),alt:"image-20220305101949058"}})]),t._v(" "),s("h3",{attrs:{id:"设置镜像源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置镜像源"}},[t._v("#")]),t._v(" 设置镜像源")]),t._v(" "),s("p",[t._v("nvm默认node镜像源是"),s("code",[t._v("https://nodejs.org/dist")]),t._v("，从默认的镜像缘源下载会很慢，所以可以通过更换镜像源加快下载")]),t._v(" "),s("ol",[s("li",[t._v("找到安装nvm的文件夹目录，打开"),s("code",[t._v("settings.txt")]),t._v("文件")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(554),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("新增两行配置，更换"),s("code",[t._v("node")]),t._v("和"),s("code",[t._v("npm")]),t._v("的下载源为淘宝镜像源")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("node_mirror: https://registry.npmmirror.com/node "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加 node 镜像")]),t._v("\nnpm_mirror: https://registry.npmmirror.com/npm "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加 npm 镜像")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"安装指定版本号的node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装指定版本号的node"}},[t._v("#")]),t._v(" 安装指定版本号的node")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("nvm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装指定版本的node")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:a(555),alt:"image-20220305102552432"}})]),t._v(" "),s("p",[t._v("会在nvm存储文件夹下多一个对应版本号的文件")]),t._v(" "),s("p",[s("img",{attrs:{src:a(556),alt:"image-20220305102822478"}})]),t._v(" "),s("p",[s("code",[t._v("node")]),t._v(" "),s("code",[t._v("npm")]),t._v(" 和 "),s("code",[t._v("npx")]),t._v(" 都会被安装("),s("strong",[t._v("npm 和 npx 会安装对应node版本的")]),t._v(")")]),t._v(" "),s("p",[s("img",{attrs:{src:a(557),alt:"image-20220305103809335"}})]),t._v(" "),s("h3",{attrs:{id:"查看所有的node版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看所有的node版本"}},[t._v("#")]),t._v(" 查看所有的node版本")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("nvm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" available\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"列出本地的node版本目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#列出本地的node版本目录"}},[t._v("#")]),t._v(" 列出本地的node版本目录")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("nvm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出node版本目录(`*`号表示当前正在使用的node版本)")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:a(558),alt:"image-20220305102626916"}})]),t._v(" "),s("h3",{attrs:{id:"使用指定版本node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用指定版本node"}},[t._v("#")]),t._v(" 使用指定版本node")]),t._v(" "),s("p",[t._v("使用指定版本node(需要有管理员权限), npm也会同时被切换")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("nvm use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:a(559),alt:"image-20220305103419728"}})]),t._v(" "),s("h3",{attrs:{id:"卸载指定版本node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载指定版本node"}},[t._v("#")]),t._v(" 卸载指定版本node")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("nvm uninstall "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载指定版本node")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"其他命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他命令"}},[t._v("#")]),t._v(" 其他命令")]),t._v(" "),s("p",[s("code",[t._v("nvm arch [32|64]")]),t._v(": 显示node是运行在32位还是64位")]),t._v(" "),s("p",[s("code",[t._v("nvm current")]),t._v(": 显示活动版本")]),t._v(" "),s("p",[s("code",[t._v("nvm install <version> [arch]")]),t._v(": 安装node， version是特定版本也可以是最新稳定版本latest可选参数arch指定安装32位还是64位版本，默认是系统位数可以添加"),s("code",[t._v("--insecure")]),t._v("绕过- 远程服务器的SSL")]),t._v(" "),s("p",[s("code",[t._v("nvm list [available]")]),t._v(": 显示已安装的列表可选参数available，显示可安装的所有版本"),s("code",[t._v("list")]),t._v("可简化为"),s("code",[t._v("ls")])]),t._v(" "),s("p",[s("code",[t._v("nvm on")]),t._v(": "),s("strong",[t._v("开启")]),t._v("node版本管理")]),t._v(" "),s("p",[s("code",[t._v("nvm off")]),t._v(": "),s("strong",[t._v("关闭")]),t._v("node版本管理")]),t._v(" "),s("p",[s("code",[t._v("nvm proxy [url]")]),t._v(": 设置下载代理不加可选参数url，显示当前代理将url设置为none则移除代理")]),t._v(" "),s("p",[s("code",[t._v("nvm use [version] [arch]")]),t._v(": 使用制定版本node可指定32/64位")]),t._v(" "),s("p",[s("code",[t._v("nvm root [path]")]),t._v(": 设置存储不同版本node的目录如果未设置，默认使用当前目录")]),t._v(" "),s("p",[s("code",[t._v("nvm version")]),t._v(": 显示nvm版本version可简化为v")]),t._v(" "),s("p",[s("code",[t._v("nvm node_mirror [node_mirror_url]")]),t._v(": 设置node镜像默认是"),s("code",[t._v("https://nodejs.org/dist/")]),t._v("如果不写url，则使用默认url设置后可至安装目录"),s("code",[t._v("settings.txt")]),t._v("文件查看，也可直接在该文件操作")]),t._v(" "),s("p",[s("code",[t._v("nvm npm_mirror [npm_mirror_url]")]),t._v(": 设置npm镜像默认是"),s("code",[t._v("https://github.com/npm/cli/archive/")]),t._v("如果不写url，则使用默认url设置后可至安装目录settings.txt文件查看，也可直接在该文件操作")]),t._v(" "),s("h2",{attrs:{id:"multirepo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#multirepo"}},[t._v("#")]),t._v(" multirepo")]),t._v(" "),s("p",[t._v("在传统项目开发模式中每个项目都对应单独的一个代码仓库, 这种模式称之为方式"),s("code",[t._v("MultiRepo")])]),t._v(" "),s("p",[t._v("将公共的逻辑代码抽取出来, 然后发布到"),s("code",[t._v("npm")]),t._v(", 这样其他的项目都可以通过安装依赖包进行复用")]),t._v(" "),s("h3",{attrs:{id:"multirepo缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#multirepo缺点"}},[t._v("#")]),t._v(" MultiRepo缺点")]),t._v(" "),s("p",[t._v("如果依赖包里面某个功能出错了或者是需要更新, 则需要做一下几个步骤：")]),t._v(" "),s("ol",[s("li",[t._v("去修改源代码")]),t._v(" "),s("li",[t._v("重新发布新包")]),t._v(" "),s("li",[t._v("通知所有项目安装新版本依赖包")])]),t._v(" "),s("p",[t._v("只是修改或者更新依赖包，就需要这么复杂的步骤，在开发过程中，修改代码和bug是不可避免的, 这样就增加了很多的开发工作, 当然也有好处那就是一个项目只负责一个部分的功能好维护")]),t._v(" "),s("h2",{attrs:{id:"monorepo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#monorepo"}},[t._v("#")]),t._v(" monorepo")]),t._v(" "),s("p",[s("code",[t._v("monorepo")]),t._v("就是把多个工程放到一个"),s("code",[t._v("git")]),t._v("仓库中进行管理，因此它们可以共享同一套构建流程、代码规范也可以做到统一，特别是如果存在模块间的相互引用的情况，查看代码、修改bug、调试等会更加方便")]),t._v(" "),s("blockquote",[s("p",[t._v("包管理器"),s("code",[t._v("yarn")]),t._v("和"),s("code",[t._v("pnpm")]),t._v("都支持"),s("code",[t._v("monorepo")]),t._v(", 获取社区第三方库"),s("a",{attrs:{href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("lerna")]),s("OutboundLink")],1),t._v("也可以做"),s("code",[t._v("monorepo")])])]),t._v(" "),s("h2",{attrs:{id:"yarn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[t._v("#")]),t._v(" yarn")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://yarnpkg.com/getting-started/migration/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("yarn")]),s("OutboundLink")],1),t._v("执行任何"),s("code",[t._v("npm script")]),t._v("都可以直接运行, 如: "),s("code",[t._v("yarn dev")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用`npm`安装")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看版本")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化 package.json")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖(可以省略install)")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--save")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到 dependencies, --save 简写 -S")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--dev")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到 devDependencies, --dev 简写 -D")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" global "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局安装依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" remove xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 移除依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" global remove xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 移除全局依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" upgrade xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 升级依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" upgrade xxx global "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 升级全局依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" info xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看依赖信息")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" config get registry "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看源")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry http://registry.npm.taobao.org/ "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换源")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" global list "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--depth")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看全局依赖")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br")])]),s("blockquote",[s("p",[t._v("如果是使用"),s("code",[t._v("nvm")]),t._v("进行node的版本管理后, 需要在每个"),s("code",[t._v("node版本文件")]),t._v("下都需要安装"),s("code",[t._v("yarn")]),t._v("，安装后指定版本时文件夹会新增"),s("code",[t._v("yarn")]),t._v("文件")])]),t._v(" "),s("h2",{attrs:{id:"pnpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pnpm"}},[t._v("#")]),t._v(" pnpm")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.pnpm.cn/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("pnpm")]),s("OutboundLink")],1),t._v("以本地缓存+软链接的方式安装"),s("code",[t._v("node_modules")]),t._v("里面的依赖, 可以大大"),s("strong",[t._v("节约磁盘空间并提升安装速度")]),t._v("而且还可以创建"),s("strong",[t._v("扁平化")]),t._v("的依赖结构, 避免了"),s("code",[t._v("npm")]),t._v('"幽灵依赖"的问题')]),t._v(" "),s("p",[t._v("同样的执行任何"),s("code",[t._v("npm script")]),t._v("使用"),s("code",[t._v("pnpm")]),t._v("都可以直接运行, 如: "),s("code",[t._v("pnpm dev")])]),t._v(" "),s("p",[t._v("同样执行任何"),s("code",[t._v("npm script")]),t._v("都可以直接运行, 如: "),s("code",[t._v("pnpm dev")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用`npm`安装")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看版本")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" init "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成 package.json")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" run xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行 script 命令")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" dlx create-react-app xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 效果类型与 npx")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config list "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看配置")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config get registry "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看源")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry http://registry.npm.taobao.org/ "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换源")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖包到 dependencies ")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖包到devDependencies")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-O")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖包到optionalDependencies")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局安装依赖包")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--workspace")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装foo依赖包, 从工作区中查找")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" ./package.tar.gz "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从指定目录中安装")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" ./some-directory "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从指定目录中安装")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装项目全部依赖, install 简写 i")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" update "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新依赖包, update 简写 up")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" remove xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除依赖包, remove 简写 rm")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看本地安装的依赖, list 简写 ls")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看全局安装的依赖, --global 简写 --g")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" outdated "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查过期的依赖")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" publish "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布依赖包")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("node版本号"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 管理node版本, 本地安装并使用")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" use "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("node版本号"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 管理node版本, 全局安装并使用")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br")])]),s("blockquote",[s("p",[t._v("如果是使用"),s("code",[t._v("nvm")]),t._v("进行node的版本管理后, 需要在每个"),s("code",[t._v("node版本文件")]),t._v("下都需要安装"),s("code",[t._v("pnpm")]),t._v("，安装后指定版本时文件夹会新增"),s("code",[t._v("pnpm")]),t._v("文件")])]),t._v(" "),s("h3",{attrs:{id:"npm或yarn-转-pnpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm或yarn-转-pnpm"}},[t._v("#")]),t._v(" npm或yarn 转 pnpm")]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("pnpm import")]),t._v("命令可以从"),s("code",[t._v("npm")]),t._v("或"),s("code",[t._v("yarn")]),t._v("的锁文件生成"),s("code",[t._v("pnpm")]),t._v("的锁文件")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除使用 npm 或 yarn 生成的安装的node_modules")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" node_modules\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成 pnpm-lock.yaml(可以根据 package-lock.json 或 yarn-lock 生成)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新安装依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除 package-lock.json 或 yarn.lock")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" package-lock.json "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rm -rf yarn.lock")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("blockquote",[s("p",[s("code",[t._v("yarn")]),t._v("也有"),s("code",[t._v("import")]),t._v("命令")])]),t._v(" "),s("h3",{attrs:{id:"monorepo-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-2"}},[t._v("#")]),t._v(" monorepo")]),t._v(" "),s("p",[s("code",[t._v("pnpm")]),t._v("内置支持"),s("code",[t._v("monorepo")]),t._v(", 通过一个叫"),s("a",{attrs:{href:"https://www.pnpm.cn/workspaces",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("workspace")]),s("OutboundLink")],1),t._v("的概念来实现的, 基本使用:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("创建一个工程项目, 初始化"),s("code",[t._v("package.json")]),t._v("后设置"),s("code",[t._v('"private": "true"')]),t._v("(防止根目录被发布出去)")])]),t._v(" "),s("li",[s("p",[t._v("工程目录创建"),s("code",[t._v("packages")]),t._v("目录, 这个目录里面的就是各个模块")])]),t._v(" "),s("li",[s("p",[t._v("工程目录新建"),s("code",[t._v("pnpm-workspace.yaml")]),t._v("文件, 该文件是配置"),s("code",[t._v("pnpm")]),t._v("的工作空间, 如下:")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pnpm-workspace.yaml")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("packages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/*"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("最后的项目结构如下:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├── package.json\n├── packages\n│   ├── pkg1\n│   │   ├── package.json\n│   │   ├── src\n│   │   │   └── index.ts\n│   │   └── tsconfig.json\n│   └── pkg2\n│       ├── package.json\n│       ├── src\n│       │   └── index.ts\n│       └── tsconfig.json\n├── pnpm-workspace.yaml\n└── tsconfig.json\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])])])]),t._v(" "),s("h4",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("workspace")]),t._v("中"),s("code",[t._v("pnpm")]),t._v("安装依赖如下:")]),t._v(" "),s("blockquote",[s("p",[t._v("在 "),s("a",{attrs:{href:"https://pnpm.io/zh/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("workspace"),s("OutboundLink")],1),t._v("内, "),s("code",[t._v("pnpm install")]),t._v(" 会下载项目所有依赖, 如果想禁用这个行为, "),s("code",[t._v(".npmrc")]),t._v("配置 "),s("a",{attrs:{href:"https://pnpm.io/zh/npmrc#recursive-install",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("recursive-install=false")]),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("是否严格的依赖模式可以配置"),s("a",{attrs:{href:"https://www.pnpm.cn/npmrc#shamefully-hoist",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("recursive-install=false")]),s("OutboundLink")],1)])]),t._v(" "),s("h5",{attrs:{id:"全局的公共依赖包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局的公共依赖包"}},[t._v("#")]),t._v(" 全局的公共依赖包")]),t._v(" "),s("p",[t._v("全局的公共依赖包, 是安装到根目录中的, 如: "),s("code",[t._v("rollup")]),t._v(", "),s("code",[t._v("typescript")]),t._v(", "),s("code",[t._v("vue")]),t._v("等")]),t._v(" "),s("p",[s("code",[t._v("pnpm")]),t._v("中提供了"),s("a",{attrs:{href:"https://pnpm.io/zh/pnpm-cli#-w---workspace-root",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("-w")]),t._v("("),s("code",[t._v("--workspace-root")]),t._v(")"),s("OutboundLink")],1),t._v("参数, 可以将依赖安装到工程的根目录下, 作为"),s("strong",[t._v("所有")]),t._v(" 模块的公共依赖, 如:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到根目录的开发依赖中(默认安装到生产依赖)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" typescript "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到根目录的开发依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" rollup "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-wD")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h5",{attrs:{id:"安装到某个模块中"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装到某个模块中"}},[t._v("#")]),t._v(" 安装到某个模块中")]),t._v(" "),s("p",[s("code",[t._v("pnpm")]),t._v("中提供了"),s("a",{attrs:{href:"https://www.pnpm.cn/filtering",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("--filter")]),s("OutboundLink")],1),t._v("参数, 可以用来对特定的package进行某些操作, 如安装依赖, 执行命令等, 下面是安装命令的基本使用:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到 pkg1 的开发依赖中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" rollup "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),t._v(" pkg1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖到 pkg1 的生产依赖中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" chalk "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-S")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),t._v(" pkg1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除 pkg1 的依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" remove chalk "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),t._v(" pkg1 \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("blockquote",[s("p",[t._v("注意"),s("code",[t._v("--filter")]),t._v(" 参数跟着的是模块的 "),s("code",[t._v("package.json")]),t._v(" 里的 "),s("code",[t._v("name")]),t._v(" 字段, "),s("strong",[t._v("而不是")]),t._v("模块目录名")])]),t._v(" "),s("h6",{attrs:{id:"filter的其他操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter的其他操作"}},[t._v("#")]),t._v(" filter的其他操作")]),t._v(" "),s("p",[s("code",[t._v("--filter")]),t._v("除了安装依赖, 可以执行特定模块的命令, 如下:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行 pkg1 里面的 test 命令, 等价于 cd packages/pkg1 && npm run test")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),t._v(" pkg1 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或 pnpm test --filter pkg1")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行 packages 目录下所有包的 test 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./packages/**'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("更多操作可见官方文档"),s("a",{attrs:{href:"https://www.pnpm.cn/filtering",target:"_blank",rel:"noopener noreferrer"}},[t._v("filtering"),s("OutboundLink")],1)]),t._v(" "),s("h5",{attrs:{id:"模块之间的相互依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块之间的相互依赖"}},[t._v("#")]),t._v(" 模块之间的相互依赖")]),t._v(" "),s("p",[t._v("一个模块依赖另外的一个或多个模块在"),s("code",[t._v("monorepo")]),t._v("中是很常见, 比如 "),s("code",[t._v("pkg1")]),t._v(" 中将 "),s("code",[t._v("pkg2")]),t._v(" 作为依赖进行安装, "),s("code",[t._v("pnpm")]),t._v("提供了基于"),s("a",{attrs:{href:"https://www.pnpm.cn/workspaces#workspace-protocol-workspace",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("workspace:协议")]),s("OutboundLink")],1),t._v(", 可以很方便的在模块内部进行相互引用, 比如 "),s("code",[t._v("pkg1")]),t._v(" 引用 "),s("code",[t._v("pkg2")]),t._v(" 作为依赖, 命令如下:")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 pkg2 到 pkg1 里(默认安装到生产依赖)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" pkg2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),t._v(" pkg1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 pkg2 到 pkg1 里的开发依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" pkg2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rD")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),t._v(" pkg1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("此时可以看到"),s("code",[t._v("pkg1")]),t._v("里的"),s("code",[t._v("package.json")]),t._v("里出现了"),s("code",[t._v("pkg2")]),t._v("的依赖项以"),s("code",[t._v("workspace:")]),t._v("开头, 后面跟着具体的版本号, 如下:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("...\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pkg2"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"workspace:^1.0.0"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("查看"),s("code",[t._v("pkg2")]),t._v("的"),s("code",[t._v("node_modules")]),t._v("里面出现了"),s("code",[t._v("pkg1")]),t._v("其实这个就是指向"),s("code",[t._v("packages/pkg1")]),t._v("的软链接,")]),t._v(" "),s("p",[t._v("在设置依赖版本的时候推荐用"),s("code",[t._v("workspace:*")]),t._v(", 这样就可以保持依赖的版本是工作空间里最新版本，不需要每次手动更新依赖版本,")]),t._v(" "),s("p",[t._v("当 "),s("code",[t._v("pnpm publish")]),t._v(" 的时候, 会自动将 "),s("code",[t._v("package.json")]),t._v(" 中的 "),s("code",[t._v("workspace")]),t._v(" 修正为对应的版本号")]),t._v(" "),s("h4",{attrs:{id:"只允许pnpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#只允许pnpm"}},[t._v("#")]),t._v(" 只允许pnpm")]),t._v(" "),s("p",[t._v("当在项目中使用 "),s("code",[t._v("pnpm")]),t._v(" 时, 如果不希望用户使用 "),s("code",[t._v("yarn")]),t._v(" 或者 "),s("code",[t._v("npm")]),t._v(" 安装依赖, 可以在工程根目录下的 "),s("code",[t._v("package.json")]),t._v("里添加一个"),s("code",[t._v("preinstall")]),t._v("命令, 如下:")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"preinstall"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npx only-allow pnpm"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/using-npm/scripts/",target:"_blank",rel:"noopener noreferrer"}},[t._v("preinstall"),s("OutboundLink")],1),t._v(" 脚本会在 "),s("code",[t._v("install")]),t._v(" 之前执行, 只要有人运行 "),s("code",[t._v("npm install")]),t._v(" 或 "),s("code",[t._v("yarn install")]),t._v("，就会调用 "),s("a",{attrs:{href:"https://github.com/pnpm/only-allow",target:"_blank",rel:"noopener noreferrer"}},[t._v("only-allow"),s("OutboundLink")],1),t._v(" 去限制只允许使用 "),s("code",[t._v("pnpm")]),t._v(" 安装依赖")]),t._v(" "),s("h3",{attrs:{id:"release工作流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#release工作流"}},[t._v("#")]),t._v(" release工作流")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/waynelu92/article/details/73604172",target:"_blank",rel:"noopener noreferrer"}},[t._v("软件开发版本"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("可以使用"),s("a",{attrs:{href:"https://github.com/antfu/bumpp",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("bumpp")]),s("OutboundLink")],1),t._v("包来快速管理版本, 发布依赖包使用"),s("code",[t._v("pnpm publish")]),t._v("或者"),s("code",[t._v("pnpm -r publish")]),t._v("(发布所有的)命令即可")])])}),[],!1,null,null,null);s.default=e.exports}}]);