<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React-16 | An的个人笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/note-sites/favicon.ico">
    <script type="module" src="/note-sites/js/index.js"></script>
    <meta name="description" content="记录学习笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/note-sites/assets/css/0.styles.a5e0cdd4.css" as="style"><link rel="preload" href="/note-sites/assets/js/app.254ab375.js" as="script"><link rel="preload" href="/note-sites/assets/js/5.2f78da70.js" as="script"><link rel="preload" href="/note-sites/assets/js/1.9e97c91a.js" as="script"><link rel="preload" href="/note-sites/assets/js/22.24a035d7.js" as="script"><link rel="prefetch" href="/note-sites/assets/js/10.85cb6931.js"><link rel="prefetch" href="/note-sites/assets/js/11.bae2598b.js"><link rel="prefetch" href="/note-sites/assets/js/12.c02bdc6f.js"><link rel="prefetch" href="/note-sites/assets/js/13.98a54c6f.js"><link rel="prefetch" href="/note-sites/assets/js/14.79c89920.js"><link rel="prefetch" href="/note-sites/assets/js/15.fd29e764.js"><link rel="prefetch" href="/note-sites/assets/js/16.3c8e6eea.js"><link rel="prefetch" href="/note-sites/assets/js/17.a9bd7734.js"><link rel="prefetch" href="/note-sites/assets/js/18.e11cb2d3.js"><link rel="prefetch" href="/note-sites/assets/js/19.61f852e8.js"><link rel="prefetch" href="/note-sites/assets/js/20.5d618384.js"><link rel="prefetch" href="/note-sites/assets/js/21.25c50608.js"><link rel="prefetch" href="/note-sites/assets/js/23.fe0e18f1.js"><link rel="prefetch" href="/note-sites/assets/js/24.0c02e8ca.js"><link rel="prefetch" href="/note-sites/assets/js/25.4e84aa48.js"><link rel="prefetch" href="/note-sites/assets/js/26.8dea59c8.js"><link rel="prefetch" href="/note-sites/assets/js/27.837da0ae.js"><link rel="prefetch" href="/note-sites/assets/js/28.654a5134.js"><link rel="prefetch" href="/note-sites/assets/js/29.e529e64a.js"><link rel="prefetch" href="/note-sites/assets/js/3.2ab39145.js"><link rel="prefetch" href="/note-sites/assets/js/30.3a2e1ba0.js"><link rel="prefetch" href="/note-sites/assets/js/31.a814529e.js"><link rel="prefetch" href="/note-sites/assets/js/32.2847840b.js"><link rel="prefetch" href="/note-sites/assets/js/33.37812b81.js"><link rel="prefetch" href="/note-sites/assets/js/34.4ade7635.js"><link rel="prefetch" href="/note-sites/assets/js/35.1154bb7b.js"><link rel="prefetch" href="/note-sites/assets/js/36.9bb6764f.js"><link rel="prefetch" href="/note-sites/assets/js/37.b1b086c1.js"><link rel="prefetch" href="/note-sites/assets/js/38.1e0d9259.js"><link rel="prefetch" href="/note-sites/assets/js/39.7c69b2e6.js"><link rel="prefetch" href="/note-sites/assets/js/4.415c136c.js"><link rel="prefetch" href="/note-sites/assets/js/40.87efcd2a.js"><link rel="prefetch" href="/note-sites/assets/js/41.ffae0666.js"><link rel="prefetch" href="/note-sites/assets/js/42.9769c063.js"><link rel="prefetch" href="/note-sites/assets/js/43.aa021ac5.js"><link rel="prefetch" href="/note-sites/assets/js/44.db30e153.js"><link rel="prefetch" href="/note-sites/assets/js/6.7e6843e7.js"><link rel="prefetch" href="/note-sites/assets/js/7.9f716bd3.js"><link rel="prefetch" href="/note-sites/assets/js/8.fe1371a3.js"><link rel="prefetch" href="/note-sites/assets/js/9.a9dfe185.js">
    <link rel="stylesheet" href="/note-sites/assets/css/0.styles.a5e0cdd4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-c0d124fa><div data-v-c0d124fa><div class="password-shadow password-wrapper-out" style="display:none;" data-v-30dff670 data-v-c0d124fa data-v-c0d124fa><h3 class="title" data-v-30dff670>An的个人笔记</h3> <p class="description" data-v-30dff670>记录学习笔记</p> <label id="box" class="inputBox" data-v-30dff670><input type="password" value="" data-v-30dff670> <span data-v-30dff670>Konck! Knock!</span> <button data-v-30dff670>OK</button></label> <div class="footer" data-v-30dff670><span data-v-30dff670><i class="iconfont reco-theme" data-v-30dff670></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-30dff670>vuePress-theme-reco</a></span> <span data-v-30dff670><i class="iconfont reco-copyright" data-v-30dff670></i> <a data-v-30dff670><span data-v-30dff670>An</span>
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-c0d124fa><header class="navbar" data-v-c0d124fa><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-sites/" class="home-link router-link-active"><!----> <span class="site-name">An的个人笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/混合开发/" class="nav-link"><i class="undefined"></i>
  混合开发
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-c0d124fa></div> <aside class="sidebar" data-v-c0d124fa><div class="personal-info-wrapper" data-v-5c49c935 data-v-c0d124fa><img src="/note-sites/assets/img/logo.png" alt="author-avatar" class="personal-img" data-v-5c49c935> <h3 class="name" data-v-5c49c935>
    An
  </h3> <div class="num" data-v-5c49c935><div data-v-5c49c935><h3 data-v-5c49c935>33</h3> <h6 data-v-5c49c935>文章</h6></div> <div data-v-5c49c935><h3 data-v-5c49c935>26</h3> <h6 data-v-5c49c935>标签</h6></div></div> <ul class="social-links" data-v-5c49c935><li class="social-item" data-v-5c49c935><i class="iconfont reco-github" style="color:#f26d6d;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-mayun" style="color:#f47e60;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-juejin" style="color:#f8b26a;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-npm" style="color:#f26d6d;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-bilibili" style="color:#f47e60;" data-v-5c49c935></i></li></ul> <hr data-v-5c49c935></div> <nav class="nav-links"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/混合开发/" class="nav-link"><i class="undefined"></i>
  混合开发
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-30dff670 data-v-c0d124fa><h3 class="title" data-v-30dff670>React-16</h3> <!----> <label id="box" class="inputBox" data-v-30dff670><input type="password" value="" data-v-30dff670> <span data-v-30dff670>Konck! Knock!</span> <button data-v-30dff670>OK</button></label> <div class="footer" data-v-30dff670><span data-v-30dff670><i class="iconfont reco-theme" data-v-30dff670></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-30dff670>vuePress-theme-reco</a></span> <span data-v-30dff670><i class="iconfont reco-copyright" data-v-30dff670></i> <a data-v-30dff670><span data-v-30dff670>An</span>
          
        <!---->
        2023
      </a></span></div></div> <div data-v-c0d124fa><div data-v-c0d124fa><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">React-16</h1> <div data-v-7b22c628><i class="iconfont reco-account" data-v-7b22c628><span data-v-7b22c628>An</span></i> <i class="iconfont reco-date" data-v-7b22c628><span data-v-7b22c628>2022/3/5</span></i> <!----> <i class="tags iconfont reco-tag" data-v-7b22c628><span class="tag-item" data-v-7b22c628>React</span></i></div></div> <div class="theme-reco-content content__default"><div><h1 id="react-16"><a class="header-anchor" href="#react-16">#</a> React-16</h1> <p></p><div class="table-of-contents"><ul><li><a href="#react-的介绍">React 的介绍</a><ul><li><a href="#相关-js-库">相关 js 库</a></li></ul></li><li><a href="#虚拟-dom-与真实-dom">虚拟 DOM 与真实 DOM</a></li><li><a href="#jsx-基本使用">JSX 基本使用</a><ul><li><a href="#jsx里面能写什么">jsx里面能写什么</a></li></ul></li><li><a href="#react组件化编码">React组件化编码</a><ul><li><a href="#函数式组件">函数式组件</a></li><li><a href="#类式组件">类式组件</a></li></ul></li><li><a href="#state-状态">state(状态)</a><ul><li><a href="#state的理解">state的理解:</a></li><li><a href="#state比较重要的注意点">state比较重要的注意点:</a></li></ul></li><li><a href="#setstate更新状态的2种写法">setState更新状态的2种写法</a></li><li><a href="#props-传递参数">props(传递参数)</a><ul><li><a href="#构造器与-props">构造器与 props</a></li><li><a href="#函数式组件使用-props">函数式组件使用 props</a></li><li><a href="#props的理解">props的理解:</a></li><li><a href="#props的作用">props的作用</a></li><li><a href="#props-编码操作">props 编码操作</a></li><li><a href="#props的注意点">props的注意点:</a></li></ul></li><li><a href="#refs-标识">refs(标识)</a><ul><li><a href="#字符串形式的-ref-官方不推荐使用">字符串形式的 ref (官方不推荐使用)</a></li><li><a href="#回调函数式的-ref">回调函数式的 ref</a></li><li><a href="#createref">createRef</a></li></ul></li><li><a href="#事件处理">事件处理</a></li><li><a href="#收集表单数据">收集表单数据</a><ul><li><a href="#非受控组件">非受控组件</a></li><li><a href="#受控组件">受控组件</a><ul><li><a href="#柯里化写法">柯里化写法</a></li><li><a href="#不用柯里化写法">不用柯里化写法</a></li></ul></li></ul></li><li><a href="#旧版本生命周期">旧版本生命周期</a><ul><li><a href="#生命周期的三个阶段-旧">生命周期的三个阶段（旧）</a></li></ul></li><li><a href="#新版本生命周期">新版本生命周期</a><ul><li><a href="#生命周期的三个阶段-新">生命周期的三个阶段（新）</a></li><li><a href="#重要的勾子">重要的勾子</a></li><li><a href="#即将废弃的三个勾子">即将废弃的三个勾子</a></li><li><a href="#新推出的两个构子-基本用不上">新推出的两个构子(基本用不上)</a></li></ul></li><li><a href="#react遍历列表时-key的内部原理">react遍历列表时, key的内部原理</a></li><li><a href="#react-脚手架">React 脚手架</a><ul><li><a href="#创建项目并启动">创建项目并启动</a></li><li><a href="#react-脚手架项目结构">react 脚手架项目结构</a></li><li><a href="#react-文件的模块化">react 文件的模块化</a></li><li><a href="#todolist案例相关知识点">todoList案例相关知识点</a></li></ul></li><li><a href="#react脚手架配置代理">react脚手架配置代理</a></li><li><a href="#github搜索案例相关知识点">github搜索案例相关知识点</a></li><li><a href="#react-路由的基本使用">React 路由的基本使用</a><ul><li><a href="#路由组件与一般组件">路由组件与一般组件</a></li></ul></li><li><a href="#navlink与封装navlink">NavLink与封装NavLink</a><ul><li><a href="#navlink">NavLink</a></li><li><a href="#封装navlink">封装NavLink</a></li></ul></li><li><a href="#switch的使用">Switch的使用</a><ul><li><a href="#解决多级路径刷新页面样式丢失的问题">解决多级路径刷新页面样式丢失的问题</a></li><li><a href="#路由的严格匹配与模糊匹配">路由的严格匹配与模糊匹配</a></li></ul></li><li><a href="#redirect的使用">Redirect的使用</a></li><li><a href="#嵌套路由">嵌套路由</a></li><li><a href="#向路由组件传递参数">向路由组件传递参数</a><ul><li><a href="#params-参数">params 参数</a></li><li><a href="#search-参数">search 参数</a></li><li><a href="#state-参数">state 参数</a></li></ul></li><li><a href="#路由的跳转模式">路由的跳转模式</a><ul><li><a href="#push">push</a></li><li><a href="#replace">replace</a></li></ul></li><li><a href="#编程式路由导航">编程式路由导航</a></li><li><a href="#withrouter">withRouter</a></li><li><a href="#browserrouter与hashrouter的区别">BrowserRouter与HashRouter的区别</a></li><li><a href="#路由组件的lazyload">路由组件的lazyLoad</a></li><li><a href="#redux-非官方">redux(非官方)</a><ul><li><a href="#什么情况下需要使用-redux">什么情况下需要使用 redux</a></li><li><a href="#redux-的三个核心概念">redux 的三个核心概念</a><ul><li><a href="#action">action</a></li><li><a href="#reducer">reducer</a></li><li><a href="#store">store</a></li></ul></li></ul></li><li><a href="#求和案例-redux精简版">求和案例_redux精简版</a></li><li><a href="#求和案例-redux完整版">求和案例_redux完整版</a></li><li><a href="#求和案例-redux异步action版">求和案例_redux异步action版</a></li><li><a href="#求和案例-react-redux基本使用">求和案例_react-redux基本使用</a></li><li><a href="#求和案例-react-redux优化">求和案例_react-redux优化</a></li><li><a href="#求和案例-react-redux数据共享版">求和案例_react-redux数据共享版</a></li><li><a href="#纯函数和高阶函数">纯函数和高阶函数</a><ul><li><a href="#纯函数">纯函数</a></li><li><a href="#高阶函数">高阶函数</a></li></ul></li><li><a href="#求和案例-react-redux开发者工具的使用">求和案例_react-redux开发者工具的使用</a></li><li><a href="#求和案例-react-redux最终版">求和案例_react-redux最终版</a></li><li><a href="#render-props">render props</a><ul><li><a href="#children-props">children props</a></li><li><a href="#render-props">render props</a></li></ul></li><li><a href="#hooks">Hooks</a><ul><li><a href="#react-hook-hooks的介绍">React Hook/Hooks的介绍</a></li><li><a href="#三个常用的hook">三个常用的Hook</a></li><li><a href="#state-hook">State Hook</a></li><li><a href="#effect-hook">Effect Hook</a></li><li><a href="#ref-hook">Ref Hook</a></li></ul></li><li><a href="#fragment">Fragment</a></li><li><a href="#context">Context</a></li><li><a href="#组件优化">组件优化</a><ul><li><a href="#component的2个问题">Component的2个问题</a></li><li><a href="#效率高的做法">效率高的做法</a></li><li><a href="#原因">原因</a></li><li><a href="#解决">解决</a></li></ul></li><li><a href="#错误边界">错误边界</a><ul><li><a href="#使用方式">使用方式：</a></li></ul></li><li><a href="#组件通信方式总结">组件通信方式总结</a><ul><li><a href="#几种通信方式">几种通信方式：</a></li><li><a href="#比较好的搭配方式">比较好的搭配方式：</a></li></ul></li></ul></div><p></p> <h2 id="react-的介绍"><a class="header-anchor" href="#react-的介绍">#</a> React 的介绍</h2> <p>用于动态构建用户界面的 JavaScript 库(只关注于视图), 由 Facebook 开源</p> <ul><li>声明式编码</li> <li>组件化编码</li> <li>React Native 编写原生应用</li> <li>高效（优秀的 Diffing 算法）</li> <li>使用虚拟(virtual)DOM, 不总是直接操作页面真实 DOM</li> <li>DOM Diffing 算法, 最小化页面重绘</li></ul> <h3 id="相关-js-库"><a class="header-anchor" href="#相关-js-库">#</a> 相关 js 库</h3> <ul><li>react.js：React 核心库</li> <li>react-dom.js：提供操作 DOM 的 react 扩展库</li> <li>babel.min.js：解析 JSX 语法代码转为 JS 代码的库</li></ul> <h2 id="虚拟-dom-与真实-dom"><a class="header-anchor" href="#虚拟-dom-与真实-dom">#</a> 虚拟 DOM 与真实 DOM</h2> <ol><li>React 提供了一些 API 来创建一种 &quot;特别&quot; 的一般 js 对象<code>const VDOM = React.createElement('xx',{id:'xx'},'xx')</code></li> <li>上面创建的就是一个简单的虚拟 DOM 对象</li> <li>虚拟 DOM 对象最终都会被 React 转换为真实的 DOM</li> <li>我们编码时基本只需要操作 react 的虚拟 DOM 相关数据, react 会转换为真实
DOM 变化而更新界面</li></ol> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 准备好一个<span class="token string">&quot;容器&quot;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 引入 react 核心库 <span class="token operator">--</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;../js/react.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 引入react<span class="token operator">-</span>dom<span class="token punctuation">,</span> 用于支持 react 操作 <span class="token constant">DOM</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;../js/react-dom.development.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 引入babel<span class="token punctuation">,</span> 用于将jsx转为js <span class="token operator">--</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;../js/babel.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
     
 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 此处一定要写成 type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
     <span class="token comment">// 1.创建虚拟 DOM</span>
     <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token comment">/* 此处一定不要写引号, 因为不是字符串 */</span>
         <span class="token operator">&lt;</span>h1 id<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span>React<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
     <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// 原生js写法比较繁琐</span>
     <span class="token comment">// React.createElement(标签名,标签属性,标签体)</span>
     <span class="token comment">// const VDOM = React.createElement('h1',{id:'title'},React.createElement('span',{},'Hello,React'));</span>
     <span class="token comment">// 2.渲染虚拟 DON 到页面</span>
     ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'虚拟DOM'</span><span class="token punctuation">,</span> <span class="token constant">VDOM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'真实DOM'</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token constant">VDOM</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">VDOM</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
     <span class="token comment">/**
      * 关于虚拟DOM
      *  1.本质是Object类型的对象(一般对象)
      *  2.虚拟DOM比较'轻', 真实DOM比较'重', 因为虚拟DOM是React内部在用, 无需真实DOM上那么多的属性
      *  3.虚拟DOM最终会被React转换为真实DOM, 呈现在页面上
     */</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="jsx-基本使用"><a class="header-anchor" href="#jsx-基本使用">#</a> JSX 基本使用</h2> <ol><li>全称: JavaScript XML</li> <li>React 定义的一种类似于 XML 的 JS 扩展语法: JS + XML 本质是<code>React.createElement(component, props, ...children)</code>方法的语法糖</li> <li>作用: 用来简化创建虚拟 DOM
<ul><li>写法：<code>var ele = &lt;h1&gt;Hello JSX!&lt;/h1&gt;</code></li> <li>注意：
<ul><li>它不是字符串, 也不是 HTML/XML 标签</li> <li>它最终产生的就是一个 JS 对象</li></ul></li></ul></li> <li>基本语法规则:
<ul><li>定义虚拟DOM时, <code>不要</code>写引号</li> <li>标签中混入JS表达式要写成 <code>{JS表达式}</code></li> <li>样式的类名指定不要用 class, 要用 <code>className</code></li> <li>内联样式不能直接写, 要用 <code>style={{key:value}}</code></li> <li>只能有<code>一个</code>根标签</li> <li>标签必须要<code>闭合</code>(自闭和 或者 闭合标签)</li> <li>标签首字母
<ul><li>若<code>小写</code>字母开头, 则将该标签转为html中同名元素, 若html中无同名标签, 则报错</li> <li>若<code>大写</code>字母开头, React就去渲染对应的<code>组件</code>, 若组件没有定义, 则报错<div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span> 略
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">const</span> myId <span class="token operator">=</span> <span class="token string">'HELLO'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> myData <span class="token operator">=</span> <span class="token string">'HELLO, REACT'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> id<span class="token operator">=</span><span class="token punctuation">{</span>myId<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&quot;40px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>myData<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> id<span class="token operator">=</span><span class="token punctuation">{</span>myId<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&quot;40px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>myData<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Good<span class="token operator">&gt;</span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>Good<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul></li></ul></li></ol> <h3 id="jsx里面能写什么"><a class="header-anchor" href="#jsx里面能写什么">#</a> jsx里面能写什么</h3> <div class="language- extra-class"><pre><code>只能写JS表达式
</code></pre></div><ul><li>一定注意区分: js语句(代码) 与 js表达式
<ul><li>表达式: 一个表达式会产生一个值, 可以放在任何一个需要值的地方, 例如:
<ul><li>a</li> <li>a + b</li> <li>demo(1)</li> <li>arr.map()</li> <li>function test () {...}</li></ul></li> <li>语句(代码)不会产生值, 都是一些控制代码走向的:
<ul><li><p>if(){}</p></li> <li><p>for(){}</p></li> <li><p>switch(){case:...}</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token operator">...</span> 略
 <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
      <span class="token comment">// 模拟一些数据</span>
     <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Anglar'</span><span class="token punctuation">,</span><span class="token string">'React'</span><span class="token punctuation">,</span><span class="token string">'Vue'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token comment">// const data2 = [&lt;li&gt;Anglar&lt;/li&gt;,&lt;li&gt;React&lt;/li&gt;,&lt;li&gt;Vue&lt;/li&gt;]; 可以使用但不会这样用</span>
     <span class="token comment">// 1.创建虚拟DOM</span>
     <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
         <span class="token comment">// 虚拟DOM里放一个数组React会自动帮我们遍历里面的值, 放对象会报错</span>
         <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>前端<span class="token constant">JS</span>框架列表<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                 <span class="token punctuation">{</span>
                     data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                         <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                     <span class="token punctuation">}</span><span class="token punctuation">)</span>
                 <span class="token punctuation">}</span>
             <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
     <span class="token punctuation">)</span>
     <span class="token comment">// 2.渲染虚拟DOM到页面</span>
     ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></li></ul></li></ul></li></ul> <h2 id="react组件化编码"><a class="header-anchor" href="#react组件化编码">#</a> React组件化编码</h2> <h3 id="函数式组件"><a class="header-anchor" href="#函数式组件">#</a> 函数式组件</h3> <p>注意点:</p> <ol><li><p>函数名字首字母<code>大写</code></p></li> <li><p>函数里必须有<code>返回值</code></p></li> <li><p>函数式组件里的 <code>this</code> 是 undefined</p></li> <li><p><code>ReactDOM.render(&lt;组件名/&gt;, ...)</code> 里必须写组件标签</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span> 略
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
    <span class="token comment">// 1.创建函数式组件</span>
    <span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处的this是 undefined, 因为 babel编译后开启了严格模式</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token function">我是用函数定义的组件</span><span class="token punctuation">(</span>适用于简单组件的定义<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2.渲染组件到页面</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
        * 执行了 ReactDOM.render(&lt;MyComponent/&gt;, ...) 之后的执行原理
        *  1.React解析组件标签, 找到了 MyComponent 组件
        *  2.发现组件是使用函数定义的, 随后调用该函数, 将返回值的虚拟DOM转为真实DOM, 随后呈现到页面中
    */</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ol> <h3 id="类式组件"><a class="header-anchor" href="#类式组件">#</a> 类式组件</h3> <p>注意点:</p> <ol><li><p>定义的类必须继承 <code>React.Component</code></p></li> <li><p>函数里必须有<code>render</code>方法并且必须有<code>返回值</code>, 返回值就是要呈现的内容</p></li> <li><p>render中的 <code>this</code>是  组件实例对象</p></li> <li><p><code>ReactDOM.render(&lt;组件名/&gt;, ...)</code> 里必须写组件标签</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span> 略
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
    <span class="token comment">// 1.创建类式组件</span>
    <span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// render 是放在哪里的? --- MyComponent 的原型对象上, 供实例使用</span>
            <span class="token comment">// render 中的 this 是谁? --- MyComponent 的实例对象 &lt;=&gt; MyComponent 组件实例对象</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render中的this: '</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token function">我是用类定义的组件</span><span class="token punctuation">(</span>适用于复杂组件的定义<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2.渲染组件到页面</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
        * 执行了 ReactDOM.render(&lt;MyComponent/&gt;, ...) 之后的执行原理
        *  1.React解析组件标签, 找到了 MyComponent 组件
        *  2.发现组件是使用类定义的, 随后new出来该类的实例, 并通过该实例调用原型上的 render 方法
        *  3.将 render 返回的虚拟DOM转为真实DOM, 随后呈现在页面上
    */</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ol> <h2 id="state-状态"><a class="header-anchor" href="#state-状态">#</a> state(状态)</h2> <div class="language- extra-class"><pre><code>state 保存着组件的状态属性通过更新组件的 state 来更新对应的页面显示(重新渲染组件)
</code></pre></div><ul><li><p>state的完整写法(点击切换文字练习)</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span> 略 
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">// 1.创建组件</span>
<span class="token keyword">class</span> <span class="token class-name">Weather</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>

   <span class="token comment">// 构造器调用几次? --- 1次</span>
   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'constructor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">// 初始化状态</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">isHot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">wind</span><span class="token operator">:</span> <span class="token string">'微风'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token comment">/**
        * 解决 changeWeather 中 this 指向问题
        *  使用 bind 改变将原型上的 changeWeather 生成新的函数, 并把这个函数的 this 的指向实例自身
        *      然后 并赋值在实例自身上 这样就解决了 this 指向问题了
        * */</span>

       <span class="token keyword">this</span><span class="token punctuation">.</span>changeWeather <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeWeather</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// render调用几次? --- 1+n次 1是初始化的那次 n是状态更新的次数</span>
   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">// 读取状态</span>
       <span class="token keyword">const</span> <span class="token punctuation">{</span> isHot<span class="token punctuation">,</span> wind <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1 onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeWeather<span class="token punctuation">}</span><span class="token operator">&gt;</span>今天天气很<span class="token punctuation">{</span>isHot <span class="token operator">?</span> <span class="token string">'炎热'</span> <span class="token operator">:</span> <span class="token string">'凉爽'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>wind<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// changeWeather调用几次? --- 点几次调用几次</span>
   <span class="token function">changeWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// changeWeather 是放在哪里的? --- Weather 的原型对象上, 供实例使用</span>
       <span class="token comment">// 由于 changeWeather 是作为 onClick 的回调, 所以不是通过实例调用, 是直接调用</span>
       <span class="token comment">// 类中的方法默认开启了局部的严格模式, 所以 changeWeather 中的 this 为 undefined</span>
       <span class="token comment">// console.log(this); // undefined</span>

       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'changeWeather'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">// 获取原来的 isHot</span>
       <span class="token keyword">const</span> isHot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isHot<span class="token punctuation">;</span>
       <span class="token comment">// 严重注意: 状态必须通过 setState 进行更新, 且更新是一种合并, 不会替换</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">isHot</span><span class="token operator">:</span> <span class="token operator">!</span>isHot <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">// 严重注意: 状态(state)不可直接更改, 下面这种就是直接更改!!!</span>
       <span class="token comment">// this.state.isHot = !isHot; // 这是错误写法</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2.渲染组件到页面</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Weather <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div></li> <li><p>注意点:</p> <ul><li>React 中的事件绑定是采用小驼峰命名的</li> <li>事件中的 <code>this</code> 指向问题</li> <li>修改状态(state) 必须使用 <code>setState</code> 进行更新, 参数是一个对象
<ul><li>且更新的方式是合并, 不会影响其他的属性</li></ul></li> <li>类组件中<code>构造器</code>只会调用 1 次</li> <li>类组件中<code>render</code>方法会调用 1+n 次, 1是初始化的那次, n是状态更新的次数</li></ul></li> <li><p>state(简写形式)</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span> 略 
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">// 1.创建组件</span>
  <span class="token keyword">class</span> <span class="token class-name">Weather</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token comment">// 初始化方法</span>
      state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">isHot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">wind</span><span class="token operator">:</span> <span class="token string">'微风'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> isHot<span class="token punctuation">,</span> wind <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1 onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeWeather<span class="token punctuation">}</span><span class="token operator">&gt;</span>今天天气很<span class="token punctuation">{</span>isHot <span class="token operator">?</span> <span class="token string">'炎热'</span> <span class="token operator">:</span> <span class="token string">'凉爽'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>wind<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 自定义方法 ---&gt; 要用赋值语句的形式+箭头函数</span>
      <span class="token function-variable function">changeWeather</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> isHot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isHot<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">isHot</span><span class="token operator">:</span> <span class="token operator">!</span>isHot <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 2.渲染组件到页面</span>
  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Weather <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>注意点:
<ul><li><code>不写构造函数</code> 将状态和自定义方法直接写在类里面</li> <li>自定义方法必须使用 <code>赋值语句</code> + <code>箭头函数的形式</code></li></ul></li></ul></li></ul> <h3 id="state的理解"><a class="header-anchor" href="#state的理解">#</a> state的理解:</h3> <ol><li>state 是组件对象最重要的属性, 值是对象(可以包含多个 key-value 的组合)</li> <li>组件被称为 &quot;状态机&quot;, 通过更新组件的 state 来更新对应的页面显示(重新渲染组件)</li></ol> <h3 id="state比较重要的注意点"><a class="header-anchor" href="#state比较重要的注意点">#</a> state比较重要的注意点:</h3> <ol><li>组件中 render 中的 this 为组件实例对象</li> <li>组件自定义的方法(基本用于事件回调使用)中 this 为 undefined, 解决方法如下:
<ul><li>强制在构造器里绑定通过函数对象的 <code>bind 来绑定 this</code></li> <li>在类里面使用 <code>赋值语句 + 箭头函数</code> 来定义事件回调方法</li></ul></li> <li>状态数据, 不能直接修改或更新, 必须使用 <code>setState</code></li></ol> <h2 id="setstate更新状态的2种写法"><a class="header-anchor" href="#setstate更新状态的2种写法">#</a> setState更新状态的2种写法</h2> <ol><li><p><code>setState(stateChange, [callback])</code>------对象式的setState</p> <ul><li><code>stateChange</code>为状态改变对象(该对象可以体现出状态的更改)</li> <li><code>callback</code>是可选的回调函数, 它在状态更新完毕、界面也更新后(render调用后)才被调用</li> <li>react 的状态更新后续动作是异步的</li></ul></li> <li><p><code>setState(updater, [callback])</code>------函数式的setState</p> <ul><li><code>updater</code>为返回<code>stateChange</code>对象的函数
<ul><li><code>updater</code>可以接收到<code>state</code>和<code>props</code></li></ul></li> <li><code>callback</code>是可选的回调函数, 它在状态更新、界面也更新后(render调用后)才被调用。</li></ul></li> <li><p>使用:</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token comment">//对象式的setState</span>
<span class="token comment">//1.获取原来的count值</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
<span class="token comment">//2.更新状态</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// console.log('12行的输出',this.state.count); // 0</span>

<span class="token comment">//函数式的setState</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>总结:</p> <ul><li><p>对象式的setState是函数式的setState的简写方式(语法糖)</p></li> <li><p>使用原则：</p> <ul><li>如果新状态不依赖于原状态 ===&gt; 使用对象方式</li> <li>如果新状态依赖于原状态 ===&gt; 使用函数方式</li> <li>如果需要在setState()执行后获取最新的状态数据, 要在第二个callback函数中读取</li></ul></li></ul></li></ol> <h2 id="props-传递参数"><a class="header-anchor" href="#props-传递参数">#</a> props(传递参数)</h2> <div class="language- extra-class"><pre><code>组件外向组件内传递变化的数据
</code></pre></div><ul><li><p>在组件标签中可以直接通过 key=value 的形式传递</p></li> <li><p>完整写法:</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span> 略
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 引入props<span class="token operator">-</span>types<span class="token punctuation">,</span> 用于对组件标签属性进行限制 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;../js/prop-types.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
    <span class="token comment">// 创建组件</span>
    <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// props 是只读的</span>
            <span class="token comment">// this.props.name = 'haha'; // 此行代码报错, props 是只读的</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄<span class="token operator">:</span> <span class="token punctuation">{</span>age<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别<span class="token operator">:</span> <span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 对标签属性进行类型 必要性的限制</span>
    Person<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">// 限制 name 必传, 且为字符串</span>
        <span class="token literal-property property">sex</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">// 限制 sex 为字符串</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token comment">// 限制 age 为数值</span>
        <span class="token literal-property property">speak</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func <span class="token comment">// 限制 speak 为函数, 因为 function 是关键字 使用 func 代替</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 指定默认标签属性值</span>
    Person<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'性别保密'</span><span class="token punctuation">,</span> <span class="token comment">// sex 默认值为 性别保密</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token comment">// age 默认值为 18</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 渲染组件</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">'张三'</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">18</span><span class="token punctuation">}</span>  speak<span class="token operator">=</span><span class="token punctuation">{</span>speak<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">'李四'</span> sex<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'女'</span> <span class="token punctuation">}</span>
    <span class="token comment">// console.log(...p) // 没用 只有在标签参数上可以展开对象</span>
    <span class="token comment">// ReactDOM.render(&lt;Person name={p.name} age={p.age} sex={p.sex}/&gt;,document.getElementById('test3'));</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person <span class="token punctuation">{</span><span class="token operator">...</span>p<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我说话了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div></li> <li><p>简写形式</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span> 略
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 引入props<span class="token operator">-</span>types<span class="token punctuation">,</span> 用于对组件标签属性进行限制 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;../js/prop-types.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span> 
 
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
   <span class="token comment">// 创建组件</span>
   <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
       <span class="token comment">// 对标签属性进行类型 必要性的限制</span>
       <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">// 限制 name 必传, 且为字符串</span>
           <span class="token literal-property property">sex</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">// 限制 sex 为字符串</span>
           <span class="token literal-property property">age</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token comment">// 限制 age 为数值</span>
           <span class="token literal-property property">speak</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func <span class="token comment">// 限制 speak 为函数, 因为 function 是关键字 使用 func 代替</span>
       <span class="token punctuation">}</span>
       <span class="token comment">// 指定默认标签属性值</span>
       <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'性别保密'</span><span class="token punctuation">,</span> <span class="token comment">// sex 默认值为 性别保密</span>
           <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token comment">// age 默认值为 18</span>
       <span class="token punctuation">}</span>
 
       <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// props 是只读的</span>
           <span class="token comment">// this.props.name = 'haha'; // 此行代码报错, props 是只读的</span>
           <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token punctuation">(</span>
               <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                   <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                   <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄<span class="token operator">:</span> <span class="token punctuation">{</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                   <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别<span class="token operator">:</span> <span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
               <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
           <span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div></li></ul> <h3 id="构造器与-props"><a class="header-anchor" href="#构造器与-props">#</a> 构造器与 props</h3> <div class="language- extra-class"><pre><code>类式组件一般不写构造器
</code></pre></div><ul><li><p>通常，在 React 中，构造函数仅用于以下两种情况：</p> <ul><li>通过给 this.state 赋值对象来初始化内部 state</li> <li>为事件处理函数绑定实例</li></ul></li> <li><p>构造器是否接收 props, 是否传递给super, 取决于, 是否希望在构造器中通过this访问props(基本不用)</p></li></ul> <h3 id="函数式组件使用-props"><a class="header-anchor" href="#函数式组件使用-props">#</a> 函数式组件使用 props</h3> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">...</span>略
  <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
      <span class="token comment">// 创建组件</span>
      <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 会收到所有传过来的 props 是一个对象</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别<span class="token operator">:</span> <span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄<span class="token operator">:</span> <span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 对标签属性进行类型 必要性的限制</span>
      Person<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">// 限制 name 必传, 且为字符串</span>
          <span class="token literal-property property">sex</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">// 限制 sex 为字符串</span>
          <span class="token literal-property property">age</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token comment">// 限制 age 为数值</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 指定默认标签属性值</span>
      Person<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'性别保密'</span><span class="token punctuation">,</span> <span class="token comment">// sex 默认值为 性别保密</span>
          <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token comment">// age 默认值为 18</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 渲染组件</span>
      ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">'张三'</span> sex<span class="token operator">=</span><span class="token string">'男'</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">18</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="props的理解"><a class="header-anchor" href="#props的理解">#</a> props的理解:</h3> <ol><li>每个组件实例对象都会有 props 属性</li> <li>组件标签的所有属性都保存在 props 中</li></ol> <h3 id="props的作用"><a class="header-anchor" href="#props的作用">#</a> props的作用</h3> <ol><li>通过标签属性从组件外向组件内传递变化的数据</li> <li>注意: 组件内部不要修改 props 的数据</li></ol> <h3 id="props-编码操作"><a class="header-anchor" href="#props-编码操作">#</a> props 编码操作</h3> <ul><li>内部读取某个值
<ul><li><code>this.props.属性名</code></li></ul></li> <li>对 props 中的属性进行类型限制, 必要性限制
<ul><li><p>第一种方式(React v15.5开始已弃用)</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">name</span><span class="token operator">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> 
     <span class="token literal-property property">sex</span><span class="token operator">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> 
     <span class="token literal-property property">age</span><span class="token operator">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> 
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>第二种方式(新的)</p></li> <li><p>需要引入 <code>prop-types</code>库进行限制</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> 
   <span class="token literal-property property">sex</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> 
   <span class="token literal-property property">age</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>设置 <code>props</code> 默认值</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'性别保密'</span><span class="token punctuation">,</span> 
     <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> 
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>扩展属性: 将对象的所有实现通过 props 传递</p> <ul><li><code>&lt;Person {...person} /&gt;</code></li></ul></li></ul></li></ul> <h3 id="props的注意点"><a class="header-anchor" href="#props的注意点">#</a> props的注意点:</h3> <ul><li>使用 <code>prop-types</code> 库时名字别写混了类上面要写<code>propTypes</code>是来告知需要限制 props, <code>PropTypes</code>是引入 <code>prop-types</code> 库来实现限制 props 的</li> <li>限制 props 为函数时, 因为<code>function</code>是关键字, 请使用<code>func</code>代替</li></ul> <h2 id="refs-标识"><a class="header-anchor" href="#refs-标识">#</a> refs(标识)</h2> <div class="language- extra-class"><pre><code>组件内的标签可以定义 ref 属性来标识自己
相当于原生JS里的 id 一样
</code></pre></div><h3 id="字符串形式的-ref-官方不推荐使用"><a class="header-anchor" href="#字符串形式的-ref-官方不推荐使用">#</a> 字符串形式的 ref (官方不推荐使用)</h3> <ul><li><p>在组件标签结构里 <code>ref='my-ref'</code> React会自动帮我们收集到实例的 <code>this.refs</code> 身上</p> <div class="language-html line-numbers-mode"><pre v-pre="" class="language-html"><code>  // 组件标签结构定义
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>my-ref<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>点击按钮提示数据<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span>
  
  // 组件中使用
  this.refs.&quot;my-ref&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h3 id="回调函数式的-ref"><a class="header-anchor" href="#回调函数式的-ref">#</a> 回调函数式的 ref</h3> <ul><li><p>在组件标签结构里写一个箭头函数, React会自动帮我们调用, 并且参数就是就是<code>当前节点</code>然后我们可以<code>赋值</code>到实例身上</p> <div class="language-html line-numbers-mode"><pre v-pre="" class="language-html"><code>// 组件标签里写一个箭头函数
&lt;input ref={(c) =&gt; { this.input1 = c }} type=&quot;text&quot; placeholder='点击按钮提示数据' /&gt;
&lt;input ref={c =&gt; this.input2 = c } type=&quot;text&quot; placeholder='点击按钮提示数据' /&gt;

// 组件中使用
this.input1
this.input2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>关于 回调<code>ref</code>调用次数(了解)
<ul><li><p>render方法调用渲染时会调用一次, 之后每次调用 render 更新页面会调用<code>两次</code>, 第一次参数为 <code>null</code>, 第二次为节点, 目的就是清空上一次的数据</p></li> <li><p>使用 实例方法的形式保存可以避免这种问题(一般清空下, 是无关紧要的)</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token comment">// 组件标签里写一个方法保存节点</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>saveInput <span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>点击按钮提示数据<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
                                                                   
<span class="token comment">// 方法里保存节点</span>
<span class="token function-variable function">saveInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>input1 <span class="token operator">=</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
                                                                   
<span class="token comment">// 组件中使用</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>input1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li></ul></li></ul> <h3 id="createref"><a class="header-anchor" href="#createref">#</a> createRef</h3> <ul><li><p>调用 <code>React.createRef()</code> 会收到一个存储 ref 的容器, 在组件标签里写上收到的容器, React会自动把当前节点收集到 指定的容器上</p></li> <li><p>注意: 这个容器是 &quot;专人专用&quot; 的, 只能放一个ref</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token comment">// 组件标签里写一个箭头函数</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>点击按钮提示数据<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">// 组件拿到 ref 容器</span>
myRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 组件中使用(固定叫current)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">.</span>current
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <h2 id="事件处理"><a class="header-anchor" href="#事件处理">#</a> 事件处理</h2> <ul><li>通过 <code>onXxx</code> 属性指定事件处理函数(注意大小写)
<ul><li>React 使用的是自定义(合成)事件, 而不是使用的原生 DOM 事件 --- 为了更好的兼容性</li> <li>React 中的事件是通过事件委托方式处理的(委托给组件最外层的元素) --- 为了高效</li></ul></li> <li>通过 <code>event.target</code> 得到发生事件的 DOM 元素对象 --- 不要过度的使用 ref</li></ul> <h2 id="收集表单数据"><a class="header-anchor" href="#收集表单数据">#</a> 收集表单数据</h2> <p>包含表单的组件分类</p> <p>非受控组件 和 受控组件</p> <h3 id="非受控组件"><a class="header-anchor" href="#非受控组件">#</a> 非受控组件</h3> <ul><li>页面里输入类DOM的数据是通过 ref 现用现取</li> <li>用多了 ref 会导致效率的问题</li></ul> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
<span class="token comment">// 页面里输入类DOM的数据是通过 ref 现用现取</span>
<span class="token comment">// 创建组件</span>
<span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
   <span class="token function-variable function">handlerSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">const</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span>password<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
       <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你输入的用户名: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 密码是: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token punctuation">(</span>
           <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerSubmit<span class="token punctuation">}</span> action<span class="token operator">=</span><span class="token string">&quot;https://www.baidu.com&quot;</span><span class="token operator">&gt;</span>
               <span class="token literal-property property">用户名</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">c</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token operator">=</span>c<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
               <span class="token literal-property property">密码</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">c</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token operator">=</span>c<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
               <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
       <span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 渲染组件</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Login<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="受控组件"><a class="header-anchor" href="#受控组件">#</a> 受控组件</h3> <ul><li>页面中所有输入类的DOM, 随着用户的输入可以实时的把数据维护到状态里, 需要使用的时候再从状态里取数据</li> <li>受控组件可以省略 ref 来提高效率问题</li></ul> <h4 id="柯里化写法"><a class="header-anchor" href="#柯里化写法">#</a> 柯里化写法</h4> <div class="language- extra-class"><pre><code>通过函数调用继续返回函数的方式, 实现多次接受参数最后统一处理的函数编码形式
</code></pre></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
   <span class="token comment">// 创建组件</span>
   <span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
       <span class="token comment">// 初始化状态</span>
       state <span class="token operator">=</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 用户名</span>
           <span class="token literal-property property">password</span><span class="token operator">:</span><span class="token string">''</span> <span class="token comment">// 密码</span>
       <span class="token punctuation">}</span>
       <span class="token comment">// 保存表单数据到状态中</span>
       <span class="token function-variable function">saveFormData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dataType</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">[</span>dataType<span class="token punctuation">]</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
       <span class="token comment">// 表单提交回调</span>
       <span class="token function-variable function">handlerSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
           e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">const</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span>password<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
           <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你输入的用户名: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 密码是: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token punctuation">(</span>
               <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerSubmit<span class="token punctuation">}</span> action<span class="token operator">=</span><span class="token string">&quot;https://www.baidu.com&quot;</span><span class="token operator">&gt;</span>
                   <span class="token literal-property property">用户名</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveFormData</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                   <span class="token literal-property property">密码</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveFormData</span><span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>  type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                   <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
               <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
           <span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token comment">// 渲染组件</span>
   ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Login<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="不用柯里化写法"><a class="header-anchor" href="#不用柯里化写法">#</a> 不用柯里化写法</h4> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/babel&quot;</span><span class="token operator">&gt;</span>
  <span class="token comment">// 创建组件</span>
  <span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token comment">// 初始化状态</span>
      state <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 用户名</span>
          <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">// 密码</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 保存表单数据到状态中</span>
      <span class="token function-variable function">saveFormData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dataType<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>dataType<span class="token punctuation">]</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 表单提交回调</span>
      <span class="token function-variable function">handlerSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你输入的用户名: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 密码是: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerSubmit<span class="token punctuation">}</span> action<span class="token operator">=</span><span class="token string">&quot;https://www.baidu.com&quot;</span><span class="token operator">&gt;</span>
                  <span class="token literal-property property">用户名</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveFormData</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                  <span class="token literal-property property">密码</span><span class="token operator">:</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveFormData</span><span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                  <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 渲染组件</span>
  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="旧版本生命周期"><a class="header-anchor" href="#旧版本生命周期">#</a> 旧版本生命周期</h2> <p><img src="/note-sites/assets/img/react生命周期(旧).5c4592bd.png"><br></p> <table><thead><tr><th>钩子函数</th> <th>调用时机</th></tr></thead> <tbody><tr><td><strong>constructor</strong></td> <td>构造器最先调用</td></tr> <tr><td><strong>componentWillMount</strong></td> <td>组件挂载之前</td></tr> <tr><td><strong>componentDidMount</strong></td> <td>组件挂载完毕</td></tr> <tr><td><strong>shouldComponentUpdate</strong></td> <td>控制组件更新的&quot;阀门&quot;(根据返回值)</td></tr> <tr><td><strong>this.forceUpdate()</strong></td> <td>不修改状态强制更新(不受阀门构子的影响)</td></tr> <tr><td><strong>componentWillUpdate</strong></td> <td>组件将要更新之前</td></tr> <tr><td><strong>render</strong></td> <td>初始化渲染, 状态更新时</td></tr> <tr><td><strong>componentDidUpdate</strong></td> <td>组件更新完毕</td></tr> <tr><td><strong>componentWillReceiveProps</strong></td> <td>组件接受到 props 之前调用, 注意: 第一次不算</td></tr> <tr><td><strong>componentWillUnmount</strong></td> <td>组件卸载之前</td></tr></tbody></table> <h3 id="生命周期的三个阶段-旧"><a class="header-anchor" href="#生命周期的三个阶段-旧">#</a> 生命周期的三个阶段（旧）</h3> <ol><li>初始化阶段: 由 ReactDOM.render()触发---初次渲染
<ul><li>constructor()</li> <li>componentWillMount()</li> <li>render()</li> <li><strong>componentDidMount()</strong> ===&gt; 常用</li></ul></li> <li>更新阶段: 由组件内部 this.setSate()或父组件 render 触发
<ul><li>shouldComponentUpdate()</li> <li>componentWillUpdate()</li> <li><strong>render()</strong> ===&gt; 必须使用的一个</li> <li>componentDidUpdate()</li></ul></li> <li>卸载组件: 由 ReactDOM.unmountComponentAtNode()触发
<ul><li><strong>componentWillUnmount()</strong> ===&gt; 常用</li></ul></li></ol> <h2 id="新版本生命周期"><a class="header-anchor" href="#新版本生命周期">#</a> 新版本生命周期</h2> <p><img src="/note-sites/assets/img/react生命周期(新).7009279b.png"><br></p> <table><thead><tr><th>钩子函数</th> <th>调用时机</th></tr></thead> <tbody><tr><td><strong>constructor</strong></td> <td>构造器最先调用</td></tr> <tr><td><strong>getDerivedStateFromProps</strong></td> <td>(基本不用)</td></tr> <tr><td><strong>componentDidMount</strong></td> <td>组件挂载完毕</td></tr> <tr><td><strong>shouldComponentUpdate</strong></td> <td>控制组件更新的&quot;阀门&quot;(根据返回值)</td></tr> <tr><td><strong>render</strong></td> <td>初始化渲染, 状态更新时</td></tr> <tr><td><strong>getSnapshotBeforeUpdate</strong></td> <td>组件将要更新之前获取快照值(基本不用)</td></tr> <tr><td><strong>componentDidUpdate</strong></td> <td>组件更新完毕</td></tr> <tr><td><strong>componentWillUnmount</strong></td> <td>组件卸载之前</td></tr></tbody></table> <ul><li><p>一些不常用的构子的传递参数问题</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 若 state 的值在任何时候都取决于 props, 那么可以使用 getDerivedStateFromProps</span>
<span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token comment">/* 
     收到两个参数
         props 外面传进来的 props 
         state 和当前的 state
     必须返回一个 state 对象 或 null
     将会把返回的state对象作为该组件实例的状态, 并且无法修改
 */</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getDerivedStateFromProps'</span><span class="token punctuation">,</span>props<span class="token punctuation">,</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> props
<span class="token punctuation">}</span>

<span class="token comment">/* 
 在更新之前获取快照, 必须返回一个快照值 值可以是任何值
     会传递给 componentDidUpdate钩子
*/</span>
<span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getSnapshotBeforeUpdate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 组件更新完毕的钩子</span>
<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">preProps<span class="token punctuation">,</span>preState<span class="token punctuation">,</span>snapshotValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">/* 
      收到三个参数
          preProps 先前传递的 props 
          preState 先前的 state
          snapshotValue  getSnapshotBeforeUpdate钩子返回的快照值
  */</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Count---componentDidUpdate'</span><span class="token punctuation">,</span>preProps<span class="token punctuation">,</span>preState<span class="token punctuation">,</span>snapshotValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div></li></ul> <h3 id="生命周期的三个阶段-新"><a class="header-anchor" href="#生命周期的三个阶段-新">#</a> 生命周期的三个阶段（新）</h3> <ol><li>初始化阶段: 由 ReactDOM.render()触发---初次渲染
<ul><li>constructor()</li> <li>getDerivedStateFromProps()</li> <li>render()</li> <li><strong>componentDidMount</strong>() ===&gt; 常用</li></ul></li> <li>更新阶段: 由组件内部 this.setSate()或父组件重新 render 触发
<ul><li>getDerivedStateFromProps()</li> <li>shouldComponentUpdate()</li> <li><strong>render</strong>() ===&gt; 必须使用的一个</li> <li>getSnapshotBeforeUpdate()</li> <li>componentDidUpdate()</li></ul></li> <li>卸载组件: 由 ReactDOM.unmountComponentAtNode()触发
<ul><li><strong>componentWillUnmount</strong>() ===&gt; 常用</li></ul></li></ol> <h3 id="重要的勾子"><a class="header-anchor" href="#重要的勾子">#</a> 重要的勾子</h3> <ul><li><strong>render：初始化渲染或更新渲染调用</strong></li> <li><strong>componentDidMount：开启监听, 开启定时器, 发送 ajax 请求</strong></li> <li><strong>componentWillUnmount：做一些收尾工作, 如: 清理定时器, 取消订阅消息</strong></li></ul> <h3 id="即将废弃的三个勾子"><a class="header-anchor" href="#即将废弃的三个勾子">#</a> 即将废弃的三个勾子</h3> <ul><li>componentWillMount</li> <li>componentWillReceiveProps</li> <li>componentWillUpdate</li></ul> <blockquote><p>现在使用会出现警告，下一个大版本需要加上 <code>UNSAFE_</code>前缀才能使用，以后可能会被彻底废弃，不建议使用</p></blockquote> <h3 id="新推出的两个构子-基本用不上"><a class="header-anchor" href="#新推出的两个构子-基本用不上">#</a> 新推出的两个构子(基本用不上)</h3> <ul><li>getSnapshotBeforeUpdate</li> <li>getDerivedStateFromProps</li></ul> <h2 id="react遍历列表时-key的内部原理"><a class="header-anchor" href="#react遍历列表时-key的内部原理">#</a> react遍历列表时, key的内部原理</h2> <ol><li><p>虚拟DOM中key的作用：</p> <ul><li><p>简单的说: key是虚拟DOM对象的标识, 在更新显示时key起着极其重要的作用</p></li> <li><p>详细的说: 当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】, 随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</p> <ul><li>旧虚拟DOM中找到了与新虚拟DOM相同的key：
<ul><li>若虚拟DOM中内容没变, 直接使用之前的真实DOM</li> <li>若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM</li> <li>旧虚拟DOM中未找到与新虚拟DOM相同的key 根据数据创建新的真实DOM，随后渲染到到页面</li></ul></li></ul></li></ul></li> <li><p>用index作为key可能会引发的问题：</p> <ul><li><p>若对数据进行：逆序添加、逆序删除等破坏顺序操作:</p> <ul><li>会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低</li></ul></li> <li><p>如果结构中还包含输入类的DOM：</p> <ul><li>会产生错误DOM更新 ==&gt; 界面有问题</li></ul></li> <li><p>注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，</p> <ul><li>仅用于渲染列表用于展示，使用index作为key是没有问题的</li></ul></li></ul></li> <li><p>如何选择key:</p> <ul><li>最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号等唯一值</li> <li>如果确定只是简单的展示数据，用index也是可以的</li></ul></li></ol> <h2 id="react-脚手架"><a class="header-anchor" href="#react-脚手架">#</a> React 脚手架</h2> <ol><li>xxx 脚手架: 用来帮助程序员快速创建一个基于 xxx 库的模板项目
<ul><li>包含了所有需要的配置（语法检查、jsx 编译、devServer…）</li> <li>下载好了所有相关的依赖</li> <li>可以直接运行一个简单效果</li></ul></li> <li>react 提供了一个用于创建 react 项目的脚手架库: <code>create-react-app</code></li> <li>项目的整体技术架构为: <code>react + webpack + es6 + eslint</code></li> <li>使用脚手架开发的项目的特点: 模块化, 组件化, 工程化</li></ol> <h3 id="创建项目并启动"><a class="header-anchor" href="#创建项目并启动">#</a> 创建项目并启动</h3> <ul><li>全局安装：<code>npm install -g create-react-app</code></li> <li>切换到要创建项目的目录里，使用命令：<code>create-react-app xxx</code></li> <li>进入项目文件夹：<code>cd xxx</code></li> <li>启动项目：<code>npm start</code></li></ul> <h3 id="react-脚手架项目结构"><a class="header-anchor" href="#react-脚手架项目结构">#</a> react 脚手架项目结构</h3> <div class="language- extra-class"><pre><code>public ---- 静态资源文件夹
    favicon.icon ------ 网站页签图标
    index.html -------- 主页面 ---&gt; 重要
    logo192.png ------- logo 图
    logo512.png ------- logo 图
    manifest.json ----- 应用加壳的配置文件
    robots.txt -------- 爬虫协议文件
src ---- 源码文件夹
    App.css -------- App 组件的样式
    App.js --------- App 组件 ---&gt; 重要
    App.test.js ---- 用于给 App 做测试
    index.css ------ 样式
    index.js ------- 入口文件 ---&gt; 重要
    logo.svg ------- logo 图
    reportWebVitals.js
    --- 页面性能分析文件(需要 web-vitals 库的支持)
    setupTests.js
    ---- 组件单元测试的文件(需要 jest-dom 库的支持)
</code></pre></div><h3 id="react-文件的模块化"><a class="header-anchor" href="#react-文件的模块化">#</a> react 文件的模块化</h3> <ul><li>每一个组件都是一个文件夹, 里面包括 组件(<code>jsx</code> <code>js</code>), <code>css</code>, 图片, 音视频资源等等</li> <li>css 也可以模块化:
<ul><li>文件名必须加上 <code>.module</code> 例如: <code>Hello.module.css</code></li> <li>可以用一个变量引入接受:  <code>import test from './Hello.module.css</code></li> <li>使用: <code>&lt;h1 className={test.title}&gt;Hello, React&lt;/h1&gt;</code></li></ul></li></ul> <h3 id="todolist案例相关知识点"><a class="header-anchor" href="#todolist案例相关知识点">#</a> todoList案例相关知识点</h3> <ol><li>拆分组件、实现静态组件，注意：<code>className</code>、<code>style</code>的写法</li> <li>动态初始化列表，如何确定将数据放在哪个组件的state中？
<ul><li>某个组件使用：放在其自身的state中</li> <li>某些组件使用：放在他们共同的父组件state中（官方称此操作为：<code>状态提升</code>）</li></ul></li> <li>关于父子之间通信：
<ul><li>【父组件】给【子组件】传递数据：通过 props 传递</li> <li>【子组件】给【父组件】传递数据：通过 props 传递，要求父提前给子传递一个函数</li></ul></li> <li>注意 defaultChecked 和 checked 的区别，类似的还有：defaultValue 和 value</li> <li>状态在哪里，操作状态的方法就在哪里</li></ol> <h2 id="react脚手架配置代理"><a class="header-anchor" href="#react脚手架配置代理">#</a> react脚手架配置代理</h2> <ul><li><p>方法一</p> <ul><li><p>在<code>package.json</code>中追加如下配置</p> <div class="language-json line-numbers-mode"><pre v-pre="" class="language-json"><code><span class="token property">&quot;proxy&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:5000&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <p>说明：</p> <ol><li>优点：配置简单，前端请求资源时可以不加任何前缀</li> <li>缺点：不能配置多个代理</li> <li>工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给5000 （优先匹配前端资源）</li></ol> <ul><li><p>方法二</p> <ul><li><p>第一步：创建代理配置文件</p> <div class="language- line-numbers-mode"><pre v-pre="" class="language-text"><code>在src下创建配置文件：src/setupProxy.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>编写<code>setupProxy.js</code>配置具体代理规则：</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment">// /api1是需要转发的请求(所有带有/api1前缀的请求都会转发给5000)</span>
      <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span> <span class="token comment">//配置转发目标地址(能返回数据的服务器地址)</span>
      <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//控制服务器接收到的请求头中host字段的值</span>
      <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'^/api1'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span> <span class="token comment">//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
      <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5001'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'^/api2'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul></li></ul> <p>说明：</p> <ol><li>优点：可以配置多个代理，可以灵活的控制请求是否走代理</li> <li>缺点：配置繁琐，前端请求资源时必须加前缀</li></ol> <h2 id="github搜索案例相关知识点"><a class="header-anchor" href="#github搜索案例相关知识点">#</a> github搜索案例相关知识点</h2> <ol><li><p>设计状态时要考虑全面，例如带有网络请求的组件，要考虑请求失败怎么办</p></li> <li><p>ES6小知识点：解构赋值+重命名</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>a<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">//传统解构赋值</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span>b<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">//连续解构赋值</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">b</span><span class="token operator">:</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">//连续解构赋值+重命名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>消息订阅与发布机制 <code>pubsub-js</code>插件</p> <ul><li>先订阅，再发布（理解：有一种隔空对话的感觉）</li> <li>适用于任意组件间通信</li> <li>要在组件的componentWillUnmount中取消订阅</li></ul></li> <li><p>fetch发送请求（关注分离的设计思想）</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchGET</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> response<span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求出错'</span><span class="token punctuation">,</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h2 id="react-路由的基本使用"><a class="header-anchor" href="#react-路由的基本使用">#</a> React 路由的基本使用</h2> <ol><li><p>下载: <code>npm install react-router-dom -S</code></p></li> <li><p>明确好界面中的导航区、展示区</p></li> <li><p>导航区的 a标签改为<code>Link</code>标签</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code> <span class="token comment">// 引入 Link </span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
 
 <span class="token comment">// to属性就是点击后跳转的地址(小写)</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/xxxxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">路由链接</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>展示区写<code>Route</code>标签进行路径的匹配</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code> <span class="token comment">// 引入 Route </span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
 
 <span class="token comment">// path 属性匹配路径  component 属性需要展示的组件</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/xxxx<span class="token punctuation">'</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Demo<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>&lt;App&gt;</code>组件的最外侧需要包裹了一个<code>&lt;BrowserRouter&gt;</code> 或 <code>&lt;HashRouter&gt;</code></p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code> <span class="token operator">...</span>略 
 <span class="token comment">// 引入 BrowserRouter 或 HashRouter 路由器</span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
 
 <span class="token comment">// 需要用路由器标签把App包裹着 这样就可以监测到所有组件的路由变化</span>
 ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
         </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
     document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ol> <ul><li>注意:
<ul><li><code>Link</code> 标签最终是会转换为 a标签的</li> <li>BrowserRouter 和 HashRouter
<ul><li><code>BrowserRouter</code> 地址栏就是 /xxx/xxx</li> <li><code>HashRouter</code> 地址栏会有#号 /xxx#/xxx, #后面的属性不会发送给后台</li> <li>后面会有详解</li></ul></li></ul></li></ul> <h3 id="路由组件与一般组件"><a class="header-anchor" href="#路由组件与一般组件">#</a> 路由组件与一般组件</h3> <ol><li>写法不同:
<ul><li>一般组件: <code>&lt;Demo/&gt;</code></li> <li>路由组件: <code>&lt;Route path=&quot;/demo&quot; component={Demo}/&gt;</code></li></ul></li> <li>存放文件不同:
<ul><li>一般组件: <code>components</code></li> <li>路由组件: <code>pages</code></li></ul></li> <li>接收到的props不同:
<ul><li>一般组件: 写组件标签时传递了什么，就能收到什么</li> <li>路由组件: 接收到三个固定的属性</li></ul></li></ol> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token literal-property property">history</span><span class="token operator">:</span>
    <span class="token literal-property property">go</span><span class="token operator">:</span> ƒ <span class="token function">go</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// 正数前进 负数后退</span>
    <span class="token literal-property property">goBack</span><span class="token operator">:</span> ƒ <span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 后退</span>
    <span class="token literal-property property">goForward</span><span class="token operator">:</span> ƒ <span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 前进</span>
    <span class="token literal-property property">push</span><span class="token operator">:</span> ƒ <span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token comment">// push 跳转</span>
    <span class="token literal-property property">replace</span><span class="token operator">:</span> ƒ <span class="token function">replace</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token comment">// replace 跳转</span>

<span class="token literal-property property">location</span><span class="token operator">:</span>
    <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&quot;/about&quot;</span>
    <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token comment">// search 参数</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token comment">// state 参数</span>

<span class="token literal-property property">match</span><span class="token operator">:</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// params 参数</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/about&quot;</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/about&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="navlink与封装navlink"><a class="header-anchor" href="#navlink与封装navlink">#</a> NavLink与封装NavLink</h2> <h3 id="navlink"><a class="header-anchor" href="#navlink">#</a> NavLink</h3> <div class="language- extra-class"><pre><code>NavLink 可以实现路由链接的高亮，通过activeClassName 指定路由匹配时的样式名
</code></pre></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引入 NavLink</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token comment">// 路径匹配时 自动添加 hello 类名</span>
<span class="token operator">&lt;</span>NavLink activeClassName<span class="token operator">=</span><span class="token string">&quot;hello&quot;</span> className<span class="token operator">=</span><span class="token string">&quot;list-group-item&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>NavLink activeClassName<span class="token operator">=</span><span class="token string">&quot;hello&quot;</span> className<span class="token operator">=</span><span class="token string">&quot;list-group-item&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="封装navlink"><a class="header-anchor" href="#封装navlink">#</a> 封装NavLink</h3> <div class="language- extra-class"><pre><code> 组件标签体内容是一个特殊的标签属性
 通过 this.props.children 可以获取组件标签体内容
 在组件标签里设置也可以生效 children=&quot;xxx&quot;
</code></pre></div><div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token comment">// MyNavLink 组件内 事先封装好</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyNavLink</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(this.props);</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token comment">// {...this.props} 可以自动把外面传递进来的属性全部展开 </span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">activeClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-group-item<span class="token punctuation">&quot;</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 可以直接将需要的属性通过 props 传递进去 </span>
<span class="token keyword">import</span> MyNavLink <span class="token keyword">from</span> <span class="token string">'./components/MyNavLink'</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyNavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">a</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span> <span class="token attr-name">b</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span></span> <span class="token attr-name">c</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyNavLink</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyNavLink</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyNavLink</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="switch的使用"><a class="header-anchor" href="#switch的使用">#</a> Switch的使用</h2> <div class="language- extra-class"><pre><code>通常情况下，path 和 component 是一 一对应的关系
Switch 可以提高路由匹配效率(单一匹配)
</code></pre></div><div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token punctuation">{</span><span class="token comment">/* 注册路由, 匹配上同一个地址的路由只会展示第一个匹配上的 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Test<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="解决多级路径刷新页面样式丢失的问题"><a class="header-anchor" href="#解决多级路径刷新页面样式丢失的问题">#</a> 解决多级路径刷新页面样式丢失的问题</h3> <ol><li>public/index.html 中 引入样式时不写 ./ 写 / （常用）</li> <li>public/index.html 中 引入样式时不写 ./ 写 %PUBLIC_URL% （常用）</li> <li>使用 HashRouter 路由模式</li></ol> <h3 id="路由的严格匹配与模糊匹配"><a class="header-anchor" href="#路由的严格匹配与模糊匹配">#</a> 路由的严格匹配与模糊匹配</h3> <ol><li>默认使用的是模糊匹配（简单记：【输入的路径】必须包含要【匹配的路径】，且顺序要一致）</li> <li>开启严格匹配：<code>exact={true}</code></li></ol> <blockquote><p>严格匹配不要随便开启，需要再开，有些时候开启会导致无法继续匹配二级路由</p></blockquote> <h2 id="redirect的使用"><a class="header-anchor" href="#redirect的使用">#</a> Redirect的使用</h2> <ol><li><p>一般写在所有路由注册的最下方，当所有路由都无法匹配时，跳转到<code>Redirect</code>指定的路由</p></li> <li><p>具体编码：</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span> Redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <h2 id="嵌套路由"><a class="header-anchor" href="#嵌套路由">#</a> 嵌套路由</h2> <ol><li>注册子路由时要写上父路由的 path 值</li> <li>路由的匹配是按照注册路由的顺序进行的</li> <li>不要随便开启严格匹配, 开启了就无法匹配到子路由了</li></ol> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>我是Home的内容<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">&quot;nav nav-tabs&quot;</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
                       <span class="token comment">// 使用 自己封装的 MyNavLink 组件</span>
                      <span class="token operator">&lt;</span>MyNavLink to<span class="token operator">=</span><span class="token string">&quot;/home/news&quot;</span> <span class="token operator">&gt;</span>News<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>MyNavLink to<span class="token operator">=</span><span class="token string">&quot;/home/message&quot;</span> <span class="token operator">&gt;</span>Message<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

              <span class="token punctuation">{</span><span class="token comment">/* 注册子路由 */</span><span class="token punctuation">}</span>
              <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/news&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>News<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/message&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Message<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">&quot;/home/news&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="向路由组件传递参数"><a class="header-anchor" href="#向路由组件传递参数">#</a> 向路由组件传递参数</h2> <h3 id="params-参数"><a class="header-anchor" href="#params-参数">#</a> params 参数</h3> <ul><li><p>路由链接(携带参数)：</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token comment">// 简单携带</span>
 <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/demo/test/zhangsan/18'</span><span class="token operator">&gt;</span>详情<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
 <span class="token comment">// 携带变量</span>
 <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/demo/test/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>详情<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>注册路由(声明接收)：</p> <div class="language-html line-numbers-mode"><pre v-pre="" class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/test/:name/:age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{Test}/</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>使用参数：</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>xxx<span class="token punctuation">;</span>
 <span class="token keyword">const</span> <span class="token punctuation">{</span>xxx<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <blockquote><p>携带了的参数必须要声明接受, 不然是接受不到</p></blockquote> <h3 id="search-参数"><a class="header-anchor" href="#search-参数">#</a> search 参数</h3> <ul><li><p>路由链接(携带参数)：</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token comment">// 简单携带  </span>
 <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/demo/test?name=zhangsan&amp;age=18'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>详情<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
  
 <span class="token comment">// 携带变量</span>
 <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/demo/test?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;age=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>详情<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>注册路由(无需声明，正常注册即可)：</p> <div class="language-html line-numbers-mode"><pre v-pre="" class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{Test}/</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>使用参数：</p> <ul><li><p>备注：获取到的<code>search</code>是 urlencoded 编码字符串，需要借助<code>querystring</code>库解析(React自带)</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引入 querystring</span>
<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'querystring'</span>

<span class="token comment">// 使用 querystring 解析</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>search<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">;</span> <span class="token comment">// ?name=zhangsan&amp;age=18</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul> <h3 id="state-参数"><a class="header-anchor" href="#state-参数">#</a> state 参数</h3> <ul><li>路由链接(携带参数)：<div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token comment">// 简单携带  </span>
 <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">'/demo/test'</span><span class="token punctuation">,</span><span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>详情<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
  
 <span class="token comment">// 携带变量</span>
 <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">pathname</span><span class="token operator">:</span><span class="token string">'/demo/test'</span><span class="token punctuation">,</span><span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span>data<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span>data<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>详情<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li>注册路由(无需声明，正常注册即可)：<div class="language-html line-numbers-mode"><pre v-pre="" class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{Test}/</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>使用参数：
<ul><li><p>备注：刷新也可以保留参数</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">.</span>xxx
<span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li></ul> <h2 id="路由的跳转模式"><a class="header-anchor" href="#路由的跳转模式">#</a> 路由的跳转模式</h2> <h3 id="push"><a class="header-anchor" href="#push">#</a> push</h3> <div class="language- extra-class"><pre><code>默认就是 push, 类似于栈的结构, 先进后出, 会留下历史记录
</code></pre></div><h3 id="replace"><a class="header-anchor" href="#replace">#</a> replace</h3> <div class="language- extra-class"><pre><code>替换当前栈顶的页面, 不会留下历史记录, 会替换当前的页面
</code></pre></div><ul><li><p>使用, 在路由跳转标签加上 <code>replace</code></p> <div class="language-html line-numbers-mode"><pre v-pre="" class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">replace</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/demo/test<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h2 id="编程式路由导航"><a class="header-anchor" href="#编程式路由导航">#</a> 编程式路由导航</h2> <div class="language- extra-class"><pre><code>借助 this.prosp.history 对象上的API可以操作路由跳转、前进、后退
</code></pre></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// replace 跳转 </span>
<span class="token comment">// replace 跳转 + 携带 params 参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/demo/test/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// replace 跳转 + 携带 search 参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/demo/test?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}&amp;age=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// replace 跳转 + 携带 state 参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/demo/test'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span>data<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span>data<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// push 跳转</span>
<span class="token comment">// push 跳转 + 携带 params 参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/demo/test/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// push 跳转 + 携带 search 参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/demo/test?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}&amp;age=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// push 跳转 + 携带 state 参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/demo/test'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span>data<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span>data<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 回退</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 前进</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 正数表示 前进 n 步</span>
<span class="token comment">// 负数表示 后退 n 步</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="withrouter"><a class="header-anchor" href="#withrouter">#</a> withRouter</h2> <ul><li><p>withRouter 可以加工一般组件, 让一般组件具备路由组件所有的API</p></li> <li><p>withRouter 的返回值是一个新组件</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token comment">// 引入  withRouter</span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
  
 <span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
     <span class="token operator">...</span>
 <span class="token punctuation">}</span>
  
 <span class="token comment">// 加工一般组件并暴露</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Header<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h2 id="browserrouter与hashrouter的区别"><a class="header-anchor" href="#browserrouter与hashrouter的区别">#</a> BrowserRouter与HashRouter的区别</h2> <ol><li><p>底层原理不一样：</p> <ul><li>BrowserRouter 使用的是H5的history API，不兼容IE9及以下版本</li> <li>HashRouter 使用的是URL的哈希值</li></ul></li> <li><p>path 表现形式不一样</p> <ul><li>BrowserRouter 的路径中没有#, 例如：localhost:3000/demo/test
<ul><li>HashRouter 的路径包含#, 例如：localhost:3000/#/demo/test</li> <li>#号后面的属性不会作为参数传递给后台</li></ul></li></ul></li> <li><p>刷新后对路由 state 参数的影响</p> <ul><li>BrowserRouter 没有任何影响，因为 state 保存在 history  对象中</li> <li>HashRouter 刷新后会导致路由 state 参数的丢失!!!</li></ul></li> <li><p>备注：HashRouter 可以用于解决一些路径错误相关的问题</p></li></ol> <h2 id="路由组件的lazyload"><a class="header-anchor" href="#路由组件的lazyload">#</a> 路由组件的lazyLoad</h2> <div class="language- extra-class"><pre><code>路由的懒加载, 使用时再加载
</code></pre></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">//1.通过 React 的 lazy函数 配合import()函数 动态加载路由组件 ===&gt; 路由组件代码会被分开打包</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span>lazy<span class="token punctuation">,</span>Suspense<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">'./Loading'</span>
<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Home'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">const</span> About <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./About'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//2.通过 &lt;Suspense&gt; 指定在加载得到路由打包文件前显示一个 fallback 属性指定的 Loading组件</span>
<span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Loading<span class="token operator">/</span><span class="token operator">&gt;&gt;</span>
	<span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="redux-非官方"><a class="header-anchor" href="#redux-非官方">#</a> redux(非官方)</h2> <div class="language- extra-class"><pre><code>比较难使用, 后面有官方出的库 react-redux
</code></pre></div><ol><li><code>redux</code> 是一个专门用于做状态管理的 JS 库(不是 react 插件库)</li> <li>它可以用在 react, angular, vue 等项目中, 但基本都是与 react 配合使用</li> <li>作用: 集中式管理 react 应用中多个组件<code>共享</code>的状态, 类似于 vue 中 vuex</li></ol> <img src="/note-sites/assets/img/redux原理图.4afb4200.png"> <h3 id="什么情况下需要使用-redux"><a class="header-anchor" href="#什么情况下需要使用-redux">#</a> 什么情况下需要使用 redux</h3> <ol><li>某个组件的状态，需要让其他组件可以随时拿到（共享）</li> <li>一个组件需要改变另一个组件的状态（通信）</li> <li>总体原则：能不用就不用, 如果不用比较吃力才考虑使用</li></ol> <h3 id="redux-的三个核心概念"><a class="header-anchor" href="#redux-的三个核心概念">#</a> redux 的三个核心概念</h3> <h4 id="action"><a class="header-anchor" href="#action">#</a> action</h4> <ol><li>动作的对象</li> <li>包含 2 个属性
<ul><li>type：标识属性, 值为字符串, 唯一, 必要属性</li> <li>data：数据属性, 值类型任意, 可选属性</li></ul></li> <li>例子：{ type: 'ADD_STUDENT',data:{name: 'tom',age:18} }</li></ol> <h4 id="reducer"><a class="header-anchor" href="#reducer">#</a> reducer</h4> <ol><li>用于初始化状态、加工状态</li> <li>加工时，根据旧的 state 和 action， 产生新的 state 的纯函数</li></ol> <h4 id="store"><a class="header-anchor" href="#store">#</a> store</h4> <ol><li>将 state、action、reducer 联系在一起的对象</li> <li>如何得到此对象?
<ul><li><code>import {createStore} from 'redux'</code></li> <li><code>import reducer from './reducers'</code></li> <li><code>const store = createStore(reducer)</code></li></ul></li> <li>此对象的功能?
<ul><li><code>getState()</code>: 得到 state</li> <li><code>dispatch(action)</code>: 分发 action, 触发 reducer 调用, 产生新的 state</li> <li><code>subscribe(listener)</code>: 注册监听, 当产生了新的 state 时, 自动调用</li></ul></li></ol> <h2 id="求和案例-redux精简版"><a class="header-anchor" href="#求和案例-redux精简版">#</a> 求和案例_redux精简版</h2> <ul><li><p>去除Count组件自身的状态</p></li> <li><p><code>src</code>下建立 <code>redux/store.js</code> 和 <code>redux/count_reducer.js</code>:</p> <ul><li><p><code>store.js</code> 文件就流程：</p> <ul><li><p>引入 <code>redux</code> 中的 <code>createStore</code> 函数，创建一个 <code>store</code></p></li> <li><p><code>createStore</code> 调用时要传入一个为其服务的 <code>reducer</code></p></li> <li><p>记得暴露 store 对象</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>  <span class="token comment">// 该文件专门用于暴露一个 store 对象，整个应用只有一个 store 对象</span>
    
  <span class="token comment">//引入 createStore，专门用于创建 redux 中最为核心的 store 对象</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
  <span class="token comment">//引入为 Count 组件服务的 reducer</span>
  <span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span>
  <span class="token comment">//暴露 store</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul></li> <li><p><code>count_reducer.js</code> 文件就流程：</p> <ul><li><p><code>reducer</code>的本质是一个函数，接收：<code>preState</code>, <code>action</code>，返回加工后的状态</p></li> <li><p><code>reducer</code>有两个作用：初始化状态，加工状态</p></li> <li><p><code>reducer</code>被第一次调用时，是<code>store</code>自动触发的，</p> <ul><li><p>传递的<code>preState</code>是<code>undefined</code>,</p></li> <li><p>传递的<code>action</code>是: <code>{type:'@@REDUX/INIT_...}</code></p></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>  <span class="token comment">/* 
       该文件是用于为创建一个为 Count组件服务的 reducer, reducer本质上就是一个函数
           reducer 函数会接受两个参数, 分别为: 之前的状态(preState), 动作对象(action)
  */</span>
  
 <span class="token comment">// 初始化 staet </span>
  <span class="token keyword">const</span> inieState <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">countReducer</span><span class="token punctuation">(</span><span class="token parameter">preState<span class="token operator">=</span>inieState<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 从 action 对象中获取: type, data</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>type<span class="token punctuation">,</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>
  
      <span class="token comment">// 根据 type 决定如何加工数据</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token operator">:</span> <span class="token comment">// 加</span>
              <span class="token keyword">return</span>  preState <span class="token operator">+</span> data<span class="token punctuation">;</span>
          <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token operator">:</span> <span class="token comment">// 减</span>
              <span class="token keyword">return</span>  preState <span class="token operator">-</span> data<span class="token punctuation">;</span>    
          <span class="token keyword">default</span><span class="token operator">:</span>
              <span class="token keyword">return</span> preState<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></li></ul></li> <li><p>在 <code>index.js</code> 中监测 <code>store</code> 中状态的改变，一旦发生改变重新渲染<code>&lt;App/&gt;</code></p> <ul><li><p>备注：<code>redux</code>只负责管理状态，至于状态的改变驱动着页面的展示，要靠我们自己写</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>   <span class="token comment">// 引入 store, 用于获取 redux 中保存的状态</span>
   <span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'../../redux/store'</span>
   
   <span class="token comment">// index.js 入口文件内检测数据变化一劳永逸</span>
   store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   
   
   <span class="token comment">// 对应组件内一个一个写</span>
   <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// 检测 redux 中状态的变化, 只要变化, 就调用 render</span>
       store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">// this.setState({});</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul></li></ul> <h2 id="求和案例-redux完整版"><a class="header-anchor" href="#求和案例-redux完整版">#</a> 求和案例_redux完整版</h2> <p>新增文件：</p> <ol><li><p><code>src/redux/constant.js</code> 放置需要使用的常量</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">/* 
    该模块是用于定义 action 对象中 type 类型的常量值, 目的只有一个: 便于管理的同时防止程序员单词写错
*/</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INCREMENT</span> <span class="token operator">=</span> <span class="token string">'increment'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DECREMENT</span> <span class="token operator">=</span> <span class="token string">'decrement'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>src/redux/count_action.js</code> 专门用于创建action对象</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">/* 
 该文件专门为 Count 组件生成 action 对象
*/</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">INCREMENT</span><span class="token punctuation">,</span><span class="token constant">DECREMENT</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./constant'</span>

<span class="token comment">// 常规函数写法</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createIncrementAction</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">INCREMENT</span><span class="token punctuation">,</span> data <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 箭头函数写法</span>
<span class="token keyword">export</span> <span class="token keyword">const</span>  <span class="token function-variable function">createDecrementAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DECREMENT</span><span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol> <h2 id="求和案例-redux异步action版"><a class="header-anchor" href="#求和案例-redux异步action版">#</a> 求和案例_redux异步action版</h2> <ol><li>明确：延迟(异步)的动作不想交给组件自身，想交给action</li> <li>何时需要异步action：想要对状态进行操作，但是具体的数据靠异步任务返回</li> <li>具体编码：</li></ol> <ul><li><p>使用 <code>redux-thunk</code> 库，并配置在<code>redux/store</code>文件中</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 需在 redux 引入 applyMiddleware 来使用中间件 redux-thunk</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">,</span>applyMiddleware<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token comment">// 引入 redux-thunk, 用于支持异步 action</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>
<span class="token comment">// 将 中间件作为 createStore 函数的第二个参数使用</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>创建action的函数不再返回一般对象，而是一个函数，该函数中写异步任务, 在 <code>redux/count_action.js</code>文件中</p></li> <li><p>当异步任务有结果后，分发一个同步的 action 去真正操作数据</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createIncrementAction</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">INCREMENT</span><span class="token punctuation">,</span> data <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    
<span class="token comment">// 所谓的异步 action, 就是指 action 的值为函数, 异步 acting 一般都会调用同步 action </span>
<span class="token comment">// 异步 action 不是必须要用的</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createIncrementAsyncAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 收到参数 dispatch</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 通知 reducer 加工状态</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul> <blockquote><p>异步action不是必须要写的，完全可以在组件里自己等待异步任务的结果了再去分发同步action</p></blockquote> <img src="/note-sites/assets/img/react-redux模型图.9f59e99e.png"> <h2 id="求和案例-react-redux基本使用"><a class="header-anchor" href="#求和案例-react-redux基本使用">#</a> 求和案例_react-redux基本使用</h2> <ol><li>明确两个概念：</li></ol> <div class="language- extra-class"><pre><code>- UI组件: 不能使用任何redux的api，只负责页面的呈现、交互等
- 容器组件: 负责和redux通信，通过props将结果交给UI组件
</code></pre></div><ol start="2"><li><p>如何创建一个容器组件————靠react-redux 的 connect函数</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token comment">// 引入 Count 的 UI 组件</span>
<span class="token keyword">import</span> CountUI <span class="token keyword">from</span> <span class="token string">'../../component/Count'</span>
<span class="token comment">// 引入 connect 用于连接 UI组件 与 redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token comment">// 引入 action </span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  createIncrementAction<span class="token punctuation">,</span>
  createDecrementAction<span class="token punctuation">,</span>
  createIncrementAsyncAction
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../redux/count_action'</span>

<span class="token comment">////////////////////////////////如下是 connect的完整写法</span>
<span class="token comment">/* 
  1.mapStateToProps函数返回的是一个对象；
  2.返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value
  3.mapStateToProps用于传递状态
*/</span>

<span class="token comment">// 会直接收到状态 redux 的状态</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* 
  1.mapDispatchToProps函数返回的是一个对象；
  2.返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value
  3.mapDispatchToProps用于传递操作状态的方法
*/</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span> <span class="token comment">// 会直接收到状态 dispatch</span>
   <span class="token punctuation">{</span>
       <span class="token function-variable function">jia</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function-variable function">jian</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function-variable function">jianAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//使用 connect()() 创建并暴露一个 Count 的容器组件(连接UI组件)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>

<span class="token comment">/////////////////////////////////如下是 connect的简写</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 映射状态</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><blockquote><p>UI组件通过<code>props</code>就可以使用容器组件传递的状态或方法</p></blockquote></li> <li><p><code>mapStateToProps</code>:映射状态，返回值是一个对象</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token comment">// mapDispatchToProps 的一般写法</span>
<span class="token comment">/* dispatch =&gt; ({ // 映射操作状态的方法
    jia: number =&gt; dispatch(createIncrementAction(number)),
jian: number =&gt; dispatch(createDecrementAction(number)),
    jianAsync: (number, time) =&gt; dispatch(createIncrementAsyncAction(number, time)),
}) */</span>

<span class="token comment">// mapDispatchToProps 的简写</span>
<span class="token comment">// react-redux 会自动将 active 分发(dispatch)</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">jia</span><span class="token operator">:</span>createIncrementAction<span class="token punctuation">,</span>
    <span class="token literal-property property">jian</span><span class="token operator">:</span>createDecrementAction<span class="token punctuation">,</span>
    <span class="token literal-property property">jianAsync</span><span class="token operator">:</span>createIncrementAsyncAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>容器组件中的store是靠<code>props传进去</code>的，而不是在容器组件中直接引入</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">// 引入 容器组件</span>
<span class="token keyword">import</span> Count <span class="token keyword">from</span> <span class="token string">'./containers/Count'</span>
<span class="token comment">// 引入 store</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span><span class="token comment">/* 给容器组件传递 store */</span><span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Count</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol> <h2 id="求和案例-react-redux优化"><a class="header-anchor" href="#求和案例-react-redux优化">#</a> 求和案例_react-redux优化</h2> <ol><li><p>容器组件和UI组件整合成一个文件</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">// 引入 connect 用于连接 UI组件 与 redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token comment">// 引入 action </span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    createIncrementAction<span class="token punctuation">,</span>
    createDecrementAction<span class="token punctuation">,</span>
    createIncrementAsyncAction
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../redux/count_action'</span>

<span class="token comment">// 定义UI组件</span>
<span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>

<span class="token comment">//使用 connect()() 创建并暴露一个 Count 的容器组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
    <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 映射状态</span>

    <span class="token punctuation">{</span>
        <span class="token literal-property property">jia</span><span class="token operator">:</span>createIncrementAction<span class="token punctuation">,</span>
        <span class="token literal-property property">jian</span><span class="token operator">:</span>createDecrementAction<span class="token punctuation">,</span>
        <span class="token literal-property property">jianAsync</span><span class="token operator">:</span>createIncrementAsyncAction<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li> <li><p>无需自己给容器组件传递<code>store</code>，给<code>&lt;App/&gt;</code>包裹一个<code>&lt;Provider store={store}&gt;</code>即可</p></li> <li><p>使用了<code>react-redux</code>后也不用再自己检测redux中状态的改变了，容器组件可以自动完成这个工作</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p><code>mapDispatchToProps</code>也可以简单的写成一个对象</p></li> <li><p>一个组件要和redux“打交道”要经过哪几步？
定义好UI组件---不暴露</p> <ul><li><p>引入connect生成一个容器组件，并暴露，写法如下：</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//映射状态</span>
	<span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>xxxxxAction<span class="token punctuation">}</span> <span class="token comment">//映射操作状态的方法</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">UI</span>组件<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <blockquote><p>在UI组件中通过<code>this.props.xxx</code>读取和操作状态</p></blockquote></li></ol> <h2 id="求和案例-react-redux数据共享版"><a class="header-anchor" href="#求和案例-react-redux数据共享版">#</a> 求和案例_react-redux数据共享版</h2> <ol><li><p>定义一个Pserson组件，和Count组件通过redux共享数据</p></li> <li><p>为Person组件编写：reducer、action，配置constant常量</p></li> <li><p>重点：Person的reducer和Count的Reducer要使用<code>combineReducers</code>进行合并, 合并后的总状态是一个对象！！！</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">/* 
    该文件专门用于暴露一个 store 对象，整个应用只有一个 store 对象
*/</span>
<span class="token comment">//引入 combineReducers 用于合并状态对象</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">,</span>applyMiddleware<span class="token punctuation">,</span>combineReducers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token comment">//引入为 Count 组件服务的 reducer</span>
<span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./reducers/count'</span>
<span class="token comment">//引入为 Person 组件服务的 reducer</span>
<span class="token keyword">import</span> personReducer <span class="token keyword">from</span> <span class="token string">'./reducers/person'</span>
<span class="token comment">// 引入 redux-thunk, 用于支持异步 action</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>

<span class="token comment">// 汇总所有的 reducer 变为一个总的 reducer</span>
<span class="token keyword">const</span> allReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 这一句很重要</span>
    <span class="token literal-property property">he</span><span class="token operator">:</span> countReducer<span class="token punctuation">,</span>
    <span class="token literal-property property">rens</span><span class="token operator">:</span> personReducer
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//暴露 store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>allReducer<span class="token punctuation">,</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>交给store的是总的reducer，最后注意在组件中取出状态的时候，记得“取到位”</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 对应组件的映射需要注意拿到的状态是总的状态</span>

<span class="token comment">// Person</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
<span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">yiduiren</span><span class="token operator">:</span>state<span class="token punctuation">.</span>rens<span class="token punctuation">,</span><span class="token literal-property property">he</span><span class="token operator">:</span>state<span class="token punctuation">.</span>he<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 映射状态</span>
<span class="token punctuation">{</span><span class="token literal-property property">jiaYiRen</span><span class="token operator">:</span>createAddPersonAction<span class="token punctuation">}</span> <span class="token comment">// 映射操作状态的方法</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span>


<span class="token comment">// Count</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
 <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>he<span class="token punctuation">,</span> <span class="token literal-property property">renshu</span><span class="token operator">:</span>state<span class="token punctuation">.</span>rens<span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span> 
     <span class="token literal-property property">jia</span><span class="token operator">:</span>createIncrementAction<span class="token punctuation">,</span>
     <span class="token literal-property property">jian</span><span class="token operator">:</span>createDecrementAction<span class="token punctuation">,</span>
     <span class="token literal-property property">jianAsync</span><span class="token operator">:</span>createIncrementAsyncAction<span class="token punctuation">,</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ol> <h2 id="纯函数和高阶函数"><a class="header-anchor" href="#纯函数和高阶函数">#</a> 纯函数和高阶函数</h2> <h3 id="纯函数"><a class="header-anchor" href="#纯函数">#</a> 纯函数</h3> <ol><li>一类特别的函数: 只要是同样的输入(实参)，必定得到同样的输出(返回)</li> <li>必须遵守以下一些约束
<ul><li>不得改写参数数据</li> <li>不会产生任何副作用，例如网络请求，输入和输出设备</li> <li>不能调用 <code>Date.now()</code> 或者 <code>Math.random()</code> 等方法</li></ul></li></ol> <blockquote><p>注意: redux 的 reducer 函数必须是一个纯函数</p></blockquote> <h3 id="高阶函数"><a class="header-anchor" href="#高阶函数">#</a> 高阶函数</h3> <ol><li>理解: 一类特别的函数
<ul><li>情况 1: 参数是函数</li> <li>情况 2: 返回是函数</li></ul></li> <li>常见的高阶函数:
<ul><li>定时器设置函数</li> <li>数组的 <code>forEach()/map()/filter()/reduce()/find()/bind()</code></li> <li><code>Promise</code></li> <li><code>react-redux</code> 中的 <code>connect</code> 函数</li></ul></li> <li>作用: 能实现更加动态, 更加可扩展的功能</li></ol> <h2 id="求和案例-react-redux开发者工具的使用"><a class="header-anchor" href="#求和案例-react-redux开发者工具的使用">#</a> 求和案例_react-redux开发者工具的使用</h2> <ol><li><p>下载插件 <code>Redux DevTools</code> , 安装 <code>redux-devtools-extension</code></p></li> <li><p>store中进行配置</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引入 redux-devtools-extension</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>composeWithDevTools<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-devtools-extension'</span>

<span class="token comment">// 直接应用</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>allReducer<span class="token punctuation">,</span><span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 有异步 action 的应用</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>allReducer<span class="token punctuation">,</span><span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h2 id="求和案例-react-redux最终版"><a class="header-anchor" href="#求和案例-react-redux最终版">#</a> 求和案例_react-redux最终版</h2> <ol><li><p>所有变量名字要规范，尽量触发对象的<code>简写形式</code></p></li> <li><p><code>redux/reducers</code> 文件夹中，编写 index.js 专门用于<code>汇总</code>并暴露所有的 reducer</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">/* 
    该文件用于汇总所有的 reducer 汇总为一个总的 reducer
*/</span>
<span class="token comment">//引入 combineReducers，用于汇总多个 reducer</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>combineReducers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token comment">//引入为 Count 组件服务的 reducer</span>
<span class="token keyword">import</span> count <span class="token keyword">from</span> <span class="token string">'./count'</span>
<span class="token comment">//引入为 Person 组件服务的 reducer</span>
<span class="token keyword">import</span> person <span class="token keyword">from</span> <span class="token string">'./person'</span>
    
<span class="token comment">// 汇总所有的 reducer 变为一个总的 reducer</span>
<span class="token keyword">const</span> allReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	count<span class="token punctuation">,</span>
	person
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token keyword">export</span> <span class="token keyword">default</span> allReducer<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ol> <h2 id="render-props"><a class="header-anchor" href="#render-props">#</a> render props</h2> <p>如何向组件内部动态传入带有属性的结构(标签)?</p> <div class="language- extra-class"><pre><code>Vue中: 
	使用slot技术, 也就是通过组件标签体传入结构  &lt;Test&gt;&lt;div&gt;hello&lt;/div&gt;&lt;/Test&gt;


React中:
	使用children props: 通过组件标签体传入结构
	使用render props: 通过组件标签属性传入结构,而且可以携带数据，一般用render函数属性
</code></pre></div><h3 id="children-props"><a class="header-anchor" href="#children-props">#</a> children props</h3> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Test</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Deno</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">xxxx</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Deno</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Test</span></span><span class="token punctuation">&gt;</span></span>

<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span> <span class="token comment">// 获取 到 Deno 组件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>问题: 如果Deno组件需要Test组件内的数据 ==&gt; 做不到</p></blockquote> <h3 id="render-props-2"><a class="header-anchor" href="#render-props-2">#</a> render props</h3> <div class="language- extra-class"><pre><code>&lt;Test render={(xxx) =&gt; &lt;Demo data={xxx}&gt;&lt;/Demo&gt;}&gt;&lt;/Test&gt;
Test组件: {this.props.render(内部state数据)}
Demo组件: 读取Test组件传入的数据显示 {this.props.xxx} 
</code></pre></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 通过 render props的形式将 要显示的组件和数据带入内部</span>
<span class="token operator">&lt;</span><span class="token constant">A</span> render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token operator">&lt;</span><span class="token constant">B</span> name<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
	state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">}</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>我是<span class="token constant">A</span>组件<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
                <span class="token comment">// 预留一个位置 调用带入的render函数渲染想要显示的组件</span>
				<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>我是<span class="token constant">B</span>组件<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="hooks"><a class="header-anchor" href="#hooks">#</a> Hooks</h2> <h4 id="react-hook-hooks的介绍"><a class="header-anchor" href="#react-hook-hooks的介绍">#</a> React Hook/Hooks的介绍</h4> <div class="language- extra-class"><pre><code>1. Hook是React 16.8.0版本增加的新特性/新语法
2. 可以让你在函数组件中使用 state 以及其他的 React 特性
</code></pre></div><h4 id="三个常用的hook"><a class="header-anchor" href="#三个常用的hook">#</a> 三个常用的Hook</h4> <div class="language- extra-class"><pre><code> 1. State Hook: React.useState()
 2. Effect Hook: React.useEffect()
 3. Ref Hook: React.useRef()
</code></pre></div><h4 id="state-hook"><a class="header-anchor" href="#state-hook">#</a> State Hook</h4> <div class="language- extra-class"><pre><code>State Hook让函数组件也可以有state状态, 并进行状态数据的读写操作
</code></pre></div><ol><li>语法: <code>const [xxx, setXxx] = React.useState(initValue)</code></li> <li>useState()说明:
<ul><li>参数: 第一次初始化指定的值在内部作缓存</li> <li>返回值: 包含2个元素的数组, 第1个为<code>内部当前状态值</code>, 第2个为<code>更新状态值的函数</code></li></ul></li> <li>setXxx()2种写法:
<ul><li>setXxx(newValue): 参数为非函数值, 直接指定新的状态值, 内部用其覆盖原来的状态值</li> <li>setXxx(value =&gt; newValue): 参数为函数, 接收原本的状态值, 返回新的状态值, 内部用其覆盖原来的状态值</li></ul></li></ol> <h4 id="effect-hook"><a class="header-anchor" href="#effect-hook">#</a> Effect Hook</h4> <div class="language- extra-class"><pre><code>Effect Hook 可以让你在函数组件中执行副作用操作(用于模拟类组件中的生命周期钩子)
</code></pre></div><ol><li><p>React中的副作用操作:</p> <ul><li>发ajax请求数据获取</li> <li>设置订阅 / 启动定时器</li> <li>手动更改真实DOM</li></ul></li> <li><p>语法和说明:</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
 React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
     <span class="token comment">// 在此可以执行任何带副作用操作, 根据第二个参数来决定调用多少次</span>

     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">// 在组件卸载前执行, 相当于 componentWillUnmount() </span>
         <span class="token comment">// 在此做一些收尾工作, 比如清除定时器/取消订阅等</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment">// 如果指定的是[], 回调函数只会在第一次render()后执行, 相当于 componentDidMount()</span>
     <span class="token comment">// 如果有指定值 则会在对应值发生改变时调用, 相当于 componentDidUpdate()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>可以把 useEffect Hook 看做如下三个函数的组合</p> <ul><li>componentDidMount()</li> <li>componentDidUpdate()</li> <li>componentWillUnmount()</li></ul></li></ol> <h4 id="ref-hook"><a class="header-anchor" href="#ref-hook">#</a> Ref Hook</h4> <div class="language- extra-class"><pre><code>Ref Hook可以在函数组件中存储/查找组件内的标签或任意其它数据
</code></pre></div><ol><li>语法: <code>const refContainer = React.useRef()</code></li> <li>作用:保存标签对象, 功能与<code>React.createRef()</code>一样</li></ol> <h2 id="fragment"><a class="header-anchor" href="#fragment">#</a> Fragment</h2> <div class="language- extra-class"><pre><code>可以让根标签不必使用一个真实的DOM根标签, 会在渲染时丢掉
</code></pre></div><ul><li><p>使用方法:</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> // 需要指定key
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul> <blockquote><p>使用空标签也可以实现, 不过空标签不能指定key而 Fragment 可以指定 key</p></blockquote> <h2 id="context"><a class="header-anchor" href="#context">#</a> Context</h2> <div class="language- extra-class"><pre><code>一种组件间通信方式, 常用于【祖组件】与【后代组件】间通信
</code></pre></div><div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">创建Context容器对象</span><span class="token punctuation">(</span>必须得放到所有<span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span>都能访问到的地方<span class="token punctuation">)</span>：
	<span class="token keyword">import</span> React  <span class="token keyword">from</span> <span class="token string">'react'</span>
	<span class="token keyword">const</span> XxxContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
	
<span class="token number">2</span><span class="token punctuation">)</span> 渲染子组件时，外面包裹<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">xxxContext.Provider</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> 通过value属性给后代组件传递数据：
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xxxContext.Provider</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>数据<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		子组件
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xxxContext.Provider</span><span class="token punctuation">&gt;</span></span>
    
<span class="token number">3</span><span class="token punctuation">)</span> 后代组件读取数据：

	<span class="token comment">//第一种方式:仅适用于类组件 </span>
	  <span class="token keyword">static</span> contextType <span class="token operator">=</span> xxxContext  <span class="token comment">// 声明接收context</span>
	  <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token comment">// 读取context中的value数据</span>
	  
	<span class="token comment">//第二种方式: 函数组件与类组件都可以</span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xxxContext.Consumer</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	    </span><span class="token punctuation">{</span>
	      <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span> <span class="token comment">// value就是context中的value数据</span>
	        <span class="token keyword">return</span> 要显示的内容
	      <span class="token punctuation">)</span>
	    <span class="token punctuation">}</span><span class="token plain-text">
	  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xxxContext.Consumer</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><blockquote><p>一般情况都不会使用用context, 一般都用它的封装插件</p></blockquote> <h2 id="组件优化"><a class="header-anchor" href="#组件优化">#</a> 组件优化</h2> <h3 id="component的2个问题"><a class="header-anchor" href="#component的2个问题">#</a> Component的2个问题</h3> <ol><li><p>只要执行setState(), 即使不改变状态数据, 组件也会重新render ==&gt; 效率低</p></li> <li><p>只当前组件重新render, 就会自动重新 render 子组件，纵使子组件没有用到父组件的任何数据 ==&gt; 效率低</p></li></ol> <h3 id="效率高的做法"><a class="header-anchor" href="#效率高的做法">#</a> 效率高的做法</h3> <div class="language- extra-class"><pre><code>只有当组件的 state 或 props 数据发生改变时才重新 render
</code></pre></div><h3 id="原因"><a class="header-anchor" href="#原因">#</a> 原因</h3> <div class="language- extra-class"><pre><code>Component 中的 shouldComponentUpdate() 总是返回 true
</code></pre></div><h3 id="解决"><a class="header-anchor" href="#解决">#</a> 解决</h3> <ul><li><p>办法1(不推荐):</p> <div class="language-jsx line-numbers-mode"><pre v-pre="" class="language-jsx"><code><span class="token operator">-</span> <span class="token function">重写shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法
<span class="token operator">-</span> 比较新旧 state 或 props 数据<span class="token punctuation">,</span> 如果有变化才返回 <span class="token boolean">true</span><span class="token punctuation">,</span> 如果没有返回 <span class="token boolean">false</span>

<span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span>nextState</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//目前的 props 和 state</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">,</span>nextState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//接下要变化的 目标props，目标state</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>carName <span class="token operator">===</span> nextState<span class="token punctuation">.</span>carName
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>办法2(推荐):</p> <ul><li><p>不要使用Component创建组件, 使用PureComponent</p></li> <li><p>PureComponent重写了shouldComponentUpdate(), 只有state或props数据有变化才返回true</p></li> <li><p>注意:
只是进行state和props数据的浅比较, 如果只是数据对象内部数据变了, 会返回false<br>
不要直接修改state数据, 而是要产生新数据</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引入 PureComponent</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">test</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <blockquote><p>项目中一般使用PureComponent来优化</p></blockquote> <h2 id="错误边界"><a class="header-anchor" href="#错误边界">#</a> 错误边界</h2> <div class="language- extra-class"><pre><code>错误边界(Error boundary)：用来捕获后代组件错误，渲染出备用页面

只能捕获后代组件生命周期产生的错误，不能捕获自己组件产生的错误
和其他组件在合成事件、定时器中产生的错误
</code></pre></div><h3 id="使用方式"><a class="header-anchor" href="#使用方式">#</a> 使用方式：</h3> <div class="language- extra-class"><pre><code>getDerivedStateFromError 配合 componentDidCatch
</code></pre></div><div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'./Child'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    
	state <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">//用于标识子组件是否产生错误</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//当 Parent 的子组件出现报错时候，会触发 getDerivedStateFromError调用，并携带错误信息</span>
	<span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'@@@'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">hasError</span><span class="token operator">:</span> error <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>我是Parent组件<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
				<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError <span class="token operator">?</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>当前网络不稳定，请稍后再试<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="组件通信方式总结"><a class="header-anchor" href="#组件通信方式总结">#</a> 组件通信方式总结</h2> <ul><li><p>组件间的关系：</p> <ul><li>父子组件</li> <li>兄弟组件（非嵌套组件）</li> <li>祖孙组件（跨级组件）</li></ul></li></ul> <h3 id="几种通信方式"><a class="header-anchor" href="#几种通信方式">#</a> 几种通信方式：</h3> <ol><li>props：
<ul><li>children props</li> <li>render props</li></ul></li> <li>消息订阅-发布：
<ul><li>pubs-sub、event等等</li></ul></li> <li>集中式管理：
<ul><li>redux、dva等等</li></ul></li> <li>conText:
<ul><li>生产者-消费者模式</li></ul></li></ol> <h3 id="比较好的搭配方式"><a class="header-anchor" href="#比较好的搭配方式">#</a> 比较好的搭配方式：</h3> <div class="language- extra-class"><pre><code>父子组件：props
兄弟组件：消息订阅-发布、集中式管理
祖孙组件(跨级组件)：消息订阅-发布、集中式管理、conText(用的少，封装插件用的多)
</code></pre></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2023/2/27 19:41:45</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-bac73764 data-v-c0d124fa><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react-的介绍" class="sidebar-link reco-side-react-的介绍" data-v-bac73764>React 的介绍</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#相关-js-库" class="sidebar-link reco-side-相关-js-库" data-v-bac73764>相关 js 库</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#虚拟-dom-与真实-dom" class="sidebar-link reco-side-虚拟-dom-与真实-dom" data-v-bac73764>虚拟 DOM 与真实 DOM</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#jsx-基本使用" class="sidebar-link reco-side-jsx-基本使用" data-v-bac73764>JSX 基本使用</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#jsx里面能写什么" class="sidebar-link reco-side-jsx里面能写什么" data-v-bac73764>jsx里面能写什么</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react组件化编码" class="sidebar-link reco-side-react组件化编码" data-v-bac73764>React组件化编码</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#函数式组件" class="sidebar-link reco-side-函数式组件" data-v-bac73764>函数式组件</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#类式组件" class="sidebar-link reco-side-类式组件" data-v-bac73764>类式组件</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#state-状态" class="sidebar-link reco-side-state-状态" data-v-bac73764>state(状态)</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#state的理解" class="sidebar-link reco-side-state的理解" data-v-bac73764>state的理解:</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#state比较重要的注意点" class="sidebar-link reco-side-state比较重要的注意点" data-v-bac73764>state比较重要的注意点:</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#setstate更新状态的2种写法" class="sidebar-link reco-side-setstate更新状态的2种写法" data-v-bac73764>setState更新状态的2种写法</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#props-传递参数" class="sidebar-link reco-side-props-传递参数" data-v-bac73764>props(传递参数)</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#构造器与-props" class="sidebar-link reco-side-构造器与-props" data-v-bac73764>构造器与 props</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#函数式组件使用-props" class="sidebar-link reco-side-函数式组件使用-props" data-v-bac73764>函数式组件使用 props</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#props的理解" class="sidebar-link reco-side-props的理解" data-v-bac73764>props的理解:</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#props的作用" class="sidebar-link reco-side-props的作用" data-v-bac73764>props的作用</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#props-编码操作" class="sidebar-link reco-side-props-编码操作" data-v-bac73764>props 编码操作</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#props的注意点" class="sidebar-link reco-side-props的注意点" data-v-bac73764>props的注意点:</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#refs-标识" class="sidebar-link reco-side-refs-标识" data-v-bac73764>refs(标识)</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#字符串形式的-ref-官方不推荐使用" class="sidebar-link reco-side-字符串形式的-ref-官方不推荐使用" data-v-bac73764>字符串形式的 ref (官方不推荐使用)</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#回调函数式的-ref" class="sidebar-link reco-side-回调函数式的-ref" data-v-bac73764>回调函数式的 ref</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#createref" class="sidebar-link reco-side-createref" data-v-bac73764>createRef</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#事件处理" class="sidebar-link reco-side-事件处理" data-v-bac73764>事件处理</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#收集表单数据" class="sidebar-link reco-side-收集表单数据" data-v-bac73764>收集表单数据</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#非受控组件" class="sidebar-link reco-side-非受控组件" data-v-bac73764>非受控组件</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#受控组件" class="sidebar-link reco-side-受控组件" data-v-bac73764>受控组件</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#旧版本生命周期" class="sidebar-link reco-side-旧版本生命周期" data-v-bac73764>旧版本生命周期</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#生命周期的三个阶段-旧" class="sidebar-link reco-side-生命周期的三个阶段-旧" data-v-bac73764>生命周期的三个阶段（旧）</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#新版本生命周期" class="sidebar-link reco-side-新版本生命周期" data-v-bac73764>新版本生命周期</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#生命周期的三个阶段-新" class="sidebar-link reco-side-生命周期的三个阶段-新" data-v-bac73764>生命周期的三个阶段（新）</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#重要的勾子" class="sidebar-link reco-side-重要的勾子" data-v-bac73764>重要的勾子</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#即将废弃的三个勾子" class="sidebar-link reco-side-即将废弃的三个勾子" data-v-bac73764>即将废弃的三个勾子</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#新推出的两个构子-基本用不上" class="sidebar-link reco-side-新推出的两个构子-基本用不上" data-v-bac73764>新推出的两个构子(基本用不上)</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react遍历列表时-key的内部原理" class="sidebar-link reco-side-react遍历列表时-key的内部原理" data-v-bac73764>react遍历列表时, key的内部原理</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react-脚手架" class="sidebar-link reco-side-react-脚手架" data-v-bac73764>React 脚手架</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#创建项目并启动" class="sidebar-link reco-side-创建项目并启动" data-v-bac73764>创建项目并启动</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react-脚手架项目结构" class="sidebar-link reco-side-react-脚手架项目结构" data-v-bac73764>react 脚手架项目结构</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react-文件的模块化" class="sidebar-link reco-side-react-文件的模块化" data-v-bac73764>react 文件的模块化</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#todolist案例相关知识点" class="sidebar-link reco-side-todolist案例相关知识点" data-v-bac73764>todoList案例相关知识点</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react脚手架配置代理" class="sidebar-link reco-side-react脚手架配置代理" data-v-bac73764>react脚手架配置代理</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#github搜索案例相关知识点" class="sidebar-link reco-side-github搜索案例相关知识点" data-v-bac73764>github搜索案例相关知识点</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#react-路由的基本使用" class="sidebar-link reco-side-react-路由的基本使用" data-v-bac73764>React 路由的基本使用</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#路由组件与一般组件" class="sidebar-link reco-side-路由组件与一般组件" data-v-bac73764>路由组件与一般组件</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#navlink与封装navlink" class="sidebar-link reco-side-navlink与封装navlink" data-v-bac73764>NavLink与封装NavLink</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#navlink" class="sidebar-link reco-side-navlink" data-v-bac73764>NavLink</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#封装navlink" class="sidebar-link reco-side-封装navlink" data-v-bac73764>封装NavLink</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#switch的使用" class="sidebar-link reco-side-switch的使用" data-v-bac73764>Switch的使用</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#解决多级路径刷新页面样式丢失的问题" class="sidebar-link reco-side-解决多级路径刷新页面样式丢失的问题" data-v-bac73764>解决多级路径刷新页面样式丢失的问题</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#路由的严格匹配与模糊匹配" class="sidebar-link reco-side-路由的严格匹配与模糊匹配" data-v-bac73764>路由的严格匹配与模糊匹配</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#redirect的使用" class="sidebar-link reco-side-redirect的使用" data-v-bac73764>Redirect的使用</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#嵌套路由" class="sidebar-link reco-side-嵌套路由" data-v-bac73764>嵌套路由</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#向路由组件传递参数" class="sidebar-link reco-side-向路由组件传递参数" data-v-bac73764>向路由组件传递参数</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#params-参数" class="sidebar-link reco-side-params-参数" data-v-bac73764>params 参数</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#search-参数" class="sidebar-link reco-side-search-参数" data-v-bac73764>search 参数</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#state-参数" class="sidebar-link reco-side-state-参数" data-v-bac73764>state 参数</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#路由的跳转模式" class="sidebar-link reco-side-路由的跳转模式" data-v-bac73764>路由的跳转模式</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#push" class="sidebar-link reco-side-push" data-v-bac73764>push</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#replace" class="sidebar-link reco-side-replace" data-v-bac73764>replace</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#编程式路由导航" class="sidebar-link reco-side-编程式路由导航" data-v-bac73764>编程式路由导航</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#withrouter" class="sidebar-link reco-side-withrouter" data-v-bac73764>withRouter</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#browserrouter与hashrouter的区别" class="sidebar-link reco-side-browserrouter与hashrouter的区别" data-v-bac73764>BrowserRouter与HashRouter的区别</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#路由组件的lazyload" class="sidebar-link reco-side-路由组件的lazyload" data-v-bac73764>路由组件的lazyLoad</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#redux-非官方" class="sidebar-link reco-side-redux-非官方" data-v-bac73764>redux(非官方)</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#什么情况下需要使用-redux" class="sidebar-link reco-side-什么情况下需要使用-redux" data-v-bac73764>什么情况下需要使用 redux</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#redux-的三个核心概念" class="sidebar-link reco-side-redux-的三个核心概念" data-v-bac73764>redux 的三个核心概念</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-redux精简版" class="sidebar-link reco-side-求和案例-redux精简版" data-v-bac73764>求和案例_redux精简版</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-redux完整版" class="sidebar-link reco-side-求和案例-redux完整版" data-v-bac73764>求和案例_redux完整版</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-redux异步action版" class="sidebar-link reco-side-求和案例-redux异步action版" data-v-bac73764>求和案例_redux异步action版</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-react-redux基本使用" class="sidebar-link reco-side-求和案例-react-redux基本使用" data-v-bac73764>求和案例_react-redux基本使用</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-react-redux优化" class="sidebar-link reco-side-求和案例-react-redux优化" data-v-bac73764>求和案例_react-redux优化</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-react-redux数据共享版" class="sidebar-link reco-side-求和案例-react-redux数据共享版" data-v-bac73764>求和案例_react-redux数据共享版</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#纯函数和高阶函数" class="sidebar-link reco-side-纯函数和高阶函数" data-v-bac73764>纯函数和高阶函数</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#纯函数" class="sidebar-link reco-side-纯函数" data-v-bac73764>纯函数</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#高阶函数" class="sidebar-link reco-side-高阶函数" data-v-bac73764>高阶函数</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-react-redux开发者工具的使用" class="sidebar-link reco-side-求和案例-react-redux开发者工具的使用" data-v-bac73764>求和案例_react-redux开发者工具的使用</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#求和案例-react-redux最终版" class="sidebar-link reco-side-求和案例-react-redux最终版" data-v-bac73764>求和案例_react-redux最终版</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#render-props" class="sidebar-link reco-side-render-props" data-v-bac73764>render props</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#children-props" class="sidebar-link reco-side-children-props" data-v-bac73764>children props</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#render-props-2" class="sidebar-link reco-side-render-props-2" data-v-bac73764>render props</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#hooks" class="sidebar-link reco-side-hooks" data-v-bac73764>Hooks</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#fragment" class="sidebar-link reco-side-fragment" data-v-bac73764>Fragment</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#context" class="sidebar-link reco-side-context" data-v-bac73764>Context</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#组件优化" class="sidebar-link reco-side-组件优化" data-v-bac73764>组件优化</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#component的2个问题" class="sidebar-link reco-side-component的2个问题" data-v-bac73764>Component的2个问题</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#效率高的做法" class="sidebar-link reco-side-效率高的做法" data-v-bac73764>效率高的做法</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#原因" class="sidebar-link reco-side-原因" data-v-bac73764>原因</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#解决" class="sidebar-link reco-side-解决" data-v-bac73764>解决</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#错误边界" class="sidebar-link reco-side-错误边界" data-v-bac73764>错误边界</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#使用方式" class="sidebar-link reco-side-使用方式" data-v-bac73764>使用方式：</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#组件通信方式总结" class="sidebar-link reco-side-组件通信方式总结" data-v-bac73764>组件通信方式总结</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#几种通信方式" class="sidebar-link reco-side-几种通信方式" data-v-bac73764>几种通信方式：</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/React/React-16.html#比较好的搭配方式" class="sidebar-link reco-side-比较好的搭配方式" data-v-bac73764>比较好的搭配方式：</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div></div></div>
    <script src="/note-sites/assets/js/app.254ab375.js" defer></script><script src="/note-sites/assets/js/5.2f78da70.js" defer></script><script src="/note-sites/assets/js/1.9e97c91a.js" defer></script><script src="/note-sites/assets/js/22.24a035d7.js" defer></script>
  </body>
</html>
