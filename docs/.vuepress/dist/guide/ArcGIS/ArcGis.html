<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ArcGIS | An的个人笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/note-sites/favicon.ico">
    <script type="module" src="/note-sites/js/index.js"></script>
    <meta name="description" content="记录学习笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/note-sites/assets/css/0.styles.a5e0cdd4.css" as="style"><link rel="preload" href="/note-sites/assets/js/app.9ff99686.js" as="script"><link rel="preload" href="/note-sites/assets/js/5.2f78da70.js" as="script"><link rel="preload" href="/note-sites/assets/js/1.9e97c91a.js" as="script"><link rel="preload" href="/note-sites/assets/js/11.4bc5f074.js" as="script"><link rel="prefetch" href="/note-sites/assets/js/10.85cb6931.js"><link rel="prefetch" href="/note-sites/assets/js/12.fe0592b8.js"><link rel="prefetch" href="/note-sites/assets/js/13.cc79bc08.js"><link rel="prefetch" href="/note-sites/assets/js/14.788f18bf.js"><link rel="prefetch" href="/note-sites/assets/js/15.a16f5062.js"><link rel="prefetch" href="/note-sites/assets/js/16.3f38858b.js"><link rel="prefetch" href="/note-sites/assets/js/17.a9bd7734.js"><link rel="prefetch" href="/note-sites/assets/js/18.f869e88a.js"><link rel="prefetch" href="/note-sites/assets/js/19.61f852e8.js"><link rel="prefetch" href="/note-sites/assets/js/20.5d618384.js"><link rel="prefetch" href="/note-sites/assets/js/21.0dd5459d.js"><link rel="prefetch" href="/note-sites/assets/js/22.e802a34b.js"><link rel="prefetch" href="/note-sites/assets/js/23.fe0e18f1.js"><link rel="prefetch" href="/note-sites/assets/js/24.65770293.js"><link rel="prefetch" href="/note-sites/assets/js/25.8fadd557.js"><link rel="prefetch" href="/note-sites/assets/js/26.8dea59c8.js"><link rel="prefetch" href="/note-sites/assets/js/27.a009b182.js"><link rel="prefetch" href="/note-sites/assets/js/28.3c4594ef.js"><link rel="prefetch" href="/note-sites/assets/js/29.34a8d035.js"><link rel="prefetch" href="/note-sites/assets/js/3.2ab39145.js"><link rel="prefetch" href="/note-sites/assets/js/30.3a2e1ba0.js"><link rel="prefetch" href="/note-sites/assets/js/31.a814529e.js"><link rel="prefetch" href="/note-sites/assets/js/32.2847840b.js"><link rel="prefetch" href="/note-sites/assets/js/33.f3c0846f.js"><link rel="prefetch" href="/note-sites/assets/js/34.862672ca.js"><link rel="prefetch" href="/note-sites/assets/js/35.248eaa86.js"><link rel="prefetch" href="/note-sites/assets/js/36.7572fb32.js"><link rel="prefetch" href="/note-sites/assets/js/37.25418d71.js"><link rel="prefetch" href="/note-sites/assets/js/38.616eab8f.js"><link rel="prefetch" href="/note-sites/assets/js/39.0abd20e9.js"><link rel="prefetch" href="/note-sites/assets/js/4.e91d946b.js"><link rel="prefetch" href="/note-sites/assets/js/40.6bed602e.js"><link rel="prefetch" href="/note-sites/assets/js/41.ffae0666.js"><link rel="prefetch" href="/note-sites/assets/js/42.6a797844.js"><link rel="prefetch" href="/note-sites/assets/js/43.aa021ac5.js"><link rel="prefetch" href="/note-sites/assets/js/44.db30e153.js"><link rel="prefetch" href="/note-sites/assets/js/6.f88dabb9.js"><link rel="prefetch" href="/note-sites/assets/js/7.4bf4e189.js"><link rel="prefetch" href="/note-sites/assets/js/8.fe1371a3.js"><link rel="prefetch" href="/note-sites/assets/js/9.a9dfe185.js">
    <link rel="stylesheet" href="/note-sites/assets/css/0.styles.a5e0cdd4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-c0d124fa><div data-v-c0d124fa><div class="password-shadow password-wrapper-out" style="display:none;" data-v-30dff670 data-v-c0d124fa data-v-c0d124fa><h3 class="title" data-v-30dff670>An的个人笔记</h3> <p class="description" data-v-30dff670>记录学习笔记</p> <label id="box" class="inputBox" data-v-30dff670><input type="password" value="" data-v-30dff670> <span data-v-30dff670>Konck! Knock!</span> <button data-v-30dff670>OK</button></label> <div class="footer" data-v-30dff670><span data-v-30dff670><i class="iconfont reco-theme" data-v-30dff670></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-30dff670>vuePress-theme-reco</a></span> <span data-v-30dff670><i class="iconfont reco-copyright" data-v-30dff670></i> <a data-v-30dff670><span data-v-30dff670>An</span>
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-c0d124fa><header class="navbar" data-v-c0d124fa><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-sites/" class="home-link router-link-active"><!----> <span class="site-name">An的个人笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/混合开发/" class="nav-link"><i class="undefined"></i>
  混合开发
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" class="nav-link"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-c0d124fa></div> <aside class="sidebar" data-v-c0d124fa><div class="personal-info-wrapper" data-v-5c49c935 data-v-c0d124fa><img src="/note-sites/assets/img/logo.png" alt="author-avatar" class="personal-img" data-v-5c49c935> <h3 class="name" data-v-5c49c935>
    An
  </h3> <div class="num" data-v-5c49c935><div data-v-5c49c935><h3 data-v-5c49c935>33</h3> <h6 data-v-5c49c935>文章</h6></div> <div data-v-5c49c935><h3 data-v-5c49c935>26</h3> <h6 data-v-5c49c935>标签</h6></div></div> <ul class="social-links" data-v-5c49c935><li class="social-item" data-v-5c49c935><i class="iconfont reco-github" style="color:#67cc86;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-mayun" style="color:#3498db;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-juejin" style="color:#f26d6d;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-npm" style="color:#abbd81;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-bilibili" style="color:#f47e60;" data-v-5c49c935></i></li></ul> <hr data-v-5c49c935></div> <nav class="nav-links"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/混合开发/" class="nav-link"><i class="undefined"></i>
  混合开发
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" class="nav-link"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-30dff670 data-v-c0d124fa><h3 class="title" data-v-30dff670>ArcGIS</h3> <!----> <label id="box" class="inputBox" data-v-30dff670><input type="password" value="" data-v-30dff670> <span data-v-30dff670>Konck! Knock!</span> <button data-v-30dff670>OK</button></label> <div class="footer" data-v-30dff670><span data-v-30dff670><i class="iconfont reco-theme" data-v-30dff670></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-30dff670>vuePress-theme-reco</a></span> <span data-v-30dff670><i class="iconfont reco-copyright" data-v-30dff670></i> <a data-v-30dff670><span data-v-30dff670>An</span>
          
        <!---->
        2023
      </a></span></div></div> <div data-v-c0d124fa><div data-v-c0d124fa><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">ArcGIS</h1> <div data-v-7b22c628><i class="iconfont reco-account" data-v-7b22c628><span data-v-7b22c628>An</span></i> <i class="iconfont reco-date" data-v-7b22c628><span data-v-7b22c628>2022/3/5</span></i> <!----> <i class="tags iconfont reco-tag" data-v-7b22c628><span class="tag-item" data-v-7b22c628>GIS</span></i></div></div> <div class="theme-reco-content content__default"><div><h1 id="arcgis"><a class="header-anchor" href="#arcgis">#</a> ArcGIS</h1> <p><a href="https://developers.arcgis.com/" target="_blank" rel="noopener noreferrer">ArcGIS<OutboundLink></OutboundLink></a> 是一个可伸缩的平台，无论是在桌面应用，在服务器，还是通过Web，为个人用户也为群体用户提供 <a href="https://baike.baidu.com/item/%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F/171830?fromtitle=GIS&amp;fromid=31541" target="_blank" rel="noopener noreferrer">GIS<OutboundLink></OutboundLink></a> 的功能</p> <p>要想使用 ArcGIS 需要先<a href="https://developers.arcgis.com/dashboard/" target="_blank" rel="noopener noreferrer">注册<OutboundLink></OutboundLink></a>一个开发者账号, 以获得 <strong>API密钥</strong></p> <blockquote><p>适合 JavaScript 的 ArcGIS <a href="https://developers.arcgis.com/javascript/latest/" target="_blank" rel="noopener noreferrer">API<OutboundLink></OutboundLink></a></p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#前置设置">前置设置</a></li><li><a href="#显示地图、场景和图层">显示地图、场景和图层</a><ul><li><a href="#地图的工作原理-2d-https-developers-arcgis-com-documentation-mapping-apis-and-services-maps-maps-2d">地图的工作原理(2D)</a><ul><li><a href="#数据源">数据源</a></li><li><a href="#层序">层序</a></li></ul></li><li><a href="#地图">地图</a></li><li><a href="#网络地图-https-developers-arcgis-com-javascript-latest-api-reference-esri-webmap-html">网络地图</a></li><li><a href="#地图视图-https-developers-arcgis-com-documentation-mapping-apis-and-services-maps-maps-2d-map-view">地图视图</a></li><li><a href="#_3d视图场景">3D视图场景</a></li></ul></li><li><a href="#视图的常用方法">视图的常用方法</a><ul><li><a href="#goto">goTo</a></li><li><a href="#tomap-和-toscreen">toMap 和 toScreen</a></li><li><a href="#histask">hisTask</a></li><li><a href="#when">when</a></li><li><a href="#on">on</a><ul><li><a href="#remove">remove</a></li></ul></li><li><a href="#watch">watch</a></li><li><a href="#widget">widget</a><ul><li><a href="#底图切换">底图切换</a></li><li><a href="#从图库中选择底图">从图库中选择底图</a></li><li><a href="#自定义底图样式">自定义底图样式</a></li></ul></li><li><a href="#显示弹出窗口">显示弹出窗口</a><ul><li><a href="#弹出文本">弹出文本</a></li><li><a href="#弹出图表">弹出图表</a></li></ul></li></ul></li><li><a href="#图层-https-developers-arcgis-com-javascript-latest-api-reference-esri-layers-layer-html">图层</a><ul><li><a href="#常见图层类型">常见图层类型</a><ul><li><a href="#featurelayer">FeatureLayer</a><ul><li><a href="#客户端构建图层">客户端构建图层</a></li><li><a href="#服务端构建图层">服务端构建图层</a></li></ul></li><li><a href="#graphicslayer">GraphicsLayer</a></li><li><a href="#rest-api-服务">REST API 服务</a></li></ul></li></ul></li><li><a href="#显示图像">显示图像</a><ul><li><a href="#外部数据源图层介绍">外部数据源图层介绍</a></li></ul></li><li><a href="#arcgis-server服务介绍">ArcGIS Server服务介绍</a></li><li><a href="#图层和图层视图">图层和图层视图</a><ul><li><a href="#服务器端层">服务器端层</a></li><li><a href="#客户端层">客户端层</a></li></ul></li><li><a href="#查询过滤">查询过滤</a><ul><li><a href="#查询-https-developers-arcgis-com-javascript-latest-api-reference-esri-rest-support-query-html">查询</a></li><li><a href="#查询图层特征">查询图层特征</a></li><li><a href="#服务器端和客户端查询">服务器端和客户端查询</a></li><li><a href="#客户端查询和服务器端查询的区别">客户端查询和服务器端查询的区别</a></li><li><a href="#查询的注意点">查询的注意点:</a></li></ul><ul><li><a href="#过滤">过滤</a><ul><li><a href="#服务器端和客户端过滤">服务器端和客户端过滤</a></li></ul></li><li><a href="#定位">定位</a></li><li><a href="#查找">查找</a></li><li><a href="#query-identify-和-find-比较">Query Identify 和 Find 比较</a></li><li><a href="#地理处理任务">地理处理任务</a></li></ul></li><li><a href="#arcgis-api的编程模式">ArcGis API的编程模式</a><ul><li><a href="#加载类">加载类</a></li><li><a href="#构造函数">构造函数</a></li><li><a href="#特性">特性</a><ul><li><a href="#getters">getters</a></li><li><a href="#setters">setters</a></li><li><a href="#watch">watch</a></li></ul></li><li><a href="#异步数据">异步数据</a></li><li><a href="#符号化-https-developers-arcgis-com-javascript-latest-visualization-symbols-color-ramps">符号化</a><ul><li><a href="#常用符号的分类">常用符号的分类:</a></li><li><a href="#自定义渲染器-https-developers-arcgis-com-javascript-latest-api-reference-esri-renderers-renderer-html">自定义渲染器</a></li></ul></li><li><a href="#手动加载">手动加载</a></li><li><a href="#fromjson-方法">fromJSON 方法</a><ul><li><a href="#jsonutils-辅助方法">jsonUtils 辅助方法</a></li></ul></li></ul></li><li><a href="#事件">事件</a></li></ul></div><p></p> <h2 id="前置设置"><a class="header-anchor" href="#前置设置">#</a> 前置设置</h2> <ul><li><p>如果使用<a href="https://developers.arcgis.com/javascript/latest/tooling-intro/" target="_blank" rel="noopener noreferrer">工具构建<OutboundLink></OutboundLink></a>, 官方推荐AMD模块, ES模块不完全支持(不推荐使用)</p></li> <li><p>地图的显示需要一个DOM容器</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// html</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;viewDiv&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    
<span class="token comment">// style</span>
html<span class="token punctuation">,</span> body<span class="token punctuation">,</span> #viewDiv <span class="token punctuation">{</span>
    <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>注意: 地图容器必须使用 <code>id</code> 选择器</p></blockquote> <blockquote><p>官方<a href="https://developers.arcgis.com/javascript/latest/display-a-map/" target="_blank" rel="noopener noreferrer">教程案例<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/maps-and-views/" target="_blank" rel="noopener noreferrer">核心概念<OutboundLink></OutboundLink></a></p></blockquote></li></ul> <h2 id="显示地图、场景和图层"><a class="header-anchor" href="#显示地图、场景和图层">#</a> 显示地图、场景和图层</h2> <p>地图是从<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html" target="_blank" rel="noopener noreferrer"><code>Map</code><OutboundLink></OutboundLink></a>类创建的<code>Map</code>对象总是传递给一个<code>View</code>对象有两个<code>View</code>类用于显示地图：<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html" target="_blank" rel="noopener noreferrer"><code>MapView</code><OutboundLink></OutboundLink></a>用于 2D 地图而<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-SceneView.html" target="_blank" rel="noopener noreferrer"><code>SceneView</code><OutboundLink></OutboundLink></a>类则用于 3D 地图的类</p> <h3 id="地图的工作原理-2d"><a class="header-anchor" href="#地图的工作原理-2d">#</a> <a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/maps/maps-2d/" target="_blank" rel="noopener noreferrer">地图的工作原理(2D)<OutboundLink></OutboundLink></a></h3> <p>一个地图 和 一个地图视图 共同展示层在 2D 中地图管理图层，地图视图显示图层数据</p> <p>地图通常包含一个底图图层 和 一个或多个数据层. 地图视图将所有图层和任何图形组合到一个显示中</p> <h4 id="数据源"><a class="header-anchor" href="#数据源">#</a> 数据源</h4> <p>每个层在地图中引用了 数据源, 图层的数据源提供显示在地图视图, 来源数据层 可以是文件、本地数据的集合或 数据服务</p> <h4 id="层序"><a class="header-anchor" href="#层序">#</a> 层序</h4> <p>当 地图视图 显示地图时，图层和图形的显示是自下而上显示的</p> <p>底图图层在最下面, 然后是数据层, 最上面是图形, 效果如下:</p> <p><img src="/note-sites/assets/img/cx.4f3b3dee.png" alt="层序"></p> <p><em>上图: 地图和地图视图协同工作以显示图层和图形</em></p> <blockquote><p>在3D情况下底图之下还有 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html#ground" target="_blank" rel="noopener noreferrer">ground<OutboundLink></OutboundLink></a> 表示地面的效果</p></blockquote> <h3 id="地图"><a class="header-anchor" href="#地图">#</a> 地图</h3> <p>创建地图的一种方法是创建<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html" target="_blank" rel="noopener noreferrer"><code>Map</code><OutboundLink></OutboundLink></a>类的新实例，同时指定<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html#basemap" target="_blank" rel="noopener noreferrer">底图<OutboundLink></OutboundLink></a>和可选的<a href="https://developers.arcgis.com/javascript/latest/layers-and-data/" target="_blank" rel="noopener noreferrer">图层集合<OutboundLink></OutboundLink></a></p> <p>底图图层是地图中最重要的图层，它提供了地图的整体视觉上下文</p> <p>一个特定的<code>Map</code>对象的底图可以用<code>basemap</code>属性来控制，这个属性可以是一个字符串或一个<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Basemap.html" target="_blank" rel="noopener noreferrer"><code>Basemap</code><OutboundLink></OutboundLink></a>对象</p> <ul><li>常用属性:
<ul><li>basemap: 指定地图的底图</li> <li>layers: 地图所有图层的集合 (将图层添加这个数组可以加载对应图层)</li></ul></li></ul> <blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <p>示例:</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引入 esri-loader 加载 ArcGIS API</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> loadModules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;esri-loader&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 引入 地图</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span> Map <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">&quot;esri/Map&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 新建地图</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 底图设置</span>
  <span class="token literal-property property">basemap</span><span class="token operator">:</span> <span class="token string">&quot;streets-vector&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// layers: additionalLayers // 可选的其他层</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="网络地图"><a class="header-anchor" href="#网络地图">#</a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-WebMap.html" target="_blank" rel="noopener noreferrer">网络地图<OutboundLink></OutboundLink></a></h3> <p>创建地图的第二种方法是加载<a href="https://developers.arcgis.com/documentation/core-concepts/web-maps/" target="_blank" rel="noopener noreferrer">web 地图<OutboundLink></OutboundLink></a>（对于 2D 地图）或<a href="https://developers.arcgis.com/documentation/core-concepts/web-scenes/" target="_blank" rel="noopener noreferrer">web 场景<OutboundLink></OutboundLink></a>（对于 3D 地图）</p> <p>Web 地图和 Web 场景是包含地图或场景设置的 JSON 结构包括底图、图层、图层样式、弹出窗口、图例、标签等的设置</p> <p>它们通常与<a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/maps/tutorials/tools/create-a-web-map/" target="_blank" rel="noopener noreferrer">ArcGIS Online 地图查看器<OutboundLink></OutboundLink></a>或<a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/maps/tutorials/tools/create-a-web-scene/" target="_blank" rel="noopener noreferrer">ArcGIS Online 场景查看器<OutboundLink></OutboundLink></a>交互创建 <a href="https://www.arcgis.com/home/" target="_blank" rel="noopener noreferrer">ArcGIS Online<OutboundLink></OutboundLink></a> 或 <a href="https://enterprise.arcgis.com/en/portal/latest/administer/windows/what-is-portal-for-arcgis-.htm" target="_blank" rel="noopener noreferrer">ArcGIS Enterprise<OutboundLink></OutboundLink></a> 为它们分配一个唯一 ID 并将它们存储为<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-portal-PortalItem.html" target="_blank" rel="noopener noreferrer">门户项目<OutboundLink></OutboundLink></a></p> <p>该<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-WebMap.html" target="_blank" rel="noopener noreferrer"><code>WebMap</code><OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-WebScene.html" target="_blank" rel="noopener noreferrer"><code>WebScene</code><OutboundLink></OutboundLink></a>类可以通过其独特的ID被用来访问和负载Web地图和Web的场景</p> <ul><li>常用属性:
<ul><li>portalItem: 门户项目
<ul><li>id: 需要加载的门户项目ID</li> <li>portal: 门户项目网址</li></ul></li></ul></li></ul> <p>可以在<a href="https://www.arcgis.com/home/webmap/viewer.html?webmap=41281c51f9de45edaf1c8ed44bb10e30" target="_blank" rel="noopener noreferrer">地图查看器<OutboundLink></OutboundLink></a>和<a href="https://www.arcgis.com/home/webscene/viewer.html?webscene=579f97b2f3b94d4a8e48a5f140a6639b" target="_blank" rel="noopener noreferrer">场景查看器<OutboundLink></OutboundLink></a>的 URL或项目页面中标识项目的 ID</p> <p>默认门户为 ArcGIS Online，URL 为<code>https://www.arcgis.com</code></p> <p>如果要使用 ArcGIS Enterprise，则必须指定门户 URL</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> webmap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">portalItem</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自动转换为 new PortalItem()  </span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;e691172598f04ea8881cd2a4adaa45ba&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定网络地图的ID</span>
    <span class="token literal-property property">portal</span><span class="token operator">:</span> <span class="token string">&quot;https://www.arcgis.com&quot;</span>  <span class="token comment">// 设置门户 URL</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-WebMap.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-WebMap.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <h3 id="地图视图"><a class="header-anchor" href="#地图视图">#</a> <a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/maps/maps-2d/#map-view" target="_blank" rel="noopener noreferrer">地图视图<OutboundLink></OutboundLink></a></h3> <p>地图视图用于显示地图图层并处理用户交互、弹出窗口、小部件和地图位置</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 地图</span>
    <span class="token literal-property property">map</span><span class="token operator">:</span> webmap<span class="token punctuation">,</span>
    <span class="token comment">// DOM容器</span>
    <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">&quot;viewDiv&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 视图的中心点, 经纬度单位</span>
    <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">107.21265</span><span class="token punctuation">,</span> <span class="token number">32.454617</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 地图缩放级别, 越小越远</span>
    <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>常见参数:
<ul><li>map: 地图对象</li> <li>container: DOM容器的ID选择器字符串</li> <li>center：显示地图视图的中心位置, 使用 经纬度或 x/y 坐标空间参考</li> <li>zoom：地图的缩放比例, 越小越远</li> <li>scale：表示视图中心的地图级别</li> <li>rotation: 视图顺时针旋转的度数</li> <li>extent: 定义视图的显示范围</li> <li>constraints: 限制MapView的缩放、缩放和旋转的约束</li> <li>popup: 弹出的模板</li> <li>ui: 地图的小部件</li></ul></li></ul> <blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <p>一个简单的网络地图例子:</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引入 esri-loader 加载 ArcGIS API</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> loadModules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;esri-loader&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 开发者个人密钥</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> myKeyAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../config&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 引入 网络地图, 地图视图, 全局配置对象</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>WebMap<span class="token punctuation">,</span> MapView<span class="token punctuation">,</span> esriConfig<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string">&quot;esri/WebMap&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;esri/views/MapView&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;esri/config&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 配置开发者的密钥</span>
esriConfig<span class="token punctuation">.</span>apiKey <span class="token operator">=</span> myKeyAPI<span class="token punctuation">;</span>

<span class="token comment">// 新建地图</span>
<span class="token keyword">const</span> webmap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 指定网络地图的ID</span>
    <span class="token literal-property property">portalItem</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;01abd28a6d7844028f498004b504ee76&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 新建地图视图</span>
<span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 地图</span>
    <span class="token literal-property property">map</span><span class="token operator">:</span> webmap<span class="token punctuation">,</span>
    <span class="token comment">// DOM容器</span>
    <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">&quot;viewDiv&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 视图的中心点, 经纬度单位</span>
    <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">107.21265</span><span class="token punctuation">,</span> <span class="token number">32.454617</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 地图缩放级别, 越小越远</span>
    <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 移除所有默认UI组件，除了属性(下边的文字)</span>
view<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;attribution&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// css 去掉地图聚焦边框</span>
<span class="token punctuation">.</span>esri<span class="token operator">-</span>view<span class="token operator">-</span>surface<span class="token operator">--</span>inset<span class="token operator">-</span>outline<span class="token operator">:</span>focus<span class="token operator">:</span><span class="token operator">:</span>after <span class="token punctuation">{</span>
  <span class="token literal-property property">outline</span><span class="token operator">:</span> none <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_3d视图场景"><a class="header-anchor" href="#_3d视图场景">#</a> 3D视图场景</h3> <p>创建 3D 场景需要 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-SceneView.html" target="_blank" rel="noopener noreferrer"><code>SceneView</code><OutboundLink></OutboundLink></a>模块,</p> <p>常见参数:</p> <ul><li>map: 地图对象</li> <li>container: DOM容器的ID选择器字符串</li> <li>zoom：地图的缩放比例, 越小越远</li> <li>scale：表示视图中心的地图比例尺</li> <li>ground: 指定地面的表面属性 (只在3D情况下有效)
<ul><li>surfaceColor: 设置底图的颜色 (没有底图可用时，地面默认显示网格)</li> <li>opacity: 地面的不透明度 (场景包含地下数据可以看到)</li></ul></li> <li>camera: 设置相机位置
<ul><li>position
<ul><li>x: 视图的经度</li> <li>y: 视图的维度</li> <li>z: 视图的高度(米)</li></ul></li> <li>tilt: 设置相机视角向下投射的度数</li> <li>heading: 相机正面的罗盘航向（以度为单位）</li></ul></li> <li>viewingMode: 设置视图中的地图的可见部分</li> <li>constraints: 限制 SceneView的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Camera.html#tilt" target="_blank" rel="noopener noreferrer">相机倾斜<OutboundLink></OutboundLink></a>和高度的约束</li> <li>popup: 弹出的模板</li> <li>ui: 地图的小部件</li></ul> <p>常见图层:</p> <ul><li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-ElevationLayer.html" target="_blank" rel="noopener noreferrer"><code>ElevationLayer</code><OutboundLink></OutboundLink></a>:  可以自定义高程图, 需要添加至<code>map.ground.layers</code>生效</li> <li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-SceneLayer.html" target="_blank" rel="noopener noreferrer"><code>SceneLayer</code><OutboundLink></OutboundLink></a>: 专门为显示大量数据而设计, 支持 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Point.html" target="_blank" rel="noopener noreferrer">Point<OutboundLink></OutboundLink></a> 和 3D Object</li> <li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-IntegratedMeshLayer.html" target="_blank" rel="noopener noreferrer"><code>IntegratedMeshLayer</code><OutboundLink></OutboundLink></a>: 可以用来表现真实的 3D 场景</li> <li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-PointCloudLayer.html#constructors-summary" target="_blank" rel="noopener noreferrer"><code>PointCloudLayer</code><OutboundLink></OutboundLink></a>: 在浏览器中创建点云数据的可视化, 点云数据如: <a href="https://desktop.arcgis.com/en/arcmap/latest/manage-data/las-dataset/what-is-lidar-data-.htm" target="_blank" rel="noopener noreferrer">激光雷达数据<OutboundLink></OutboundLink></a></li></ul> <blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-SceneView.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-SceneView.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <p>简单的3D地图例子:</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> loadModules <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;esri-loader&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> myKeyAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../config&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>WebMap<span class="token punctuation">,</span> SceneView<span class="token punctuation">,</span> esriConfig<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string">&quot;esri/WebMap&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;esri/views/SceneView&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;esri/config&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

esriConfig<span class="token punctuation">.</span>apiKey <span class="token operator">=</span> myKeyAPI<span class="token punctuation">;</span>

<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">portalItem</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自动转换为 new PortalItem()</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;01abd28a6d7844028f498004b504ee76&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 新建 3D 视图  </span>
<span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SceneView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 容器</span>
    <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">&quot;viewDiv&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 地图 </span>
    <span class="token literal-property property">map</span><span class="token operator">:</span> map<span class="token punctuation">,</span>
    <span class="token comment">// 查看模式</span>
    <span class="token literal-property property">viewingMode</span><span class="token operator">:</span> <span class="token string">'global'</span><span class="token punctuation">,</span> <span class="token comment">// global 球体 local 平面</span>
    <span class="token comment">// 相机配置</span>
    <span class="token literal-property property">camera</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 位置</span>
      <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">107.21265</span><span class="token punctuation">,</span> <span class="token comment">// 经度</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">32.454617</span><span class="token punctuation">,</span> <span class="token comment">// 维度</span>
        <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token comment">// 高度(米)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tilt</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 视角度数</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="视图的常用方法"><a class="header-anchor" href="#视图的常用方法">#</a> 视图的常用方法</h2> <h3 id="goto"><a class="header-anchor" href="#goto">#</a> goTo</h3> <ul><li>**view.goTo(target, [options]) **<code>Promise</code></li></ul> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html#goTo" target="_blank" rel="noopener noreferrer">goTo<OutboundLink></OutboundLink></a> 方法可以通过编程的方式改变视图的位置, 可以从一个地方 &quot;飞&quot; 到另一个地方</p> <ul><li>target: 可以接受 <strong>带有经纬度的数组</strong> <strong>Viewpoint</strong> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Camera.html" target="_blank" rel="noopener noreferrer"><code>Camera</code><OutboundLink></OutboundLink></a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Geometry.html" target="_blank" rel="noopener noreferrer"><code>Geometry</code><OutboundLink></OutboundLink></a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html" target="_blank" rel="noopener noreferrer"><code>Graphic</code><OutboundLink></OutboundLink></a>或<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Viewpoint.html" target="_blank" rel="noopener noreferrer"><code>Viewpoint</code><OutboundLink></OutboundLink></a>对象</li> <li>options:
<ul><li>animate: 视图是否有过渡, 如果设置为 false, 则直接忽略 duration 和 easing</li> <li>duration: 动画的持续时间（毫秒）</li> <li>easing:  动画的缓动函数, 如: 线性, 缓入, 缓出等</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>view<span class="token punctuation">.</span><span class="token function">goTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                      
  <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 要去点的目标点</span>
      <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">39</span> <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">15</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">5000</span> <span class="token punctuation">}</span> <span class="token comment">// 动画持续时间</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="tomap-和-toscreen"><a class="header-anchor" href="#tomap-和-toscreen">#</a> toMap 和 toScreen</h3> <ul><li><strong>view.toMap(screenPoint)</strong></li></ul> <p>将给定的屏幕点转换为<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Point.html" target="_blank" rel="noopener noreferrer">地图点<OutboundLink></OutboundLink></a>。屏幕点表示相对于视图左上角的像素点</p> <p>语法: <strong>view.toScreen(point)</strong></p> <p>将给定的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Point.html" target="_blank" rel="noopener noreferrer">地图点<OutboundLink></OutboundLink></a>转换为屏幕点。屏幕点表示相对于视图左上角的像素点</p> <h3 id="histask"><a class="header-anchor" href="#histask">#</a> hisTask</h3> <ul><li><strong>view.hitTest (screenPoint, [options ])</strong> <ul><li>screenPoint: 单击视图的屏幕坐标（或本地鼠标事件）</li> <li>options : 用于指定在 hitTest 中包含或排除的内容的选项</li></ul></li></ul> <p>返回与指定屏幕坐标相交的每一层的最顶层要素</p> <h3 id="when"><a class="header-anchor" href="#when">#</a> when</h3> <ul><li><strong>view.when(callback, [errback])</strong> <code>Promise</code></li></ul> <p>view加载完成就会调用成功的回调, 否则就会调用失败的回调</p> <h3 id="on"><a class="header-anchor" href="#on">#</a> on</h3> <p><strong>view.on(type, modifiersOrHandler, [handler])</strong></p> <p>侦听 view 的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html#on" target="_blank" rel="noopener noreferrer">事件<OutboundLink></OutboundLink></a>, 返回一个事件对象</p> <ul><li><p>type: 要侦听的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html#events-summary" target="_blank" rel="noopener noreferrer">事件类型<OutboundLink></OutboundLink></a></p> <p><img src="/note-sites/assets/img/event.bf1d4794.png" alt=""></p></li> <li><p>modifiersOrHandler: 额外的事件修饰键</p></li> <li><p>handler: 事件的回调, 参数 event 就是 <code>事件对象</code></p></li></ul> <h4 id="remove"><a class="header-anchor" href="#remove">#</a> remove</h4> <p>view.on 的返回值对象调用 remove 方法就可以解绑事件</p> <h3 id="watch"><a class="header-anchor" href="#watch">#</a> watch</h3> <ul><li><strong>view.watch(path, callback)</strong></li></ul> <p>监视实例上的属性更改, 这是<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#watch" target="_blank" rel="noopener noreferrer">Accessor.watch()<OutboundLink></OutboundLink></a>的别名</p> <ul><li>path: 属性值字符串, 如 <strong>&quot;map.basemap.title&quot;</strong>, <strong>&quot;zoom&quot;</strong></li> <li>callback: 属性改变时的回调, 有四个参数 <code>newValue, oldValue, propertyName, target</code></li></ul> <p>同样会返回一个对象, 调用 <code>remove</code>方法即可取消监视</p> <h3 id="widget"><a class="header-anchor" href="#widget">#</a> widget</h3> <p>可以将<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Widget.html" target="_blank" rel="noopener noreferrer">小部件<OutboundLink></OutboundLink></a>和<a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" target="_blank" rel="noopener noreferrer">HTML 元素<OutboundLink></OutboundLink></a>添加到视图中。在<code>view.ui</code>提供了一个<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-ui-DefaultUI.html" target="_blank" rel="noopener noreferrer">DefaultUI<OutboundLink></OutboundLink></a>其用于显示该视图的窗口小部件容器。</p> <p>使用<code>view.ui.add</code>方法将其他小部件和 HTML 元素添加到视图中</p> <h4 id="底图切换"><a class="header-anchor" href="#底图切换">#</a> 底图切换</h4> <p>点击切换底图需要使用, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-BasemapToggle.html" target="_blank" rel="noopener noreferrer">BasemapToggle<OutboundLink></OutboundLink></a> 模块</p> <p>使用 <code>view.ui.add</code> 方法可以将指定部件添加到视图指定位置上</p> <blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-BasemapToggle.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-BasemapToggle.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <div class="language-c line-numbers-mode"><pre v-pre="" class="language-c"><code><span class="token comment">// 引入 BasemapToggle 底图切换</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>BasemapGallery<span class="token punctuation">]</span> <span class="token operator">=</span> await <span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">&quot;esri/widgets/BasemapToggle&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 新建视图切换小部件</span>
<span class="token keyword">const</span> basemapToggle <span class="token operator">=</span> new <span class="token function">BasemapToggle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    view<span class="token operator">:</span> view<span class="token punctuation">,</span> <span class="token comment">// 视图</span>
    nextBasemap<span class="token operator">:</span> <span class="token string">&quot;streets-vector&quot;</span> <span class="token comment">// 下一张底图切换到 streets-vector</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将小部件 basemapToggle 添加到 view 的右下方</span>
view<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>basemapToggle<span class="token punctuation">,</span><span class="token string">&quot;bottom-right&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="从图库中选择底图"><a class="header-anchor" href="#从图库中选择底图">#</a> 从图库中选择底图</h4> <p>可以使用<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-BasemapGallery.html" target="_blank" rel="noopener noreferrer">BasemapGallery<OutboundLink></OutboundLink></a>模块来选择不同的底图</p> <p><code>query</code> 的 <code>source</code> 属性会自动搜索 “World Basemaps for Developers&quot; 底图组</p> <blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-BasemapGallery.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-BasemapGallery.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引入 BasemapToggle 底图切换</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>BasemapGallery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">&quot;esri/widgets/BasemapGallery&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> basemapGallery <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BasemapGallery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">view</span><span class="token operator">:</span> view<span class="token punctuation">,</span>
    <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 设置小部件显示的底图来源</span>
      <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 搜索 World Basemaps for Developers 相关的库图组</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'&quot;World Basemaps for Developers&quot; AND owner:esri'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

view<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>basemapGallery<span class="token punctuation">,</span> <span class="token string">&quot;top-right&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="自定义底图样式"><a class="header-anchor" href="#自定义底图样式">#</a> 自定义底图样式</h4> <p>创建和显示地图 或者 场景使用您自己的自定义样式、标签和颜色</p> <p>创建带样式的底图图层，需要使用 ArcGIS 矢量切片样式编辑器</p> <p>编辑器会将自定义的样式存储在地理信息系统</p> <blockquote><p>使用自定义地图需要开发者的<a href="https://developers.arcgis.com/dashboard/" target="_blank" rel="noopener noreferrer">个人密钥<OutboundLink></OutboundLink></a></p></blockquote> <p>进入 <a href="https://www.arcgis.com/home/index.html" target="_blank" rel="noopener noreferrer"><strong>ArcGIS Online官网</strong><OutboundLink></OutboundLink></a> - 地图 - 自定义地图 - 共享地图 - 所有人(公共) - 地址栏URL会生成一个ID</p> <p>网络地图可以直接使用这个ID</p> <h3 id="显示弹出窗口"><a class="header-anchor" href="#显示弹出窗口">#</a> 显示弹出窗口</h3> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-PopupTemplate.html#properties-summary" target="_blank" rel="noopener noreferrer">PopupTemplate<OutboundLink></OutboundLink></a></p> <h4 id="弹出文本"><a class="header-anchor" href="#弹出文本">#</a> 弹出文本</h4> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> popupTrailheads <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我是标题&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我是内容&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> trailheads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads_Styled/FeatureServer/0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outFields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;TRL_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CITY_JUR&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;X_STREET&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;PARKING&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ELEV_FT&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 获取URL服务中的对应字段(可以在 popupTemplate 对象的 fieldName 字段使用</span>
    <span class="token literal-property property">popupTemplate</span><span class="token operator">:</span> popupTrailheads <span class="token comment">// 弹出模板</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>trailheads<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="弹出图表"><a class="header-anchor" href="#弹出图表">#</a> 弹出图表</h4> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> popupTrails <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;图表标题&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
     <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;media&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 对于非文本类型始终应该为 media</span>
      <span class="token literal-property property">mediaInfos</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">// 自动转换为 new MediaContent() 媒体信息</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;column-chart&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 类型</span>
        <span class="token literal-property property">caption</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 图表标题</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 定义图表的值</span>
          <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;ELEV_MIN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ELEV_MAX&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 需要显示的字段名称数组</span>
          <span class="token literal-property property">normalizeField</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 图表中的值会除以该值</span>
          <span class="token literal-property property">tooltipField</span><span class="token operator">:</span> <span class="token string">&quot;我是个提示&quot;</span> <span class="token comment">// 同一图层或相关图层/表中字段的工具提示</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

<span class="token keyword">const</span> trails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails_Styled/FeatureServer/0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outFields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;TRL_NAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ELEV_GAIN&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">popupTemplate</span><span class="token operator">:</span> popupTrails
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>trails<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 指定添加到 map.layers 索引为0的图层</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>弹出表格设置<code>type</code>为<code>fields</code>并定义<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-PopupTemplate.html#fieldInfos" target="_blank" rel="noopener noreferrer"><code>fieldInfos</code><OutboundLink></OutboundLink></a>数组</p> <blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-PopupTemplate.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-PopupTemplate.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <ul><li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-ScaleBar.html" target="_blank" rel="noopener noreferrer">ScaleBar<OutboundLink></OutboundLink></a>: 例尺小部件在地图上或指定的 HTML 节点中显示比例尺</li></ul> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> scaleBar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScaleBar</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">view</span><span class="token operator">:</span> view<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>scaleBar<span class="token punctuation">,</span> <span class="token string">&quot;bottom-left&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Search.html" target="_blank" rel="noopener noreferrer"><code>Search</code><OutboundLink></OutboundLink></a>: 搜索小部件</li></ul> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> search <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">view</span><span class="token operator">:</span> view<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>search<span class="token punctuation">,</span> <span class="token string">&quot;top-right&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="图层"><a class="header-anchor" href="#图层">#</a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-Layer.html" target="_blank" rel="noopener noreferrer">图层<OutboundLink></OutboundLink></a></h2> <p>图层是可在Map中使用的数据集合</p> <p>图层数据可以在前端创建，或者由 ArcGIS Online 和 ArcGIS Enterprise 发布，或由外部服务器托管</p> <p>图层通常用来管理和显示大量的要素(<em>FeatureLayer</em>)集合要素集合又分为结构化和非结构化如果要显示要素集合时，一般的做法是：</p> <ul><li>如果数据是结构化的，使用<a href="https://developers.arcgis.com/javascript/latest/layers-and-data/#displaying-data-sources-with-a-featurelayer" target="_blank" rel="noopener noreferrer"><code>FeatureLayer</code><OutboundLink></OutboundLink></a>来显示数据</li> <li>如果是非结构化的，使用<a href="https://developers.arcgis.com/javascript/latest/layers-and-data/#displaying-graphics-with-a-graphicslayer" target="_blank" rel="noopener noreferrer"><code>GraphicsLayer</code><OutboundLink></OutboundLink></a>来显示数据</li></ul> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-Layer.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-Layer.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p> <p><img src="/note-sites/assets/img/layer.c1f70325.png" alt=""></p> <blockquote><p>Map 作为数据的容器，存放着各种不同类型的图层，图层又是由要素集合组成，每个要素都要包含<code>attributes</code>、<code>geometry</code>、<code>symbol</code> 属性才能正常显示，<code>popupTemplate</code>为可选属性，定义了要素弹出窗口的显示内容</p></blockquote> <h3 id="常见图层类型"><a class="header-anchor" href="#常见图层类型">#</a> 常见图层类型</h3> <p>ArcGIS API for JavaScript有许多图层类，可用于访问和显示图层数据所有的图层类都继承于<code>Layer</code>使用哪种图层类取决于数据的格式和数据的存储位置每个图层类还带有不同的方法</p> <p>常用图层类型如下：BaseTileLayer</p> <table><thead><tr><th>类</th> <th>数据存储</th> <th>使用范围</th></tr></thead> <tbody><tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html" target="_blank" rel="noopener noreferrer"><code>FeatureLayer</code><OutboundLink></OutboundLink></a></td> <td>存储在 ArcGIS Enterprise 中的地理数据,</td> <td>主要用于显示、查询、过滤和编辑大量的地理要素</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GraphicsLayer.html" target="_blank" rel="noopener noreferrer"><code>GraphicsLayer</code><OutboundLink></OutboundLink></a></td> <td>临时存储在内存中的地理数据</td> <td>主要用于在地图上以几何图形<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html" target="_blank" rel="noopener noreferrer"><code>Graphic</code><OutboundLink></OutboundLink></a>或文字的形式显示少数地理要素</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-CSVLayer.html" target="_blank" rel="noopener noreferrer"><code>CSVLayer</code><OutboundLink></OutboundLink></a>/ <br> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-KMLLayer.html" target="_blank" rel="noopener noreferrer"><code>KMLLayer</code><OutboundLink></OutboundLink></a>/<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GeoJSONLayer.html" target="_blank" rel="noopener noreferrer"><code>GeoJSONLayer</code><OutboundLink></OutboundLink></a></td> <td>存储在可通过网络访问的外部文件中的地理数据</td> <td>主要用于将外部文件存储的地理数据显示为一个图层</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-TileLayer.html" target="_blank" rel="noopener noreferrer"><code>TileLayer</code><OutboundLink></OutboundLink></a>/<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-VectorTileLayer.html" target="_blank" rel="noopener noreferrer"><code>VectorTileLayer</code><OutboundLink></OutboundLink></a></td> <td>缓存服务从缓存中直接获取切片, 不需要动态缓存</td> <td>主要用于在地理背景中显示底图和其他切片数据集</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-MapImageLayer.html" target="_blank" rel="noopener noreferrer"><code>MapImageLayer</code><OutboundLink></OutboundLink></a></td> <td>存储在ArcGIS Server中并动态生成图片展示相应地理数据</td> <td>主要用于展示由<a href="https://enterprise.arcgis.com/en/server/latest/publish-services/windows/what-is-a-map-service.htm" target="_blank" rel="noopener noreferrer">地图服务<OutboundLink></OutboundLink></a>动态渲染的图层或者<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-MapImageLayer.html#sublayers" target="_blank" rel="noopener noreferrer">子图层的<OutboundLink></OutboundLink></a>数据</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-ImageryLayer.html" target="_blank" rel="noopener noreferrer"><code>ImageryLayer</code><OutboundLink></OutboundLink></a></td> <td>存储在 ArcGIS Enterprise 中的地理相关影像</td> <td>主要用于展示卫星或其他影像数据</td></tr></tbody></table> <h4 id="featurelayer"><a class="header-anchor" href="#featurelayer">#</a> FeatureLayer</h4> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html" target="_blank" rel="noopener noreferrer"><code>FeatureLayer</code><OutboundLink></OutboundLink></a>的数据源可以是内存中由应用程序加载的数据，也可以是从ArcGIS Enterprise上托管的REST API服务中请求的数据, 每个要素图层包含一个<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Geometry.html" target="_blank" rel="noopener noreferrer">Geometry<OutboundLink></OutboundLink></a> (几何图形)，以及一组 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html#attributes" target="_blank" rel="noopener noreferrer">attributes<OutboundLink></OutboundLink></a> (数据), 属性可以被<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#popupTemplate" target="_blank" rel="noopener noreferrer">弹出窗口<OutboundLink></OutboundLink></a>使用</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 引用 url 创建 FeatureLayer</span>
<span class="token keyword">const</span> fl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fl<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 引用 ArcGIS Online 或 ArcGIS Enterprise 的项目ID 创建 FeatureLayer</span>
<span class="token keyword">const</span> f2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">portalItem</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 自动转换为 new PortalItem()</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;8444e275037549c1acab02d2626daaee&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p><a href="https://developers.arcgis.com/documentation/mapping-apis-and-location-services/data-hosting/tutorials/tools/import-data-as-a-feature-layer/" target="_blank" rel="noopener noreferrer">ArcGIS Developers<OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/documentation/mapping-apis-and-location-services/data-hosting/tutorials/tools/create-a-new-feature-layer/" target="_blank" rel="noopener noreferrer">ArcGIS Online<OutboundLink></OutboundLink></a>提供了用于导入 GeoJSON、Excel、CSV、文件地理数据库和 shapefile 等数据的工具。导入数据会在 ArcGIS Online 中创建一个可用作<a href="https://developers.arcgis.com/javascript/latest/layers-and-data/#server-side-data-sources" target="_blank" rel="noopener noreferrer">服务器端数据源<OutboundLink></OutboundLink></a>的要素图层项目</p></blockquote> <h5 id="客户端构建图层"><a class="header-anchor" href="#客户端构建图层">#</a> 客户端构建图层</h5> <p>通常情况下，图层数据是从ArcGIS Enterprise上托管的REST API服务加载的，但也可以直接从内存中的要素集合中创建一个<code>FeatureLayer</code></p> <p>示例JSON数据：</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;places&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;皇后大道东100号&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">118.24354</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">34.05389</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;天安门广场999号&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">118.31966</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">34.13375</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>从示例JSON数据中创建一个<code>FeatureLayer</code>需要以下步骤：</p> <ul><li><p>将<code>places</code>数组每一项转化为一个具有属性和几何的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html" target="_blank" rel="noopener noreferrer"><code>Graphic</code><OutboundLink></OutboundLink></a>对象</p></li> <li><p><code>Graphic</code>对象主要包含<code>attributes</code>和<code>geometry</code>属性</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html#attributes" target="_blank" rel="noopener noreferrer"><code>attributes</code><OutboundLink></OutboundLink></a></td> <td><code>Object</code></td> <td>用于存储有关要素的属性 名值对结构</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html#geometry" target="_blank" rel="noopener noreferrer"><code>geometry</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Geometry.html" target="_blank" rel="noopener noreferrer"><code>Geometry</code><OutboundLink></OutboundLink></a></td> <td>提供要素相对于<a href="https://developers.arcgis.com/documentation/spatial-references/" target="_blank" rel="noopener noreferrer">坐标系的位置<OutboundLink></OutboundLink></a>, 可选的值是<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Point.html" target="_blank" rel="noopener noreferrer"><code>Point</code><OutboundLink></OutboundLink></a><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Polygon.html" target="_blank" rel="noopener noreferrer"><code>Polygon</code><OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Polyline.html" target="_blank" rel="noopener noreferrer"><code>Polyline</code><OutboundLink></OutboundLink></a>对象</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> graphics <span class="token operator">=</span> places<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">place</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Graphic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 一些数据</span>
      <span class="token literal-property property">ObjectId</span><span class="token operator">:</span> place<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token comment">// 唯一标识</span>
      <span class="token literal-property property">address</span><span class="token operator">:</span> place<span class="token punctuation">.</span>address <span class="token comment">// 地址</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">geometry</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 几何对象</span>
      <span class="token literal-property property">longitude</span><span class="token operator">:</span> place<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span> <span class="token comment">// 经度</span>
      <span class="token literal-property property">latitude</span><span class="token operator">:</span> place<span class="token punctuation">.</span>latitude <span class="token comment">// 纬度</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>创建一个<code>FeatureLayer</code>对象，并指定<code>objectIdField</code> <code>fields</code> <code>renderer</code> 和<code>source</code>属性</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#source" target="_blank" rel="noopener noreferrer"><code>source</code><OutboundLink></OutboundLink></a></td> <td><code>Collection&lt;Graphic&gt;</code></td> <td>该<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Collection.html" target="_blank" rel="noopener noreferrer">集合<OutboundLink></OutboundLink></a>的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html" target="_blank" rel="noopener noreferrer"><code>Graphic</code><OutboundLink></OutboundLink></a>对象用于创建功能层</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#renderer" target="_blank" rel="noopener noreferrer"><code>renderer</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-Renderer.html" target="_blank" rel="noopener noreferrer"><code>Renderer</code><OutboundLink></OutboundLink></a></td> <td>属性用于设置要素的渲染器</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#objectIdField" target="_blank" rel="noopener noreferrer"><code>objectIdField</code><OutboundLink></OutboundLink></a></td> <td><code>String</code></td> <td>用于标识该要素的唯一地段名，可理解为指定哪个字段为<code>id</code>字段</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#fields" target="_blank" rel="noopener noreferrer"><code>fields</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-Field.html" target="_blank" rel="noopener noreferrer"><code>Field[]</code><OutboundLink></OutboundLink></a></td> <td>层中的字段数组 每个字段代表一个属性，用于指定要素含有哪些字段及值类型</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#outFields" target="_blank" rel="noopener noreferrer"><code>outFields</code><OutboundLink></OutboundLink></a></td> <td><code>String[]</code></td> <td>获取服务中的字段, 获取所有字段可以使用 <code>[&quot;*&quot;]</code></td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#popupTemplate" target="_blank" rel="noopener noreferrer"><code>popupTemplate</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-PopupTemplate.html" target="_blank" rel="noopener noreferrer"><code>PopupTemplate</code><OutboundLink></OutboundLink></a></td> <td>弹出窗口属性</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> featureLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> graphics<span class="token punctuation">,</span>
  <span class="token literal-property property">renderer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自动转换为 new SimpleRenderer()                  </span>
    <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token punctuation">{</span>                          
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;simple-marker&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自动转换为 new SimpleMarkerSymbol()</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#102A44&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token punctuation">{</span>                       
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#598DD8&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">2</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">objectIdField</span><span class="token operator">:</span> <span class="token string">&quot;ObjectID&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 必须在 Graphic 对象创建时定义唯一标识 </span>
  <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 层中的字段数组 每个字段代表一个属性，用于指定要素含有哪些字段及值类型</span>
    <span class="token punctuation">{</span> 
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ObjectID&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 字段的名称</span>
      <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">&quot;ObjectID&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 字段的显示名称</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;oid&quot;</span> <span class="token comment">// 字段的数据类型</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span>layers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>featureLayer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加到地图图层集合</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><blockquote><p>关于自动转换js对象可以见, <a href="https://developers.arcgis.com/javascript/latest/programming-patterns/#autocasting" target="_blank" rel="noopener noreferrer">autocasting<OutboundLink></OutboundLink></a>,</p> <p>目前，由于TypeScript的限制，Autocasting在非TypeScript应用程序中效果最好</p></blockquote></li></ul> <p>一个类是否可以 Autocasting，查看每个类的文档。如果一个属性可以被 Autocasting，就会出现以下标识</p> <p><img src="/note-sites/assets/img/auto.3383b90d.png" alt=""></p> <h5 id="服务端构建图层"><a class="header-anchor" href="#服务端构建图层">#</a> 服务端构建图层</h5> <p><code>FeatureLayer</code>支持从REST API服务返回的要素集合生成图层这是访问和显示大型数据集的最有效方式</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">var</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads/FeatureServer/0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span>layers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>除了引用 URL 之外，还可以引用存储在 ArcGIS Online 或 ArcGIS Enterprise 中的图层项目</p> <p>这些项目引用 REST API 服务，该服务存储层的数据以及其他配置选项</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">portalItem</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;883cedb8c9fe4524b64d47666ed234a7&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">portal</span><span class="token operator">:</span> <span class="token string">&quot;https://www.arcgis.com&quot;</span>    <span class="token comment">// 默认值是：ArcGIS Online Portal</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span>layers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="graphicslayer"><a class="header-anchor" href="#graphicslayer">#</a> GraphicsLayer</h4> <p>主要是以 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html" target="_blank" rel="noopener noreferrer">Graphic<OutboundLink></OutboundLink></a> 图形 或 文字的形式 显示要素</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GraphicsLayer.html#graphics" target="_blank" rel="noopener noreferrer"><code>graphics</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Collection.html" target="_blank" rel="noopener noreferrer"><code>Collection&lt;Graphic&gt;</code><OutboundLink></OutboundLink></a></td> <td>图层中的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html" target="_blank" rel="noopener noreferrer">几何图形<OutboundLink></OutboundLink></a>集合</td></tr></tbody></table> <ul><li><code>graphicsLayer.add(graphic)</code> 添加图像到图层集合 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GraphicsLayer.html#graphics" target="_blank" rel="noopener noreferrer">graphics<OutboundLink></OutboundLink></a> 中(只能添加一个)</li> <li><code>graphicsLayer.addMany([graphic1, graphic2])</code>添加一组图像到图层集合 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GraphicsLayer.html#graphics" target="_blank" rel="noopener noreferrer">graphics<OutboundLink></OutboundLink></a> 中</li></ul> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code> <span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token punctuation">{</span> 
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;point&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自动转换为 new Point()</span>
    <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">118.80657463861</span><span class="token punctuation">,</span>
    <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token number">34.0005930608889</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> simpleMarkerSymbol <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;simple-marker&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自动转换为 new SimpleMarkerSymbol()</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">226</span><span class="token punctuation">,</span> <span class="token number">119</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 颜色</span>
    <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 边框颜色</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// 边框宽度</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token keyword">const</span> pointGraphic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">geometry</span><span class="token operator">:</span> point<span class="token punctuation">,</span> <span class="token comment">// 设置的图形位置也是一个几何图形对象</span>
    <span class="token literal-property property">symbol</span><span class="token operator">:</span> simpleMarkerSymbol <span class="token comment">// 图形的符号对象</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> polygon <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;polygon&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自动转换为 new Polygon()</span>
    <span class="token literal-property property">rings</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 每个点的经纬度(五边形) </span>
        <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">118.818984489994</span><span class="token punctuation">,</span> <span class="token number">34.0137559967283</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
        <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">118.806796597377</span><span class="token punctuation">,</span> <span class="token number">34.0215816298725</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
        <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">118.791432890735</span><span class="token punctuation">,</span> <span class="token number">34.0163883241613</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
        <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">118.79596686535</span><span class="token punctuation">,</span> <span class="token number">34.008564864635</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  
        <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">118.808558110679</span><span class="token punctuation">,</span> <span class="token number">34.0035027131376</span><span class="token punctuation">]</span>  
    <span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token keyword">const</span> simpleFillSymbol <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;simple-fill&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自动转换为 new SimpleFillSymbol()</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">227</span><span class="token punctuation">,</span> <span class="token number">139</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token keyword">const</span> polygonGraphic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">geometry</span><span class="token operator">:</span> polygon<span class="token punctuation">,</span>
    <span class="token literal-property property">symbol</span><span class="token operator">:</span> simpleFillSymbol<span class="token punctuation">,</span>
    <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 与图形关联的属性 名值对结构 </span>
      <span class="token literal-property property">Name</span><span class="token operator">:</span> <span class="token string">&quot;我是标题&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">Description</span><span class="token operator">:</span> <span class="token string">&quot;我是描述字段&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">popupTemplate</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 弹出窗口</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;{Name}&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 弹出窗口标题 使用{xxx}语法可以访问 attributes 属性里的值</span>
      <span class="token comment">// title: &quot;我是标题&quot;,</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&quot;{Description}&quot;</span> <span class="token comment">// 弹出窗口内容</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


 <span class="token comment">// 添加到 图形集合中 </span>
 graphicsLayer<span class="token punctuation">.</span><span class="token function">addMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pointGraphic<span class="token punctuation">,</span>polygonGraphic<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// or</span>
 graphicsLayer<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pointGraphic<span class="token punctuation">,</span>polygonGraphic<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一样的效果</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><blockquote><p>很多图层对象里都会有一个图层集合,  有类似<code>add</code>方法可以添加到图层到集合上, 其实使用<code>push</code>方法也是可以的</p></blockquote> <blockquote><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GraphicsLayer.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a>, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GraphicsLayer.html#methods-summary" target="_blank" rel="noopener noreferrer">相关方法<OutboundLink></OutboundLink></a></p></blockquote> <h4 id="rest-api-服务"><a class="header-anchor" href="#rest-api-服务">#</a> REST API 服务</h4> <p>在 REST API 中所有的内容, 图层, 数据都是一个URL, 如下是它们之间通信的工作流程:</p> <p><img src="/note-sites/assets/img/rest.e41486df.png" alt=""></p> <h2 id="显示图像"><a class="header-anchor" href="#显示图像">#</a> 显示图像</h2> <p>图形通常用于向地图添加具有不同几何形状的文本、形状和图像。创建图形层的最简单方法是创建<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html" target="_blank" rel="noopener noreferrer"><code>Graphic</code><OutboundLink></OutboundLink></a>对象传递给<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GraphicsLayer.html#properties-summary" target="_blank" rel="noopener noreferrer"><code>GraphicsLayer</code><OutboundLink></OutboundLink></a>对象的<code>graphics</code>属性, 以数组的形式</p> <p>每个<code>Graphic</code>类都包含以下属性：</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html#attributes" target="_blank" rel="noopener noreferrer"><code>attributes</code><OutboundLink></OutboundLink></a></td> <td><code>Object</code></td> <td>用于存储有关要素的地理信息的键值对</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html#geometry" target="_blank" rel="noopener noreferrer"><code>geometry</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Geometry.html" target="_blank" rel="noopener noreferrer"><code>Geometry</code><OutboundLink></OutboundLink></a></td> <td>提供的位置相对于一个特征<a href="https://developers.arcgis.com/documentation/spatial-references/" target="_blank" rel="noopener noreferrer">的坐标系<OutboundLink></OutboundLink></a>  可选的值是<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Point.html" target="_blank" rel="noopener noreferrer"><code>Point</code><OutboundLink></OutboundLink></a><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Polygon.html" target="_blank" rel="noopener noreferrer"><code>Polygon</code><OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Polyline.html" target="_blank" rel="noopener noreferrer"><code>Polyline</code><OutboundLink></OutboundLink></a>对象</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html#popupTemplate" target="_blank" rel="noopener noreferrer"><code>popupTemplate</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-PopupTemplate.html" target="_blank" rel="noopener noreferrer"><code>PopupTemplate</code><OutboundLink></OutboundLink></a></td> <td>图形的弹出模板</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Graphic.html#symbol" target="_blank" rel="noopener noreferrer"><code>symbol</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-symbols-Symbol.html" target="_blank" rel="noopener noreferrer"><code>Symbol</code><OutboundLink></OutboundLink></a></td> <td>定义图形在图层中的渲染方式</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> pointGraphic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 相关信息</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> 
      <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&quot;广东广州&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">geometry</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自动转换 new Point() </span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;point&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 地图标点 </span>
      <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token number">113.27</span><span class="token punctuation">,</span> <span class="token comment">// 经度</span>
      <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token number">23.13</span><span class="token punctuation">,</span> <span class="token comment">// 维度</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自动转换 new SimpleMarkerSymbol() </span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;simple-marker&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 标记符号</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">226</span><span class="token punctuation">,</span> <span class="token number">119</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 颜色</span>
      <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 大小</span>
      <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">'triangle'</span><span class="token punctuation">,</span> <span class="token comment">// 符号类型</span>
      <span class="token literal-property property">outline</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 自动转换为 SimpleLineSymbol()</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 边框色</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 边框宽度</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">popupTemplate</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自动转换为 new PopupTemplate()</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;弹出模板的标题&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 点击标记弹框标题</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;fields&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">fieldInfos</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 弹出窗口显示的所有字段相关</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">fieldName</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 对应字段 name 的数据</span>
              <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 显示的标签名</span>
              <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可见</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">fieldName</span><span class="token operator">:</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 对应字段 address 的数据</span>
              <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;Address&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 显示的标签名</span>
              <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可见</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 构造 GraphicsLayer 时添加图形 pointGraphic</span>
  <span class="token keyword">const</span> graphicsLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GraphicsLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    <span class="token literal-property property">graphics</span><span class="token operator">:</span> <span class="token punctuation">[</span>pointGraphic<span class="token punctuation">]</span><span class="token punctuation">,</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  map<span class="token punctuation">.</span>layers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>graphicsLayer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="外部数据源图层介绍"><a class="header-anchor" href="#外部数据源图层介绍">#</a> 外部数据源图层介绍</h3> <p>外部数据源的数据和文件是由<code>Layer</code>类的不同子类支持的包括用于处理外部文件（如<code>CSV</code>或<code>GeoJSON</code>文件）或加载外部地图（如GeoQ，高德，Bing Maps）的特定类型的层</p> <p>常见的外部数据源图层有以下几种：</p> <table><thead><tr><th>子类</th> <th>数据源</th> <th>数据类型</th> <th>特征</th> <th>限制</th></tr></thead> <tbody><tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-CSVLayer.html" target="_blank" rel="noopener noreferrer"><code>CSVLayer</code><OutboundLink></OutboundLink></a></td> <td>CSV 文件</td> <td>矢量图形为点</td> <td>客户端地理处理、弹出模板、带有 2D 和 3D 符号的渲染器</td> <td>根据功能的数量，可能需要大量下载</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GeoJSONLayer.html" target="_blank" rel="noopener noreferrer"><code>GeoJSONLayer</code><OutboundLink></OutboundLink></a></td> <td>GeoJSON 文件</td> <td>矢量图形为点、折线和多边形</td> <td>从<a href="http://geojson.org/" target="_blank" rel="noopener noreferrer">GeoJSON<OutboundLink></OutboundLink></a>数据创建图层</td> <td>每个 GeoJSON 图层只能接受一个单一几何类型 , 数据必须符合<a href="https://tools.ietf.org/html/rfc7946" target="_blank" rel="noopener noreferrer">RFC 7946 规范<OutboundLink></OutboundLink></a></td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-OGCFeatureLayer.html" target="_blank" rel="noopener noreferrer"><code>OGCFeatureLayer</code><OutboundLink></OutboundLink></a></td> <td><a href="https://www.opengeospatial.org/standards/ogcapi-features" target="_blank" rel="noopener noreferrer">OGC API - 功能<OutboundLink></OutboundLink></a></td> <td>点、折线、多边形</td> <td>渲染器、标签、弹出窗口</td> <td>数据必须符合 RFC 7946 规范，该规范指出坐标在 SpatialReference WGS84 中</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-WFSLayer.html" target="_blank" rel="noopener noreferrer"><code>WFSLayer</code><OutboundLink></OutboundLink></a></td> <td>WFS 服务</td> <td>点、多点、折线、多边形</td> <td>渲染器、标签、弹出窗口</td> <td>数据必须是 GeoJSON 格式，仅支持 2.0.0 版本</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-WMSLayer.html" target="_blank" rel="noopener noreferrer"><code>WMSLayer</code><OutboundLink></OutboundLink></a></td> <td>WFS Service 服务</td> <td>服务a图像</td> <td>OGC规范</td> <td>不适用</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-WMTSLayer.html" target="_blank" rel="noopener noreferrer"><code>WMTSLayer</code><OutboundLink></OutboundLink></a></td> <td>WMTS 服务</td> <td>切片图像</td> <td>OGC规范</td> <td>不适用</td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-OpenStreetMapLayer.html" target="_blank" rel="noopener noreferrer"><code>OpenStreetMapLayer</code><OutboundLink></OutboundLink></a></td> <td>OpenStreetMap 服务</td> <td>切片图像</td> <td>显示 OpenStreetMap 的切片地图</td> <td>不适用</td></tr></tbody></table> <p>以上每个图层在初始化的时候都需要不同的属性，请参考每个图层类型<a href="https://developers.arcgis.com/javascript/latest/layers-and-data/#working-with-external-data-sources" target="_blank" rel="noopener noreferrer">官方文档<OutboundLink></OutboundLink></a>了解更多</p> <p><em>创建CSVLayer的示例：</em></p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> Layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CSVLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.csv&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">copyright</span><span class="token operator">:</span> <span class="token string">&quot;USGS Earthquakes&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 版权信息</span>
  <span class="token literal-property property">latitudeField</span><span class="token operator">:</span> <span class="token string">&quot;latitude&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 默认为“纬度”</span>
  <span class="token literal-property property">longitudeField</span><span class="token operator">:</span> <span class="token string">&quot;longitude&quot;</span> <span class="token comment">// 默认为“经度”</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将图层添加到图层集合上</span>
map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
<span class="token comment">// 将图层添加到图层集合的末尾</span>
map<span class="token punctuation">.</span>layers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="arcgis-server服务介绍"><a class="header-anchor" href="#arcgis-server服务介绍">#</a> ArcGIS Server服务介绍</h2> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-MapImageLayer.html" target="_blank" rel="noopener noreferrer"><code>MapImageLayer</code><OutboundLink></OutboundLink></a>用于显示ArcGIS Enterprise发布的 <a href="https://developers.arcgis.com/rest/services-reference/enterprise/map-service.htm" target="_blank" rel="noopener noreferrer">Map Service<OutboundLink></OutboundLink></a>Map Service通常包含多个子图层和复杂的制图地图服务将数据渲染成服务器端的图像，并在客户端显示</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapImageLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用add方法添加层</span>
map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-ImageryLayer.html" target="_blank" rel="noopener noreferrer"><code>ImageryLayer</code><OutboundLink></OutboundLink></a>用于显示ArcGIS Enterprise发布的 <a href="https://developers.arcgis.com/rest/services-reference/enterprise/image-service.htm" target="_blank" rel="noopener noreferrer">Image Service<OutboundLink></OutboundLink></a> 的图像或其他栅格数据</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImageryLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://sampleserver6.arcgisonline.com/arcgis/rest/services/NLCDLandCover2001/ImageServer&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&quot;jpgpng&quot;</span> <span class="token comment">// 服务器导出为JPG或PNG格式</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">basemap</span><span class="token operator">:</span> <span class="token string">&quot;gray-vector&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">layers</span><span class="token operator">:</span> <span class="token punctuation">[</span>layer<span class="token punctuation">]</span> <span class="token comment">// 添加 ImageryLayer 层</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="图层和图层视图"><a class="header-anchor" href="#图层和图层视图">#</a> 图层和图层视图</h2> <p>当图层被添加到<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-MapView.html" target="_blank" rel="noopener noreferrer">MapView<OutboundLink></OutboundLink></a>或<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-SceneView.html" target="_blank" rel="noopener noreferrer">SceneView<OutboundLink></OutboundLink></a>时，会创建一个<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-LayerView.html" target="_blank" rel="noopener noreferrer">LayerView<OutboundLink></OutboundLink></a>。该<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-LayerView.html" target="_blank" rel="noopener noreferrer">LayerView<OutboundLink></OutboundLink></a>负责视图渲染功能</p> <p>图层视图还提供了方法和属性，使开发人员能够在客户端视图中查询、过滤和突出显示图形</p> <h4 id="服务器端层"><a class="header-anchor" href="#服务器端层">#</a> 服务器端层</h4> <p><strong>图层</strong>: <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html" target="_blank" rel="noopener noreferrer">FeatureLayer<OutboundLink></OutboundLink></a> , <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-SceneLayer.html" target="_blank" rel="noopener noreferrer">SceneLayer<OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-StreamLayer.html" target="_blank" rel="noopener noreferrer">StreamLayer<OutboundLink></OutboundLink></a></p> <p><strong>初始化</strong>: 通过将其 <strong>url</strong> 属性设置为指向服务器端功能、场景或流服务来创建</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> “service url”
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>初始特征获取</strong>: 该层仅从服务器获取所需的特征</p> <p><strong>层视图初始化</strong>: FeatureLayer、SceneLayer 或 StreamLayer 被初始化，包含可用于绘制的特征</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>view<span class="token punctuation">.</span><span class="token function">whenLayerView</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">layerView</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 可以访问 layerView</span>
  <span class="token comment">// 表示视图中图层的对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>后续网络请求</strong>: 根据需要<strong>会</strong>进行后续的网络请求</p> <h4 id="客户端层"><a class="header-anchor" href="#客户端层">#</a> 客户端层</h4> <p><strong>图层</strong>: <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-CSVLayer.html" target="_blank" rel="noopener noreferrer">CSVLayer<OutboundLink></OutboundLink></a>、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GeoJSONLayer.html" target="_blank" rel="noopener noreferrer">GeoJSONLayer<OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html" target="_blank" rel="noopener noreferrer">客户端 FeatureLayer<OutboundLink></OutboundLink></a></p> <p><strong>初始化</strong>: <strong>CSVLayer</strong> 和 <strong>GeoJSONLayer</strong> 是通过设置它们的 <strong>url</strong> 属性来创建的。<strong>客户端 FeatureLayer</strong> 是通过设置其 <strong>source</strong> 属性来创建的</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CSVLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;csv file url&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
view<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>初始特征获取</strong>: 该层在初始化时获取其所有功能并将其存储在客户端上</p> <p><strong>层视图初始化</strong>: CSVLayer，GeoJSONLayer，或FeatureLayer被初始化的含有可用于绘图功能</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>view<span class="token punctuation">.</span><span class="token function">whenLayerView</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">layerView</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 可以访问 layerView</span>
  <span class="token comment">// 表示视图中图层的对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>后续网络请求</strong>: 后续<strong>不会</strong>有网络请求, 所有功能都是在加载时获取的</p> <h2 id="查询过滤"><a class="header-anchor" href="#查询过滤">#</a> 查询过滤</h2> <h4 id="查询"><a class="header-anchor" href="#查询">#</a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html" target="_blank" rel="noopener noreferrer">查询<OutboundLink></OutboundLink></a></h4> <p>共有三种类型的查询：属性、空间和统计, 可以在图层或其图层视图上进行查询</p> <p><img src="/note-sites/assets/img/query.62b21d7f.png" alt=""></p> <ul><li>属性查询:
<ul><li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#where" target="_blank" rel="noopener noreferrer"><code>Query.where</code><OutboundLink></OutboundLink></a>相当于 <code>SQL where 子句</code></li> <li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#text" target="_blank" rel="noopener noreferrer"><code>Query.text</code><OutboundLink></OutboundLink></a> 相当于 <code>SQL like 子句</code> <ul><li>只能查询服务发布目录的  <strong>Display Field</strong> 字段</li></ul></li></ul></li> <li>空间查询:
<ul><li>通过 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#geometry" target="_blank" rel="noopener noreferrer"><code>Query.geometry</code><OutboundLink></OutboundLink></a>+<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#spatialRelationship" target="_blank" rel="noopener noreferrer"><code>Query.spatialRelationship</code><OutboundLink></OutboundLink></a> 指定查询条件</li> <li>可选参数: <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#distance" target="_blank" rel="noopener noreferrer">distance<OutboundLink></OutboundLink></a>(距离) 和 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#units" target="_blank" rel="noopener noreferrer">units<OutboundLink></OutboundLink></a>(单位)</li></ul></li> <li>统计查询:
<ul><li>通过 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-Query.html#outStatistics" target="_blank" rel="noopener noreferrer"><code>Query.outStatistics</code><OutboundLink></OutboundLink></a>指定条件, 该参数需要一组<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-StatisticDefinition.html" target="_blank" rel="noopener noreferrer">StatisticDefinition<OutboundLink></OutboundLink></a>对象</li></ul></li></ul> <blockquote><p><code>QueryTask</code> 4.20版本开始弃用改用 <code>Query</code></p></blockquote> <h4 id="查询图层特征"><a class="header-anchor" href="#查询图层特征">#</a> 查询图层特征</h4> <h4 id="服务器端和客户端查询"><a class="header-anchor" href="#服务器端和客户端查询">#</a> 服务器端和客户端查询</h4> <p>有一些图层是有查询方法调用并传入<a href="http://localhost:8888/javascript/4.21/api-reference/esri-rest-support-Query.html" target="_blank" rel="noopener noreferrer">查询参数<OutboundLink></OutboundLink></a></p> <p>当对应的<code>query...</code>在<a href="https://developers.arcgis.com/javascript/latest/query-filter/#server-side-and-client-side-layers" target="_blank" rel="noopener noreferrer">服务器端层<OutboundLink></OutboundLink></a>调用方法时，会发出服务器端查询。针对服务中可用的所有功能执行查询</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token punctuation">(</span>Feature<span class="token operator">|</span>Scene<span class="token punctuation">)</span>Layer <span class="token comment">// 对应图层实例</span>
  <span class="token punctuation">.</span><span class="token function">queryFeatures</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询所有特征并返回一个特征集</span>
  <span class="token punctuation">.</span><span class="token function">queryExtent</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询所有特征返回满足查询的特征范围</span>
  <span class="token punctuation">.</span><span class="token function">queryFeatureCount</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询所有特征并返回特征计数</span>
  <span class="token punctuation">.</span><span class="token function">queryObjectIds</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询所有特征并返回 objectIds 特征数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当对应的<code>query...</code>在<a href="https://developers.arcgis.com/javascript/latest/query-filter/#server-side-and-client-side-layers" target="_blank" rel="noopener noreferrer">客户端层<OutboundLink></OutboundLink></a>或任何<a href="https://developers.arcgis.com/javascript/latest/query-filter/#layer-and-layerview" target="_blank" rel="noopener noreferrer">层视图<OutboundLink></OutboundLink></a>上调用方法时，会发出客户端查询。针对图层或图层视图中的所有可用要素执行查询</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token punctuation">(</span>Feature<span class="token operator">|</span><span class="token constant">CSV</span><span class="token operator">|</span>GeoJSON<span class="token punctuation">)</span>Layer  <span class="token comment">// 对应图层实例</span>
<span class="token punctuation">(</span>Feature<span class="token operator">|</span><span class="token constant">CSV</span><span class="token operator">|</span>GeoJSON<span class="token operator">|</span>Scene<span class="token operator">|</span>Stream<span class="token punctuation">)</span>LayerView <span class="token comment">// 对应图层视图实例</span>
  <span class="token punctuation">.</span><span class="token function">queryFeatures</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询特征并返回一个特征集</span>
  <span class="token punctuation">.</span><span class="token function">queryExtent</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询功能并返回满足查询的功能范围</span>
  <span class="token punctuation">.</span><span class="token function">queryFeatureCount</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询功能并返回功能计数</span>
  <span class="token punctuation">.</span><span class="token function">queryObjectIds</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// 查询功能并返回 ObjectIds 功能数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="客户端查询和服务器端查询的区别"><a class="header-anchor" href="#客户端查询和服务器端查询的区别">#</a> 客户端查询和服务器端查询的区别</h4> <table><thead><tr><th>重要指标</th> <th>服务器端查询</th> <th>客户端查询</th></tr></thead> <tbody><tr><td>速度和响应能力</td> <td><strong>不适</strong>用于<a href="https://developers.arcgis.com/javascript/latest/query-filter/#server-side-and-client-side-layers" target="_blank" rel="noopener noreferrer">服务器端层<OutboundLink></OutboundLink></a><br>正在发出网络请求，因此与客户端查询相比速度较慢</td> <td><strong>是</strong>的, <a href="https://developers.arcgis.com/javascript/latest/query-filter/#server-side-and-client-side-layers" target="_blank" rel="noopener noreferrer">客户端层<OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/javascript/latest/query-filter/#layer-and-layerview" target="_blank" rel="noopener noreferrer">层视图<OutboundLink></OutboundLink></a>。</td></tr> <tr><td>几何精度</td> <td>**是的, **几何精度得以保留<br>在使用精确几何体获得精确结果很重要时使用</td> <td><strong>是的</strong>，<a href="https://developers.arcgis.com/javascript/latest/query-filter/#server-side-and-client-side-layers" target="_blank" rel="noopener noreferrer">客户端层<OutboundLink></OutboundLink></a>可以查询用户提供的几何图形<br><strong>不适</strong>用于图层视图，因为几何图形已针对绘图进行了概括, 结果可能不精确并且会随着用户放大地图而发生变化<br>示例包括计算选定几何图形的面积，或获取多边形中包含的点</td></tr> <tr><td>必须查询每个功能</td> <td>**是的, **使用服务器端查询确保查询针对所有功能运行<br>当您需要获得超过最大记录数时，必须完成分页查询</td> <td>**是的，**适用于 CSVLayer、GeoJSONLayer 和客户端 FeatureLayer<br>对于 layerViews <strong>没有</strong>，因为查询只会针对客户端可用的功能运行</td></tr></tbody></table> <h4 id="查询的注意点"><a class="header-anchor" href="#查询的注意点">#</a> 查询的注意点:</h4> <ul><li>在层初始化时将字段添加到层的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#outFields" target="_blank" rel="noopener noreferrer">outFields<OutboundLink></OutboundLink></a>以确保您可以在客户端访问这些字段。默认情况下，图层视图仅获取图层渲染、标签、高程信息所必需的字段</li> <li>如果您在应用加载时查询 layerView，那么就<strong>必须</strong>等到 layerView 的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-FeatureLayerView.html#updating" target="_blank" rel="noopener noreferrer">更新<OutboundLink></OutboundLink></a>属性变为<code>false</code>确保使用 layerView 加载功能。如果查询在初始化时只需要运行一次，可以使用<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-watchUtils.html" target="_blank" rel="noopener noreferrer">watchUtils.whenFalseOnce<OutboundLink></OutboundLink></a>。</li> <li>如果每次视图范围更改时都查询 layerView，则<strong>必须</strong>等到 layerView 的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-FeatureLayerView.html#updating" target="_blank" rel="noopener noreferrer">更新<OutboundLink></OutboundLink></a>属性变为<code>false</code>确保 layerView 完成获取该范围的要素。</li> <li>客户端属性值区分大小写</li></ul> <h3 id="过滤"><a class="header-anchor" href="#过滤">#</a> 过滤</h3> <p>过滤器会影响图层中要素的可用性或图层视图中要素的可见性</p> <p>满足过滤器要求的特征将显示在视图中, 过滤可以在服务器端或客户端进行</p> <h4 id="服务器端和客户端过滤"><a class="header-anchor" href="#服务器端和客户端过滤">#</a> 服务器端和客户端过滤</h4> <p>本节中涵盖的所有图层都有一个<a href="https://developers.arcgis.com/javascript/latest/api-reference/?search=definitionexpression" target="_blank" rel="noopener noreferrer">definitionExpression<OutboundLink></OutboundLink></a>属性</p> <p><code>definitionExpression</code>在<a href="https://developers.arcgis.com/javascript/latest/query-filter/#server-side-and-client-side-layers" target="_blank" rel="noopener noreferrer">服务器端层<OutboundLink></OutboundLink></a>设置时会触发网络请求以获取满足该表达式的特征</p> <p>当数据集很大并且不想将所有要素都交给客户端进行分析时，设置定义表达式非常有用</p> <p>如果将图层添加到地图后再设置定义表达式，则视图将会自动刷新并重新显示以满足定义表达式的特征</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 从服务中获取满足 type = 'name' 的所有特征</span>
<span class="token punctuation">(</span>Feature<span class="token operator">|</span>Scene<span class="token operator">|</span>Stream<span class="token punctuation">)</span>Layer
  <span class="token punctuation">.</span>definitionExpression <span class="token operator">=</span> <span class="token string">&quot;type = 'name'&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在<a href="https://developers.arcgis.com/javascript/latest/query-filter/#server-side-and-client-side-layers" target="_blank" rel="noopener noreferrer">客户端层<OutboundLink></OutboundLink></a><code>definitionExpression</code>中将只会显示满足定义表达式的要素</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 仅显示 age &gt; 18 的图层中的要素</span>
<span class="token punctuation">(</span>Feature<span class="token operator">|</span><span class="token constant">CSV</span><span class="token operator">|</span>GeoJSON<span class="token punctuation">)</span>Layer
  <span class="token punctuation">.</span>definitionExpression <span class="token operator">=</span> <span class="token string">&quot;age &gt; 18&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果图层具有定义表达式，则所有 layerView 查询和过滤器都将遵循<code>definitionExpression</code>, 这意味着只有满</p> <p>足图层定义表达式的要素才会被图层视图的查询和过滤操作评估</p> <p>可以通过<code>filter</code>在<a href="https://developers.arcgis.com/javascript/latest/query-filter/#layer-and-layerview" target="_blank" rel="noopener noreferrer">LayerView<OutboundLink></OutboundLink></a>上设置对可用于绘图的功能应用过滤器。所述<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-support-FeatureFilter.html" target="_blank" rel="noopener noreferrer">FeatureFilter<OutboundLink></OutboundLink></a>允许您显示满足</p> <p>在层视图过滤器的要求的功能。由于过滤器应用于图层视图，因此这会在客户端针对可用于绘制的功能发生</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token punctuation">(</span>Feature<span class="token operator">|</span><span class="token constant">CSV</span><span class="token operator">|</span>GeoJSON<span class="token operator">|</span>Scene<span class="token operator">|</span>Stream<span class="token punctuation">)</span>LayerView
   <span class="token comment">// 仅显示满足图层中要求的要素</span>
  <span class="token punctuation">.</span>filter <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token string">&quot;age &gt; 35&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以根据<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-support-FeatureFilter.html#where" target="_blank" rel="noopener noreferrer">属性<OutboundLink></OutboundLink></a>、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-support-FeatureFilter.html#timeExtent" target="_blank" rel="noopener noreferrer">时间<OutboundLink></OutboundLink></a>和/或<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-support-FeatureFilter.html#geometry" target="_blank" rel="noopener noreferrer">几何体<OutboundLink></OutboundLink></a>应用过滤器。使用<code>featureFilter</code>显示满足要求的功能子集<a href="https://developers.arcgis.com/javascript/latest/sample-code/?search=FeatureFilter" target="_blank" rel="noopener noreferrer">示例<OutboundLink></OutboundLink></a></p> <h3 id="定位"><a class="header-anchor" href="#定位">#</a> 定位</h3> <p><img src="/note-sites/assets/img/IdentifyParameters.0a5570f5.png" alt=""></p> <ul><li><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-IdentifyParameters.html" target="_blank" rel="noopener noreferrer">IdentifyParameters<OutboundLink></OutboundLink></a> 对象可以为定位操作设置多个属性, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-IdentifyParameters.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a></p></li> <li><p>IdentifyTask 4.20版本开始弃用了改用 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-identify.html" target="_blank" rel="noopener noreferrer">identify<OutboundLink></OutboundLink></a> 对象</p></li> <li><p>查询返回的结果是<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-IdentifyResult.html" target="_blank" rel="noopener noreferrer">IdentifyResult<OutboundLink></OutboundLink></a> 对象实例</p></li></ul> <h3 id="查找"><a class="header-anchor" href="#查找">#</a> 查找</h3> <p><img src="/note-sites/assets/img/find.e71e7a8b.png" alt=""></p> <ul><li><p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-FindParameters.html" target="_blank" rel="noopener noreferrer">FindParameters<OutboundLink></OutboundLink></a> 对象可以为定位操作设置多个属性, <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-FindParameters.html#properties-summary" target="_blank" rel="noopener noreferrer">参数列表<OutboundLink></OutboundLink></a></p></li> <li><p>FindTask 4.20版本开始弃用了改用 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-find.html" target="_blank" rel="noopener noreferrer">Find<OutboundLink></OutboundLink></a> 对象</p></li> <li><p>查询返回的结果是 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-FindResult.html" target="_blank" rel="noopener noreferrer">FindResult<OutboundLink></OutboundLink></a> 对象实例</p></li></ul> <h3 id="query-identify-和-find-比较"><a class="header-anchor" href="#query-identify-和-find-比较">#</a> Query Identify 和 Find 比较</h3> <table><thead><tr><th></th> <th>Query</th> <th>Identify</th> <th>Find</th></tr></thead> <tbody><tr><td>是否支持属性查询</td> <td>是</td> <td>否</td> <td>是</td></tr> <tr><td>是否支持空间查询</td> <td>是</td> <td>是</td> <td>否</td></tr> <tr><td>查询图层数</td> <td>1</td> <td>≥1</td> <td>≥1</td></tr> <tr><td>是否支持指定返回字段</td> <td>是</td> <td>否</td> <td>否</td></tr></tbody></table> <h3 id="地理处理任务"><a class="header-anchor" href="#地理处理任务">#</a> 地理处理任务</h3> <p><img src="/note-sites/assets/img/dl.5755b63a.png" alt=""></p> <p>设置地理处理任务需要知道三个参数, <strong>地理处理服务URL, 输入和输出参数, 同步还是异步</strong></p> <ul><li>当执行类型为同步时使用 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-geoprocessor.html#execute" target="_blank" rel="noopener noreferrer">execute<OutboundLink></OutboundLink></a> 方法</li> <li>当执行类型为异步时使用 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-geoprocessor.html#submitJob" target="_blank" rel="noopener noreferrer">submitJob<OutboundLink></OutboundLink></a> 方法</li></ul> <h2 id="arcgis-api的编程模式"><a class="header-anchor" href="#arcgis-api的编程模式">#</a> ArcGis API的编程模式</h2> <h3 id="加载类"><a class="header-anchor" href="#加载类">#</a> 加载类</h3> <p>使用<code>AMDmodule</code> 或者 <code>CS6module</code>将 ArcGIS API <a href="https://developers.arcgis.com/javascript/latest/tooling-intro/" target="_blank" rel="noopener noreferrer">加载<OutboundLink></OutboundLink></a>到应用程序中</p> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/" target="_blank" rel="noopener noreferrer">查看文档<OutboundLink></OutboundLink></a>找到需要使用的 API 类的完整命名空间</p> <blockquote><p>并非每个模块都需要加载, 有些模块可以使用<a href="https://developers.arcgis.com/javascript/latest/programming-patterns/#autocasting" target="_blank" rel="noopener noreferrer">自动转换<OutboundLink></OutboundLink></a>从构造函数中初始化许多类</p></blockquote> <h3 id="构造函数"><a class="header-anchor" href="#构造函数">#</a> 构造函数</h3> <p>ArcGIS API for JavaScript中的所有类都有一个构造函数，所有属性都可以通过向构造函数传递参数来设置</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">basemap</span><span class="token operator">:</span> <span class="token string">&quot;topo-vector&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> map<span class="token punctuation">,</span>
  <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">&quot;viewDiv&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">122</span><span class="token punctuation">,</span> <span class="token number">38</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">5</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>另外，对象的属性可以直接使用<a href="https://developers.arcgis.com/javascript/latest/programming-patterns/#setters" target="_blank" rel="noopener noreferrer">setters<OutboundLink></OutboundLink></a>来指定</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span>basemap <span class="token operator">=</span> <span class="token string">&quot;topo-vector&quot;</span><span class="token punctuation">;</span>           <span class="token comment">// 使用 .xxx 的形式赋值</span>

<span class="token comment">// or</span>

<span class="token keyword">const</span> viewProps <span class="token operator">=</span> <span class="token punctuation">{</span>                    <span class="token comment">// 定义一个完整的对象</span>
  <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">&quot;viewDiv&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> map<span class="token punctuation">,</span>
  <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">122</span><span class="token punctuation">,</span> <span class="token number">38</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
view<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>viewProps<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// 使用 set 方法直接赋值整个对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ArcGIS for JavaScript 中比较重要的类如下:</p> <p><img src="/note-sites/assets/img/class.484802a9.png" alt=""></p> <h3 id="特性"><a class="header-anchor" href="#特性">#</a> 特性</h3> <p>ArcGIS API for JavaScript 支持以简单、一致的方式获取、设置和查看类的所有属性。</p> <p>许多 API 类是<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html" target="_blank" rel="noopener noreferrer"><code>Accessor</code><OutboundLink></OutboundLink></a>该类的子类，它定义了以下方法:</p> <table><thead><tr><th>方法名称</th> <th>返回类型</th> <th>描述</th></tr></thead> <tbody><tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#get" target="_blank" rel="noopener noreferrer"><code>get(propertyName)</code><OutboundLink></OutboundLink></a></td> <td>因属性而异</td> <td>获取具有名称的属性的值 <code>propertyName</code></td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#set" target="_blank" rel="noopener noreferrer"><code>set(propertyFields)</code><OutboundLink></OutboundLink></a></td> <td>没有返回值</td> <td>对于每个<code>key</code>/ <code>value</code>配对<code>tyFields</code>，此方法将名称<code>key</code>的属性值设置为<code>value</code></td></tr> <tr><td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#watch" target="_blank" rel="noopener noreferrer"><code>watch(propertyName, callback)</code><OutboundLink></OutboundLink></a></td> <td><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#WatchHandle" target="_blank" rel="noopener noreferrer"><code>WatchHandle</code><OutboundLink></OutboundLink></a></td> <td><code>callback</code>每当具有名称的属性的值<code>propertyName</code>更改时调用回调函数</td></tr></tbody></table> <h4 id="getters"><a class="header-anchor" href="#getters">#</a> getters</h4> <p><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#get" target="_blank" rel="noopener noreferrer"><code>get</code><OutboundLink></OutboundLink></a>方法返回一个属性的值，这个方法是一个快捷方法，因为如果不使用<code>get()</code>，要返回嵌套属性的值，例如，要返回一个<code>Map</code>对象的属性<code>basemap</code>的标题，需要一个<code>if</code>语句来检查<code>basemap</code>是否未定义或为空</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> basemapTitle <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span>basemap<span class="token punctuation">)</span> <span class="token punctuation">{</span>                     <span class="token comment">// Make sure `map.basemap` exists</span>
  basemapTitle <span class="token operator">=</span> map<span class="token punctuation">.</span>basemap<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>get</code> 方法不需要 <code>if</code> 语句，如果 <code>map.basemap</code> 存在，则返回 <code>map.basemap.title</code> 的值，否则返回 <code>null</code></p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> basemapTitle <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;basemap.title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意: 也可以采用可选链(<code>?.</code>)操作规避这类问题，但是需要考虑浏览器兼容性</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> basemapTitle <span class="token operator">=</span> map<span class="token operator">?.</span>basemap<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <h4 id="setters"><a class="header-anchor" href="#setters">#</a> setters</h4> <p>可以直接设置属性的值</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>view<span class="token punctuation">.</span>center <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">40</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
view<span class="token punctuation">.</span>zoom <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span>basemap <span class="token operator">=</span> <span class="token string">&quot;oceans&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当需要更改多个属性值时,<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#set" target="_blank" rel="noopener noreferrer"><code>set()</code><OutboundLink></OutboundLink></a>可以传递一个带有属性名和新值的对象</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> newViewProperties <span class="token operator">=</span> <span class="token punctuation">{</span> 
  <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">40</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">6</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

view<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>newViewProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="watch-2"><a class="header-anchor" href="#watch-2">#</a> watch</h4> <p>使用 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Accessor.html#watch" target="_blank" rel="noopener noreferrer"><code>watch()</code><OutboundLink></OutboundLink></a> 来监听属性的变化，它带有两个参数：作为字符串的属性名称，当属性值改变时触发的回调函数</p> <p><code>watch()</code>返回一个<code>WatchHandle</code>实例</p> <p>代码示例监听一个<code>Map</code>对象的<code>basemap.title</code>属性，每当底图标题发生改变时，就调用<code>titleChangeCallback</code>函数</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">basemap</span><span class="token operator">:</span> <span class="token string">&quot;streets-vector&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">titleChangeCallback</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> property<span class="token punctuation">,</span> object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;New value: &quot;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span>
              <span class="token string">&quot;&lt;br&gt;Old value: &quot;</span><span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span>
              <span class="token string">&quot;&lt;br&gt;Watched property: &quot;</span><span class="token punctuation">,</span> property<span class="token punctuation">,</span>
              <span class="token string">&quot;&lt;br&gt;Watched object: &quot;</span><span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 记录映射对象</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> handle <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'basemap.title'</span><span class="token punctuation">,</span> titleChangeCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>可以在 <code>WatchHandle</code> 对象上调用 <code>remove</code> 方法来停止监听</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>handle<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>并非所有的属性都可以被监听, 例如<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Collection.html" target="_blank" rel="noopener noreferrer">collections<OutboundLink></OutboundLink></a>, 注册一个事件处理程序，以便在一个集合发生<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-core-Collection.html#event-change" target="_blank" rel="noopener noreferrer">change<OutboundLink></OutboundLink></a>时可以被监听</p> <blockquote><p><code>FeatureLayer.source</code>和<code>GraphicsLayer.graphics</code>属性都是集合，使用<code>on()</code>而不是<code>watch()</code>来监听这些属性的变化</p></blockquote> <h3 id="异步数据"><a class="header-anchor" href="#异步数据">#</a> 异步数据</h3> <p>ArcGIS中支持 <code>Promise</code></p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token string">&quot;esri/tasks/GeometryService&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;esri/tasks/support/ProjectParameters&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">GeometryService<span class="token punctuation">,</span> ProjectParameters</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> geoService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeometryService</span><span class="token punctuation">(</span> <span class="token string">&quot;https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> projectParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProjectParameters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">geometries</span><span class="token operator">:</span> <span class="token punctuation">[</span>points<span class="token punctuation">]</span><span class="token punctuation">,</span>            
      <span class="token literal-property property">outSR</span><span class="token operator">:</span> outSR<span class="token punctuation">,</span>
      transformation <span class="token operator">=</span> transformation
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    geoService<span class="token punctuation">.</span><span class="token function">project</span><span class="token punctuation">(</span>projectParams<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">projectedGeoms</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;projected points: &quot;</span><span class="token punctuation">,</span> projectedGeoms<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>示例中，<code>GeometryService</code>被用来将几个点的几何图形投射到一个新的空间参考</p> <p>在<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-GeometryService.html#project" target="_blank" rel="noopener noreferrer"><code>GeometryService.project</code><OutboundLink></OutboundLink></a>的文档中，<code>project()</code>返回一个Promise，该Promise解析为一个投影的几何体数组</p> <blockquote><p>推荐使用<code>async</code>,<code>await</code>关键词</p></blockquote> <h3 id="符号化"><a class="header-anchor" href="#符号化">#</a> <a href="https://developers.arcgis.com/javascript/latest/visualization/symbols-color-ramps/" target="_blank" rel="noopener noreferrer">符号化<OutboundLink></OutboundLink></a></h3> <h4 id="常用符号的分类"><a class="header-anchor" href="#常用符号的分类">#</a> 常用符号的分类:</h4> <p>2D symbols:</p> <table><thead><tr><th>Symbol(符号类型)</th> <th>Geometry(几何图形)</th></tr></thead> <tbody><tr><td>SimpleMarkerSymbol</td> <td>Point, Polygon</td></tr> <tr><td>PictureMarkerSymbol</td> <td>Point, Polygon</td></tr> <tr><td>SimpleLineSymbol</td> <td>Polyline</td></tr> <tr><td>SimpleFillSymbol</td> <td>Polygon</td></tr> <tr><td>PictureFillSymbol</td> <td>Polygon</td></tr> <tr><td>TextSymbol</td> <td>Point, Polyline, Polygon</td></tr></tbody></table> <p>3D symbols:</p> <table><thead><tr><th>Symbol(符号类型)</th> <th>Geometry(几何图形)</th></tr></thead> <tbody><tr><td>PointSymbol3D</td> <td>Point</td></tr> <tr><td>LineSymbol3D</td> <td>Polyline</td></tr> <tr><td>PolygonSymbol3D</td> <td>Polygon</td></tr> <tr><td>MeshSymbol3D</td> <td>Mesh</td></tr> <tr><td>LabelSymbol3D</td> <td>Point, Polyline, Polygon</td></tr></tbody></table> <ul><li>WebStyleSymbol: 可以创建矢量 2D 符号和逼真的主题 3D 符号的类</li></ul> <h4 id="自定义渲染器"><a class="header-anchor" href="#自定义渲染器">#</a> <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-Renderer.html" target="_blank" rel="noopener noreferrer">自定义渲染器<OutboundLink></OutboundLink></a></h4> <p>渲染器定义了如何图层中直观地表示每个特征</p> <p>渲染一般有如下几个类型:</p> <p><img src="/note-sites/assets/img/renderType.62f86c4a.png" alt=""></p> <p>下面是 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html#properties-summary" target="_blank" rel="noopener noreferrer">FeatureLayer<OutboundLink></OutboundLink></a> 使用 <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-SimpleRenderer.html" target="_blank" rel="noopener noreferrer">简单渲染器<OutboundLink></OutboundLink></a> 渲染图片标记和文本标签的例子:</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">const</span> trailheadsRenderer <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 会自动转换为 new SimpleRenderer() 简单渲染器类型 </span>
    <span class="token string-property property">&quot;symbol&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 符号对象相关属性</span>
      <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;picture-marker&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 自动转换为 new PictureMarkerSymbol() 图片符号</span>
      <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://static.arcgis.com/images/Symbols/NPS/npsPictograph_0231b.png&quot;</span><span class="token punctuation">,</span><span class="token comment">// 图片</span>
      <span class="token string-property property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18px&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 图片宽度</span>
      <span class="token string-property property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token string">&quot;18px&quot;</span> <span class="token comment">// 图片高度</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 这是个标签对象</span>
<span class="token keyword">const</span> trailheadsLabels <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token comment">//  渲染器类型 会自动转换为 new TextSymbol() 文本符号</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#FFFFFF&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 颜色</span>
      <span class="token literal-property property">haloColor</span><span class="token operator">:</span> <span class="token string">&quot;#5E8D74&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 文本符号的光晕点颜色</span>
      <span class="token literal-property property">haloSize</span><span class="token operator">:</span> <span class="token string">&quot;2px&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 文本符号的光晕点大小</span>
      <span class="token literal-property property">font</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 自动转换为 new Font()</span>
        <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">&quot;12px&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 大小</span>
        <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">&quot;Noto Sans&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 字体</span>
        <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;italic&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 斜体</span>
        <span class="token literal-property property">weight</span><span class="token operator">:</span> <span class="token string">&quot;normal&quot;</span> <span class="token comment">// 加粗</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">labelPlacement</span><span class="token operator">:</span> <span class="token string">&quot;above-center&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 标签位置</span>
    <span class="token literal-property property">labelExpressionInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">expression</span><span class="token operator">:</span> <span class="token string">&quot;$feature.TRL_NAME&quot;</span> <span class="token comment">// 标签表达式 支持 SQL 语法</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 创建 FeatureLayer</span>
<span class="token keyword">const</span> trailheads <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads/FeatureServer/0&quot;</span>
    <span class="token literal-property property">renderer</span><span class="token operator">:</span> trailheadsRenderer<span class="token punctuation">,</span> <span class="token comment">// 指定 FeatureLayer 的渲染器</span>
    <span class="token literal-property property">labelingInfo</span><span class="token operator">:</span> <span class="token punctuation">[</span>trailheadsLabels<span class="token punctuation">]</span> <span class="token comment">// 标签信息 自动转换为 new LabelClass()</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  map<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>trailheads<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="手动加载"><a class="header-anchor" href="#手动加载">#</a> 手动加载</h3> <p>如果<code>View</code>是用<code>Map</code>实例构造的，那么<code>load</code>方法会自动执行，加载<code>View</code>和关联的<code>Map</code>中引用的所有资源。简单来讲，当实例化的图层并没有被map或view引用时，图层服务的所有资源并不会自动加载，需要手动调用<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-portal-PortalItem.html#load" target="_blank" rel="noopener noreferrer"><code>load</code><OutboundLink></OutboundLink></a>方法加载它所需的资源来完成初始化。</p> <p>可加载类的<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-portal-PortalItem.html#loadStatus" target="_blank" rel="noopener noreferrer">loadStatus<OutboundLink></OutboundLink></a>属性返回可加载资源的状态。四种状态是可能的</p> <table><thead><tr><th>状态</th> <th>描述</th></tr></thead> <tbody><tr><td><code>not-loaded</code></td> <td>资源尚未加载其元数据，并且其状态未正确初始化</td></tr> <tr><td><code>loading</code></td> <td>资源正在异步加载其元数据</td></tr> <tr><td><code>failed</code></td> <td>资源无法加载其元数据，遇到的错误可从<code>loadError</code>属性中获取。</td></tr> <tr><td><code>loaded</code></td> <td>资源成功加载其元数据并且其状态已正确初始化。</td></tr></tbody></table> <p>下面的状态转换代表了一个可加载资源所经历的阶段</p> <p><img src="data:image/png;base64,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" alt=""></p> <blockquote><p>更详细的经过, 见官方<a href="https://developers.arcgis.com/javascript/latest/programming-patterns/#load-status" target="_blank" rel="noopener noreferrer">负载状态<OutboundLink></OutboundLink></a></p></blockquote> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token keyword">async</span> <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>
        Map<span class="token punctuation">,</span>
        MapView<span class="token punctuation">,</span>
        esriConfig<span class="token punctuation">,</span>
        FeatureLayer<span class="token punctuation">,</span>
      <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string">&quot;esri/Map&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;esri/views/MapView&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;esri/config&quot;</span><span class="token punctuation">,</span>

        <span class="token string">&quot;esri/layers/FeatureLayer&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      esriConfig<span class="token punctuation">.</span>apiKey <span class="token operator">=</span> myKeyAPI<span class="token punctuation">;</span>

      <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">basemap</span><span class="token operator">:</span> <span class="token string">&quot;osm&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapView</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        map<span class="token punctuation">,</span> 
        <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">&quot;viewDiv&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer/0&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>layer<span class="token punctuation">.</span>loadStatus<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查看状态load状态</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>layer<span class="token punctuation">.</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查看字符数组</span>

      layer<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>layer<span class="token punctuation">.</span>loadStatus<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>layer<span class="token punctuation">.</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>这是一个没有与<code>Map</code>或者<code>View</code>关联的<code>FeatureLayer</code>，在实例化之后输出它的加载状态和包含的字段属性，并在手动调用<code>load()</code>之后再次输出加载状态和包含的字段。浏览器输出如下所示：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATsAAABqCAYAAADDefYhAAAdHUlEQVR4Xu2diVtT19bG/Vvu7dd7b3trW3s7OLS1WmsdWutUZ3GeEEWxqBUURAQUmURABpkFRQaZZxCUeRYBkTkMgQRICISEoe+3TxKEUBQCwaawzvOchyc5++y9z2+vvKy11072ApFIBDqJAdkA2cBct4EFf/zxB+gkBmQDZANz3QYWgA4iQASIwDwgQGI3DwaZHpEIEAGAxI6sgAgQgXlBgMRuXgwzPSQRIAIkdmQDRIAIzAsCJHbzYpjpIYkAESCxIxsgAkRgXhCYk2LXmXgFq75djI8WfsrOq0hqFkE+y8PZnWaNjef9kc0TYXBabdXgwYEdsL2fj6aeaVVANxEBIvAWAjoqdhVw/3EVbBNbIJJpPn7DA1L09IghzrLDkv9dRxwToGlUo1HDnYnmWHXKE08bu6cpdtXw3/4zLH1y0EBipxF7KkwEpkJAR8WuHM7LFsMyhofumahUqQuWfmFFYjcVS6AyRGCOE9Cy2AkRee5r2OXUI+TM1/h8ERdGforrT3vQPya2E8YYY/EXn6vCzE9x0Kccwr4hhlrp0S1e+DH+9Y//w/sffIz/KkJRdl5NQbNIw2D0LWKnHup+Cj3XHPBEYzuZiusb17C+qNrXcx0XonYj+foWrFqivP7fD/6Df/zqqObZVflvx/rlqvsXmuJxZTukYw2q0h9b169UcfgY/37vfRiQZzfHP3L0eH8VAS2LnQChJz7BQiZW5iwE7egSoy7oOD797CaeifvByRkndF8tskB8cwe6xCzUFGfBYcUKGHg/Z4Inh6ynh72XC9ulX+Lyo0o0Cbgy7JQOYJh9j1ej4w1ixwnd90vMEV7Fg0DRh1y4bliH068FjwmZXywq63iqPubDed2PMHDJRpNCEDmh24zvrgQhv4av6F/j40tYaTAaxnJCt0bfFkkVTehUXDfD+u+vjwoeJ3RrDXAjoRKNQq4PRfDYug4WJHYaDTEVJgJTJTArYrf/Xhk6pUPsBwaA4eYQHPnoBAJr+iAfFuLx6f9h/70qiOXDUErXENpCjbDMIABlgl6FIAKzGcZ2IvbCchxxLwBfMvi6D/woU6w+441nTdyc2zAGZAMYGmZfDlf1scxtPVZYheMFn/lmwhRcXWODiJJmSFgZ7lCfs3sJ7w2/wSO5BkKZso7hgVK4rFkNq9BK8PuAKp9NOHsvDTVCORNxrgaas5uq0VI5IjAdArMidofv16KPiZni4IfjxEfH4F/NiV0Z7BYthEWqiIW1o17acLEzli62RvzrRMIkYidIgOkP3+HzkRBz4RF4lQrRq1TK0WNCz+4FXJYvhkV0E5sPHNOH5x5Ys9IaYRV8MC2CIru6etnrUPvDf7+Pf/wWxsSOXa3wxk/fWSH0hbLsn8ROmASzH5bjsw/HhOFcaP7P/4NRyAsmdt1INFuDU15P0dg9EjqT2E3HgOkeIjBVAu9Y7NoRcvQTHA2uGxVDziuKu4jFR71R3DFFz254AFJFuKsKccW9kA0yT3F8lDuh2AkQcWYZ9P3LIBijjt3JV/HDSQ9kNHRhgIWYW37Uh01ChSrEFCPvzlp8Y6kSu3IvrFluhUdvErvhF3Bfew7ucaP3j/RVKh9inlwn4i+T2E3VSKkcEdAGgXcsdkPgBR3BZ4vtkdMjU4aszEuzWPM1zj96BYF0JLRtR7jBMiy1TkWzWMOkxKSe3RBaQg3x7XJbpLSIlevvWFhqu2UVzvsXgdczjO7Ua/hhqSmCy9rQywlo9QPsWr8Y7xmrxE5eDMc162ETUYV2FtWKMh2wc+0SvLfdSZWgGEDx7U1Yb+SB3GbxBEtRWOge9TvWnvNVJT1qEGaghx/+9R+cojk7bdg11UEE/kTgHYsdm6HrEyLJfBm+Xv4Nli77loWvn+P8/UI0sol/1fQX6+QQ+l4F4uSKVfh2iarcjSdonZLwdbHkwVasXcnq/nIR/vnPT7Bo8desLUMElHeBS/oO9XUh3WY1Vn3Pvc/KLfkCRvcyUC2Qs3k6dl3agIfGv2D1imVYwl0/5AQfx+NYdiNeGcZiAD2ZTtj481osXvotFu+3Q3SQOb4z9H2djZX38JHpshW/MCFXtKE4LRFbLVBkZBVtmGxm/eSuL8FZ1xA4GW6ATRits6PPKRGYDQJaFrsh9ApbIJCMyZwO9UHYLIRkYDTMlIta0NzMA4+nPLv6xgqd6jHZfZ2trJyqDK9LisFRNXwLCyaUna1oGVO/sp0O9Mi4EFJ5q1zcplams1cpdMpjCNIuPlpH6mgXo7enE20iKeQjheQ94Le1KJ+BXe+XitDWKWFzkSPeKWuDCV5by+hz8nid6OXC2AnaEEqkkHS1Q9QnY885G0NNdRKB+U1Ay2I3v2HS0xMBIqC7BEjsdHdsqGdEgAhokQCJnRZhUlVEgAjoLgESO90dG+oZESACWiRAYqdFmFQVESACukuAxE53x4Z6RgSIgBYJLBj9FsLItxHoLzEhGyAbmHs2sGB4eBh0EgOyAbKBuW4DFMZq0U2mqogAEdBdAiR2ujs21DMiQAS0SIDEToswqSoiQAR0lwCJne6ODfWMCBABLRIgsdMiTKqKCBAB3SVAYqe7Y0M9IwJEQIsESOy0CJOqIgJEQHcJ6KDY1SM5OAgenj5wZaf/Ex4k/eqbS9SkP4K3j/K6a1AmGntVv3qsu5ypZ0SACPzFBHRQ7PrRLehAG/8lIj2dcTumlm2jqC52UpEA7e3tqIjzxQ23OFSLpapdyf5imtQ8ESACOktAB8VuhJUAqX4ucJ5A7EZKdGTch+1dEjudtS7qGBHQIQJaFrsuZIUFIortuvUkJBDuXspQM6JcjgGVcybMi4TXwyy0yrndWbmjC3lRDxGcOT5cJbHTITuhrhCBvz0BLYtdBxI8HGBz2wN+T5rBa21HeZQnbt6JQxm36TTDxU/1wXXXBDSw10qx63iDB0di97e3LnoAIqBDBGZF7OzDytAmVm5uM1CfiNs37yG2WQa25w6JnQ4NPnWFCMwnArMidk5xPMg4ZeOOtnS42HoisoHEbj4ZFj0rEdA1AiR2ujYi1B8iQARmhcA7F7uBohBY2T5CYT/bp5U90sskP9y2uwX7qPFLTGjOblZGnColAvOUwDsXO0jrEeF2Bw6e3opMrUf0cyT6O+NOrErsap4gIMCfXfPCzZu3YGHnjjseLKvLyvVIB9gwjS46vu3ogKs2t+HgztUVi+IeKbgSdBABIkAExhPQstgNQizsQIdYzpITLDvBHQMSCNqFEMmHoXxLWaaN3644ubK9XQIIxOxbEFxGo1+Ejg7lNbWzsxdDQ9w84Mii4/FluiAZYkkRGmMiQASIwAQEtCx2xJgIEAEioJsESOx0c1yoV0SACGiZAImdloFSdUSACOgmARI73RwX6hURIAJaJkBip2WgVB0RIAK6SWCBRCIBncSAbIBsYK7bwILBwUHQSQzIBsgG5roNUBirmx439YoIEAEtEyCx0zJQqo4IEAHdJEBip5vjQr0iAkRAywRI7LQMlKojAkRANwmQ2OnmuFCviAAR0DIBEjstA6XqiAAR0E0CJHa6OS7UKyJABLRMQOtiJ8p0wv69e7Bt+052+qC0V/kjnbN5iLPv4oR9PGpE/dP8iac6RJ8/C//0BnT2z2ZPqW4iQAT+KgJaF7sBQTXycnOR7WeED/5tiQxxP/sFu9k9hDHnsfiEL0oE7DfvptVUOTzWroRlyAvw+6ZVAd1EBIiAjhPQuti9ft4iO3z0oRWJnY4bAHWPCMwXAn+J2KmHujtxNaoGov4xvzHcnQ1X/aPYowiF2Xk1clyIKsYzVwMc2qu8vvmHr/D+Hg81z64u4jSOHlDdv90DuR0S9Z9sr4nAyWOHVOH2L/jmww9hTJ7dfLF7es55SOCdix0ndLvXXYFnWiaeZucgOzsQllv0cD1iRPCYkIVEIivjKbvGXQ/G+ZUbYRZWjW6FIHJCdwwbL99FbGqmokyCwwEsOuz9Wuw4odtz5ioeJKXjmeL6BWzf64XsEcHjhG6PEcyCk5H2TNmGyfKlMCOxm4cfAXrk+ULgHYudCMkm32KbVTb4/UNQ7lIhQYXrUXxvHIrKTilLMAxA0CxA/+DI9V5kXvka391MRQvbrwLdGbj243l45DdBMqj0BtXn7OoQsPkQrKMrIVC1MSBMhumSdXB80ooetiNPXcBW7L8Rh4oOtu+FohM0ZzdfDJ6ec/4SeMdi9xIu332MS/ECSAdVG/Iw9vIcWyz9wR5pLWIwOUNPgS/OnzXA4SPHFOf2Vf/F+5fjwRPJ2N6L3vjpS2sk8ERgr/4sdqJUXF6yGj9vO4ADh5X3Hz6yC9//5wOYxPDQLetBMhNPff9SCHpH0hkkdvP3I0BPPl8IvGOx48F/+8c4HcZD38Co2PWkmmHJzrvI4UswWB8Lo70GuOgVjsdxiUhISITHmS+w0EIldqUuWPqFFeLeJHayPNxYuhembqGv7+fq4M5yPttqcUiIyHPLcNyXxG6+GDk9JxHgCLxjsZOh0n0nvvnFB2US1fq77hy471uDE/eK0NrLtlnkhO+z3xFa04V+Tg+Z+Olv+XzUsxOl48KSjXDObFOEpJwXeGbXSvxr70iCQoy033/G9uuReDXhujs5qn0P48dLEXjZxYXNjYi5eBybF36E8zRnR58KIjBnCWhZ7MTIumsI/eMsdNy2Cu+9twKbDhzBoSOOSGmRgZtik7WWwuvUOuw8wr3PyultwHn7RyjgcV4XC2n52bDV24SdBw/iIHf9shsczHZg4fVUZRjLEhS1/hexae8x7Dt0DHq/2cHXyQCfHh1dZyeuy4Tv9V04cuywsg3F6Y9Ctg6P20Rb0caZ3SzM5a7vgrm9Ly7v/BoWUbTObs5aOj3YvCegZbGToaUkFUmJyrBx9CxEo2SQbZyt5C16lYrkpNHryvByZCzkaHuegdRk1fX8evAbS5Fezeb5BlTLU0R1yEhPVdbPros6qvGklAeRbFCV9GCSyAQvPWVsH5iQSQdU37BQb6OcL0Lj8yxU83tYYmTe2wQBIAJzkoCWxW5OMqKHIgJEYA4QILGbA4NIj0AEiMDkBEjsJmdEJYgAEZgDBEjs5sAg0iMQASIwOQESu8kZUQkiQATmAAESuzkwiPQIRIAITE5gQW9vL+gkBmQDZANz3QYWDAwMgE5iQDZANjDXbYDC2Mm9XypBBIjAHCBAYjcHBpEegQgQgckJkNhNzohKEAEiMAcIkNjNgUGkRyACRGByAiR2kzOiEkSACMwBAiR2c2AQ6RGIABGYnACJ3eSMqAQRIAJzgIAOi50ExcGWiKnoZD/hrgHpphRYBmSjqUem+u06De4dKdqcgVvW5jA6Z6w47+e1sN/Km0Y9dAsR0AoBGXiF0bhnrbRHI2sfRBY2v96DRStNzINKZkXsSkrLUFhUgkG2Q9j0Dk7oLmO/6Q08qRVBrqimGcmWFrikEqARIeL+PiwdI4idyTDasB+34usglo3Zi1aDjvQ+vYnVhtZw9ApCSMgj5NV3sw2CNKiAihIBrRIYRFdjGZ7GPUKAown0LlzHzaR6kElqBnlWxC46Jg5mFlaIiIxBV1c3/vhjdHOdybs3KnQ+WQ3oVSodO7pQERuNCCY+nABxp7fpdnz8oR68ywToe62rrNxdI6zb5Ye89t5pGUR98D4c9EhHjZDb64wOIqArBGSoT3HBtVu34F/UrSud+tv0Y9bE7tDRkzAw/A2udz1RXFKGoaGpeXmSUn8cOXWJbahTh57XQjcBT3EJfI/9hMPX0lAtUm3eM1KM8+6W/ArXLD4kmoTAivtb8fj4alwJLkaLZHqe4d9m9KmjfzMCAuR4XsY1k1tIqie/TtPBm1Wx0zt4DAeO6OPy1euIjU9kPzjQ93Yvb0TA7uahme1Z8TZ/kBejj59OWCG1eiTMHfvoPATpLcW5B1UQSjUUrJ6nsFm9D04JtRCqzdO14ondQzytEuL1drOKJntRFnYLAU+qIRx1LzUdB2V5SSWibyegqEaIfrUa+Hjm4oDIzBoIpNOreuSuvspY3E4oZl6regtozYL3nWikPG9D38yaQHu+Dx5n5qOhS/0/TV91MjweJiOvoUux8dH0DwGb5ohFOmPeoeZ8S1H7JACPEjLxUjCzFiBtRPbDFGRksOkQtY52ojwiAJERmWAzLDM6+htz8DAlExl16i1AWI6EB9F4kPASav5b/yvEWtvC4XoEqmY6SDPq+d/z5lkXO07wuNPw3AX4+AVCLn9zaCjJtcOG7RcQWcm2UXybI8iSEOd27sDZqCp0TlhQhmybb3AyYOzesFMcoNpg7DnogOgXHVDXyUp4rLVBdFEr1B2+etzfuwomgVrwBDvTYG3og7TSVnWxk+TCacsR2IeWoWWGYtedfgOGPukobVUXu75cZ+zXt4c/mzqY6eeo5tExOIXGoFygPojNMReww9wVUS8EmJqf/6Yxa2B7/97Fg/uFaFNzcFqRaHEU5rZBKGibWQsQF+O+nR+CwsvVxU5agdBLl2B1IwLPZxhJSoqDYO//AOHl6mLXXxEOazMrXAkoVBe7jlx42Lvh5vj3p2ja873YOxM7kysWSHuSyZIWb3K/Jci5tQnbbNPQKJa/xatjiYpzu7H13APkt7JdySZ03CRIM/8a+v6ai50iOXHtMYpaJOrZXM7jO+aLPOZ1yRXZ2mjkNzOv8o2e4DRMqz4MJ+xjkF3bzZw85oEFpaKsVcw2Dmfv/2wGr/RadM/wM9wYfhL20Tmo7ZagIvoOglLL0CoeBPe+doSoDwWeV+CfmI363nbkebsiMqUcbcyrL/A8xJ4vAFkNM5TTvjIEWN1HdGI1JB0lCPKMRlxeEyTc+6fO4YZLEl72TIP/2FvaMmDvGwr/pzz0ch5YRCwSmdcr594/bYlrbk/Bm2Ekyc90hO+jQGTyetGQ/QjhsUl4zpeDe//S9ct/SkLIXsXD2pWJHSUnpjW4sy52h44ZwNnFHaVl5ZDJmIi9MVlRC++NS/B7WA26FLtjT3zwUs5jx6+/IbiAhVuDbyo3tbomauGNyQlBAi7//hAljc0oepoGV0NThL1oRmueC3bp2U7gCU5jPKoCsc0tGdmNr1CSHg0rIzekVTajNt4YGwzdkFApnGH4B7wM3AnXxBw0vCxFSuQNnHVLR2VzHeJ+2wwjh1AUts40KSNCptMtBKcUofp5IZ55m8DiwVOU1pUg4KwhrHyfsM3LZ6jYolx43n6I2MwKvCjLg5+5De4n5uJVWRhMjW3gGvMCnTMUIjQmwTwgDF55VXhVnAYXc08WHpegJtcNRibXFNMcM3Sy0ZRkgYBQb+S+qEFRihvM3MOQUFKDXFdjXDGxRvi4WFWQ6wWHu5ScmMYnS3HLrIqd8UVTxMQloKmJh+HhSebOxOkwW7IDd57x0fOm6ZaR8DWoAK19b5nTawrFnq+OI0AtSzsVRL3IvLEWFhEThKRceGsciITYEEQUN6A8yBQ++bm4f3InDJzTUd0pn/66PlXXuFByy+1YhAc/Qnb5S6Q5OSD+WRScDfTxe8BT1IhmOA/FAtSc29vgGP0YQSE5eF6VDke7BDyLcsHJ4ybwjC8fN085FWbjyzQj2tgavgEP8SC+GJWFobANeYZ4/8s4ef4WHmYzT2mGWoeWZFy19YWnXwgSisqRF+GK8PTH8LW8iEuWvkitkcwwTAa4UPKSZyBu+sSgsCAfaYFBSHjsD08bC5ja3kdG80ylrh8vwi7D3e8W7kUVIT8vHQGBSYj0uwcbczNYuiehUc0B7kax/1XctKDkxHSsclbFzumOGwqLS9DXN0lSYqTn/TmwXroedqmtYFHsBIcyfF20zx1ZPMkbwlfuNrZ0xXUvPj98H2WCPs2MvqcQzrsO4E7K+OQEq7bcC2u26GGLoT2S64VoSTDHoVMHseqnc3hU2AKWT1EdXCLjBq44J6JaqFn73Hzapn0H8ct59t++UYjywJM4c2IDvt3nhOgSPqQjIsGSCS52lnCKVoagUz+6kWK9FXv3bcZvXnloELyA/4lzOP7TCujZxyK7abS/imSC/VV4K0LQqbcA1CLkyHEcWH8c10JLUV+fAaeLF7Fv9Wac8kzE89fLefrwMskTdmY+midF6qJhdPoYfjx4FUE51SwEvAcLEzYWGw3hHFYA/uvpSC6R4YWbtx4i46VAI6+Ym0+7cPYgvtd3QHheLaqTHGF9Zi2+32eBO9FVEI1gZ8mECD9H3AhQhqBTPyQouv87DPetxnG7COTWvkKiPZtP/XE19MxcEVLarb5sSpGcMMe1y4Eo6Jx6K1RylMCseHZNvGY0NjZN7s2pjcTbM6iK8PWzA7BIegXRW5akKJaurDuGa6lvLzehEXDe24rLCPxTEkIldsu/wOYbyQovrj/fCT9+swWH72aijqnzqN/KJTJWYtH/riDmZce4rOrbTU8hdis3Qc9d6cW1sQn9Dct340xgLprGrqHhwt11y7DofAgKmzWZ/1KK3YoNB+CRUQvRQBuijDfhm51GCMhpUvuWiOiZM/TWf4Wt1o9RytfEo+TEbge+XW8KP86Lk5bD9+AWbNttg/Ai/hivjgt392Pt5ztgFV4GjZrgxG7fGqw+66bw4vorQ2C4ew+2mgYp/hGOOo5cIoOJ4Ccn2D+GCmiSPFWI3Z5fscFE6cV15rjDaNt27L4WjoKxKXEu3NXfgI/22yC4pEsDbVGK3a7Nm2ESkMkST53IcjPG1l/1YBFWCP74YVUkJxxxzTtbM1Ya9GiuF50VsZseNBkqvPZj3ZUoVHf1/ykk7KqMQ1REIZp7x62pG9vY29beTaFTym9O3MezRtGfFyN3VyMpLmr02xSK19ko5/dC/YsaLQjVX40vd7tNXM9b+iFve47UeDa/xRMpvDjl6yLUdDBPdux9LTEw3rACO24lolKjJRZytJalIT6zDM0ijrHqdVENOsYtSJQ/98fBTTuhf1fTObYe1D9LR1xWFWuD83SUr7OL68ctzZHjud9hbNx2CnfTaqDRNF5PE/IyE5H5vIFl47kmuNe5yK9uR4+aoytA+q0T+HmbKbwzmzT6xzPQWYeCjKfIecG+KsjqVL4uQHG1QH2uTpANN6Pt2HrWGQm1moS2AxDWFuIJ6/eLFpaEYiOseJ1fguoJ1hdRcmIKH+BJiuiQ2AEy3mOc/Wnf9L7qxYQu+NIhmFj5Iau+V/UVM80AaeObE73lD2C4ZQdOPShii5I1CTGn2tc+VISZYveu0/BVeGdTvU+TciyL6nQBP+2zUXpnM51jm6hpfj6cjDdC73qAWvisSS8nKyutS4Hd6aM4Zh+BfP5sfLm5Hw0Z7jh//DiuK7yzyXo0/euUnJg+u5E7dUrsACFKHAzws3k8arr/7N29+XF7UR7sAEdHD/ZdWglk0/pw9uGZ7Vps3n8C5y5dhXlEKdp6NJiD6a1CrKsjzA5dxBXHMOQ096Bfw/XMkw2n9FUKvO5Y4vBFc9iyDGd9p2ZzgpPVz10XlDyEt/NvMD5nxdb1FbGFwdoWCSGKH/ji9tkLMLrmiEcFjSz7PpWeaVCGWxAc4gMbfROYsoRFfLnSO9PmIWsuRFSAHU5eugIztvSleMYLpSfonagW6Y+9YX7VAsZHN8PQ0haJdbPy302baHS2Lh0TO+7TVooHaZXokA5okN1kK+czMlDV+aZ1d1Phz/5LZ4Uj2N8bXl7szHjFwi4NDEvagKywh/DzylAkJjS4cyqdU5SR8QoQ9eg+vNIqWGJCAyGecgtAd3UKYkK8EZFdjXbJtP5rTNKaCNXJsQjxikTWy/YxiR0NOjlZUVkbnqfGINgrEQXjw87J7p3idXlHFZ7Gh8ArNpdNZWgybzrFBrhiErbMKTNaaY/sjMosZt8s0uB+KqpGQPfEjgaICBABIjALBEjsZgEqVUkEiIDuESCx070xoR4RASIwCwQWSKVS0EkMyAbIBua6DSyQyWTsO6t0EgOyAbKBuW0D/w+GlLZiHgiEoAAAAABJRU5ErkJggg==" alt=""></p> <h3 id="fromjson-方法"><a class="header-anchor" href="#fromjson-方法">#</a> fromJSON 方法</h3> <p>许多类，包括所有<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-symbols-Symbol.html" target="_blank" rel="noopener noreferrer">符号<OutboundLink></OutboundLink></a>、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-Geometry.html" target="_blank" rel="noopener noreferrer">几何图形<OutboundLink></OutboundLink></a>、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Camera.html" target="_blank" rel="noopener noreferrer">相机<OutboundLink></OutboundLink></a>、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Viewpoint.html" target="_blank" rel="noopener noreferrer">视点<OutboundLink></OutboundLink></a>、<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-Color.html" target="_blank" rel="noopener noreferrer">颜色<OutboundLink></OutboundLink></a>和<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-support-FeatureSet.html" target="_blank" rel="noopener noreferrer">FeatureSet<OutboundLink></OutboundLink></a>，都包含<code>fromJSON()</code>方法</p> <p><code>fromJSON</code>方法从ArcGIS产品生成的<code>JSON</code>中创建一个指定类的实例。这种格式的<code>JSON</code>通常由<code>toJSON()</code>方</p> <p>法或通过<code>REST API</code>的查询创建。不能与一般的<code>JSON</code>或<a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GeoJSONLayer.html" target="_blank" rel="noopener noreferrer"><code>GeoJSON</code><OutboundLink></OutboundLink></a>混用。</p> <h4 id="jsonutils-辅助方法"><a class="header-anchor" href="#jsonutils-辅助方法">#</a> jsonUtils 辅助方法</h4> <p>在使用<code>fromJSON()</code>实例化一个对象时，有几个<code>jsonUtils</code>类作为工具类提供。</p> <ul><li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-support-jsonUtils.html" target="_blank" rel="noopener noreferrer"><code>esri/geometry/support/jsonUtils</code><OutboundLink></OutboundLink></a></li> <li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-jsonUtils.html" target="_blank" rel="noopener noreferrer"><code>esri/renderers/support/jsonUtils</code><OutboundLink></OutboundLink></a></li> <li><a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-symbols-support-jsonUtils.html" target="_blank" rel="noopener noreferrer"><code>esri/symbols/support/jsonUtils</code><OutboundLink></OutboundLink></a></li></ul> <p>当一个<code>JSON</code>对象是来自REST API的几何体、渲染器或符号，但对象类型未知时，这些类可以快速处理这种情</p> <p>况。例如，当一个图层的渲染器来自于REST请求，并且不确定该渲染器是否是<code>UniqueValueRenderer</code>时，调用</p> <p><code>esri/renderers/support/jsonUtils</code>类来帮助确定该渲染器的类型</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code>  <span class="token keyword">const</span> <span class="token punctuation">[</span>
    FeatureLayer<span class="token punctuation">,</span>
    rendererJsonUtils
  <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string">&quot;esri/layers/FeatureLayer&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;esri/renderers/support/jsonUtils&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rendererJSON <span class="token operator">=</span> <span class="token punctuation">{</span>               <span class="token comment">// 通过REST请求获得的渲染对象</span>
 <span class="token string-property property">&quot;authoringInfo&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;uniqueValue&quot;</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;field1&quot;</span><span class="token operator">:</span><span class="token string">&quot;CLASS&quot;</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;field2&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;field3&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;expression&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;fieldDelimiter&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;defaultSymbol&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;color&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">235</span><span class="token punctuation">,</span><span class="token number">235</span><span class="token punctuation">,</span><span class="token number">235</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;esriSLS&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;width&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span><span class="token string">&quot;esriSLSShortDot&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;defaultLabel&quot;</span><span class="token operator">:</span><span class="token string">&quot;Other major roads&quot;</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;uniqueValueInfos&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
       <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;I&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;symbol&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token string-property property">&quot;color&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">170</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;esriSLS&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;width&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span><span class="token string">&quot;esriSLSSolid&quot;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Interstate&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
       <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;U&quot;</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;symbol&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token string-property property">&quot;color&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">223</span><span class="token punctuation">,</span><span class="token number">115</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;esriSLS&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;width&quot;</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span><span class="token string">&quot;esriSLSSolid&quot;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;US Highway&quot;</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 将这个JSON表示的对象创建为渲染器对象</span>
<span class="token keyword">const</span> flRenderer <span class="token operator">=</span> rendererJsonUtils<span class="token punctuation">.</span><span class="token function">fromJSON</span><span class="token punctuation">(</span>rendererJSON<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在图层上设置渲染器</span>
<span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeatureLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">renderer</span><span class="token operator">:</span> flRenderer
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><blockquote><p><a href="https://pro.arcgis.com/zh-cn/pro-app/latest/tool-reference/conversion/features-to-json.htm" target="_blank" rel="noopener noreferrer">要素转JSON(转换)<OutboundLink></OutboundLink></a></p></blockquote> <h2 id="事件"><a class="header-anchor" href="#事件">#</a> 事件</h2> <p>弹出点击信息窗口</p> <div class="language-js line-numbers-mode"><pre v-pre="" class="language-js"><code><span class="token comment">// 设置 Popup 允许或禁止单击事件传播</span>
view<span class="token punctuation">.</span>popup<span class="token punctuation">.</span>autoOpenEnabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
view<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取位置信息</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>mapPoint<span class="token punctuation">,</span> <span class="token literal-property property">mapPoint</span><span class="token operator">:</span><span class="token punctuation">{</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>
    <span class="token comment">// 获取经纬度后3位</span>
    <span class="token keyword">const</span> lat <span class="token operator">=</span> latitude<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> lon <span class="token operator">=</span> longitude<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 打开弹出窗口</span>
    view<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 弹出窗口内容</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;位置是: [&quot;</span> <span class="token operator">+</span> lon <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> lat <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">location</span><span class="token operator">:</span> mapPoint<span class="token punctuation">,</span> <span class="token comment">// 弹出窗口的点</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2023/2/27 19:41:45</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-bac73764 data-v-c0d124fa><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#前置设置" class="sidebar-link reco-side-前置设置" data-v-bac73764>前置设置</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#显示地图、场景和图层" class="sidebar-link reco-side-显示地图、场景和图层" data-v-bac73764>显示地图、场景和图层</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#地图的工作原理-2d" class="sidebar-link reco-side-地图的工作原理-2d" data-v-bac73764>地图的工作原理(2D)</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#地图" class="sidebar-link reco-side-地图" data-v-bac73764>地图</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#网络地图" class="sidebar-link reco-side-网络地图" data-v-bac73764>网络地图</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#地图视图" class="sidebar-link reco-side-地图视图" data-v-bac73764>地图视图</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#_3d视图场景" class="sidebar-link reco-side-_3d视图场景" data-v-bac73764>3D视图场景</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#视图的常用方法" class="sidebar-link reco-side-视图的常用方法" data-v-bac73764>视图的常用方法</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#goto" class="sidebar-link reco-side-goto" data-v-bac73764>goTo</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#tomap-和-toscreen" class="sidebar-link reco-side-tomap-和-toscreen" data-v-bac73764>toMap 和 toScreen</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#histask" class="sidebar-link reco-side-histask" data-v-bac73764>hisTask</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#when" class="sidebar-link reco-side-when" data-v-bac73764>when</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#on" class="sidebar-link reco-side-on" data-v-bac73764>on</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#watch" class="sidebar-link reco-side-watch" data-v-bac73764>watch</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#widget" class="sidebar-link reco-side-widget" data-v-bac73764>widget</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#显示弹出窗口" class="sidebar-link reco-side-显示弹出窗口" data-v-bac73764>显示弹出窗口</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#图层" class="sidebar-link reco-side-图层" data-v-bac73764>图层</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#常见图层类型" class="sidebar-link reco-side-常见图层类型" data-v-bac73764>常见图层类型</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#显示图像" class="sidebar-link reco-side-显示图像" data-v-bac73764>显示图像</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#外部数据源图层介绍" class="sidebar-link reco-side-外部数据源图层介绍" data-v-bac73764>外部数据源图层介绍</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#arcgis-server服务介绍" class="sidebar-link reco-side-arcgis-server服务介绍" data-v-bac73764>ArcGIS Server服务介绍</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#图层和图层视图" class="sidebar-link reco-side-图层和图层视图" data-v-bac73764>图层和图层视图</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#查询过滤" class="sidebar-link reco-side-查询过滤" data-v-bac73764>查询过滤</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#过滤" class="sidebar-link reco-side-过滤" data-v-bac73764>过滤</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#定位" class="sidebar-link reco-side-定位" data-v-bac73764>定位</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#查找" class="sidebar-link reco-side-查找" data-v-bac73764>查找</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#query-identify-和-find-比较" class="sidebar-link reco-side-query-identify-和-find-比较" data-v-bac73764>Query Identify 和 Find 比较</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#地理处理任务" class="sidebar-link reco-side-地理处理任务" data-v-bac73764>地理处理任务</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#arcgis-api的编程模式" class="sidebar-link reco-side-arcgis-api的编程模式" data-v-bac73764>ArcGis API的编程模式</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#加载类" class="sidebar-link reco-side-加载类" data-v-bac73764>加载类</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#构造函数" class="sidebar-link reco-side-构造函数" data-v-bac73764>构造函数</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#特性" class="sidebar-link reco-side-特性" data-v-bac73764>特性</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#异步数据" class="sidebar-link reco-side-异步数据" data-v-bac73764>异步数据</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#符号化" class="sidebar-link reco-side-符号化" data-v-bac73764>符号化</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#手动加载" class="sidebar-link reco-side-手动加载" data-v-bac73764>手动加载</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#fromjson-方法" class="sidebar-link reco-side-fromjson-方法" data-v-bac73764>fromJSON 方法</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/ArcGIS/ArcGis.html#事件" class="sidebar-link reco-side-事件" data-v-bac73764>事件</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div></div></div>
    <script src="/note-sites/assets/js/app.9ff99686.js" defer></script><script src="/note-sites/assets/js/5.2f78da70.js" defer></script><script src="/note-sites/assets/js/1.9e97c91a.js" defer></script><script src="/note-sites/assets/js/11.4bc5f074.js" defer></script>
  </body>
</html>
