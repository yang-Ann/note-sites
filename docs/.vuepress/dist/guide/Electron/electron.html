<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Electron | An的个人笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/note-sites/favicon.ico">
    <script type="module" src="/note-sites/js/index.js"></script>
    <meta name="description" content="记录学习笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/note-sites/assets/css/0.styles.a5e0cdd4.css" as="style"><link rel="preload" href="/note-sites/assets/js/app.6e0c8c06.js" as="script"><link rel="preload" href="/note-sites/assets/js/5.83e8f80b.js" as="script"><link rel="preload" href="/note-sites/assets/js/1.9e97c91a.js" as="script"><link rel="preload" href="/note-sites/assets/js/20.74cbe0dd.js" as="script"><link rel="prefetch" href="/note-sites/assets/js/10.554eab3d.js"><link rel="prefetch" href="/note-sites/assets/js/11.43690c3a.js"><link rel="prefetch" href="/note-sites/assets/js/12.286c737a.js"><link rel="prefetch" href="/note-sites/assets/js/13.87c44ad8.js"><link rel="prefetch" href="/note-sites/assets/js/14.3aeeb954.js"><link rel="prefetch" href="/note-sites/assets/js/15.8914bed8.js"><link rel="prefetch" href="/note-sites/assets/js/16.f4328978.js"><link rel="prefetch" href="/note-sites/assets/js/17.80ca8361.js"><link rel="prefetch" href="/note-sites/assets/js/18.34dddd37.js"><link rel="prefetch" href="/note-sites/assets/js/19.854ec3eb.js"><link rel="prefetch" href="/note-sites/assets/js/21.3948684b.js"><link rel="prefetch" href="/note-sites/assets/js/22.574a6eb2.js"><link rel="prefetch" href="/note-sites/assets/js/23.647ef80e.js"><link rel="prefetch" href="/note-sites/assets/js/24.7c87d77b.js"><link rel="prefetch" href="/note-sites/assets/js/25.b26e5e2d.js"><link rel="prefetch" href="/note-sites/assets/js/26.103db665.js"><link rel="prefetch" href="/note-sites/assets/js/27.ef9065c6.js"><link rel="prefetch" href="/note-sites/assets/js/28.3e5878e2.js"><link rel="prefetch" href="/note-sites/assets/js/29.e55346c7.js"><link rel="prefetch" href="/note-sites/assets/js/3.1e69ef82.js"><link rel="prefetch" href="/note-sites/assets/js/30.f52c3f98.js"><link rel="prefetch" href="/note-sites/assets/js/31.140f2989.js"><link rel="prefetch" href="/note-sites/assets/js/32.225038a6.js"><link rel="prefetch" href="/note-sites/assets/js/33.047a3f47.js"><link rel="prefetch" href="/note-sites/assets/js/34.8b9f5ae5.js"><link rel="prefetch" href="/note-sites/assets/js/35.aced2f3e.js"><link rel="prefetch" href="/note-sites/assets/js/36.87b07c4e.js"><link rel="prefetch" href="/note-sites/assets/js/37.5d7ad259.js"><link rel="prefetch" href="/note-sites/assets/js/38.c8d0b2e8.js"><link rel="prefetch" href="/note-sites/assets/js/39.edf35bc6.js"><link rel="prefetch" href="/note-sites/assets/js/4.449a8b72.js"><link rel="prefetch" href="/note-sites/assets/js/40.1871f537.js"><link rel="prefetch" href="/note-sites/assets/js/41.e59ead13.js"><link rel="prefetch" href="/note-sites/assets/js/42.9be62944.js"><link rel="prefetch" href="/note-sites/assets/js/43.1698ae6d.js"><link rel="prefetch" href="/note-sites/assets/js/6.be1c7188.js"><link rel="prefetch" href="/note-sites/assets/js/7.77d4009d.js"><link rel="prefetch" href="/note-sites/assets/js/8.5b761802.js"><link rel="prefetch" href="/note-sites/assets/js/9.4b851c0a.js">
    <link rel="stylesheet" href="/note-sites/assets/css/0.styles.a5e0cdd4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-c0d124fa><div data-v-c0d124fa><div class="password-shadow password-wrapper-out" style="display:none;" data-v-30dff670 data-v-c0d124fa data-v-c0d124fa><h3 class="title" data-v-30dff670>An的个人笔记</h3> <p class="description" data-v-30dff670>记录学习笔记</p> <label id="box" class="inputBox" data-v-30dff670><input type="password" value="" data-v-30dff670> <span data-v-30dff670>Konck! Knock!</span> <button data-v-30dff670>OK</button></label> <div class="footer" data-v-30dff670><span data-v-30dff670><i class="iconfont reco-theme" data-v-30dff670></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-30dff670>vuePress-theme-reco</a></span> <span data-v-30dff670><i class="iconfont reco-copyright" data-v-30dff670></i> <a data-v-30dff670><span data-v-30dff670>An</span>
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-c0d124fa><header class="navbar" data-v-c0d124fa><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-sites/" class="home-link router-link-active"><!----> <span class="site-name">An的个人笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" class="nav-link"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-c0d124fa></div> <aside class="sidebar" data-v-c0d124fa><div class="personal-info-wrapper" data-v-5c49c935 data-v-c0d124fa><img src="/note-sites/assets/img/logo.png" alt="author-avatar" class="personal-img" data-v-5c49c935> <h3 class="name" data-v-5c49c935>
    An
  </h3> <div class="num" data-v-5c49c935><div data-v-5c49c935><h3 data-v-5c49c935>32</h3> <h6 data-v-5c49c935>文章</h6></div> <div data-v-5c49c935><h3 data-v-5c49c935>26</h3> <h6 data-v-5c49c935>标签</h6></div></div> <ul class="social-links" data-v-5c49c935><li class="social-item" data-v-5c49c935><i class="iconfont reco-github" style="color:#67cc86;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-mayun" style="color:#f47e60;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-juejin" style="color:#f8b26a;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-npm" style="color:#e15b64;" data-v-5c49c935></i></li><li class="social-item" data-v-5c49c935><i class="iconfont reco-bilibili" style="color:#67cc86;" data-v-5c49c935></i></li></ul> <hr data-v-5c49c935></div> <nav class="nav-links"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" class="nav-link"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-30dff670 data-v-c0d124fa><h3 class="title" data-v-30dff670>Electron</h3> <!----> <label id="box" class="inputBox" data-v-30dff670><input type="password" value="" data-v-30dff670> <span data-v-30dff670>Konck! Knock!</span> <button data-v-30dff670>OK</button></label> <div class="footer" data-v-30dff670><span data-v-30dff670><i class="iconfont reco-theme" data-v-30dff670></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-30dff670>vuePress-theme-reco</a></span> <span data-v-30dff670><i class="iconfont reco-copyright" data-v-30dff670></i> <a data-v-30dff670><span data-v-30dff670>An</span>
          
        <!---->
        2023
      </a></span></div></div> <div data-v-c0d124fa><div data-v-c0d124fa><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Electron</h1> <div data-v-7b22c628><i class="iconfont reco-account" data-v-7b22c628><span data-v-7b22c628>An</span></i> <i class="iconfont reco-date" data-v-7b22c628><span data-v-7b22c628>2022/6/12</span></i> <!----> <i class="tags iconfont reco-tag" data-v-7b22c628><span class="tag-item" data-v-7b22c628>Electron</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="electron"><a href="#electron" class="header-anchor">#</a> electron</h1> <p><a href="https://www.electronjs.org/" target="_blank" rel="noopener noreferrer">Electron<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个使用 JavaScript、HTML 和 CSS 构建桌面应用程序的框架。 嵌入 <a href="https://www.chromium.org/" target="_blank" rel="noopener noreferrer">Chromium<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 到 二进制的 Electron 允许您保持一个 JavaScript 代码代码库并创建 在Windows上运行的跨平台应用 macOS和Linux——不需要本地开发经验</p> <p><a href="https://www.electronjs.org/zh/docs/latest/" target="_blank" rel="noopener noreferrer">文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.electronjs.org/zh/docs/latest/breaking-changes" target="_blank" rel="noopener noreferrer">重大更改<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.electronjs.org/zh/docs/latest/tutorial/security#%E6%B8%85%E5%8D%95%E5%AE%89%E5%85%A8%E5%BB%BA%E8%AE%AE" target="_blank" rel="noopener noreferrer">安全建议清单<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.electronjs.org/zh/docs/latest/api/environment-variables" target="_blank" rel="noopener noreferrer">环境变量<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p></p><div class="table-of-contents"><ul><li><a href="#快速入门">快速入门</a><ul><li><a href="#electron的加载">electron的加载</a></li></ul></li><li><a href="#新建窗口">新建窗口</a><ul><li><a href="#创建窗口的常用配置">创建窗口的常用配置</a></li></ul></li><li><a href="#设置无边框">设置无边框</a></li><li><a href="#app">app</a></li><li><a href="#菜单">菜单</a><ul><li><a href="#操作栏菜单添加和事件">操作栏菜单添加和事件</a></li><li><a href="#右键菜单添加和事件">右键菜单添加和事件</a></li></ul></li><li><a href="#通过浏览器打开链接">通过浏览器打开链接</a></li><li><a href="#应用中嵌入网页">应用中嵌入网页</a></li><li><a href="#打开子窗口和父子通信">打开子窗口和父子通信</a><ul><li><a href="#打开子窗口">打开子窗口</a></li><li><a href="#子窗口向父窗口通信">子窗口向父窗口通信</a></li><li><a href="#父窗口向子窗口通信">父窗口向子窗口通信</a></li></ul></li><li><a href="#进程间通信">进程间通信</a><ul><li><a href="#主进程到渲染进程">主进程到渲染进程</a></li><li><a href="#渲染进程到主进程">渲染进程到主进程</a></li><li><a href="#渲染进程到渲染进程">渲染进程到渲染进程</a></li><li><a href="#互相通信">互相通信</a></li></ul></li><li><a href="#系统托盘">系统托盘</a><ul><li><a href="#托盘气泡通知">托盘气泡通知</a></li></ul></li><li><a href="#对话框">对话框</a><ul><li><a href="#打开文件对话框">打开文件对话框</a></li><li><a href="#保存文件对话框">保存文件对话框</a></li><li><a href="#消息对话框">消息对话框</a></li></ul></li><li><a href="#断网提示">断网提示</a></li><li><a href="#系统桌面通知">系统桌面通知</a></li><li><a href="#注册全局快捷键">注册全局快捷键</a></li><li><a href="#剪切和复制">剪切和复制</a></li><li><a href="#vue-electron">Vue + Electron</a><ul><li><a href="#打包">打包</a></li><li><a href="#自定义安装配置">自定义安装配置</a><ul><li><a href="#生成icon图片">生成icon图片</a></li><li><a href="#自定义打包">自定义打包</a></li></ul></li></ul></li></ul></div><p></p> <h2 id="快速入门"><a href="#快速入门" class="header-anchor">#</a> 快速入门</h2> <ul><li><p>安装<code>npm install electron</code></p></li> <li><p>初始化<code>npm</code>, 修改 <code>main</code>字段(主页入口), 并设置<code>script</code>命令,</p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;learn-electron&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./main.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 这个字段就是启动主线程的文件路径</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// `chcp 65001` 防止控制台输出中文乱码</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chcp 65001 &amp;&amp; electron .&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;electron build&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>根目录创建<code>index.html</code>文件</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>

<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src 'self'; script-src 'self'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-Content-Security-Policy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src 'self'; script-src 'self'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    We are using Node.js <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>node-version<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>,
    Chromium <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chrome-version<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>,
    and Electron <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>electron-version<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.

    <span class="token comment">&lt;!-- 引入额外的js脚本 需要在 body标签结束之前引入 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./renderer.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>根目录创建<code>main.js</code>文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main.js</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// app 模块, 它控制应用程序的事件生命周期</span>
<span class="token comment">// BrowserWindow 模块, 它创建和管理应用程序 窗口</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 主页面</span>
<span class="token keyword">let</span> win <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">createWindow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建浏览器窗口</span>
  win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token comment">// 窗口宽度</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token comment">// 窗口高度</span>
    <span class="token comment">// 将指定脚本附加到渲染器流程</span>
    <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">preload</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./preload.js'</span><span class="token punctuation">)</span> <span class="token comment">// 脚本会被执行, 该文件可以使用所有的 Node API </span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 设置任务栏图标</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 设置标题</span>
      
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 主进程加载一个文件</span>
  win<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token comment">// 主进程加载一个链接(只能加载文件或者链接)</span>
  <span class="token comment">// win.loadURL(&quot;https://www.bilibili.com&quot;);</span>
    
  <span class="token comment">// 设置为最顶层</span>
  <span class="token comment">// win.setAlwaysOnTop(true);</span>

  <span class="token comment">// 打开开发者工具</span>
  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">openDevTools</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 关闭开发者工具</span>
  <span class="token comment">// win.webContents.closeDevTools();</span>
  
  <span class="token comment">// 删除菜单</span>
  <span class="token comment">// win.removeMenu();</span>
<span class="token punctuation">}</span>

<span class="token comment">// ready 事件表示页面被打开后</span>
app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;ready&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token comment">// app.whenReady().then(() =&gt; { // 等价于监听 app模块的 ready事件</span>
    
  <span class="token comment">// 创建浏览器窗口</span>
  <span class="token function">createWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 关闭所有窗口事件</span>
  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'window-all-closed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// process.platform 属性返回标识运行 Node.js 进程的操作系统平台的字符串</span>

    <span class="token comment">// 在 macOS 上, 除非用户用 Cmd + Q 确定地退出, </span>
    <span class="token comment">// 否则绝大部分应用及其菜单栏会保持激活</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>global<span class="token punctuation">.</span>process<span class="token punctuation">.</span>platform <span class="token operator">!==</span> <span class="token string">'darwin'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    win <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 如果没有窗口打开则打开一个窗口 (macOS)</span>
  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// BrowserWindow.getAllWindows() 返回所有打开的窗口的数组</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>BrowserWindow<span class="token punctuation">.</span><span class="token function">getAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在macOS上, 当单击dock图标并且没有其他窗口打开时</span>
      <span class="token comment">// 通常在应用程序中重新创建一个窗口</span>
      <span class="token function">createWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><p>根目录创建<code>preload.js</code>文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// preload.js </span>
<span class="token comment">// 所有 Node.js API都可以在预加载过程中使用</span>
<span class="token comment">// 它拥有与 Chrome扩展 一样的沙盒</span>

<span class="token comment">// DOMContentLoaded事件咋子 DOM 加载完成后事件</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 选择指定元素(selector)并设置其innerText属性为text</span>
    <span class="token keyword">const</span> <span class="token function-variable function">replaceText</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> text</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">)</span> element<span class="token punctuation">.</span>innerText <span class="token operator">=</span> text
    <span class="token punctuation">}</span>

    <span class="token comment">// 读取 process.versions(版本信息对象)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> dependency <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'chrome'</span><span class="token punctuation">,</span> <span class="token string">'node'</span><span class="token punctuation">,</span> <span class="token string">'electron'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将 'chrome', 'node', 'electron'的版本信息插入到指定 DOM 中</span>
        <span class="token function">replaceText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dependency<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-version</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>versions<span class="token punctuation">[</span>dependency<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>platform<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>根目录创建<code>renderer.js</code>文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// renderer.js</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>alert<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'i am renderer.js alert.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>运行<code>npm run start</code>后就出现一个窗口会自动打开 开发者工具, 0.5s后弹出提示</p> <p><img src="/note-sites/assets/img/image-20220307230544681.efa44fb7.png" alt="image-20220307231648332"></p> <blockquote><p>开发者工具和<strong>chrome/edge浏览器</strong>一样, 在菜单栏的<code>View -&gt; Toggle Developer Tools</code>, 快捷键<code>Ctrl + Shift + i</code> 或者<code>win.webContents.openDevTools()</code>就能调用出来可以用来调试页面</p></blockquote> <h3 id="electron的加载"><a href="#electron的加载" class="header-anchor">#</a> electron的加载</h3> <p>electron的加载先读取<code>package.json</code>文件中的<code>main</code>字段, 并将其对应的文件加载为<strong>主线程</strong></p> <p>主线程内通过主线程的<code>loadFile(filePath)</code>方法可以加载一个渲染器进程(子窗口)</p> <h2 id="新建窗口"><a href="#新建窗口" class="header-anchor">#</a> 新建窗口</h2> <p>在渲染进程中(<strong>html文件或其加载的js文件</strong>)中是不能使用<code>new BrowserWindow()</code>来新建窗口的, 如果在渲染进程中打开新的窗口就必须使用<code>remote</code>模块, <code>remote</code>模块里面提供很多<code>main</code>主进程对象的方法或对象, <code>BrowserWindow</code>就是其中之一</p> <p><strong>electron14.0</strong>之前版本使用</p> <ul><li><p>在<strong>主进程</strong>的窗口中加入<code>webPreferences.enableRemoteModule: true</code>参数才能够调用<code>remote</code>模块</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 导入 remote 中的  BrowserWindow</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>remote<span class="token punctuation">;</span>
  <span class="token keyword">let</span> newWin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  win<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">'index2.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  newWin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    newWin <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul> <p><strong>electron14.0</strong>版本API修改</p> <ul><li><p>安装<code>npm install --save-dev @electron/remote</code></p></li> <li><p>在<strong>主进程</strong>中导入</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> remote <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@electron/remote/main'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// import * as remote from &quot;@electron/remote/main&quot;;</span>

<span class="token keyword">let</span> win<span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token comment">// 初始化</span>
  remote<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 这里要在主线程创建以后添加</span>
  remote<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span>win<span class="token punctuation">.</span>webContents<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>在<strong>渲染进程</strong>中使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 从 @electron/remote 引入 remote</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@electron/remote&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newWin  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">500</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

newWin<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">&quot;demo.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

newWin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;closed&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  newWin <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul> <h3 id="创建窗口的常用配置"><a href="#创建窗口的常用配置" class="header-anchor">#</a> 创建窗口的常用配置</h3> <p><a href="https://www.electronjs.org/zh/docs/latest/api/browser-window" target="_blank" rel="noopener noreferrer"><code>BrowserWindow</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// fullscreen: true, // 全屏</span>
  <span class="token comment">// frame: false, // 让桌面应用没有边框, 这样菜单栏也会消失</span>
  <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不允许用户改变窗口大小</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token comment">// 设置窗口宽高</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token literal-property property">icon</span><span class="token operator">:</span> iconPath<span class="token punctuation">,</span> <span class="token comment">// 应用运行时的标题栏图标</span>
  <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// 最小宽度</span>
  <span class="token literal-property property">minHeight</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">// 最小高度</span>
  <span class="token literal-property property">maxWidth</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// 最大宽度</span>
  <span class="token literal-property property">maxHeight</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token comment">// 最大高度</span>
  <span class="token comment">// 进行对首选项的设置</span>
  <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">backgroundThrottling</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 设置应用在后台正常运行</span>
    <span class="token literal-property property">enableRemoteModule</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许使用 remote 模块</span>
    <span class="token literal-property property">nodeIntegration</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 设置能在页面或导入的js文件中使用 nodejs的API(需要配合contextIsolation一起使用)</span>
    <span class="token literal-property property">contextIsolation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 关闭警告信息</span>
    <span class="token comment">// preload: path.join(__dirname, './preload.js') // 在渲染器流程中加载文件</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>开启了<code>webPreferences</code>的<code>nodeIntegration</code>和<code>contextIsolation</code>就可以直接在<code>&lt;script&gt;</code>或js文件中直接使用node的API了, 如下:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击读取文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 这个引入的文件里可以使用node的API --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// script标签里也可以使用node的API</span>
  <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> txt <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      title<span class="token punctuation">.</span>innerText <span class="token operator">=</span> txt<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="设置无边框"><a href="#设置无边框" class="header-anchor">#</a> 设置无边框</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">frame</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 让桌面应用没有边框, 这样菜单栏也会消失</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>菜单其实它还在, 仍然可以通过快捷键调用出菜单, 可以直接删除菜单<code>win.removeMenu()</code></p> <p>设置窗口可以拖动</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">html</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-app-region</span><span class="token punctuation">:</span> drag<span class="token punctuation">;</span> <span class="token comment">/* drag 可拖动 | no-drag 不可拖动 */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在页面使用css样式时需要设置<code>meta</code>标签的<code>content</code>属性为<code>style-src 'unsafe-inline'</code>, 否则会报错</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> 
  <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content-security-policy<span class="token punctuation">&quot;</span></span> 
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src 'none'; script-src 'self';
    connect-src 'self'; img-src 'self';
    style-src 'unsafe-inline'<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="app"><a href="#app" class="header-anchor">#</a> app</h2> <p><a href="https://www.electronjs.org/zh/docs/latest/api/app" target="_blank" rel="noopener noreferrer"><code>app</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块控制应用程序的事件生命周期和提供一些主线程相关的方法</p> <h2 id="菜单"><a href="#菜单" class="header-anchor">#</a> 菜单</h2> <h3 id="操作栏菜单添加和事件"><a href="#操作栏菜单添加和事件" class="header-anchor">#</a> 操作栏菜单添加和事件</h3> <p>如果不给主程序创建操作栏菜单则会使用默认的菜单, 创建操作栏菜单使用<a href="https://www.electronjs.org/zh/docs/latest/api/menu" target="_blank" rel="noopener noreferrer"><code>Menu</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块, 代码如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Menu <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@electron/remote&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义一个方法创建菜单</span>
<span class="token keyword">const</span> <span class="token function-variable function">createMenu</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义菜单模板</span>
  <span class="token keyword">const</span> menuTemplate <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 菜单显示的文本</span>
      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单一号&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// submenu 代表下一级菜单</span>
      <span class="token literal-property property">submenu</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;文件&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;保存&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;首选项&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">submenu</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;首选项1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;首选项2&quot;</span> <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单一号&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">submenu</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;新建窗口&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// 添加快捷键(会触发click事件)</span>
          <span class="token literal-property property">accelerator</span><span class="token operator">:</span> <span class="token string">&quot;ctrl+n&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// 绑定单击事件</span>
          <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> newWin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
              <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">500</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            newWin<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">&quot;./render/remote/dome.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            newWin<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;closed&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              newWin <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;首选项&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;帮助&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;退出&quot;</span><span class="token punctuation">,</span>
          <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 从模板中创建菜单</span>
  <span class="token keyword">const</span> myMenu <span class="token operator">=</span> Menu<span class="token punctuation">.</span><span class="token function">buildFromTemplate</span><span class="token punctuation">(</span>menuTemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 设置为应用程序菜单</span>
  Menu<span class="token punctuation">.</span><span class="token function">setApplicationMenu</span><span class="token punctuation">(</span>myMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;ready&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// 创建菜单</span>
  <span class="token function">createMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h3 id="右键菜单添加和事件"><a href="#右键菜单添加和事件" class="header-anchor">#</a> 右键菜单添加和事件</h3> <p>右键菜单是通过渲染器(<strong>html</strong>)页面的<code>contextmenu</code>事件添加的</p> <p>在渲染进程中需要通过<code>remote</code>模块加载</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Menu<span class="token punctuation">,</span> getCurrentWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@electron/remote'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 右键菜单模板</span>
<span class="token comment">// 和操作栏菜单是一样的</span>
<span class="token keyword">const</span> rightMenuTemplate <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;右键菜单一号&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">submenu</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单3&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">accelerator</span><span class="token operator">:</span> <span class="token string">&quot;ctrl+l&quot;</span><span class="token punctuation">,</span>
        <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;右键菜单一号&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;右键菜单二号&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">submenu</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单4&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单5&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;菜单6&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// 从模板中创建菜单</span>
<span class="token keyword">const</span> menu <span class="token operator">=</span> Menu<span class="token punctuation">.</span><span class="token function">buildFromTemplate</span><span class="token punctuation">(</span>rightMenuTemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;contextmenu&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 阻止默认行为</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 显示菜单</span>
  menu<span class="token punctuation">.</span><span class="token function">popup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">window</span><span class="token operator">:</span> <span class="token function">getCurrentWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// window: newWin 给对应的 BrowserWindow 对象即可</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="通过浏览器打开链接"><a href="#通过浏览器打开链接" class="header-anchor">#</a> 通过浏览器打开链接</h2> <p>默认electron打开a标签的链接是直接在客户端打开的, electron提供了<code>shell</code>模块可以设置为使用浏览器打开, <code>shell</code>模块可以直接在渲染器中直接使用, 如下:</p> <p><strong>dome.html</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aHref<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.bilibili.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>bilibili<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./dome.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>dome.js</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> shell <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;electron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">bindAHrefClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> aHref <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;aHref&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 绑定点击事件</span>
  aHref<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 阻止默认行为</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取链接</span>
    <span class="token keyword">const</span> href <span class="token operator">=</span> aHref<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;href&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 本地浏览器打开</span>
    shell<span class="token punctuation">.</span><span class="token function">openExternal</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">bindBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="应用中嵌入网页"><a href="#应用中嵌入网页" class="header-anchor">#</a> 应用中嵌入网页</h2> <p>嵌入网页类似于<strong>iframe</strong>, electron提供了<a href="https://www.electronjs.org/zh/docs/latest/api/browser-view" target="_blank" rel="noopener noreferrer"><code>BrowserView</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块, <code>BrowserView</code>模块只能在主线程中使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow<span class="token punctuation">,</span> Menu<span class="token punctuation">,</span> BrowserView <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;ready&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  
  <span class="token comment">// 创建 BrowserView 对象</span>
  <span class="token keyword">const</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 主线程加载 BrowserView 对象</span>
  win<span class="token punctuation">.</span><span class="token function">setBrowserView</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 相关属性设置</span>
  view<span class="token punctuation">.</span><span class="token function">setBounds</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  view<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token string">&quot;https://electronjs.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果electron报<code>Electron Security Warning (Insecure Content-Security-Policy)</code>则需要引入一个<code>meta</code>标签的<code>http-equiv</code>属性如下</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="打开子窗口和父子通信"><a href="#打开子窗口和父子通信" class="header-anchor">#</a> 打开子窗口和父子通信</h2> <h3 id="打开子窗口"><a href="#打开子窗口" class="header-anchor">#</a> 打开子窗口</h3> <p>这个打开子窗口是使用的<code>windown.open()</code>不是<code>BrowserWindow</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">bindBtn2Click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btn2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可以打开一个URL链接</span>
    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;https://electronjs.org&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 也可以打开一个html文件</span>
    <span class="token comment">// window.open(&quot;./child.html&quot;);</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="子窗口向父窗口通信"><a href="#子窗口向父窗口通信" class="header-anchor">#</a> 子窗口向父窗口通信</h3> <p>父窗口打开一个子窗口并监听<code>message</code>事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 打开一个子窗口</span>
  window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;./render/remote/demo.html&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_blank&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;width=700, height=500, left=200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// 监听 message 事件</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;父窗口收到的数据&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>子窗口通过<code>window.opener.postMessage()</code>方法向父窗口发送数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// window.opener.postMessage(&quot;子窗口数据&quot;, &quot;/&quot;); // 发送给路径 / 对应的页面</span>
window<span class="token punctuation">.</span>opener<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;子窗口数据&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发送所有的路径对应的页面</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="父窗口向子窗口通信"><a href="#父窗口向子窗口通信" class="header-anchor">#</a> 父窗口向子窗口通信</h3> <p>父窗口在打开一个子窗口的时候会获得这个子窗口对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> btn2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获得子窗口对象</span>
  <span class="token keyword">const</span> childWin <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;./render/remote/demo.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 传输数据</span>
    childWin<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;父窗口的数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在子窗口监听<code>message</code>事件即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;父窗口传递的数据&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="进程间通信"><a href="#进程间通信" class="header-anchor">#</a> 进程间通信</h2> <p>官方文档：<a href="https://www.electronjs.org/zh/docs/latest/api/ipc-main" target="_blank" rel="noopener noreferrer">ipcMain<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://www.electronjs.org/zh/docs/latest/api/ipc-renderer" target="_blank" rel="noopener noreferrer">ipcRenderer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://www.electronjs.org/zh/docs/latest/api/web-contents" target="_blank" rel="noopener noreferrer">webContents<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>主线程</strong> 到 <strong>渲染线程</strong> 通过 <code>webContents.send()</code> 来发送 ---&gt;<code>ipcRenderer.on()</code> 来监听</p> <p><strong>渲染线程</strong> 到 <strong>主线程</strong> 需要通过 <code>ipcRenderer.send()</code>发送 ---&gt; <code>ipcMain.on()</code>来监听</p> <blockquote><p>也可以使用node的<code>events</code>模块进行通信</p></blockquote> <h3 id="主进程到渲染进程"><a href="#主进程到渲染进程" class="header-anchor">#</a> 主进程到渲染进程</h3> <p>主进程发送消息</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 省略新建 win 的代码</span>

<span class="token comment">// 主进程发送一个 mainMsg 类的消息给渲染线程</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;mainMsg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;我是主线程发送的消息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在渲染线程中使用<code>ipcRenderer.on</code>来进行监听对应的消息</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;electron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 渲染器进程通过 ipcRenderer.on  监听 mainMsg 消息</span>
ipcRenderer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;mainMsg&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="渲染进程到主进程"><a href="#渲染进程到主进程" class="header-anchor">#</a> 渲染进程到主进程</h3> <p>渲染线程中通过<code>ipcRenderer.send()</code>进行发送消息</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;electron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 渲染器进程发送 renderMsg 类型的消息</span>
  ipcRenderer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;renderMsg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;我是渲染器进程发送的消息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ipcRenderer.sendSync(); // 同步发送</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>主进程通过<code>ipcMain.on()</code>监听<code>renderMsg</code>类型的消息</p> <p>还可以通过<code>ipcMain.once()</code>只监听一次消息事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ipcMain <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;electron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 省略其他代码</span>

<span class="token comment">// 主进程通过 ipcMain.on 监听 renderMsg 类型的消息</span>
ipcMain<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;renderMsg&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="渲染进程到渲染进程"><a href="#渲染进程到渲染进程" class="header-anchor">#</a> 渲染进程到渲染进程</h3> <p>渲染进程发送消息到渲染进程使用<code>ipcRenderer.sendTo()</code>方法, 第一个参数为要发送给的渲染器进程对应的<code>webContentsId</code></p> <p>获取渲染器进程<code>webContentsId</code>通过<a href="https://www.electronjs.org/zh/docs/latest/api/process" target="_blank" rel="noopener noreferrer"><code>process</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块的<code>pid</code>属性获取</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> process <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@electron/remote&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;index.js 渲染器进程的id为: &quot;</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>pid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>electron提供的<code>process</code>模块和node的<code>process</code>模块重名了, 解决方法是node<code>process</code>模块使用<code>global.process</code>访问或者从<code>@electron/remote</code>导出模块时重命名</p> <h3 id="互相通信"><a href="#互相通信" class="header-anchor">#</a> 互相通信</h3> <p><strong>渲染进程</strong>使用<code>@electron/remote</code>的<code>ipcMain.on</code>监听到<strong>主进程</strong>的事件, 使用<code>ipcMain.emit</code>发送事件</p> <p><strong>主进程</strong>通过<code>electron</code>的<code>ipcMain.emit</code>发送事件, 使用<code>ipcMain.on</code>监听事件</p> <h2 id="系统托盘"><a href="#系统托盘" class="header-anchor">#</a> 系统托盘</h2> <p>系统托盘使用<a href="https://www.electronjs.org/zh/docs/latest/api/tray" target="_blank" rel="noopener noreferrer"><code>Tray</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块, 常用方法如下:</p> <ul><li><p><code>tray.destroy()</code>: 立即销毁该任务栏图标</p></li> <li><p><code>tray.setImage(image)</code>: 设置<code>image</code>作为托盘中显示的图标</p></li> <li><p><code>tray.setToolTip(toolTip)</code>: 设置鼠标指针在托盘图标上悬停时显示的文本</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Menu<span class="token punctuation">,</span> Tray<span class="token punctuation">,</span> nativeImage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;electron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tray
<span class="token keyword">const</span> <span class="token function-variable function">createTray</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里使用的是一个 png 来创建 icon</span>
  <span class="token keyword">const</span> icon <span class="token operator">=</span> nativeImage<span class="token punctuation">.</span><span class="token function">createFromPath</span><span class="token punctuation">(</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./static/icon.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 创建 Tray</span>
  tray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tray</span><span class="token punctuation">(</span>icon<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 鼠标移动到托盘上的提示</span>
  tray<span class="token punctuation">.</span><span class="token function">setToolTip</span><span class="token punctuation">(</span><span class="token string">&quot;这个是系统托盘的提示文本&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 监听托盘右键事件</span>
  tray<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;right-click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 右键菜单模板</span>
    <span class="token keyword">const</span> tempate <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;无操作&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;退出&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> app<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
    <span class="token comment">// 通过 Menu 创建菜单</span>
    <span class="token keyword">const</span> contextMenu <span class="token operator">=</span> Menu<span class="token punctuation">.</span><span class="token function">buildFromTemplate</span><span class="token punctuation">(</span>tempate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 应用托盘右键菜单</span>
    tray<span class="token punctuation">.</span><span class="token function">popUpContextMenu</span><span class="token punctuation">(</span>contextMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 监听点击托盘的事件</span>
  tray<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断窗口是否显示状态</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>win<span class="token punctuation">.</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 隐藏窗口</span>
      win<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 显示窗口</span>
      win<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;ready&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  
  <span class="token comment">// 创建系统托盘</span>
  <span class="token function">createTray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="托盘气泡通知"><a href="#托盘气泡通知" class="header-anchor">#</a> 托盘气泡通知</h3> <p>托盘气泡通知使用<code>tray.displayBalloon(options)</code>方法, <code>options</code>具体参数如下:</p> <ul><li><code>icon</code>: 当 <code>iconType</code> 是 <code>custom</code> 时, 该字段被使用</li> <li><code>iconType</code>: 可以是 <code>none</code>, <code>info</code>, <code>warning</code>, <code>error</code> 或 <code>custom</code>, 默认值为 <code>custom</code></li> <li><code>title</code> : 标题</li> <li><code>content</code>: 内容</li> <li><code>noSound</code>: 不播放相关声音。 默认值为 <code>false</code>, 映射到<code>NIIF_NOSOUND</code></li></ul> <p><code>tray.removeBalloon()</code>: 移除托盘气球</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">createTrayTip</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  tray<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;balloon-show&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;托盘气泡显示&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  tray<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;balloon-click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;点击托盘气泡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  tray<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;balloon-closed&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;托盘气泡被关闭&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  tray<span class="token punctuation">.</span><span class="token function">displayBalloon</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iconType</span><span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;托盘气泡标题&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&quot;托盘气泡内容文本&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 移除托盘气泡</span>
    tray<span class="token punctuation">.</span><span class="token function">removeBalloon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="对话框"><a href="#对话框" class="header-anchor">#</a> 对话框</h2> <h3 id="打开文件对话框"><a href="#打开文件对话框" class="header-anchor">#</a> 打开文件对话框</h3> <p>electron提供<a href="https://www.electronjs.org/zh/docs/latest/api/dialog" target="_blank" rel="noopener noreferrer"><code>dialog</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块来生成一个对话框, 打开文件选择对话框使用<code>dialog.showOpenDialog()</code>方法(加<code>Sync</code>后缀为同步API), 传递两个参数, 一个是设置基本属性, 另一个是回调函数可以使用异步(<code>Promise</code>)的<code>then()</code>方法, 接受到如下参数:</p> <ul><li><strong>title</strong>: 对话框的标题</li> <li><strong>defaultPath</strong>:  默认打开路径</li> <li><strong>buttonLabel</strong>:  确认按钮的自定义标签</li> <li><strong>filters</strong>: 文件选择过滤器</li> <li><strong>properties</strong>: 打开文件的属性</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> openBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;openBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
openBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 打开文件对话框</span>
  dialog<span class="token punctuation">.</span><span class="token function">showOpenDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;请选择文件&quot;</span><span class="token punctuation">,</span> <span class="token comment">// dialog标题</span>
    <span class="token literal-property property">defaultPath</span><span class="token operator">:</span> <span class="token string">&quot;C:\\Users\\33153\\Desktop\\女仆.webp&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 默认打开的文件路径</span>
    <span class="token literal-property property">buttonLabel</span><span class="token operator">:</span> <span class="token string">&quot;自定义确认按钮文本&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 确认按钮文本</span>
    <span class="token comment">// properties: [&quot;openFile&quot;],</span>
    <span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 文件过滤器</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;图片&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 这个文本是显示在过滤器前面的, 会显示为: 图片 (*.webp) 格式</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;webp&quot;</span><span class="token punctuation">]</span> <span class="token comment">// 只显示 webp 后缀格式的文件</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;可执行程序&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;exe&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>filePaths<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;alt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;图片&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;width: 100%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>filePaths<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>效果如下:</p> <p><img src="/note-sites/assets/img/image-20220612110521155.7b94a71a.png" alt="image-20220612110521155"></p> <h3 id="保存文件对话框"><a href="#保存文件对话框" class="header-anchor">#</a> 保存文件对话框</h3> <p>保存文件用的是<code>dialog.showSaveDialog()</code>方法, 参数和<code>dialog.showOpenDialog()</code>方法基本是一样的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">bindSaveBtnClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> saveBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;saveBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  saveBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    dialog<span class="token punctuation">.</span><span class="token function">showSaveDialog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;保存文件&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token comment">// 使用 fs模块保存文件即可</span>
      fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>filePath<span class="token punctuation">,</span> <span class="token string">&quot;electron保存的文件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;文件保存成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="消息对话框"><a href="#消息对话框" class="header-anchor">#</a> 消息对话框</h3> <p>消息文件对话框使用<code>dialog.showMessageBox()</code>方法, 主要属性如下:</p> <ul><li><strong>type</strong>: 图标样式类型：有<code>none</code>, <code>info</code>, <code>error</code>, <code>question</code>, <code>warning</code></li> <li><strong>title</strong>: 标题</li> <li><strong>message</strong>(必填): 内容文本</li> <li><strong>buttons</strong>: 数组类型, 表示对话框上面的按钮, 当其中的按钮被点击时返回其在数组中的<strong>下标</strong></li> <li><strong>defaultId</strong>: 默认选中的按钮下标</li> <li><strong>detail</strong>: 内容文本下面的小字文本</li> <li><strong>cancelId</strong>: 当用户关闭对话框的时候(点击右上角的<code>x</code>)后的默认返回的下标, 不设置则默认返回<code>0</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> msgBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;msgBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对话框的按钮</span>
<span class="token keyword">const</span> buttons <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;确定&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;取消&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;按钮3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;按钮4&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
msgBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 打开对话框</span>
  dialog<span class="token punctuation">.</span><span class="token function">showMessageBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;警告&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;我是一个文本内容&quot;</span><span class="token punctuation">,</span>
    buttons<span class="token punctuation">,</span>
    <span class="token literal-property property">defaultId</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token string">&quot;额外的信息&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cancelId</span><span class="token operator">:</span> <span class="token number">999</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> idx <span class="token operator">=</span> res<span class="token punctuation">.</span>response<span class="token punctuation">;</span> <span class="token comment">// 点击了对应按钮的在 buttons 中的下标</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">!==</span> <span class="token number">999</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;你点击了&quot;</span> <span class="token operator">+</span> buttons<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>效果如下:</p> <p><img src="data:image/png;base64,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" alt="image-20220612111805800"></p> <h2 id="断网提示"><a href="#断网提示" class="header-anchor">#</a> 断网提示</h2> <p>使用<strong>windown</strong>事件<code>online</code>和<code>offline</code></p> <ul><li><code>online</code>: 网络从关闭到连接上触发</li> <li><code>offline</code>: 网络关闭时触发</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;online&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;网络连接上了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;offline&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;应用开小差了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="系统桌面通知"><a href="#系统桌面通知" class="header-anchor">#</a> 系统桌面通知</h2> <p>系统桌面通知使用<a href="https://www.electronjs.org/zh/docs/latest/api/notification#%E7%B1%BB-notification" target="_blank" rel="noopener noreferrer"><code>Notification</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>类, 这个类在<code>window.Notification</code>存储着, 需要对齐使用<code>new</code>创建实例</p> <p>基本使用如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;底部消息通知&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">&quot;这里是内容文本&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 创建实例时默认触发 show 事件</span>
<span class="token keyword">const</span> notification <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>Notification</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>title<span class="token punctuation">,</span> option<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>notification<span class="token punctuation">)</span><span class="token punctuation">;</span>

  notification<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;通知显示了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 绑定事件可以通过 onclick 和 addEventListener</span>
  notification<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;点击了通知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  notification<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;取消了通知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 只是隐藏起来了</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  notification<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;failed&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;通知出现错误&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 手动取消通知(会触发 close 事件并请除通知记录)</span>
  notification<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>效果如下:</p> <p><img src="/note-sites/assets/img/image-20220612121059369.2f5b54fb.png" alt="image-20220612121059369"></p> <h2 id="注册全局快捷键"><a href="#注册全局快捷键" class="header-anchor">#</a> 注册全局快捷键</h2> <p>注册全局快捷键需要使用<a href="https://www.electronjs.org/zh/docs/latest/api/global-shortcut" target="_blank" rel="noopener noreferrer"><code>globalShortcut</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块, 同理主进程直接从<code>electron</code>里获取使用, 渲染器进程需要从<code>@electron/remote</code>里获取使用</p> <ul><li><code>register(accelerator, callback)</code>: 注册单个快捷键</li> <li><code>registerAll(accelerators, callback)</code>: 注册多个快捷键, <code>accelerators</code>为字符串数组</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 主进程获取</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> globalShortcut <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 渲染器进程获取</span>
<span class="token comment">// const { globalShortcut } = require(&quot;@electron/remote&quot;);</span>


app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;ready&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 主进程使用 globalShortcut.registe 必须在 ready 事件之后</span>
  <span class="token keyword">const</span> isCtrlN <span class="token operator">=</span> globalShortcut<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;ctrl+n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;main ctrl+n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 返回的布尔值判断是否绑定成功快捷键</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;快捷键 ctrl+N 绑定: &quot;</span><span class="token punctuation">,</span> isCtrlN <span class="token operator">?</span> <span class="token string">&quot;成功&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token comment">// 判断某个快捷键是否绑定成功</span>
  <span class="token keyword">const</span> isCtrlB <span class="token operator">=</span> globalShortcut<span class="token punctuation">.</span><span class="token function">isRegistered</span><span class="token punctuation">(</span><span class="token string">&quot;ctrl+b&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;有&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;没有&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ctrl+b 是否绑定快捷键: &quot;</span><span class="token punctuation">,</span> isCtrlB<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token comment">// 当所有窗口被关闭后触发</span>
  app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;will-quit&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 注销指定快捷键</span>
    globalShortcut<span class="token punctuation">.</span><span class="token function">unregister</span><span class="token punctuation">(</span><span class="token string">&quot;ctrl+n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;已注销 ctrl+n 快捷键&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 注销所有快捷键</span>
    <span class="token comment">// globalShortcut.unregisterAll();</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><blockquote><p>快捷方式是全局的, 即使应用程序没有键盘焦点, 它也仍然在持续监听键盘事件</p></blockquote> <h2 id="剪切和复制"><a href="#剪切和复制" class="header-anchor">#</a> 剪切和复制</h2> <p>electron提供<a href="https://www.electronjs.org/zh/docs/latest/api/clipboard" target="_blank" rel="noopener noreferrer"><code>clipboard</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>模块来提供复制功能, <code>clipboard</code>模块在渲染器进程可以直接使用, 常用方法如下:</p> <ul><li><code>writeText(text)</code>和<code>readText()</code>: 向剪切板中写入文本和读取文本</li> <li><code>writeHTML(htmlText)</code>和<code>readHTML()</code>: 向剪切板中写入HTML文本和读取HTML文本</li> <li><code>writeImage(image)</code>和<code>readImage()</code>: 向剪切板中写入图像和读取图像</li> <li><code>clear()</code>: 清除剪切板内容</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> clipboard <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;electron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

copyCodeBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> code<span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>
  clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>code<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;复制文本成功: &quot;</span> <span class="token operator">+</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

pasteCodeBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  paste<span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>在 Linux 上, 还有一个 <code>selection</code> 粘贴板 , 想要操作该剪切板, 你需要为每个函数传递 <code>selection</code> 参数</p></blockquote> <h2 id="vue-electron"><a href="#vue-electron" class="header-anchor">#</a> Vue + Electron</h2> <p>利用<code>vue ui</code>的可视化界面来创建一个项目, 然后在<code>插件</code>中添加一个<code>vue-cli-plugin-electron-builder</code></p> <p>然后配置插件选择版本即可, 还可以在命令行中进行安装, 如下:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>vue <span class="token function">add</span> electron-builder
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>如果发现安装时卡住了, 可以取消, 把<code>node_modules</code>下面的<code>electron</code>删掉, 使用<code>cnpm</code>重新下载一个	<code>electron</code></p></blockquote> <p>在当前vue项目下运行项目</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> run electron:serve
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>项目的主进程文件是<code>background.js</code>, 这个文件在 <code>src</code>目录下面, 也可以通过查看<code>package.json</code>文件来寻找主进程文件</p> <h3 id="打包"><a href="#打包" class="header-anchor">#</a> 打包</h3> <p>打包命令如下:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> run electron:build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>打包的文件会出现在项目的<code>dist_electron</code>目录下</p> <blockquote><p>如果打包出现问题可以把<code>node_modules</code>目录下的<code>electro</code>先删除, 然后重新安装</p></blockquote> <h3 id="自定义安装配置"><a href="#自定义安装配置" class="header-anchor">#</a> 自定义安装配置</h3> <p>安装打包工具</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> electron-builder --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="生成icon图片"><a href="#生成icon图片" class="header-anchor">#</a> 生成icon图片</h4> <p>找一个<code>icon</code>图片, 也可以使用<code>electron-icon-builder</code>插件来将图片转换为<code>icon</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install electron<span class="token operator">-</span>icon<span class="token operator">-</span>builder <span class="token operator">--</span>save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在<code>package.json</code>中<code>scripts</code>添加<code>build-icon</code>指令</p> <ul><li><code>--input</code>指定图片</li> <li><code>--output</code>指定图片生成输出的目录</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build-icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;electron-icon-builder --input=./public/图片.jpg --output=build --flatten&quot;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="自定义打包"><a href="#自定义打包" class="header-anchor">#</a> 自定义打包</h4> <ul><li><p><code>electron-builder</code>是打包普通项目, 打包配置直接在<code>package.json</code>里面写</p></li> <li><p><code>vue-cli-plugin-electron-builder</code>的打包配置是在项目根目录下<code>vue.config.js</code>里面配置</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">pluginOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">electronBuilder</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">builderOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">&quot;com.test.app&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">productName</span><span class="token operator">:</span> <span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 项目名, 也是生成的安装文件名, 即demo.exe</span>
        <span class="token literal-property property">copyright</span><span class="token operator">:</span> <span class="token string">&quot;Copyright © 2021&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 版权信息</span>
        <span class="token literal-property property">directories</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span> <span class="token comment">// 输出文件路径</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">win</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// win相关配置</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&quot;./build/icons/icon.ico&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 图标, 当前图标在根目录下, 注意这里有两个坑</span>
          <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;nsis&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 利用nsis制作安装程序,打包文件的后缀为exe</span>
              <span class="token literal-property property">arch</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;x64&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 64位</span>
                <span class="token string">&quot;ia32&quot;</span> <span class="token comment">// 32位</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">nsis</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">oneClick</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 一键安装</span>
          <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">&quot;2052&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 安装语言</span>
          <span class="token literal-property property">perMachine</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 应用所有用户</span>
          <span class="token literal-property property">allowToChangeInstallationDirectory</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 用户可以选择路径</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>打包的详细配置见这篇<a href="https://juejin.cn/post/6980105328801087518" target="_blank" rel="noopener noreferrer">文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>打包下载慢可以参考这篇<a href="https://blog.csdn.net/wm9028/article/details/114583011" target="_blank" rel="noopener noreferrer">文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-bac73764 data-v-c0d124fa><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#快速入门" class="sidebar-link reco-side-快速入门" data-v-bac73764>快速入门</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#electron的加载" class="sidebar-link reco-side-electron的加载" data-v-bac73764>electron的加载</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#新建窗口" class="sidebar-link reco-side-新建窗口" data-v-bac73764>新建窗口</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#创建窗口的常用配置" class="sidebar-link reco-side-创建窗口的常用配置" data-v-bac73764>创建窗口的常用配置</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#设置无边框" class="sidebar-link reco-side-设置无边框" data-v-bac73764>设置无边框</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#app" class="sidebar-link reco-side-app" data-v-bac73764>app</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#菜单" class="sidebar-link reco-side-菜单" data-v-bac73764>菜单</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#操作栏菜单添加和事件" class="sidebar-link reco-side-操作栏菜单添加和事件" data-v-bac73764>操作栏菜单添加和事件</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#右键菜单添加和事件" class="sidebar-link reco-side-右键菜单添加和事件" data-v-bac73764>右键菜单添加和事件</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#通过浏览器打开链接" class="sidebar-link reco-side-通过浏览器打开链接" data-v-bac73764>通过浏览器打开链接</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#应用中嵌入网页" class="sidebar-link reco-side-应用中嵌入网页" data-v-bac73764>应用中嵌入网页</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#打开子窗口和父子通信" class="sidebar-link reco-side-打开子窗口和父子通信" data-v-bac73764>打开子窗口和父子通信</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#打开子窗口" class="sidebar-link reco-side-打开子窗口" data-v-bac73764>打开子窗口</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#子窗口向父窗口通信" class="sidebar-link reco-side-子窗口向父窗口通信" data-v-bac73764>子窗口向父窗口通信</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#父窗口向子窗口通信" class="sidebar-link reco-side-父窗口向子窗口通信" data-v-bac73764>父窗口向子窗口通信</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#进程间通信" class="sidebar-link reco-side-进程间通信" data-v-bac73764>进程间通信</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#主进程到渲染进程" class="sidebar-link reco-side-主进程到渲染进程" data-v-bac73764>主进程到渲染进程</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#渲染进程到主进程" class="sidebar-link reco-side-渲染进程到主进程" data-v-bac73764>渲染进程到主进程</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#渲染进程到渲染进程" class="sidebar-link reco-side-渲染进程到渲染进程" data-v-bac73764>渲染进程到渲染进程</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#互相通信" class="sidebar-link reco-side-互相通信" data-v-bac73764>互相通信</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#系统托盘" class="sidebar-link reco-side-系统托盘" data-v-bac73764>系统托盘</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#托盘气泡通知" class="sidebar-link reco-side-托盘气泡通知" data-v-bac73764>托盘气泡通知</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#对话框" class="sidebar-link reco-side-对话框" data-v-bac73764>对话框</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#打开文件对话框" class="sidebar-link reco-side-打开文件对话框" data-v-bac73764>打开文件对话框</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#保存文件对话框" class="sidebar-link reco-side-保存文件对话框" data-v-bac73764>保存文件对话框</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#消息对话框" class="sidebar-link reco-side-消息对话框" data-v-bac73764>消息对话框</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#断网提示" class="sidebar-link reco-side-断网提示" data-v-bac73764>断网提示</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#系统桌面通知" class="sidebar-link reco-side-系统桌面通知" data-v-bac73764>系统桌面通知</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#注册全局快捷键" class="sidebar-link reco-side-注册全局快捷键" data-v-bac73764>注册全局快捷键</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#剪切和复制" class="sidebar-link reco-side-剪切和复制" data-v-bac73764>剪切和复制</a></li><li class="level-2" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#vue-electron" class="sidebar-link reco-side-vue-electron" data-v-bac73764>Vue + Electron</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#打包" class="sidebar-link reco-side-打包" data-v-bac73764>打包</a></li><li class="level-3" data-v-bac73764><a href="/note-sites/guide/Electron/electron.html#自定义安装配置" class="sidebar-link reco-side-自定义安装配置" data-v-bac73764>自定义安装配置</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div></div></div>
    <script src="/note-sites/assets/js/app.6e0c8c06.js" defer></script><script src="/note-sites/assets/js/5.83e8f80b.js" defer></script><script src="/note-sites/assets/js/1.9e97c91a.js" defer></script><script src="/note-sites/assets/js/20.74cbe0dd.js" defer></script>
  </body>
</html>
