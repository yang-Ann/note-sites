(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{329:function(t,s,a){t.exports=a.p+"assets/img/animate.5990c1df.png"},584:function(t,s,a){t.exports=a.p+"assets/img/image-20230222225428752.f3be78ea.png"},585:function(t,s,a){t.exports=a.p+"assets/img/image-20220330170503886.d45375aa.png"},586:function(t,s,a){t.exports=a.p+"assets/img/pass-by-reference-vs-pass-by-value-animation.197a0c5a.gif"},587:function(t,s,a){t.exports=a.p+"assets/img/image-20220401093815172.5cf7be82.png"},588:function(t,s,a){t.exports=a.p+"assets/img/transitions.66096c1a.svg"},633:function(t,s,a){"use strict";a.r(s);var n=a(2),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{pre:!0},[s("h1",{pre:!0,attrs:{id:"vue3"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#vue3"}},[t._v("#")]),t._v(" Vue3")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://staging-cn.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("中文官网(new)"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/introduction.html#%E4%BB%8B%E7%BB%8D",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue2迁移指南"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("p"),s("div",{pre:!0,attrs:{class:"table-of-contents"}},[s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#vite"}},[t._v("vite")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#构建项目"}},[t._v("构建项目")])]),s("li",[s("a",{pre:!0,attrs:{href:"#创建vite项目"}},[t._v("创建vite项目")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#配置智能提示"}},[t._v("配置智能提示")])]),s("li",[s("a",{pre:!0,attrs:{href:"#简单配置-vite"}},[t._v("简单配置 vite")])]),s("li",[s("a",{pre:!0,attrs:{href:"#环境变量"}},[t._v("环境变量")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#环境变量类型配置"}},[t._v("环境变量类型配置")])])])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#集成-vue-router-vuex-pinia"}},[t._v("集成 vue-router, vuex, pinia")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#配置-vue-router"}},[t._v("配置 vue-router")])]),s("li",[s("a",{pre:!0,attrs:{href:"#配置-vuex"}},[t._v("配置 Vuex")])]),s("li",[s("a",{pre:!0,attrs:{href:"#使用-组合式api-https-vuex-vuejs-org-zh-guide-composition-api-html"}},[t._v("使用组合式API")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#访问-mutation-和-action"}},[t._v("访问 Mutation 和 Action")])]),s("li",[s("a",{pre:!0,attrs:{href:"#访问-state-和-getter"}},[t._v("访问 State 和 Getter")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#配置-pinia"}},[t._v("配置 Pinia")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#自动按需引入组件"}},[t._v("自动按需引入组件")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#按需引入组件库组件"}},[t._v("按需引入组件库组件")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#自动按需引入api"}},[t._v("自动按需引入API")])]),s("li",[s("a",{pre:!0,attrs:{href:"#自动引入文件路由"}},[t._v("自动引入文件路由")])]),s("li",[s("a",{pre:!0,attrs:{href:"#开发vite插件"}},[t._v("开发vite插件")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#vite-独有的钩子"}},[t._v("vite 独有的钩子")])]),s("li",[s("a",{pre:!0,attrs:{href:"#vite-与-rollup-的通用钩子之构建阶段"}},[t._v("vite 与 rollup 的通用钩子之构建阶段")])]),s("li",[s("a",{pre:!0,attrs:{href:"#vite-与-rollup-的通用钩子之输出阶段"}},[t._v("vite 与 rollup 的通用钩子之输出阶段")])]),s("li",[s("a",{pre:!0,attrs:{href:"#hook调用顺序图"}},[t._v("hook调用顺序图")])])])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#全局api"}},[t._v("全局API")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#createapp"}},[t._v("createApp")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#fragment"}},[t._v("Fragment")])]),s("li",[s("a",{pre:!0,attrs:{href:"#v-model-更改"}},[t._v("v-model 更改")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#_2-x-用法"}},[t._v("2.x 用法")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#使用-v-bind-sync"}},[t._v("使用v-bind.sync")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#_3-x-用法"}},[t._v("3.x 用法")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#v-model-参数"}},[t._v("v-model参数")])]),s("li",[s("a",{pre:!0,attrs:{href:"#v-model-修饰符"}},[t._v("v-model修饰符")])])])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#组合式api"}},[t._v("组合式API")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#script差异"}},[t._v("script差异")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#响应式-api"}},[t._v("响应式 API")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#响应式基础api"}},[t._v("响应式基础API")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#reactive"}},[t._v("reactive")])]),s("li",[s("a",{pre:!0,attrs:{href:"#readonly"}},[t._v("readonly")])]),s("li",[s("a",{pre:!0,attrs:{href:"#isproxy"}},[t._v("isProxy")])]),s("li",[s("a",{pre:!0,attrs:{href:"#isreactive"}},[t._v("isReactive")])]),s("li",[s("a",{pre:!0,attrs:{href:"#isreadonly"}},[t._v("isReadonly")])]),s("li",[s("a",{pre:!0,attrs:{href:"#toraw"}},[t._v("toRaw")])]),s("li",[s("a",{pre:!0,attrs:{href:"#markraw"}},[t._v("markRaw")])]),s("li",[s("a",{pre:!0,attrs:{href:"#shallowreactive"}},[t._v("shallowReactive")])]),s("li",[s("a",{pre:!0,attrs:{href:"#shallowreactive"}},[t._v("shallowReactive")])]),s("li",[s("a",{pre:!0,attrs:{href:"#shallowreadonly"}},[t._v("shallowReadonly")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#refs"}},[t._v("Refs")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#ref"}},[t._v("Ref")])]),s("li",[s("a",{pre:!0,attrs:{href:"#unref"}},[t._v("unref")])]),s("li",[s("a",{pre:!0,attrs:{href:"#toref"}},[t._v("toRef")])]),s("li",[s("a",{pre:!0,attrs:{href:"#torefs"}},[t._v("toRefs")])]),s("li",[s("a",{pre:!0,attrs:{href:"#isref"}},[t._v("isRef")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#computed-与-watch"}},[t._v("Computed 与 watch")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#computed"}},[t._v("computed")])]),s("li",[s("a",{pre:!0,attrs:{href:"#watcheffect"}},[t._v("watchEffect")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#停止侦听"}},[t._v("停止侦听")])]),s("li",[s("a",{pre:!0,attrs:{href:"#清除副作用"}},[t._v("清除副作用")])]),s("li",[s("a",{pre:!0,attrs:{href:"#副作用刷新时机"}},[t._v("副作用刷新时机")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#watch"}},[t._v("watch")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#侦听单个数据源"}},[t._v("侦听单个数据源")])]),s("li",[s("a",{pre:!0,attrs:{href:"#侦听多个数据源"}},[t._v("侦听多个数据源")])]),s("li",[s("a",{pre:!0,attrs:{href:"#侦听复杂的嵌套对象"}},[t._v("侦听复杂的嵌套对象")])])])])])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#setup"}},[t._v("setup")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#setup-的执行顺序"}},[t._v("setup 的执行顺序")])]),s("li",[s("a",{pre:!0,attrs:{href:"#setup-的返回值"}},[t._v("setup 的返回值")])]),s("li",[s("a",{pre:!0,attrs:{href:"#suspense-组件"}},[t._v("Suspense 组件")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#suspense-插槽"}},[t._v("Suspense 插槽")])]),s("li",[s("a",{pre:!0,attrs:{href:"#suspense-事件"}},[t._v("Suspense 事件")])]),s("li",[s("a",{pre:!0,attrs:{href:"#suspense-错误处理"}},[t._v("Suspense 错误处理")])]),s("li",[s("a",{pre:!0,attrs:{href:"#和其他组件结合"}},[t._v("和其他组件结合")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#setup-参数"}},[t._v("setup 参数")])]),s("li",[s("a",{pre:!0,attrs:{href:"#setup-props-指定类型"}},[t._v("setup props 指定类型")])]),s("li",[s("a",{pre:!0,attrs:{href:"#setup-emits-指定类型"}},[t._v("setup emits 指定类型")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#生命周期"}},[t._v("生命周期")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#生命周期事件前缀改变"}},[t._v("生命周期事件前缀改变")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#依赖注入"}},[t._v("依赖注入")])]),s("li",[s("a",{pre:!0,attrs:{href:"#模板引用ref"}},[t._v("模板引用ref")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#函数式写法"}},[t._v("函数式写法")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#emit-和-emits"}},[t._v("emit 和 emits")])]),s("li",[s("a",{pre:!0,attrs:{href:"#teleport"}},[t._v("Teleport")])]),s("li",[s("a",{pre:!0,attrs:{href:"#api-的-tree-treeshaking-优化"}},[t._v("API 的 Tree Treeshaking 优化")])]),s("li",[s("a",{pre:!0,attrs:{href:"#slot"}},[t._v("slot")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#默认插槽"}},[t._v("默认插槽")])]),s("li",[s("a",{pre:!0,attrs:{href:"#具名插槽"}},[t._v("具名插槽")])]),s("li",[s("a",{pre:!0,attrs:{href:"#作用域插槽"}},[t._v("作用域插槽")])]),s("li",[s("a",{pre:!0,attrs:{href:"#后备内容"}},[t._v("后备内容")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#渲染函数api改变"}},[t._v("渲染函数API改变")])]),s("li",[s("a",{pre:!0,attrs:{href:"#异步组件的更改"}},[t._v("异步组件的更改")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#_2-x-用法"}},[t._v("2.x 用法")])]),s("li",[s("a",{pre:!0,attrs:{href:"#_3-x-用法"}},[t._v("3.x 用法")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#自定义指令"}},[t._v("自定义指令")])]),s("li",[s("a",{pre:!0,attrs:{href:"#transition-更改过渡类名"}},[t._v("transition 更改过渡类名")])]),s("li",[s("a",{pre:!0,attrs:{href:"#script-setup"}},[t._v("script setup")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#基本语法"}},[t._v("基本语法")])]),s("li",[s("a",{pre:!0,attrs:{href:"#顶层的绑定会被暴露给模板"}},[t._v("顶层的绑定会被暴露给模板")])]),s("li",[s("a",{pre:!0,attrs:{href:"#响应式"}},[t._v("响应式")])]),s("li",[s("a",{pre:!0,attrs:{href:"#使用组件"}},[t._v("使用组件")])]),s("li",[s("a",{pre:!0,attrs:{href:"#动态组件"}},[t._v("动态组件")])]),s("li",[s("a",{pre:!0,attrs:{href:"#递归组件"}},[t._v("递归组件")])]),s("li",[s("a",{pre:!0,attrs:{href:"#命名空间组件"}},[t._v("命名空间组件")])]),s("li",[s("a",{pre:!0,attrs:{href:"#使用自定义指令"}},[t._v("使用自定义指令")])]),s("li",[s("a",{pre:!0,attrs:{href:"#defineprops-和-defineemits"}},[t._v("defineProps 和 defineEmits")])]),s("li",[s("a",{pre:!0,attrs:{href:"#defineexpose"}},[t._v("defineExpose")])]),s("li",[s("a",{pre:!0,attrs:{href:"#useslots-和-useattrs"}},[t._v("useSlots 和 useAttrs")])]),s("li",[s("a",{pre:!0,attrs:{href:"#与普通的-script-一起使用"}},[t._v("与普通的 script 一起使用")])]),s("li",[s("a",{pre:!0,attrs:{href:"#顶层-await"}},[t._v("顶层 await")])]),s("li",[s("a",{pre:!0,attrs:{href:"#仅限-typescript-的功能"}},[t._v("仅限 TypeScript 的功能")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#仅限类型的-props-emit-声明"}},[t._v("仅限类型的 props/emit 声明")])]),s("li",[s("a",{pre:!0,attrs:{href:"#使用类型声明时的默认-props-值"}},[t._v("使用类型声明时的默认 props 值")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#限制-没有-src-导入"}},[t._v("限制: 没有 Src 导入")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#style-scoped"}},[t._v("style scoped")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#子组件的根元素"}},[t._v("子组件的根元素")])]),s("li",[s("a",{pre:!0,attrs:{href:"#深度选择器"}},[t._v("深度选择器")])]),s("li",[s("a",{pre:!0,attrs:{href:"#插槽选择器"}},[t._v("插槽选择器")])]),s("li",[s("a",{pre:!0,attrs:{href:"#全局选择器"}},[t._v("全局选择器")])]),s("li",[s("a",{pre:!0,attrs:{href:"#混合使用局部与全局样式"}},[t._v("混合使用局部与全局样式")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#style-module"}},[t._v("style module")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#自定义注入名称"}},[t._v("自定义注入名称")])]),s("li",[s("a",{pre:!0,attrs:{href:"#与组合式-api-一同使用"}},[t._v("与组合式 API 一同使用")])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#cssmodule"}},[t._v("CSSModule")])]),s("li",[s("a",{pre:!0,attrs:{href:"#状态驱动的动态-css"}},[t._v("状态驱动的动态 CSS")])]),s("li",[s("a",{pre:!0,attrs:{href:"#jsx-和-tsx"}},[t._v("JSX 和 TSX")])]),s("li",[s("a",{pre:!0,attrs:{href:"#技巧"}},[t._v("技巧")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#利用组件路径渲染动态组件"}},[t._v("利用组件路径渲染动态组件")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#封装成hook"}},[t._v("封装成hook")])])])])])]),s("li",[s("a",{pre:!0,attrs:{href:"#插件"}},[t._v("插件")])]),s("li",[s("a",{pre:!0,attrs:{href:"#vue3-更改汇总"}},[t._v("Vue3 更改汇总")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#值得注意的新特性"}},[t._v("值得注意的新特性")])]),s("li",[s("a",{pre:!0,attrs:{href:"#非兼容性变更"}},[t._v("非兼容性变更")]),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"#全局-api"}},[t._v("全局 API")])]),s("li",[s("a",{pre:!0,attrs:{href:"#模板指令"}},[t._v("模板指令")])]),s("li",[s("a",{pre:!0,attrs:{href:"#组件"}},[t._v("组件")])]),s("li",[s("a",{pre:!0,attrs:{href:"#渲染函数"}},[t._v("渲染函数")])]),s("li",[s("a",{pre:!0,attrs:{href:"#自定义元素"}},[t._v("自定义元素")])]),s("li",[s("a",{pre:!0,attrs:{href:"#其他小改变"}},[t._v("其他小改变")])]),s("li",[s("a",{pre:!0,attrs:{href:"#被移除的-api"}},[t._v("被移除的 API")])])])])])])])]),s("p"),t._v(" "),s("h2",{pre:!0,attrs:{id:"vite"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#vite"}},[t._v("#")]),t._v(" vite")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://vitejs.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vite"),s("OutboundLink",{pre:!0})],1),t._v("是一种新型前端构建工具，能够显著提升前端开发体验。它主要由两部分组成:")]),t._v(" "),s("ul",[s("li",[t._v("一个开发服务器，它基于 "),s("a",{pre:!0,attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("原生 ES 模块"),s("OutboundLink",{pre:!0})],1),t._v(" 提供了 "),s("a",{pre:!0,attrs:{href:"https://vitejs.cn/guide/features.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("丰富的内建功能"),s("OutboundLink",{pre:!0})],1),t._v("，如速度快到惊人的 "),s("a",{pre:!0,attrs:{href:"https://vitejs.cn/guide/features.html#hot-module-replacement",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块热更新（HMR）"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[t._v("一套构建指令，它使用 "),s("a",{pre:!0,attrs:{href:"https://rollupjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rollup"),s("OutboundLink",{pre:!0})],1),t._v(" 打包你的代码，并且它是预配置的，可输出用于生产环境的高度优化过的静态资源")])]),t._v(" "),s("p",[t._v("Vite 意在提供开箱即用的配置，同时它的 "),s("a",{pre:!0,attrs:{href:"https://vitejs.cn/guide/api-plugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件 API"),s("OutboundLink",{pre:!0})],1),t._v(" 和 "),s("a",{pre:!0,attrs:{href:"https://vitejs.cn/guide/api-javascript.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript API"),s("OutboundLink",{pre:!0})],1),t._v(" 带来了高度的可扩展性，并有完整的类型支持")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"构建项目"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#构建项目"}},[t._v("#")]),t._v(" 构建项目")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"创建vite项目"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#创建vite项目"}},[t._v("#")]),t._v(" 创建vite项目")]),t._v(" "),s("p",[t._v("使用 NPM:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-sh line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" create vite@latest projectName\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[t._v("使用 Yarn:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-sh line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" create vite projectName\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[t._v("使用 PNPM:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-sh line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" create vite projectName\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[t._v("按照提示选择框架, 然后安装依赖并运行项目")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-sh line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" projectName  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入工程项目文件夹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装项目依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行项目")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("p",[t._v("Vite 配置")]),t._v(" "),s("p",[s("code",[t._v("Vite")]),t._v("的配置文件叫"),s("code",[t._v("vite.config.js")]),t._v("同之前一样也是要配置到"),s("a",{pre:!0,attrs:{href:"https://cn.vitejs.dev/guide/#index-html-and-project-root",target:"_blank",rel:"noopener noreferrer"}},[t._v("项目根目录"),s("OutboundLink",{pre:!0})],1),t._v("下")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vite.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置选项")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("p",[t._v("注意: 即使项目没有在 "),s("code",[t._v("package.json")]),t._v(" 中开启 "),s("code",[t._v('type: "module"')]),t._v("，"),s("code",[t._v("Vite")]),t._v("也支持在配置文件中使用"),s("strong",[t._v("ESM 语法")]),t._v(", 这种情况下，配置文件会在被加载前自动进行预处理")]),t._v(" "),s("p",[t._v("你可以显式地通过 "),s("code",[t._v("--config")]),t._v(" 命令行选项指定一个配置文件（相对于 "),s("code",[t._v("cwd")]),t._v(" 路径进行解析）")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-sh line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-sh"}},[s("code",[t._v("vite "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--config")]),t._v(" my-config.js\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[t._v("注意: Vite 会在 "),s("strong",[t._v("CommonJS")]),t._v(" 和 "),s("strong",[t._v("TypeScript")]),t._v(" 配置文件中替换 "),s("code",[t._v("__filename")]),t._v("，"),s("code",[t._v("__dirname")]),t._v(" 以及 "),s("code",[t._v("import.meta.url")]),t._v("。如果使用这些名称作为变量名可能会导致代码报错:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" __filename "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将转化为")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path/vite.config.js"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"配置智能提示"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#配置智能提示"}},[t._v("#")]),t._v(" 配置智能提示")]),t._v(" "),s("p",[t._v("因为 Vite 本身附带 Typescript 类型，所以可以通过 IDE 和 jsdoc 的配合来实现智能提示:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @type {import('vite').UserConfig}\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里面编写配置项会获得类型提示")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" config\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("p",[t._v("另外可以使用 "),s("code",[t._v("defineConfig")]),t._v(" 工具函数，这样不用 jsdoc 注解也可以获取类型提示:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对象的形式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数的形式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ssrBuild "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br")])]),s("blockquote",[s("p",[t._v("Vite 也直接支持 TS 配置文件。你可以在 "),s("code",[t._v("vite.config.ts")]),t._v(" 中使用 "),s("code",[t._v("defineConfig")]),t._v(" 工具函数")])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"简单配置-vite"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#简单配置-vite"}},[t._v("#")]),t._v(" 简单配置 vite")]),t._v(" "),s("p",[t._v("在 Vue3 中不自带"),s("code",[t._v("@")]),t._v("("),s("strong",[t._v("/src")]),t._v(")地址别名, 需手动配置")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sep "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fileURLToPath "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loadEnv "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" vue "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vitejs/plugin-vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" vueJsx "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vitejs/plugin-vue-jsx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" __dirname "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileURLToPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://vitejs.dev/config/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ssrBuild "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动的模式, 默认: development 和 production, 通过 --mode 参数可以自定义")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mode: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令名")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"command: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 命令行参数")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" commanArgs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commanArgs: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" commanArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里可以动态的加载环境变量文件, 通过命令行参数的方式动态加载环境变量文件")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadEnv")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cwd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" commanArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VITE_"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"=========== 自定义加载env ===========: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 支持 vue 插件")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加载 jsx 插件, 还需要在 vite-env.d.ts 里添加对应的文件名称解析类型")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// declare module "*.tsx" {')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  const src: any;")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  export default src;")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vueJsx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    base"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包路径")]),t._v("\n    define"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从环境变量文件中加载环境变量定义到全局 windows")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果是 ts 则需要在类型文件中声明添加类型声明, 如: declare const __TEST__: string;")]),t._v("\n\t\t\t__TEST__"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_TEST")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意这里要加上 双引号")]),t._v("\n      \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也可以使用自定义的值")]),t._v("\n      __APP_DIRNAME__"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" __dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    resolve"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置路径别名")]),t._v("\n      alias"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"@"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"components"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/components"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"assets"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/assets"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也可以写成数组")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// alias: [")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//  { find: /^@$/, replacement: resolve(__dirname, "./src") },')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发服务器配置")]),t._v("\n    server"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      host"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示多个开发地址")]),t._v("\n      port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8081")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 服务端口号")]),t._v("\n      open"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 服务启动时是否自动打开浏览器")]),t._v("\n      cors"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 允许跨域")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否使用固定端口，若此端口不可用将会导致程序错误")]),t._v("\n      strictPort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// hmr: { // 全屏报错提示")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// \toverlay: false")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("36")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("37")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("38")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("39")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("40")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("41")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("42")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("43")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("44")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("45")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("46")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("47")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("48")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("49")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("50")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("51")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("52")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("53")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("54")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("55")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("56")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("57")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("58")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("59")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("60")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("61")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("62")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("63")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("64")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("65")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("66")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("67")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("68")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("69")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("70")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("71")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("72")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"环境变量"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#环境变量"}},[t._v("#")]),t._v(" 环境变量")]),t._v(" "),s("p",[t._v("在vite项目中可以通过"),s("code",[t._v("import.meta.env")]),t._v("来获取环境变量, 默认的环境变量如下:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// import.meta.env")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"BASE_URL"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"MODE"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// production")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"DEV"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"PROD"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"SSR"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[t._v("可以在根目录下新建"),s("code",[t._v(".env.[模式名]")]),t._v("文件来指定对应模式的环境变量, 例如: "),s("code",[t._v(".env.development")]),t._v("则表示在"),s("code",[t._v("development")]),t._v("(开发)模式下读取该文件的环境变量, 还有"),s("code",[t._v(".env.production")]),t._v("对应生产环境:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-sh line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 环境变量需要以 VITE_ 开头 (只有以 VITE_ 为前缀的变量才会经过 vite 处理)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VITE_BASE_API")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost/api"')]),t._v("\nVITE_PUBLIC_PATH "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[t._v("vite启动时可以使用"),s("code",[t._v("--mode [模式名]")]),t._v("来指定模式")])]),t._v(" "),s("p",[t._v("在Typescript项目下还需要在"),s("code",[t._v("tsconfig.json")]),t._v("中的"),s("code",[t._v("compilerOptions.type")]),t._v("里面配置"),s("code",[t._v("vite/client")]),t._v(":")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-json line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"compilerOptions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite/client"')]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("h5",{pre:!0,attrs:{id:"环境变量类型配置"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#环境变量类型配置"}},[t._v("#")]),t._v(" 环境变量类型配置")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportMeta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" env"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ImportMetaEnv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImportMetaEnv")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" VITE_MicroApp_main"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_VOC_CODE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"集成-vue-router-vuex-pinia"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#集成-vue-router-vuex-pinia"}},[t._v("#")]),t._v(" 集成 vue-router, vuex, pinia")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"配置-vue-router"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#配置-vue-router"}},[t._v("#")]),t._v(" 配置 vue-router")]),t._v(" "),s("p",[s("code",[t._v("npm install vue-router@4 --save")])]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://router.vuejs.org/zh/introduction.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("vue-router4")]),s("OutboundLink",{pre:!0})],1),t._v("匹配 Vue3")]),t._v(" "),s("p",[t._v("新建文件"),s("code",[t._v("src/modules/router.js")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createWebHashHistory "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("history")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWebHashHistory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者 createWebHistory")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("routes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 异步路由 + 分块")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "Home" */')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/pages/Home.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/about'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'About'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/pages/About.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("redirect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Home'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" router\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br")])]),s("p",[s("code",[t._v("main.js")]),t._v("添加路由")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createApp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./App.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/modules/router.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加 router")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("p",[t._v("页面使用路由")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useRoute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useRouter "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-router"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等价于 this.$router")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等价于 this.$route")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" route "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRoute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"配置-vuex"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#配置-vuex"}},[t._v("#")]),t._v(" 配置 Vuex")]),t._v(" "),s("p",[s("code",[t._v("npm install vuex@next --save")])]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://vuex.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Vuex4")]),s("OutboundLink",{pre:!0})],1),t._v("匹配 Vue3")]),t._v(" "),s("p",[t._v("新建文件"),s("code",[t._v("src/modules/store.js")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state() { // 也可以是一个函数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     return defaultState")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// },")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" defaultState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("actions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INCREMENT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mutations")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("getters")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("double")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br")])]),s("p",[s("code",[t._v("main.js")]),t._v("添加 Vuex")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createApp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./App.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/modules/store.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加 Vuex")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"使用组合式api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#使用组合式api"}},[t._v("#")]),t._v(" 使用"),s("a",{pre:!0,attrs:{href:"https://vuex.vuejs.org/zh/guide/composition-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组合式API"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("p",[t._v("可以通过调用 "),s("code",[t._v("useStore")]),t._v(" 函数，来在 "),s("code",[t._v("setup")]),t._v(" 钩子函数中访问 store。这与在组件中使用选项式 API 访问 "),s("code",[t._v("this.$store")]),t._v(" 是等效的")]),t._v(" "),s("h5",{pre:!0,attrs:{id:"访问-mutation-和-action"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#访问-mutation-和-action"}},[t._v("#")]),t._v(" 访问 Mutation 和 Action")]),t._v(" "),s("p",[t._v("要使用 mutation 和 action 时，只需要在 "),s("code",[t._v("setup")]),t._v(" 钩子函数中调用 "),s("code",[t._v("commit")]),t._v(" 和 "),s("code",[t._v("dispatch")]),t._v(" 函数。")]),t._v(" "),s("p",[s("code",[t._v("<script setup>")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuex"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 1")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 active")]),t._v("\nstore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INCREMENT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 2")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 mutation")]),t._v("\nstore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"increment"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("p",[s("code",[t._v("setup")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 mutation")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'increment'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 action")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("asyncIncrement")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'INCREMENT'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br")])]),s("h5",{pre:!0,attrs:{id:"访问-state-和-getter"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#访问-state-和-getter"}},[t._v("#")]),t._v(" 访问 State 和 Getter")]),t._v(" "),s("p",[t._v("为了访问 state 和 getter，需要创建 "),s("code",[t._v("computed")]),t._v(" 引用以保留响应性，这与在选项式 API 中创建计算属性等效。")]),t._v(" "),s("p",[s("code",[t._v("<script setup>")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" computed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuex"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 computed 函数中访问 state")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 computed 函数中访问 getter")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" double "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("double"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br")])]),s("p",[s("code",[t._v("setup")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" computed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 computed 函数中访问 state")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 computed 函数中访问 getter")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("double")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("double"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"配置-pinia"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#配置-pinia"}},[t._v("#")]),t._v(" 配置 Pinia")]),t._v(" "),s("p",[s("code",[t._v("npm install pinia --save")])]),t._v(" "),s("p",[t._v("新建文件"),s("code",[t._v("src/modules/pinia.js")]),t._v("("),s("strong",[t._v("创建pinia")]),t._v(")")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createPinia "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pinia "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPinia")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" pinia"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("blockquote",[s("p",[t._v("更多配置可以查看官网"),s("a",{pre:!0,attrs:{href:"https://pinia.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pinia"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("p",[s("code",[t._v("main.js")]),t._v("添加 "),s("code",[t._v("pinia")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createApp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./App.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pinia "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/modules/pinia.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加 pinia")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pinia"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("p",[t._v("新建文件"),s("code",[t._v("src/stores/count.js")]),t._v("("),s("strong",[t._v("创建状态文件)")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pinia"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("stateType")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" useCountStore "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"countStore"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示的指定类型")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("stateType")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          \n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 声明单个值的类型")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("history")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("historyType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("actions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br")])]),s("p",[t._v("页面使用")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useCountStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/stores/count.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" countStore "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCountStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 直接使用, 不需要 .stae.count")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("countStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也不需要 .actions.increment()")]),t._v("\ncountStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("countStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"自动按需引入组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#自动按需引入组件"}},[t._v("#")]),t._v(" 自动按需引入组件")]),t._v(" "),s("p",[t._v("可以使用"),s("a",{pre:!0,attrs:{href:"https://www.npmjs.com/package/unplugin-vue-components",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("unplugin-vue-components")]),s("OutboundLink",{pre:!0})],1),t._v("插件来完成")]),t._v(" "),s("p",[t._v("安装: "),s("code",[t._v("npm install unplugin-vue-components --save-dev")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vite.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Components "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unplugin-vue-components/vite'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加 unplugin-vue-components 插件即可")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Components")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("p",[t._v("这样就可以实现自动按需引入组件了")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"按需引入组件库组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#按需引入组件库组件"}},[t._v("#")]),t._v(" 按需引入组件库组件")]),t._v(" "),s("p",[s("code",[t._v("unplugin-vue-components")]),t._v("插件同样可以自动按需引入组件库的组件, 该插件提供了一些组件库的解析器:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vite.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Components "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unplugin-vue-components/vite'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ElementPlusResolver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    AntDesignVueResolver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    NaiveUiResolver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    VantResolver\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unplugin-vue-components/resolvers'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Components")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("resolvers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需引入 element-plus")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ElementPlusResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需引入 ant-design-vue3.x")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AntDesignVueResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需引入 naive UI")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NaiveUiResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需引入 vant")]),t._v("\n                VantResolver\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"自动按需引入api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#自动按需引入api"}},[t._v("#")]),t._v(" 自动按需引入API")]),t._v(" "),s("p",[t._v("可以使用"),s("a",{pre:!0,attrs:{href:"https://www.npmjs.com/package/unplugin-auto-import",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("unplugin-auto-import")]),s("OutboundLink",{pre:!0})],1),t._v("插件来完成")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vite.config.js")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AutoImport "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unplugin-auto-import/vite'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ElementPlusResolver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unplugin-vue-components/resolvers'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AutoImport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 预设自动引入的 API")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更多预设可见 https://github.com/antfu/unplugin-auto-import/tree/main/src/presets")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("imports")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pinia'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vuex 和 piain 不能同时出现在这里")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// element-plus 可以同时放到这里来(按需引入API)")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("resolvers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ElementPlusResolver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br")])]),s("p",[t._v("使用插件前")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" computed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" doubled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("p",[t._v("使用插件后("),s("strong",[t._v("自动引入API")]),t._v(")")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" doubled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br")])]),s("blockquote",[s("p",[t._v("项目中自定义的模块还是需要引入的才可以使用, "),s("code",[t._v("unplugin-auto-import")]),t._v("只针对于第三方库")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"自动引入文件路由"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#自动引入文件路由"}},[t._v("#")]),t._v(" 自动引入文件路由")]),t._v(" "),s("p",[t._v("日常开发中没新建一个路由文件, 就需要修改一下路由表, 使用"),s("code",[t._v("vite-plugin-pages")]),t._v("插件即可实现自动引入文件路由")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-sh line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" vite-plugin-pages\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" vue-router\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br")])]),s("p",[t._v("添加插件")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vite.config.js")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Pages "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-pages'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Pages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dirs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/pages'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 扫描那个文件夹")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br")])]),s("p",[t._v("修改路由表")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/modules/router.js")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createRouter "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" routes "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'~pages'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  routes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 所有的路由信息")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也可以添加参数")]),t._v("\nroutes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加路由守卫")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'afterEach'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" form"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br")])]),s("p",[t._v("可以通过"),s("code",[t._v("<route>")]),t._v(" 块添加对应的元数据")]),t._v(" "),s("p",[t._v("需要安装"),s("code",[t._v("npm install @vue/compiler-sfc --save")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/pages/Home.vue")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" toRaw "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useRoute "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-router"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" route "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRaw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRoute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"home"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("meta")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("requiresAuth")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br")])]),s("p",[t._v("添加"),s("code",[t._v("query")]),t._v("参数, 路径拼接即可")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在跳转路径时添加即可")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/about?id=1&title=query"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("about"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应的路由获取到的 query 对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("title")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[t._v("添加"),s("code",[t._v("params")]),t._v("参数需要在组件文件名上添加, 例如:")]),t._v(" "),s("p",[s("code",[t._v("src/pages/about/[id]/[title].vue")]),t._v(" --\x3e "),s("code",[t._v("/about/:id/:title")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在跳转路径时正常添加参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("link to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/about/2/params"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("about"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应的路由获取到的 params 对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("title")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"params"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"开发vite插件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#开发vite插件"}},[t._v("#")]),t._v(" 开发vite插件")]),t._v(" "),s("p",[t._v("vite的"),s("a",{pre:!0,attrs:{href:"https://cn.vitejs.dev/guide/api-plugin.html#plugin-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件"),s("OutboundLink",{pre:!0})],1),t._v("就是一个函数, 这个函数返回一个对象, 这个对象里面可以定义一些属性或者"),s("strong",[t._v("Hooks")]),t._v(", 如下所示:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" PluginOption "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://cn.vitejs.dev/guide/api-plugin.html")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" option"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PluginOption "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件名称")]),t._v("\n\t\tname"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite-plugin-hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pre: 在 Vite 核心插件之前调用该插件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认: 在 Vite 核心插件之后调用该插件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post: 在 Vite 构建插件之后调用该插件")]),t._v("\n\t\tenforce"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pre"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 指明它们仅在 "build" 或 "serve" 模式时调用')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认情况下插件在开发 (serve) 和生产 (build) 模式中都会调用")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// apply: "build",')]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在解析 Vite 配置前调用")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" command "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在解析 Vite 配置后调用")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configResolved")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolvedConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"configResolved"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用于配置开发服务器的钩子")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"configureServer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 转换 index.html 的专用钩子")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformIndexHtml")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transformIndexHtml"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每个传入模块请求时被调用")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// id 为文件路径")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src 为文件字符串")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transform"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果可行将提供 source map")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("36")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("37")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("38")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("39")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("40")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("41")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("42")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("43")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("44")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("45")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("46")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("47")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("48")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("49")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("50")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("51")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"vite-独有的钩子"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#vite-独有的钩子"}},[t._v("#")]),t._v(" vite 独有的钩子")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("解释")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("name")])]),t._v(" "),s("td",[t._v("插件名称")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("enforce")])]),t._v(" "),s("td",[t._v("值可以是"),s("code",[t._v("pre")]),t._v(" 或 "),s("code",[t._v("post")]),t._v(", "),s("code",[t._v("pre")]),t._v(" 会较于 "),s("code",[t._v("post")]),t._v("(默认)先执行")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("config(config, env)")])]),t._v(" "),s("td",[t._v("可以在 vite 被解析之前修改 vite 的相关配置。钩子接收原始用户配置 "),s("code",[t._v("config")]),t._v(" 和一个描述配置环境的变量env")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("configResolved(resolvedConfig)")])]),t._v(" "),s("td",[t._v("在解析 vite 配置后调用。使用这个钩子读取和存储最终解析的配置。当插件需要根据运行的命令做一些不同的事情时，它很有用")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("configureServer(server)")])]),t._v(" "),s("td",[t._v("主要用来配置开发服务器，为 dev-server (connect 应用程序) 添加自定义的中间件")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("transformIndexHtml(html)")])]),t._v(" "),s("td",[t._v("转换 "),s("code",[t._v("index.html")]),t._v(" 的专用钩子, 钩子接收当前的 HTML 字符串和转换上下文")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("handleHotUpdate(ctx)")])]),t._v(" "),s("td",[t._v("执行自定义HMR更新，可以通过ws往客户端发送自定义的事件")])])])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"vite-与-rollup-的通用钩子之构建阶段"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#vite-与-rollup-的通用钩子之构建阶段"}},[t._v("#")]),t._v(" vite 与 rollup 的通用钩子之构建阶段")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("hooks")]),t._v(" "),s("th",[t._v("解释")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("options(options)")])]),t._v(" "),s("td",[t._v("在服务器启动时被调用：获取、操纵Rollup选项，严格意义上来讲，它执行于属于构建阶段之前；")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("buildStart(options)")])]),t._v(" "),s("td",[t._v("在每次开始构建时调用")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("resolveId(source, importer, options)")])]),t._v(" "),s("td",[t._v("在每个传入模块请求时被调用，创建自定义确认函数，可以用来定位第三方依赖")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("load(id)")])]),t._v(" "),s("td",[t._v("在每个传入模块请求时被调用，可以自定义加载器，可用来返回自定义的内容")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("transform(code, id)")])]),t._v(" "),s("td",[t._v("在每个传入模块请求时被调用，主要是用来转换单个模块")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("buildEnd(error?: Error)")])]),t._v(" "),s("td",[t._v("在构建阶段结束后被调用，此处构建结束只是代表所有模块转义完成")])])])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"vite-与-rollup-的通用钩子之输出阶段"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#vite-与-rollup-的通用钩子之输出阶段"}},[t._v("#")]),t._v(" vite 与 rollup 的通用钩子之输出阶段")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("hooks")]),t._v(" "),s("th",[t._v("解释")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("outputOptions(options)")])]),t._v(" "),s("td",[t._v("接受输出参数")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("renderStart(outputOptions, inputOptions)")])]),t._v(" "),s("td",[t._v("每次 "),s("code",[t._v("bundle.generate")]),t._v(" 和 "),s("code",[t._v("bundle.write")]),t._v(" 调用时都会被触发")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("augmentChunkHash(chunkInfo)")])]),t._v(" "),s("td",[t._v("用来给 "),s("code",[t._v("chunk")]),t._v(" 增加 "),s("code",[t._v("hash")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("renderChunk(code, chunk, options)")])]),t._v(" "),s("td",[t._v("转译单个的"),s("code",[t._v("chunk")]),t._v("时触发。rollup 输出每一个chunk文件的时候都会调用")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("generateBundle(options, bundle, isWrite)")])]),t._v(" "),s("td",[t._v("在调用 "),s("code",[t._v("bundle.write")]),t._v(" 之前立即触发这个 hook")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("writeBundle(options, bundle)")])]),t._v(" "),s("td",[t._v("在调用 "),s("code",[t._v("bundle.write")]),t._v("后，所有的"),s("code",[t._v("chunk")]),t._v("都写入文件后，最后会调用一次 "),s("code",[t._v("writeBundle")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("closeBundle()")])]),t._v(" "),s("td",[t._v("在服务器关闭时被调用")])])])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"hook调用顺序图"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#hook调用顺序图"}},[t._v("#")]),t._v(" hook调用顺序图")]),t._v(" "),s("p",[s("img",{pre:!0,attrs:{src:a(584),alt:"image-20230222225428752"}})]),t._v(" "),s("h2",{pre:!0,attrs:{id:"全局api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#全局api"}},[t._v("#")]),t._v(" 全局API")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"createapp"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#createapp"}},[t._v("#")]),t._v(" createApp")]),t._v(" "),s("p",[t._v("在 Vue2 中创建 Vue 实例, 需要"),s("code",[t._v("new Vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" h "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#app"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br")])]),s("p",[t._v("在 Vue3 中通过调用"),s("code",[t._v("createApp")]),t._v("方法返回一个 Vue 实例")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createApp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./App.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./index.css"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#app"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("p",[t._v("在 Vue3 中 "),s("strong",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/global-api.html#%E5%85%A8%E5%B1%80-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("全局API"),s("OutboundLink",{pre:!0})],1)]),t._v(" 现在都移动到应用实例上app上, 以下是当前全局 API 及其相应实例 API 的表:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("2.x 全局 API")]),t._v(" "),s("th",[t._v("3.x 实例 API")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Vue.config")]),t._v(" "),s("td",[t._v("app.config")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.config.productionTip")]),t._v(" "),s("td",[t._v("已移除")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.config.ignoredElements")]),t._v(" "),s("td",[t._v("app.config.isCustomElement")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.component")]),t._v(" "),s("td",[t._v("app.component")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.directive")]),t._v(" "),s("td",[t._v("app.directive")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.mixin")]),t._v(" "),s("td",[t._v("app.mixin")])]),t._v(" "),s("tr",[s("td",[t._v("Vue.use")]),t._v(" "),s("td",[t._v("app.use")])])])]),t._v(" "),s("h2",{pre:!0,attrs:{id:"fragment"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#fragment"}},[t._v("#")]),t._v(" Fragment")]),t._v(" "),s("p",[t._v("在 Vue2 中组件的根目录必须要使用一个根元素包裹, 但是在 Vue3 中可以不需要一个根目录")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Vue logo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./assets/logo.png"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("HelloWorld")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Hello Vue 3.0 + Vite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("p",[t._v("实际上内部会将多个标签包含在一个"),s("code",[t._v("Fraagment")]),t._v("虚拟元素中, 减少了很多没有意义的"),s("strong",[t._v("div")]),t._v(", 对实现"),s("strong",[t._v("tree")]),t._v("组件有很大帮助")]),t._v(" "),s("h2",{pre:!0,attrs:{id:"v-model-更改"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#v-model-更改"}},[t._v("#")]),t._v(" v-model 更改")]),t._v(" "),s("p",[t._v("以下是对变化的总体概述:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("非兼容: "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/v-model.html#v-model",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("v-model")]),s("OutboundLink",{pre:!0})],1),t._v("用于自定义组件时, "),s("strong",[t._v("prop")]),t._v(" 和"),s("code",[t._v("事件默认名称")]),t._v("已更改:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("prop")]),t._v(": "),s("code",[t._v("value")]),t._v("->"),s("code",[t._v("modelValue")])]),t._v(" "),s("li",[t._v("事件: "),s("code",[t._v("input")]),t._v("->"),s("code",[t._v("update:modelValue")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("非兼容")]),t._v(": "),s("code",[t._v("v-bind")]),t._v("的"),s("code",[t._v(".sync")]),t._v("修饰符和组件的"),s("code",[t._v("model")]),t._v("选项已移除，可在"),s("code",[t._v("v-model")]),t._v("上加一个参数代替, 如: "),s("code",[t._v('v-modle:visible="xxx"')])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("新增")]),t._v(": 现在可以在同一个组件上使用多个"),s("code",[t._v("v-model")]),t._v("绑定；")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("新增")]),t._v(": 现在可以自定义"),s("code",[t._v("v-model")]),t._v("修饰符")])])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"_2-x-用法"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#_2-x-用法"}},[t._v("#")]),t._v(" 2.x 用法")]),t._v(" "),s("p",[t._v("在组件上使用"),s("code",[t._v("v-model")]),t._v("相当于绑定"),s("code",[t._v("value")]),t._v("(默认值)prop 并触发"),s("code",[t._v("input")]),t._v("事件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ChildComponent v"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pageTitle"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" 是以下的简写"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ChildComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pageTitle"')]),t._v(" @input"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pageTitle = $event"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("p",[t._v("如果想要更改 prop 或事件名称，则需要在"),s("code",[t._v("ChildComponent")]),t._v("组件中添加"),s("code",[t._v("model")]),t._v("选项:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ChildComponent.vue")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    prop"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改 v-model 绑定的 props 名")]),t._v("\n    event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'change'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改 v-model 绑定的事件名")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这将允许 value 属性用于其他用途")]),t._v("\n    value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 title 代替 value 作为 model 的 prop")]),t._v("\n    title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Default title'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])]),s("p",[t._v("这个例子中"),s("code",[t._v("v-model")]),t._v("是以下的简写:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ChildComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pageTitle"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token decorator"}},[s("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("change")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pageTitle = $event"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"使用v-bind-sync"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#使用v-bind-sync"}},[t._v("#")]),t._v(" 使用"),s("code",[t._v("v-bind.sync")])]),t._v(" "),s("p",[t._v("在 Vue2 中是这样使用"),s("code",[t._v("v-bind.sync")]),t._v("来对一个"),s("code",[t._v("prop")]),t._v('实现数据的"双向绑定":')]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" 父组件中使用 v"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bind"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync 绑定需要传递的 prop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ChildComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("visible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myVisible"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" 子组件中通过 update"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xxx 事件来通知更新 prop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'update:visible'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newVisible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"_3-x-用法"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#_3-x-用法"}},[t._v("#")]),t._v(" 3.x 用法")]),t._v(" "),s("p",[t._v("在 Vue3 中, 自定义组件上的"),s("code",[t._v("v-model")]),t._v("相当于传递了"),s("code",[t._v("modelValue")]),t._v("prop 并接收抛出的"),s("code",[t._v("update:modelValue")]),t._v("事件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-html line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 是以下的简写: --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":modelValue")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@update:")]),t._v("modelValue")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle = $event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"v-model参数"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#v-model参数"}},[t._v("#")]),t._v(" "),s("code",[t._v("v-model")]),t._v("参数")]),t._v(" "),s("p",[t._v("若需要更改"),s("code",[t._v("model")]),t._v("的名称, 可以为"),s("code",[t._v("v-model")]),t._v("传递一个"),s("strong",[t._v("参数")]),t._v("，以作为组件内"),s("code",[t._v("model")]),t._v("选项的替代:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-html line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-model:")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 是以下的简写: --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@update:")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle = $event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("p",[t._v("这也可以作为"),s("code",[t._v(".sync")]),t._v("修饰符的替代，而且允许我们在自定义组件上使用多个"),s("code",[t._v("v-model")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-html line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-model:")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-model:")]),t._v("visible")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageVisible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 是以下的简写:  --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@update:")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle = $event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":visible")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageVisible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@update:")]),t._v("visible")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageVisible = $event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"v-model修饰符"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#v-model修饰符"}},[t._v("#")]),t._v(" "),s("code",[t._v("v-model")]),t._v("修饰符")]),t._v(" "),s("p",[t._v("除了像"),s("code",[t._v(".trim")]),t._v("这样的 2.x 硬编码的"),s("code",[t._v("v-model")]),t._v("修饰符外，现在 3.x 还支持自定义修饰符:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-html line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model.capitalize")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pageTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[t._v("需要了解更多可以参考 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/component-custom-events.html#%E5%A4%84%E7%90%86-v-model-%E4%BF%AE%E9%A5%B0%E7%AC%A6",target:"_blank",rel:"noopener noreferrer"}},[t._v("v-model 处理修饰符"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("h2",{pre:!0,attrs:{id:"组合式api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#组合式api"}},[t._v("#")]),t._v(" 组合式API")]),t._v(" "),s("p",[t._v("Vue3 提出了"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/composition-api-introduction.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("组合式(Composition)API")]),s("OutboundLink",{pre:!0})],1),t._v(", 在 Vue2 中使用的"),s("code",[t._v("选项式(Option)API")]),t._v("里面有"),s("code",[t._v("data")]),t._v(","),s("code",[t._v("computed")]),t._v(","),s("code",[t._v("methds")]),t._v(","),s("code",[t._v("watch")]),t._v("等")]),t._v(" "),s("p",[t._v("在 Vue3 中, 依然可以使用"),s("code",[t._v("Option API")]),t._v("但是不建议和 Vue3 混用")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("Vue2")]),t._v("中, 实现一个功能得分到不同的地方，把数据放在"),s("code",[t._v("data")]),t._v(","),s("code",[t._v("computed")]),t._v("中, 把方法放在"),s("code",[t._v("methods")]),t._v("里面，分开的太散乱了，几个功能还好，几十个上百个，那就不好维护, 代码也不直观")]),t._v(" "),s("p",[t._v("所以 Vue3 提出了"),s("code",[t._v("Composition API")]),t._v(", 它可以把"),s("code",[t._v("一个逻辑的代码都收集在一起")]),t._v("单独写个"),s("code",[t._v("hook")]),t._v(", 然后再引入，这样相关的代码逻辑就不会到处分布了")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"script差异"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#script差异"}},[t._v("#")]),t._v(" script差异")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 可以在 script 使用 ts 只需 设置 lang 即可 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// defineComponent 方法创建一个组件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// export default 导出一个组件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里的属性 和 方法 会合并到 data函数 和 methods对象 里")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"响应式-api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#响应式-api"}},[t._v("#")]),t._v(" 响应式 API")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/reactivity-fundamentals.html#%E5%93%8D%E5%BA%94%E6%80%A7%E5%9F%BA%E7%A1%80",target:"_blank",rel:"noopener noreferrer"}},[t._v("响应式基础"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("h3",{pre:!0,attrs:{id:"响应式基础api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#响应式基础api"}},[t._v("#")]),t._v(" 响应式基础API")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/basic-reactivity.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("响应式基础API"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("h4",{pre:!0,attrs:{id:"reactive"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#reactive"}},[t._v("#")]),t._v(" reactive")]),t._v(" "),s("p",[t._v("返回对象的响应式副本")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/basic-reactivity.html#reactive",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("reactive")]),s("OutboundLink",{pre:!0})],1),t._v("响应式转换是“深层”的, 它影响所有嵌套的属性; 在基于 "),s("a",{pre:!0,attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy",target:"_blank",rel:"noopener noreferrer"}},[t._v("ES2015 Proxy"),s("OutboundLink",{pre:!0})],1),t._v(" 的实现中，返回的 proxy 是"),s("strong",[t._v("不等于原始对象的")]),t._v("; 建议只使用返回的响应式 proxy, 避免依赖原始对象")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ state.count }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("state.count++"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点我加1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对引用数据类型不需要访问其 .value 属性")]),t._v("\n    state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Proxy {count: 1}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br")])]),s("p",[t._v("**ts类型声明: **")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" object"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UnwrapNestedRefs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[s("code",[t._v("reactive")]),t._v("将解包所有深层的 refs，同时维持 ref 的响应性")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将 ref 对象再使用 reactive 转换为响应式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ref 会被解包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 它会更新 obj.count 的值")]),t._v("\ncount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 它也会更新 count的值(ref)")]),t._v("\nobj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br")])]),s("p",[t._v("当将 "),s("code",[t._v("ref")]),t._v(" 分配给"),s("code",[t._v("reactive")]),t._v("的属性时，"),s("code",[t._v("ref")]),t._v(" 将被自动解包")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nobj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nobj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => true")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"readonly"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#readonly"}},[t._v("#")]),t._v(" readonly")]),t._v(" "),s("p",[t._v("同"),s("code",[t._v("reactive")]),t._v("一样, 只不过是有只读的特性")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"isproxy"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#isproxy"}},[t._v("#")]),t._v(" isProxy")]),t._v(" "),s("p",[t._v("检查对象是否是由"),s("code",[t._v("reactive")]),t._v("或"),s("code",[t._v("readonly")]),t._v("创建代理")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"isreactive"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#isreactive"}},[t._v("#")]),t._v(" isReactive")]),t._v(" "),s("p",[t._v("检查对象是否是由"),s("code",[t._v("reactive")]),t._v("创建的响应式代理")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"isreadonly"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#isreadonly"}},[t._v("#")]),t._v(" isReadonly")]),t._v(" "),s("p",[t._v("检查对象是否是由"),s("code",[t._v("readonly")]),t._v("创建的只读代理")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"toraw"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#toraw"}},[t._v("#")]),t._v(" toRaw")]),t._v(" "),s("p",[t._v("返回"),s("code",[t._v("reactive")]),t._v("或"),s("code",[t._v("readonly")]),t._v("代理的原始对象, 这是一个“逃生舱”; 可用于临时读取数据而无需承担代理访问/跟踪的开销，也可用于写入数据而避免触发更改; "),s("strong",[t._v("不建议")]),t._v("保留对原始对象的持久引用, 请谨慎使用")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"markraw"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#markraw"}},[t._v("#")]),t._v(" markRaw")]),t._v(" "),s("p",[t._v("标记一个对象，使其永远不会转换为 proxy, 返回对象本身")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" markRaw "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("markRaw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 嵌套在其他响应式对象中时也可以使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bar "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("p",[s("code",[t._v("markRaw")]),t._v("标记的原始选择退出是根级别的, 如果将嵌套在内的、未标记的原始对象添加进响应式对象，然后再次访问该响应式对象，就会得到原始对象被代理后的版本, 这可能导致"),s("strong",[t._v("同一性风险")]),t._v(", 就是根数据是被"),s("code",[t._v("markRaw")]),t._v("标记为不可代理的对象但是其子属性被代理后出现的数据不一致的问题:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" markRaw "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("markRaw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      nested"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bar "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 虽然 foo 被标记为原始, 但 foo.nested 不是")]),t._v("\n      nested"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nested"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nested "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nested"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"shallowreactive"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#shallowreactive"}},[t._v("#")]),t._v(" shallowReactive")]),t._v(" "),s("p",[t._v("效果同"),s("code",[t._v("reactive")]),t._v('不过该响应式代理是"浅"层次的')]),t._v(" "),s("h4",{pre:!0,attrs:{id:"shallowreactive-2"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#shallowreactive-2"}},[t._v("#")]),t._v(" shallowReactive")]),t._v(" "),s("p",[t._v("效果同"),s("code",[t._v("reactive")]),t._v('不过该响应式代理是"浅"层次的')]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" shallowReactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isReactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shallowReactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  nested"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 改变 state 本身的性质是响应式的")]),t._v("\nstate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...但是不转换嵌套对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nested"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\nstate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nested"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 非响应式")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br")])]),s("blockquote",[s("p",[t._v("与"),s("code",[t._v("reactive")]),t._v("不同，任何使用"),s("code",[t._v("ref")]),t._v("的 property 都"),s("strong",[t._v("不会")]),t._v("被代理自动解包")])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"shallowreadonly"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#shallowreadonly"}},[t._v("#")]),t._v(" shallowReadonly")]),t._v(" "),s("p",[t._v("效果同"),s("code",[t._v("readonly")]),t._v('不过该响应式代理是"浅"层次的, 同样不会自动解包'),s("code",[t._v("ref")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"refs"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#refs"}},[t._v("#")]),t._v(" Refs")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/refs-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Refs"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("h4",{pre:!0,attrs:{id:"ref"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#ref"}},[t._v("#")]),t._v(" Ref")]),t._v(" "),s("p",[t._v("接受一个基本数据类型的值并返回一个响应式且可变的 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/composition-api-introduction.html#%E5%B8%A6-ref-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8F%98%E9%87%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("ref 对象"),s("OutboundLink",{pre:!0})],1),t._v(", ref 对象仅有一个"),s("code",[t._v(".value")]),t._v("属性, 指向该基本数据类型的值")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\ncount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br")])]),s("p",[t._v("或者使用一个变量也是可以的:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" countRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncountRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("countRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 2")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("p",[t._v("如下是控制台打印"),s("code",[t._v("ref")]),t._v("函数的返回值:")]),t._v(" "),s("p",[s("img",{pre:!0,attrs:{src:a(585),alt:"image-20220330170503886"}})]),t._v(" "),s("p",[t._v("可以看到"),s("code",[t._v("ref")]),t._v("函数返回的是一个代理对象, 根据该代理对象的"),s("code",[t._v(".value")]),t._v("值去读取值, 但是在模板是不需要"),s("code",[t._v(".value")]),t._v("去读取的:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 在模板中不需要 .value --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ count }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("count++"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点我加1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br")])]),s("p",[t._v("将值封装在一个对象中，看似没有必要，但为了保持 JavaScript 中不同数据类型的行为统一，这是必须的。因为在 JavaScript 中，"),s("code",[t._v("Number")]),t._v("或"),s("code",[t._v("String")]),t._v("等基本类型是通过值而非引用传递的:")]),t._v(" "),s("p",[s("img",{pre:!0,attrs:{src:a(586),alt:"pass-by-reference-vs-pass-by-value-animation"}})]),t._v(" "),s("p",[t._v("在任何值周围都有一个封装对象，这样我们就可以在整个应用中安全地传递它，而不必担心在某个地方失去它的响应性")]),t._v(" "),s("blockquote",[s("p",[t._v("换句话说,"),s("code",[t._v("ref")]),t._v("为我们的值创建了一个"),s("strong",[t._v("响应式引用")]),t._v(", 在整个组合式 API 中会经常使用"),s("strong",[t._v("引用")]),t._v("的概念")])]),t._v(" "),s("blockquote",[s("p",[t._v("如果将对象分配为 ref函数 则它将被 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/basic-reactivity.html#reactive",target:"_blank",rel:"noopener noreferrer"}},[t._v("reactive"),s("OutboundLink",{pre:!0})],1),t._v(" 函数处理为深层的响应式对象")])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"unref"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#unref"}},[t._v("#")]),t._v(" unref")]),t._v(" "),s("p",[t._v("如果参数是一个"),s("code",[t._v("ref")]),t._v("，则返回内部值，否则返回参数本身; 这是"),s("code",[t._v("val = isRef(val) ? val.value : val")]),t._v("的语法糖函数")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"toref"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#toref"}},[t._v("#")]),t._v(" toRef")]),t._v(" "),s("p",[t._v("为源响应式对象上的某个属性新创建一个"),s("code",[t._v("ref")]),t._v(", 该"),s("code",[t._v("ref")]),t._v("可以被传递, 它会保持对其源 property 的响应式连接")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toRef "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fooRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会影响 state.foo 的值")]),t._v("\nfooRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会影响 fooRef 的值(ref)")]),t._v("\nstate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fooRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"torefs"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#torefs"}},[t._v("#")]),t._v(" toRefs")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/refs-api.html#torefs",target:"_blank",rel:"noopener noreferrer"}},[t._v("toRefs"),s("OutboundLink",{pre:!0})],1),t._v(" 将响应式对象转换为普通对象，其中结果对象的每个属性都是指向原始对象相应属性的"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/refs-api.html#ref",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("ref")]),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toRefs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相当于将 state 里的每个属性都变成 ref 并且放到返回的这个新对象中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stateAsRefs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRefs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stateAsRefs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 1")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stateAsRefs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 2")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[t._v("从 "),s("code",[t._v("setup")]),t._v(" 函数返回需要"),s("strong",[t._v("解构的响应式对象")]),t._v("或者从合成函数返回响应式对象时"),s("strong",[t._v("toRefs")]),t._v("非常有用, 这样消费组件就可以在不丢失响应式的情况下对返回的对象进行解构/展开:")]),t._v(" "),s("p",[s("strong",[t._v("从 setup 函数返回需要解构的响应式对象")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("姓名: {{ state.name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("年龄: {{ state.age }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("性别: {{ state.gender }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("state.age++"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("年龄增加"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gender")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br")])]),s("p",[t._v("上面的代码是可以正常运行的就是在模板中必须"),s("code",[t._v("state.xxx")]),t._v("访问响应式对象里的数据不是很方便, 这是我们可以使用 ES6 中的对象解构方法在"),s("strong",[t._v("setup函数")]),t._v("返回响应式对象时将里面的响应式数据解构出来并返回, 如下:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gender")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将响应式对象解构")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// => name: "张三",')]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => age: 18,")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// => gender: "男",')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br")])]),s("p",[t._v("这样在模板中就可以直接使用对应的响应式数据了")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("姓名: {{ name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("年龄: {{ age }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("性别: {{ gender }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("age++"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("年龄增加"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("p",[t._v("数据展示没有问题但是当点击年龄增加按钮时发现数据的"),s("strong",[t._v("响应式丢失")]),t._v(", 其实解构响应式对象是会丢失其响应式的:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里解构对象的时候响应式数据就丢失了")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 李四")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 张三")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Proxy {name: '李四'}")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => {name: '张三'}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br")])]),s("p",[t._v("使用"),s("strong",[t._v("toRefs函数")]),t._v("就可以解决上面的问题:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRefs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 李四")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 李四")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Proxy {name: '李四'}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 里面的每个属性都会变成 ref 对象")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => {name: ObjectRefImpl}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("p",[t._v("可以在"),s("strong",[t._v("setup函数")]),t._v("或者其他合成函数返回的响应式对象数据时使用"),s("strong",[t._v("toRefs函数")]),t._v("来将属性都转换为 ref 再进行解构就不会丢失响应式了, 如下:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("姓名: {{ name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("年龄: {{ age }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("性别: {{ gender }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("age++"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("年龄增加"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toRefs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gender")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里使用 toRefs函数 转换成 ref 后再进行解构")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRefs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"isref"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#isref"}},[t._v("#")]),t._v(" isRef")]),t._v(" "),s("p",[t._v("检查值是否为一个 ref 对象")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"computed-与-watch"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#computed-与-watch"}},[t._v("#")]),t._v(" Computed 与 watch")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/computed-watch-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Computed 与 watch"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("h4",{pre:!0,attrs:{id:"computed"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#computed"}},[t._v("#")]),t._v(" computed")]),t._v(" "),s("p",[t._v("传入一个 getter 函数，"),s("strong",[t._v("返回一个默认不可手动修改的 ref 对象")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" computed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plusOne "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plusOne"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 2")]),t._v("\n\nplusOne"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Errir 没有 setter")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br")])]),s("p",[t._v("接受一个具有"),s("code",[t._v("get")]),t._v("和"),s("code",[t._v("set")]),t._v("函数的对象，用来创建可写的 ref 对象")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plusOne "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" newVal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plusOne"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 1")]),t._v("\n\nplusOne"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plusOne"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 10")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("p",[t._v("**类型声明: **")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只读的")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  debuggerOptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DebuggerOptions\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Readonly"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Readonly"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>>")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可写的")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  debuggerOptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DebuggerOptions\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DebuggerOptions")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  onTrack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DebuggerEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n  onTrigger"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DebuggerEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DebuggerEvent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  effect"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ReactiveEffect\n  target"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" OperationTypes\n  key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("symbol")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"watcheffect"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#watcheffect"}},[t._v("#")]),t._v(" watchEffect")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#watcheffect",target:"_blank",rel:"noopener noreferrer"}},[t._v("watchEffect"),s("OutboundLink",{pre:!0})],1),t._v(" 立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watchEffect "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("countEffect")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"countEffect"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一开始就会执行一次副作用函数, 然后会自动追踪该副作用函数使用到的依赖")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当依赖改变时自动执行该副作用函数, 相当于高级自动版 watch")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("countEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖变更会自动执行 countEffect函数 和 打印 foo.value")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br")])]),s("h5",{pre:!0,attrs:{id:"停止侦听"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#停止侦听"}},[t._v("#")]),t._v(" 停止侦听")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("watchEffect")]),t._v("在组件的"),s("code",[t._v("setup函数")]),t._v("或"),s("code",[t._v("生命周期钩子")]),t._v("被调用时, 侦听器会被链接到该组件的生命周期，并在组件卸载时自动停止")]),t._v(" "),s("p",[t._v("在一些情况下, 也可以显式调用返回值以停止侦听:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会返回一个函数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用返回的函数可以停止侦听")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br")])]),s("h5",{pre:!0,attrs:{id:"清除副作用"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#清除副作用"}},[t._v("#")]),t._v(" 清除副作用")]),t._v(" "),s("p",[t._v("有时副作用函数会执行一些异步的副作用，这些响应需要在其失效时清除 (即完成之前状态已改变了) 。所以侦听副作用传入的函数可以接收一个"),s("code",[t._v("onInvalidate")]),t._v("函数作入参，用来注册清理失效时的回调。当以下情况发生时，这个失效回调会被触发:")]),t._v(" "),s("ul",[s("li",[t._v("副作用即将重新执行时")]),t._v(" "),s("li",[t._v("侦听器被停止 (如果在"),s("code",[t._v("setup()")]),t._v("或生命周期钩子函数中使用了"),s("code",[t._v("watchEffect")]),t._v("，则在组件卸载时)")])]),t._v(" "),s("p",[s("strong",[t._v("文本框防抖案例")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watchEffect "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" keyword "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 异步操作")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("asyncPrint")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"文本框的内容为: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("onInvalidate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用户输入的时间间隔小于0.5秒, 都会立刻清除掉异步操作的定时器")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 大于 0.5秒 才会打印出文本框的值(防抖)")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asyncPrint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onInvalidate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      keyword"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br")])]),s("h5",{pre:!0,attrs:{id:"副作用刷新时机"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#副作用刷新时机"}},[t._v("#")]),t._v(" 副作用刷新时机")]),t._v(" "),s("p",[t._v("Vue 的响应性系统会缓存副作用函数，并异步地刷新它们，这样可以避免同一个“tick” 中多个状态改变导致的不必要的重复调用。在核心的具体实现中，组件的"),s("code",[t._v("update")]),t._v("函数也是一个被侦听的副作用。当一个用户定义的副作用函数进入队列时，默认情况下，会在所有的组件"),s("code",[t._v("update")]),s("strong",[t._v("前")]),t._v("执行")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button "),s("span",{pre:!0,attrs:{class:"token decorator"}},[s("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count++"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("点我加"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watchEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onUpdated "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// onUpdated 就是 Vue2 中的 update 生命周期")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'onUpdated'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br")])]),s("p",[t._v("在上面的例子中:")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("count")]),t._v("会在初始运行时同步打印出来")])]),t._v(" "),s("li",[s("p",[t._v("更改"),s("code",[t._v("count")]),t._v("时, 将在组件"),s("strong",[t._v("更新前")]),t._v("执行副作用")])])]),t._v(" "),s("p",[t._v("如果需要在组件更新(例如: 当与"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/composition-api-template-refs.html#%E4%BE%A6%E5%90%AC%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("模板引用"),s("OutboundLink",{pre:!0})],1),t._v("一起)"),s("strong",[t._v("后")]),t._v("重新运行侦听器副作用, 可以传递带有"),s("code",[t._v("flush")]),t._v("选项的附加"),s("code",[t._v("options")]),t._v("对象:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在组件更新后触发，这样你就可以访问更新的 DOM")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意: 这也将推迟副作用的初始运行, 直到组件的首次渲染完成")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 操作DOM")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    flush"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'post'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("p",[s("code",[t._v("pre")]),t._v(": 选项("),s("strong",[t._v("默认值")]),t._v(")来定义, "),s("code",[t._v("watch")]),t._v("和"),s("code",[t._v("watchEffect")]),t._v("在 DOM 挂载或更新之前运行副作用, 所以当侦听器运行时, 模板引用还未被更新")]),t._v(" "),s("p",[s("code",[t._v("post")]),t._v(": 选项来定义, 将在 DOM 更新后运行副作用，确保模板引用与 DOM 保持同步，并引用正确的元素")]),t._v(" "),s("p",[s("code",[t._v("sync")]),t._v(": 选项将强制效果始终同步触发, 然而，这是低效的，应该很少需要")]),t._v(" "),s("blockquote",[s("p",[t._v("watchEffect 在开发模式下还可以进行"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#%E4%BE%A6%E5%90%AC%E5%99%A8%E8%B0%83%E8%AF%95",target:"_blank",rel:"noopener noreferrer"}},[t._v("侦听器调试"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"watch"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#watch"}},[t._v("#")]),t._v(" watch")]),t._v(" "),s("p",[s("code",[t._v("watch")]),t._v("API 完全等效于 2.x"),s("code",[t._v("this.$watch")]),t._v("（以及"),s("code",[t._v("watch")]),t._v("中相应的选项）,"),s("code",[t._v("watch")]),t._v("需要侦听特定的数据源, 并在回调函数中执行副作用; 默认情况下, 它是"),s("strong",[t._v("惰性的")]),t._v(", 即只有当被侦听的源发生变化时才执行回调")]),t._v(" "),s("p",[t._v("与"),s("code",[t._v("watchEffect")]),t._v("比较，"),s("code",[t._v("watch")]),t._v("允许我们:")]),t._v(" "),s("ul",[s("li",[t._v("懒执行副作用")]),t._v(" "),s("li",[t._v("更具体地说明什么状态应该触发侦听器重新运行")]),t._v(" "),s("li",[t._v("访问侦听状态变化前后的值")])]),t._v(" "),s("p",[s("code",[t._v("watch")]),t._v('接收的第一个参数被称作"数据源", 它可以是:')]),t._v(" "),s("ul",[s("li",[t._v("一个返回任意值的"),s("code",[t._v("getter")]),t._v("函数")]),t._v(" "),s("li",[t._v("一个包装对象(可以是"),s("code",[t._v("ref")]),t._v("或者"),s("code",[t._v("reactive")]),t._v("包装的对象)")]),t._v(" "),s("li",[t._v("一个包含上述两种数据源的"),s("code",[t._v("数组")])])]),t._v(" "),s("p",[t._v("第二个参数是回调函数, 回调函数只有当数据源发生变动时才会被触发:")]),t._v(" "),s("h5",{pre:!0,attrs:{id:"侦听单个数据源"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#侦听单个数据源"}},[t._v("#")]),t._v(" 侦听单个数据源")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// () => state.count, // 侦听一个 reactive")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 侦听一个 ref")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'newValue: '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'oldValue: '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br")])]),s("h5",{pre:!0,attrs:{id:"侦听多个数据源"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#侦听多个数据源"}},[t._v("#")]),t._v(" 侦听多个数据源")]),t._v(" "),s("p",[t._v("侦听器还可以使用数组同时侦听多个源:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" firstName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"firstName"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lastName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lastName"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新旧值参数这里也可以是数组跟监听数据源对应 一个侦听源对应一个包含新旧元素数组")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("firstName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lastName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValues"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevValues"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"newValues"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newValues"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prevValues"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevValues"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  firstName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// => ["张三", "lastName"], ["firstName", "lastName"]')]),t._v("\n    \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    lastName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => ['张三', '李四'], ['张三', 'lastName']")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])]),s("p",[t._v("在同一个函数里同时改变这些被侦听的来源, 侦听器仍只会执行一次, 多个同步更改只会触发"),s("strong",[t._v("一次")]),t._v("侦听器")]),t._v(" "),s("h5",{pre:!0,attrs:{id:"侦听复杂的嵌套对象"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#侦听复杂的嵌套对象"}},[t._v("#")]),t._v(" 侦听复杂的嵌套对象")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" watch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      person"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          age"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          gender"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"newValue:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oldValue:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// immediate: true, // 立即监视")]),t._v("\n    deep"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 深度监视")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同步任务执行多次, 只会执行一次")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br")])]),s("p",[s("code",[t._v("watch")]),t._v("与"),s("code",[t._v("watchEffect")]),t._v("共享"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#%E5%81%9C%E6%AD%A2%E4%BE%A6%E5%90%AC",target:"_blank",rel:"noopener noreferrer"}},[t._v("停止侦听"),s("OutboundLink",{pre:!0})],1),t._v("，"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#%E6%B8%85%E9%99%A4%E5%89%AF%E4%BD%9C%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("清除副作用"),s("OutboundLink",{pre:!0})],1),t._v(" (相应地"),s("code",[t._v("onInvalidate")]),t._v("会作为回调的第三个参数传入)、"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#%E5%89%AF%E4%BD%9C%E7%94%A8%E5%88%B7%E6%96%B0%E6%97%B6%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"}},[t._v("副作用刷新时机"),s("OutboundLink",{pre:!0})],1),t._v("和"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#%E4%BE%A6%E5%90%AC%E5%99%A8%E8%B0%83%E8%AF%95",target:"_blank",rel:"noopener noreferrer"}},[t._v("侦听器调试"),s("OutboundLink",{pre:!0})],1),t._v("行为")]),t._v(" "),s("p",[t._v("**类型声明: **")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("effect")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("onInvalidate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" InvalidateCbRegistrator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" WatchEffectOptions\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StopHandle\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WatchEffectOptions")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  flush"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pre'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'post'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sync'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认: 'pre'")]),t._v("\n  onTrack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DebuggerEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n  onTrigger"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DebuggerEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DebuggerEvent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  effect"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ReactiveEffect\n  target"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" OperationTypes\n  key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("symbol")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InvalidateCbRegistrator")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("invalidate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StopHandle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"setup"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#setup"}},[t._v("#")]),t._v(" setup")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/composition-api-setup.html#setup",target:"_blank",rel:"noopener noreferrer"}},[t._v("setup函数"),s("OutboundLink",{pre:!0})],1),t._v("是一个新的组件选项, 作为组件内使用"),s("code",[t._v("Composition API")]),t._v("的入口点")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"setup-的执行顺序"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#setup-的执行顺序"}},[t._v("#")]),t._v(" setup 的执行顺序")]),t._v(" "),s("p",[s("code",[t._v("setup")]),t._v("会在"),s("code",[t._v("beforeCreate")]),s("strong",[t._v("之前")]),t._v("执行一次, 此时"),s("code",[t._v("this")]),t._v("还没有被初始化所以不能通过"),s("code",[t._v("this")]),t._v("来 调用方法 和 获取属性")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => undefined")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"setup-的返回值"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#setup-的返回值"}},[t._v("#")]),t._v(" setup 的返回值")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("setup")]),t._v("的返回值是一个对象")])]),t._v(" "),s("p",[t._v("返回的这个对象的属性可以直接在模板中使用")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" 可以直接使用 setup 返回的数据 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => undefined")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里返回的 msg 可以在模板中直接使用")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br")])]),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/global-api.html#definecomponent",target:"_blank",rel:"noopener noreferrer"}},[t._v("defineComponent 函数"),s("OutboundLink",{pre:!0})],1),t._v(" 只返回传递给它的对象, 但是, 就类型而言, 返回的值有一个合成类型的构造函数，用于手动渲染函数、TSX 和 IDE 工具支持")]),t._v(" "),s("p",[s("strong",[t._v("和"),s("code",[t._v("options")]),t._v("一起使用时(不推荐)")])]),t._v(" "),s("p",[t._v("这个返回的对象会与组件中的"),s("code",[t._v("data")]),t._v("函数返回的对象进行"),s("strong",[t._v("合并")]),t._v(", 返回的方法会与"),s("code",[t._v("methods")]),t._v("中的方法进行"),s("strong",[t._v("合并")]),t._v(", 合并之后直接可以在模板中使用，如果有重名的情况，会优先使用"),s("code",[t._v("setup")]),t._v("返回的"),s("strong",[t._v("属性")]),t._v("和"),s("strong",[t._v("方法")]),t._v("，"),s("code",[t._v("methods")]),t._v("和"),s("code",[t._v("data")]),t._v("能够拿到"),s("code",[t._v("setup")]),t._v("中的返回的数据和方法，反之"),s("code",[t._v("setup")]),s("strong",[t._v("不能")]),t._v("拿到它们的属性和方法，因为在"),s("code",[t._v("setup")]),t._v("中"),s("code",[t._v("this")]),t._v("是"),s("code",[t._v("undefined")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 可以直接使用 setup 返回的数据 --\x3e")]),t._v("\n  {{ msg }}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里可以读取到 setup 返回的数据")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dataMsg")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mounted: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataMsg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => mounted: hello ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => undefined")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里返回的 msg 可以在模板中直接使用")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br")])]),s("p",[s("strong",[s("code",[t._v("setup")]),t._v("的返回值是一个函数")])]),t._v(" "),s("p",[t._v("该函数会作为组件的"),s("code",[t._v("render")]),t._v("函数")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" h "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"button"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onClick")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("count is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"suspense-组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#suspense-组件"}},[t._v("#")]),t._v(" Suspense 组件")]),t._v(" "),s("p",[t._v("如果我们需要使用"),s("code",[t._v("async")]),t._v("去修饰"),s("code",[t._v("setup")]),t._v("返回的数据, 这样会返回"),s("code",[t._v("promise")]),t._v("是我们不想看见情况，如果我们必须使用"),s("code",[t._v("async")]),t._v("修饰，就得在用它的父组件外层嵌套一个"),s("a",{pre:!0,attrs:{href:"https://staging-cn.vuejs.org/guide/built-ins/suspense.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("<suspense>")]),s("OutboundLink",{pre:!0})],1),t._v("内置组件，里面放置一些不确定的操作，比如可以把异步组件放进去, 如下:")]),t._v(" "),s("p",[s("strong",[t._v("子组件")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  Child: {{ res }}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟请求函数, 2秒后返回结果")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("asyncFn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"await + async + setup"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asyncFn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br")])]),s("p",[s("strong",[t._v("父组件")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Suspense")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 异步子组件 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 在 #fallback 插槽中显示 “正在加载中” --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("#fallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" Loading... "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Suspense")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"suspense-插槽"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#suspense-插槽"}},[t._v("#")]),t._v(" Suspense 插槽")]),t._v(" "),s("p",[s("code",[t._v("<Suspense>")]),t._v("组件有"),s("a",{pre:!0,attrs:{href:"https://staging-cn.vuejs.org/guide/built-ins/suspense.html#loading-state",target:"_blank",rel:"noopener noreferrer"}},[t._v("两个插槽"),s("OutboundLink",{pre:!0})],1),t._v(": "),s("code",[t._v("#default")]),t._v("和"),s("code",[t._v("#fallback")]),t._v(", 两个插槽都只允许"),s("strong",[t._v("一个")]),t._v("直接子节点; 在可能的时候都将显示默认槽("),s("strong",[t._v("default")]),t._v(")中的节点, 否则将显示后备槽("),s("strong",[t._v("fallback")]),t._v(")中的节点")]),t._v(" "),s("p",[t._v("在初始渲染时，"),s("code",[t._v("<Suspense>")]),t._v("将在内存中渲染其默认的插槽内容。如果在这个过程中遇到任何异步依赖，则会进入"),s("strong",[t._v("挂起")]),t._v("状态。在挂起状态期间，展示的是后备内容。当所有遇到的异步依赖都完成后，"),s("code",[t._v("<Suspense>")]),t._v("会进入"),s("strong",[t._v("完成")]),t._v("状态，并将展示出默认插槽的内容。")]),t._v(" "),s("p",[t._v("如果在初次渲染时没有遇到异步依赖，"),s("code",[t._v("<Suspense>")]),t._v("会直接进入完成状态。")]),t._v(" "),s("p",[t._v("进入完成状态后，只有当默认插槽的根节点被替换时，"),s("code",[t._v("<Suspense>")]),t._v("才会回到挂起状态。组件树中新的更深层次的异步依赖"),s("strong",[t._v("不会")]),t._v("造成"),s("code",[t._v("<Suspense>")]),t._v("回退到挂起状态。")]),t._v(" "),s("p",[t._v("发生回退时，后备内容不会立即展示出来。相反，"),s("code",[t._v("<Suspense>")]),t._v("在等待新内容和异步依赖完成时，会展示之前"),s("code",[t._v("#default")]),t._v("插槽的内容。这个行为可以通过一个"),s("code",[t._v("timeout")]),t._v("prop 进行配置: 在等待渲染新内容耗时超过"),s("code",[t._v("timeout")]),t._v("之后，"),s("code",[t._v("<Suspense>")]),t._v("将会切换为展示后备内容。若"),s("code",[t._v("timeout")]),t._v("值为"),s("code",[t._v("0")]),t._v("将导致在替换默认内容时立即显示后备内容。")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"suspense-事件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#suspense-事件"}},[t._v("#")]),t._v(" Suspense 事件")]),t._v(" "),s("p",[t._v("除了 "),s("strong",[t._v("pending")]),t._v(" 事件之外，"),s("code",[t._v("<suspense>")]),t._v("组件还有 "),s("strong",[t._v("resolve")]),t._v(" 和 "),s("strong",[t._v("fallback")]),t._v(" 事件; "),s("strong",[t._v("pending")]),t._v(" 事件是在进入挂起状态时触发; "),s("strong",[t._v("resolve事件")]),t._v(" 是在 "),s("strong",[t._v("default 插槽")]),t._v("完成获取新内容时触发; "),s("strong",[t._v("fallback 事件")]),t._v("则是在 "),s("strong",[t._v("fallback")]),t._v(" 插槽展示时触发")]),t._v(" "),s("p",[s("strong",[t._v("父组件")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Suspense\n    "),s("span",{pre:!0,attrs:{class:"token decorator"}},[s("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pending")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"handlePending"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token decorator"}},[s("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fallback")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"handleFallback"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token decorator"}},[s("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"handleResolve"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Child "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template #fallback"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       Loading"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Suspense"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  components"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handlePending")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"handlePending"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleFallback")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hadleFallback"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleResolve")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"handleResolve"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" handlePending"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleFallback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleResolve "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"suspense-错误处理"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#suspense-错误处理"}},[t._v("#")]),t._v(" Suspense 错误处理")]),t._v(" "),s("p",[s("code",[t._v("<Suspense>")]),t._v("组件自身目前还不提供错误处理，不过你可以使用 "),s("a",{pre:!0,attrs:{href:"https://staging-cn.vuejs.org/api/options-lifecycle.html#errorcaptured",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("errorCaptured")]),s("OutboundLink",{pre:!0})],1),t._v(" 选项或者 "),s("a",{pre:!0,attrs:{href:"https://staging-cn.vuejs.org/api/composition-api-lifecycle.html#onerrorcaptured",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("onErrorCaptured()")]),s("OutboundLink",{pre:!0})],1),t._v(" 钩子，在使用到"),s("code",[t._v("<Suspense>")]),t._v("的父组件中捕获和处理异步错误")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"和其他组件结合"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#和其他组件结合"}},[t._v("#")]),t._v(" 和其他组件结合")]),t._v(" "),s("p",[t._v("我们常常会将"),s("code",[t._v("<Suspense>")]),t._v("和 "),s("a",{pre:!0,attrs:{href:"https://staging-cn.vuejs.org/guide/built-ins/transition.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("<Transition>")]),s("OutboundLink",{pre:!0})],1),t._v("、"),s("a",{pre:!0,attrs:{href:"https://staging-cn.vuejs.org/guide/built-ins/transition.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("<KeepAlive>")]),s("OutboundLink",{pre:!0})],1),t._v(" 等组件结合。要保证这些组件都能正常工作，嵌套的顺序非常重要")]),t._v(" "),s("p",[t._v("另外，这些组件都通常与 "),s("a",{pre:!0,attrs:{href:"https://next.router.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue Router"),s("OutboundLink",{pre:!0})],1),t._v(" 中的"),s("code",[t._v("<RouterView>")]),t._v("组件结合使用")]),t._v(" "),s("p",[t._v("下面的例子展示它们的嵌套关系:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("RouterView")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-slot")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{ Component }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Transition")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("out-in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("KeepAlive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Suspense")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 主要内容 --\x3e")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 加载中状态 --\x3e")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("#fallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            Loading...\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Suspense")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("KeepAlive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Transition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("RouterView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])]),s("p",[t._v("Vue Router 使用动态导入对"),s("a",{pre:!0,attrs:{href:"https://next.router.vuejs.org/guide/advanced/lazy-loading.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("懒加载组件"),s("OutboundLink",{pre:!0})],1),t._v("进行了内置支持。这些与异步组件不同，目前他们不会触发"),s("code",[t._v("<Suspense>")]),t._v("。但是，它们仍然可以有异步组件作为后代，这些组件可以照常触发"),s("code",[t._v("<Suspense>")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"setup-参数"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#setup-参数"}},[t._v("#")]),t._v(" setup 参数")]),t._v(" "),s("p",[s("code",[t._v("setup")]),t._v("函数可以接收"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/composition-api-setup.html#%E5%8F%82%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("两个参数,"),s("OutboundLink",{pre:!0})],1),s("code",[t._v("props")]),t._v("和"),s("code",[t._v("setupContext")])]),t._v(" "),s("p",[s("code",[t._v("setup")]),t._v("函数的第一个参数是"),s("code",[t._v("props")]),t._v(", 它接受父组件传递的值, 即"),s("code",[t._v("prop")])]),t._v(" "),s("p",[t._v("父组件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Child "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("prop1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prop1"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("prop2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prop2"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prop1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"这是prop1数据"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prop2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"这是prop2数据"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prop1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prop2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br")])]),s("p",[t._v("子组件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prop1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prop1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prop1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prop2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里不接受的话在 setup 和 模板 中就无法使用 props")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setupContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请不要解构 props 对象，因为它会失去响应式 ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// const { prop1, prop2 } = props;")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prop1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 这是prop1数据 (这里会自动解包不需要 .value)")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prop2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Proxy {data: '这是prop2数据'}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("blockquote",[s("p",[t._v("注意点:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("请不要"),s("strong",[t._v("解构")]),s("code",[t._v("props")]),t._v("对象, 因为它会"),s("strong",[t._v("失去响应式")])])]),t._v(" "),s("li",[s("p",[t._v("通过"),s("code",[t._v("props")]),t._v("传递的"),s("code",[t._v("ref")]),t._v("在子组件中不需要"),s("code",[t._v(".value")]),t._v("取值")])])])]),t._v(" "),s("p",[s("code",[t._v("setup")]),t._v("函数的第二个参数里面包含4个常用的属性"),s("code",[t._v("{ attrs, slots, emit, expose }")]),t._v(", 前三个分别对应 Vue2 中的"),s("code",[t._v("this.$attrs")]),t._v(", "),s("code",[t._v("this.$slots")]),t._v(", "),s("code",[t._v("this.$emit")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("attrs")]),t._v(": 除了"),s("code",[t._v("props")]),t._v("中的其他属性")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("slots")]),t._v(": 组件接受到的插槽对象")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("emit")]),t._v(":  一个函数, 用于发射自定义事件")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("expose")]),t._v(": 一个函数, 用来显示暴露组件对外暴露的属性(Vue 3.2)")])])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"setup-props-指定类型"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#setup-props-指定类型"}},[t._v("#")]),t._v(" setup props 指定类型")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" PropType "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListType")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Array")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" PropType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ListType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里指定类型")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"setup-emits-指定类型"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#setup-emits-指定类型"}},[t._v("#")]),t._v(" setup emits 指定类型")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" PropType "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListType")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  emits"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addBook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payload"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" bookName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行运行时校验")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" payload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bookName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" emits "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'addBook'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        bookName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类型错误")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'non-declared-event'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类型错误")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"生命周期"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),s("p",[t._v("Vue3 的"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期"),s("OutboundLink",{pre:!0})],1),t._v("相较于 Vue2 的一些区别:")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("destroyed")]),t._v("生命周期选项被重命名为"),s("code",[t._v("unmounted")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("beforeDestroy")]),t._v("生命周期选项被重命名为"),s("code",[t._v("beforeUnmount")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("hook")]),t._v(" 里的生命周期都是需要在其前面加上"),s("code",[t._v("on")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("选项式 API")]),t._v(" "),s("th",[t._v("Hook inside"),s("code",[t._v("setup")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("beforeCreate")])]),t._v(" "),s("td",[t._v("删除")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("created")])]),t._v(" "),s("td",[t._v("删除")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("beforeMount")])]),t._v(" "),s("td",[s("code",[t._v("onBeforeMount")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("mounted")])]),t._v(" "),s("td",[s("code",[t._v("onMounted")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("beforeUpdate")])]),t._v(" "),s("td",[s("code",[t._v("onBeforeUpdate")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("updated")])]),t._v(" "),s("td",[s("code",[t._v("onUpdated")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("beforeUnmount")])]),t._v(" "),s("td",[s("code",[t._v("onBeforeUnmount")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("unmounted")])]),t._v(" "),s("td",[s("code",[t._v("onUnmounted")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("errorCaptured")])]),t._v(" "),s("td",[s("code",[t._v("onErrorCaptured")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("renderTracked")])]),t._v(" "),s("td",[s("code",[t._v("onRenderTracked")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("renderTriggered")])]),t._v(" "),s("td",[s("code",[t._v("onRenderTriggered")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("activated")])]),t._v(" "),s("td",[s("code",[t._v("onActivated")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("deactivated")])]),t._v(" "),s("td",[s("code",[t._v("onDeactivated")])])])])]),t._v(" "),s("p",[t._v("在 Vue3 中"),s("code",[t._v("setup")]),t._v("函数取代了"),s("code",[t._v("beforeCreate")]),t._v("和"),s("code",[t._v("created")]),t._v("生命周期, 钩子中编写的任何代码都应该直接在"),s("code",[t._v("setup")]),t._v("函数中编写")]),t._v(" "),s("p",[t._v("这些函数接受一个回调函数，当钩子被组件调用时将会被执行:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ count }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("count++"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点我+1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onBeforeMount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onMounted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onBeforeUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onUpdated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onBeforeUnmount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onUnmounted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getCountDOM")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// beforeCreate + created")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"setup 相当于是 beforeCreate + created"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onBeforeMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"组件挂载之前"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"组件挂载完成"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCountDOM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onBeforeUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"组件更新之前"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCountDOM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"组件更新完成"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCountDOM")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onBeforeUnmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'组件卸载之前'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUnmounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'组件卸载完成'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("36")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("37")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("38")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("39")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("40")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("41")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"生命周期事件前缀改变"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#生命周期事件前缀改变"}},[t._v("#")]),t._v(" 生命周期事件前缀改变")]),t._v(" "),s("p",[t._v("在 Vue2 中生命周期触发时还会触发一个对应前缀("),s("code",[t._v("hook:")]),t._v(")的钩子:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("child-component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@hook:")]),t._v("updated")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onUpdated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("p",[t._v("在 Vue3 中前缀修改为"),s("code",[t._v("vnode-")]),t._v(":")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 注意: 这里是用 - 分割 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("child-component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@vnode-updated")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onUpdated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("p",[t._v("或者在驼峰命名法的情况下附带前缀"),s("code",[t._v("vnode")]),t._v(":")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("child-component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@vnodeUpdated")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onUpdated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"依赖注入"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#依赖注入"}},[t._v("#")]),t._v(" 依赖注入")]),t._v(" "),s("p",[s("code",[t._v("provide")]),t._v("和"),s("code",[t._v("inject")]),t._v("提供"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/component-provide-inject.html#provide-inject",target:"_blank",rel:"noopener noreferrer"}},[t._v("依赖注入"),s("OutboundLink",{pre:!0})],1),t._v(", 功能类似 Vue2 的"),s("code",[t._v("provide/inject")]),t._v(", 但是两者都只能在当前组件的"),s("code",[t._v("setup()")]),t._v("中调用")]),t._v(" "),s("p",[s("code",[t._v("provide")]),t._v("函数允许你通过两个参数定义 property:")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("name")]),t._v(" ("),s("code",[t._v("<String>")]),t._v("类型)")]),t._v(" "),s("li",[s("strong",[t._v("value")])])]),t._v(" "),s("p",[t._v("父组件使用"),s("code",[t._v("provide")]),t._v("注入数据:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" provide "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 先定义数据源 ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gender")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"李四"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gender")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"女"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注入")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" personList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("provide")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"personList"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" personList "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br")])]),s("p",[s("code",[t._v("inject")]),t._v("函数有两个参数:")]),t._v(" "),s("ol",[s("li",[t._v("要 "),s("strong",[t._v("inject")]),t._v(" 的 "),s("strong",[t._v("property")]),t._v(" 的 "),s("strong",[t._v("name")])]),t._v(" "),s("li",[t._v("默认值 ("),s("strong",[t._v("可选")]),t._v(")")])]),t._v(" "),s("p",[t._v("子组件使用"),s("code",[t._v("inject")]),t._v("获取祖先组件的数据:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("PersonList info"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(person, index) in personList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("姓名: {{ person.name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("年龄: {{ person.age }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("性别: {{ person.gender }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inject "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取指定的 key 的数据, 没有则返回空数组")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" personList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"personList"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" personList "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"模板引用ref"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#模板引用ref"}},[t._v("#")]),t._v(" 模板引用ref")]),t._v(" "),s("p",[t._v("当使用组合式API时,"),s("code",[t._v("reactive refs")]),t._v("和"),s("code",[t._v("template refs")]),t._v("的概念已经是统一的了, 为了获得对模板内元素或者组件实例的引用, 可以直接在"),s("code",[t._v("setup()")]),t._v("中声明一个同名的"),s("code",[t._v("ref")]),t._v("并返回它("),s("code",[t._v("script setup")]),t._v("同理):")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("testRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test DOM"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ChildRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onMounted "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" testRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ChildRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意要在 onMounted 生命周期之后才可以拿到元素")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("testRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取的 div 元素")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ChildRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取的 Child 组件实例")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" testRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ChildRef "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"函数式写法"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#函数式写法"}},[t._v("#")]),t._v(" 函数式写法")]),t._v(" "),s("p",[t._v("模板引用"),s("code",[t._v("ref")]),t._v("还可以是函数式的写法, 更加的灵活:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 函数式写法 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(el) => testRef = el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test DOM"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 收集多个ref --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(el) => list.push(el)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("list1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(el) => list.push(el)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("list2"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"emit-和-emits"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#emit-和-emits"}},[t._v("#")]),t._v(" emit 和 emits")]),t._v(" "),s("p",[t._v("Vue 3 新增了一个"),s("code",[t._v("emits")]),t._v("选项，和现有的"),s("code",[t._v("props")]),t._v("选项类似, 这个选项可以用来定义一个组件可以向其父组件触发的事件")]),t._v(" "),s("p",[t._v("父组件绑定自定义事件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@myClick")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("myClick")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent myClick: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" myClick "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br")])]),s("p",[t._v("子组件触发父组件绑定的自定义事件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$emit('myClick', $event, myClickData)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    触发父组件的 myCilck 事件\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("emits")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myClick"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myClickData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我是myClick事件携带的数据"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" myClickData "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br")])]),s("p",[s("code",[t._v("emits")]),t._v("也可以定义为一个对象，该对象允许开发者定义传入事件参数的验证器，和"),s("code",[t._v("props")]),t._v("定义里的验证器类似, 更多信息可以查看"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/options-data.html#emits",target:"_blank",rel:"noopener noreferrer"}},[t._v("emits"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  emits"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// myClick: null, // myClick 事件没有验证函数")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// myClick 事件的自定义验证函数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("myClick")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("payload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("payload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myClick 事件必须携带参数'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br")])]),s("p",[t._v("建议使用"),s("code",[t._v("emits")]),t._v("记录每个组件所触发的所有事件, 这尤为重要，因为Vue3"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/v-on-native-modifier-removed.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("移除了"),s("code",[t._v(".native")]),t._v("修饰符"),s("OutboundLink",{pre:!0})],1),t._v(", 任何未在"),s("code",[t._v("emits")]),t._v("中声明的事件监听器都会被算入组件的"),s("code",[t._v("$attrs")]),t._v(", 并将默认绑定到组件的根节点上, 这会导致"),s("strong",[t._v("透传原生事件")]),t._v("的隐患, 如下例子:")]),t._v(" "),s("p",[t._v("父组件中为子组件绑定了一个 click 事件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("my-button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-on:")]),t._v("click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("my-button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[t._v("子组件触发了"),s("strong",[t._v("click")]),t._v("事件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-on:")]),t._v("click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$emit('click', $event)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("OK"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("emits")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不声明事件父组件绑定的事件将会被添加到组件的 attrs 上")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("p",[t._v("上面的例子因为子组件的"),s("code",[t._v("emits")]),t._v("中没有声明任何事件, 导致父组件绑定的"),s("code",[t._v("click")]),t._v("事件添加到"),s("code",[t._v("button")]),t._v("元素上, 如果该元素被点击以后会错误的触发"),s("strong",[t._v("两次")]),s("code",[t._v("click")]),t._v("事件, 一次是"),s("code",[t._v("$emit")]),t._v("发出的, 一次是DOM原生事件")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("emits")]),t._v("选项中列出的事件"),s("strong",[t._v("不会")]),t._v("从组件的根元素继承, 也将从"),s("code",[t._v("$attrs")]),s("strong",[t._v("property")]),t._v(" 中移除")])]),t._v(" "),s("h2",{pre:!0,attrs:{id:"teleport"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#teleport"}},[t._v("#")]),t._v(" Teleport")]),t._v(" "),s("p",[t._v("Teleport 就像是哆啦 A 梦中的「任意门」, 任意门的作用就是可以将人瞬间传送到另一个地方, 而 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/teleport.html#teleport",target:"_blank",rel:"noopener noreferrer"}},[t._v("Teleport"),s("OutboundLink",{pre:!0})],1),t._v(" 的作用就是可以将被其包裹的模板元素"),s("strong",[t._v("传递")]),t._v("到任何指定的地方, 比如, 使用"),s("strong",[t._v("Teleport")]),t._v("实现"),s("code",[t._v("Dialog")]),t._v("组件")]),t._v(" "),s("p",[s("code",[t._v("Dialog")]),t._v("组件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- to 属性可以指定一个选择器, 表示 teleport 包裹的元素需要转移到的元素下 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("teleport")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dialog-wrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("visible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ title }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("setVisible(false)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("确定"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("setVisible(false)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("取消"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("teleport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Dialog"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"visible"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("emits")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update:visible"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" emit "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Proxy {visible: false, title: '弹框标题'}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更新 visible")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("setVisible")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update:visible"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" setVisible "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br")])]),s("p",[t._v("通过"),s("code",[t._v("v-bind")]),t._v("+"),s("code",[t._v("v-model")]),t._v("绑定 "),s("strong",[t._v("prop")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("visible: {{ visible }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Dialog")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-model:")]),t._v("visible")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("visible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("title")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("弹框标题"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("visible = !visible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("cut Dialog"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Dialog "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Dialog.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HelloWorld"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Dialog "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" visible "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" visible "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br")])]),s("p",[t._v("上面的例子中,"),s("code",[t._v("Dialog")]),t._v("组件是定义在"),s("code",[t._v("HelloWorld")]),t._v("组件内的但是渲染的元素("),s("code",[t._v("<teleport>")]),t._v('包裹的)会被"传送"到'),s("code",[t._v("to")]),t._v("属性指定的元素(即"),s("code",[t._v("body")]),t._v(")下, 如下:")]),t._v(" "),s("p",[s("img",{pre:!0,attrs:{src:a(587),alt:"image-20220401093815172"}})]),t._v(" "),s("h2",{pre:!0,attrs:{id:"api-的-tree-treeshaking-优化"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#api-的-tree-treeshaking-优化"}},[t._v("#")]),t._v(" API 的 Tree Treeshaking 优化")]),t._v(" "),s("p",[t._v('在 Vue2 中有不少的全局API是作为静态函数直接挂在在Vue构造函数上的, 这类全局API造成的"死代码"无法使用 '),s("strong",[t._v("webapck")]),t._v(", "),s("strong",[t._v("Rollup")]),t._v(" 等一些打包工具的"),s("code",[t._v("tree-shaking")]),t._v("进行“死代码消除”")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\nVue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("p",[t._v("因此, Vue3 做了相应的改变, 将它们抽离成为独立的函数("),s("strong",[t._v("hook")]),t._v(")，这样打包工具的"),s("code",[t._v("tree-shaking")]),t._v('可以将这些"死代码"排除掉, 全局 API 现在只能作为 ES 模块构建的命名导出进行访问, 例如上面的'),s("code",[t._v("nextTick")]),t._v(":")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-js line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" nextTick "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br")])]),s("p",[t._v("很多的API都是通过"),s("strong",[t._v("hook")]),t._v("的形式引入, 可以参考"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/global-api-treeshaking.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("全局API Treeshaking"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("h2",{pre:!0,attrs:{id:"slot"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#slot"}},[t._v("#")]),t._v(" slot")]),t._v(" "),s("p",[t._v("Vue 实现了一套内容分发的 API("),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/component-slots.html#%E6%8F%92%E6%A7%BD",target:"_blank",rel:"noopener noreferrer"}},[t._v("插槽"),s("OutboundLink",{pre:!0})],1),t._v("), 这套 API 的设计灵感源自 "),s("a",{pre:!0,attrs:{href:"https://github.com/w3c/webcomponents/blob/gh-pages/proposals/Slots-Proposal.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Components 规范草案"),s("OutboundLink",{pre:!0})],1),t._v(", 将"),s("code",[t._v("<slot>")]),t._v("元素作为承载分发内容的出口")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"默认插槽"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#默认插槽"}},[t._v("#")]),t._v(" 默认插槽")]),t._v(" "),s("p",[t._v("同 Vue2 一样父组件可以合成子组件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Parent 组件 --\x3e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("default slot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("p",[t._v("在"),s("code",[t._v("Child")]),t._v("组件中:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- slot 会替换成 <div>default slot</div>  --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("blockquote",[s("p",[t._v("如果上面的例子中"),s("code",[t._v("Child")]),t._v("组件内"),s("strong",[t._v("没有")]),t._v("一个"),s("code",[t._v("<slot>")]),t._v("元素则"),s("code",[t._v("Child")]),t._v("组件元素开始标签到结束标签内的所有内容都会被舍弃")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"具名插槽"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#具名插槽"}},[t._v("#")]),t._v(" 具名插槽")]),t._v(" "),s("p",[t._v("父组件中:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-slot:")]),t._v("header")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是 header slot 的内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- v-shot 可以简写为 # --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("#default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是 default slot 的内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("#footer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是 footer slot 的内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br")])]),s("p",[t._v("子组件中:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("header")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("header")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 不带 name 的 <slot> 出口会带有隐含的名字 default --\x3e")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("footer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("footer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("footer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" slots "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以拿到对应的插槽数据")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每一个可以插槽通过同名的函数获取")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"作用域插槽"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#作用域插槽"}},[t._v("#")]),t._v(" 作用域插槽")]),t._v(" "),s("p",[t._v("在 Vue2. 中具名插槽和作用域插槽分别使用"),s("code",[t._v("slot")]),t._v("和"),s("code",[t._v("slot-scope")]),t._v("来实现, 在 Vue3 中统一使用"),s("code",[t._v("v-slot")])]),t._v(" "),s("p",[t._v("父组件中使用数据:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 支持将作用域插槽的数据进行解构赋值 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("#:")]),t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{ count, data }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child组件的数据: data: {{ data }}, count: {{ count }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 在子组件的插槽内依然可以访问当前作用域 --\x3e")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ text }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是Parent的数据'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br")])]),s("blockquote",[s("p",[t._v("插槽作用域的访问规则: 父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的")])]),t._v(" "),s("p",[t._v("子组件中声明数据:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 绑定多个数据的话数据会被汇总到一起 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":data")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":count")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" slots "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 声明数据")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我是 Child 组件的文本"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"后备内容"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#后备内容"}},[t._v("#")]),t._v(" 后备内容")]),t._v(" "),s("p",[t._v("有时为一个插槽指定备用 (也就是默认的) 内容是很有用的, 它只会在没有提供内容的时候被渲染")]),t._v(" "),s("p",[t._v("父组件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 不声明任何插槽 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br")])]),s("p",[t._v("子组件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("header")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是 header slot 的后备内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("header")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是 default slot 的后备内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("footer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("footer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是 footer slot 的后备内容"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("footer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" slots "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以拿到对应的插槽数据")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"渲染函数api改变"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#渲染函数api改变"}},[t._v("#")]),t._v(" 渲染函数API改变")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/global-api.html#h",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("h")]),s("OutboundLink",{pre:!0})],1),t._v("函数现在可以通过"),s("strong",[t._v("hook")]),t._v("导入, 而不是作为参数传递给"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/render-function.html#%E6%B8%B2%E6%9F%93%E5%87%BD%E6%95%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("渲染函数"),s("OutboundLink",{pre:!0})],1),t._v("("),s("code",[t._v("render")]),t._v(")")]),t._v(" "),s("p",[s("code",[t._v("Vue2")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-javascript line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"box1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Vue2 使用 h 函数"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br")])]),s("p",[s("code",[t._v("Vue3 setup + render")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" h "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" attrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" emit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" expose "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Vue3 使用 h 函数"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 参数是组件实例")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在模板中可以通过 this 或者 vm 来访问 setup return 的响应式数据")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"box2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 绑定事件")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("setup return ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(", ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" vm"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br")])]),s("p",[s("code",[t._v("Vue3 script setup")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-typescript line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("component "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"el"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// script setup 需要配合 component 来使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),t._v(" setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" h "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Vue3 使用 h 函数"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" el "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"box2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("setup function ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br")])]),s("p",[t._v("简单示例:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("父组件 title: {{ title }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ChildComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-slot")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("slot-data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 默认插槽 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-slot:")]),t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" default slot 内容 "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 具名插槽 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-slot:")]),t._v("content")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" content slot 内容 "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ChildComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" h "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给 ChildComponent 组件使用 v-model 绑定的文本")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" title "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"双向数据绑定"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" title "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("components")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义 ChildComponent 组件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("ChildComponent")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 声明 v-model 绑定的 prop")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("modelValue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue3 默认值叫 modelValue, Vue2 中叫 value")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" attrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" emit "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Proxy {modelValue: '双向数据绑定'}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue2 是通过 $scopedSlots 获取对应的插槽")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue3 统一使用 slots 获取")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取默认插槽")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取名字为 content 的插槽")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// input change 事件处理函数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleInputChange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更新 v-model 绑定的值(title)")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update:modelValue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ChildTitle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"child-wrap"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 内部照样可以使用 响应式数据")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"h3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"child"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ChildTitle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 绑定事件")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("onInput")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" handleInputChange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// input标签设置 value 为父组件传递的 title")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("modelValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("子组件 title: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("modelValue"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOM property 可以直接使用 $attrs 子元素可以是插槽")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("36")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("37")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("38")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("39")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("40")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("41")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("42")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("43")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("44")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("45")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("46")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("47")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("48")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("49")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("50")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("51")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("52")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("53")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("54")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("55")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("56")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("57")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("58")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("59")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("60")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("61")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("62")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("63")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("64")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("65")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("66")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("67")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("68")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("69")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("70")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("71")]),s("br")])]),s("p",[t._v("同时，演示了"),s("code",[t._v("$scopedSlots")]),t._v("property已删除, 所有插槽都通过"),s("code",[t._v("$slots")]),t._v("作为函数暴露")]),t._v(" "),s("h2",{pre:!0,attrs:{id:"异步组件的更改"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#异步组件的更改"}},[t._v("#")]),t._v(" 异步组件的更改")]),t._v(" "),s("ul",[s("li",[t._v("新的定义异步组件的API"),s("code",[t._v("defineAsyncComponent")]),t._v(", 它显示定义异步组件\n-"),s("code",[t._v("componnet")]),t._v("选项命名为"),s("code",[t._v("loader")])]),t._v(" "),s("li",[t._v("加载程序函数被本身不接受"),s("code",[t._v("resolve")]),t._v("和"),s("code",[t._v("reject")]),t._v("参数，必须返回一个"),s("code",[t._v("Promise")])])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"_2-x-用法-2"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#_2-x-用法-2"}},[t._v("#")]),t._v(" 2.x 用法")]),t._v(" "),s("p",[t._v("在 Vue2 中异步组件是通过将组件定义为返回 promise 的函数来创建的, 例如:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("asyncPage")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./NextPage.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("p",[t._v("对于带有选项的更高阶组件语法:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" asyncPage "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./NextPage.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  delay"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  timeout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  error"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ErrorComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  loading"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LoadingComponent\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"_3-x-用法-2"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#_3-x-用法-2"}},[t._v("#")]),t._v(" 3.x 用法")]),t._v(" "),s("p",[t._v("在 Vue3 中, 由于功能组件被定义为纯函数, 因为需要通过将异步组件定义包装在"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/global-api.html#defineasynccomponent",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("defineAsyncComponent")]),s("OutboundLink",{pre:!0})],1),t._v("里显式的定义异步组件, 例如:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineAsyncComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ErrorComponent "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/ErrorComponent.vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LoadingComponent "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/LoadingComponent.vue'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" AsyncComp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineAsyncComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 工厂函数(`componnet`选项重命名为`loader`)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("loader")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./NextPage.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加载异步组件时要使用的组件")]),t._v("\n  loadingComponent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LoadingComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加载失败时要使用的组件")]),t._v("\n  errorComponent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ErrorComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在显示 loadingComponent 之前的延迟 | 默认值: 200（单位 ms）")]),t._v("\n  delay"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果提供了 timeout ，并且加载组件的时间超过了设定值，将显示错误组件")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认值: Infinity（即永不超时，单位 ms）")]),t._v("\n  timeout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义组件是否可挂起 | 默认值: true")]),t._v("\n  suspensible"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   *\n   * @param {*} error 错误信息对象\n   * @param {*} retry 一个函数，用于指示当 promise 加载器 reject 时，加载器是否应该重试\n   * @param {*} fail  一个函数，指示加载程序结束退出\n   * @param {*} attempts 允许的最大重试次数\n   */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" retry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attempts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" attempts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求发生错误时重试，最多可尝试 3 次")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("retry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意，retry/fail 就像 promise 的 resolve/reject 一样: ")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须调用其中一个才能继续错误处理。")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("36")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"自定义指令"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#自定义指令"}},[t._v("#")]),t._v(" 自定义指令")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/application-api.html#directive",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义指令"),s("OutboundLink",{pre:!0})],1),t._v("里的钩子函数已重命名, 以便更好地与组件生命周期保持一致")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("bind --\x3e "),s("strong",[t._v("beforeMount")])])]),t._v(" "),s("li",[s("p",[t._v("inserted --\x3e "),s("strong",[t._v("mounted")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("beforeUpdate")]),t._v(":"),s("code",[t._v("新的")]),t._v(", 这是在元素本身更新之前调用的，很像组件生命周期钩子")])]),t._v(" "),s("li",[s("p",[t._v("update --\x3e "),s("strong",[t._v("移除")]),t._v(", 有太多的相似之处要更新，所以这是多余的，请改用"),s("code",[t._v("updated")])])]),t._v(" "),s("li",[s("p",[t._v("componentUpdated --\x3e "),s("strong",[t._v("updated")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("beforeUnmount")]),t._v(":"),s("code",[t._v("新的")]),t._v("与组件生命周期钩子类似，它将在卸载元素之前调用。")])]),t._v(" "),s("li",[s("p",[t._v("unbind --\x3e "),s("strong",[t._v("unmounted")])])])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createApp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-directive'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指令具有一组生命周期钩子: ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在绑定元素的 attribute 或事件监听器被应用之前调用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在绑定元素的父组件挂载之前调用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在绑定元素的父组件挂载之后调用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在包含组件的 VNode 更新之前调用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在包含组件的 VNode 及其子组件的 VNode 更新之后调用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在绑定元素的父组件卸载之前调用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeUnmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在绑定元素的父组件卸载之后调用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unmounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册 (函数指令)")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-directive'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这将被作为`mounted`和`updated`调用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// getter, 如果已注册，则返回指令定义")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myDirective "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-directive'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模板中使用 加上 v- 前缀")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div v"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("my"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("directive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("directive "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DOM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br")])]),s("p",[t._v("上面例子中的钩子函数会收到的参数:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("el")]),t._v(": 指令绑定到的元素。这可用于直接操作 DOM")]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/application-api.html#directive",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("binding")]),s("OutboundLink",{pre:!0})],1),t._v(": 包含指令相关信息的对象")]),t._v(" "),s("li",[s("strong",[t._v("vnode")]),t._v(": "),s("strong",[t._v("el")]),t._v("参数对应的虚拟DOM")]),t._v(" "),s("li",[s("strong",[t._v("prevNode")]),t._v(": 上一个虚拟节点, 仅在"),s("code",[t._v("beforeUpdate")]),t._v("和"),s("code",[t._v("updated")]),t._v("钩子中可用")])]),t._v(" "),s("blockquote",[s("p",[t._v("除了"),s("code",[t._v("el")]),t._v("之外, 你应该将这些参数视为只读, 并且永远不要修改它们; 如果你需要跨钩子共享信息, 建议通过元素的"),s("a",{pre:!0,attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Howto/Use_data_attributes",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义数据属性集"),s("OutboundLink",{pre:!0})],1),t._v("进行共享")])]),t._v(" "),s("h2",{pre:!0,attrs:{id:"transition-更改过渡类名"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#transition-更改过渡类名"}},[t._v("#")]),t._v(" transition 更改过渡类名")]),t._v(" "),s("p",[s("code",[t._v("transition")]),t._v("内置组件过渡的 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/transition.html#%E6%A6%82%E8%A7%88",target:"_blank",rel:"noopener noreferrer"}},[t._v("class"),s("OutboundLink",{pre:!0})],1),t._v(" 名更改")]),t._v(" "),s("ul",[s("li",[t._v("v-enter --\x3e "),s("strong",[t._v("v-enter-from")])]),t._v(" "),s("li",[t._v("v-leave --\x3e "),s("strong",[t._v("v-leave-from")])])]),t._v(" "),s("p",[t._v("Vue2 中对应的过渡类名:")]),t._v(" "),s("p",[s("img",{pre:!0,attrs:{src:a(329),alt:""}})]),t._v(" "),s("p",[t._v("Vue3 中对应的过渡类名:")]),t._v(" "),s("p",[s("img",{pre:!0,attrs:{src:a(588),alt:""}})]),t._v(" "),s("h2",{pre:!0,attrs:{id:"script-setup"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#script-setup"}},[t._v("#")]),t._v(" script setup")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://cn.vuejs.org/api/sfc-script-setup.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("<script setup>")]),s("OutboundLink",{pre:!0})],1),t._v("是在单文件组件 (SFC) 中使用"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/composition-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组合式 API"),s("OutboundLink",{pre:!0})],1),t._v("的编译时语法糖, 相比于普通的"),s("code",[t._v("<script>")]),t._v("语法，它具有更多优势:")]),t._v(" "),s("ul",[s("li",[t._v("更少的样板内容，更简洁的代码")]),t._v(" "),s("li",[t._v("能够使用纯 "),s("strong",[t._v("Typescript")]),t._v(" 声明"),s("code",[t._v("props")]),t._v("和"),s("code",[t._v("抛出事件")])]),t._v(" "),s("li",[t._v("更好的运行时性能 (其模板会被编译成与其同一作用域的渲染函数，没有任何的中间代理)")]),t._v(" "),s("li",[t._v("更好的 IDE 类型推断性能 (减少语言服务器从代码中抽离类型的工作)")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"基本语法"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#基本语法"}},[t._v("#")]),t._v(" 基本语法")]),t._v(" "),s("p",[t._v("要使用这个语法, 需要将"),s("code",[t._v("setup")]),t._v("attribute 添加到"),s("code",[t._v("<script>")]),t._v("代码块上:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello script setup'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("p",[t._v("里面的代码会被编译成组件"),s("code",[t._v("setup()")]),t._v("函数的内容; 这意味着与普通的"),s("code",[t._v("<script>")]),t._v("只在组件被首次引入的时候执行一次不同,"),s("code",[t._v("<script setup>")]),t._v("中的代码会在"),s("strong",[t._v("每次组件实例被创建的时候执行")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"顶层的绑定会被暴露给模板"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#顶层的绑定会被暴露给模板"}},[t._v("#")]),t._v(" 顶层的绑定会被暴露给模板")]),t._v(" "),s("p",[t._v("当使用"),s("code",[t._v("<script setup>")]),t._v("的时候，任何在"),s("code",[t._v("<script setup>")]),t._v("声明的顶层的绑定 (包括变量，函数声明，以及 import 引入的内容) 都能在模板中直接使用:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 模板中可以直接使用 script setup 中的变量和函数 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ text }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("按钮"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 添加 setup 属性到 script 标签中 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello script setup"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数\t")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("log")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br")])]),s("p",[s("strong",[t._v("import")]),t._v(" 导入的内容也会以同样的方式暴露, 意味着可以在模板表达式中直接使用导入的"),s("code",[t._v("add")]),t._v("函数，并不需要通过"),s("code",[t._v("methods")]),t._v("选项来暴露它:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("log(1, 2)"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("按钮"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" add "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../util.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("log")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[s("strong",[t._v("util.js")]),t._v(":")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"响应式"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#响应式"}},[t._v("#")]),t._v(" 响应式")]),t._v(" "),s("p",[t._v("响应式状态需要明确使用"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/basic-reactivity.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("响应式 APIs"),s("OutboundLink",{pre:!0})],1),t._v(" 来创建; 和从"),s("code",[t._v("setup()")]),t._v("函数中返回值一样, "),s("strong",[t._v("ref")]),t._v(" 值在模板中使用的时候会自动解包:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ count }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("count++"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点我+1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"使用组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#使用组件"}},[t._v("#")]),t._v(" 使用组件")]),t._v(" "),s("p",[s("code",[t._v("<script setup>")]),t._v("范围里的值也能被直接作为自定义组件的标签名使用:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Parent"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Child.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("p",[s("strong",[t._v("Child.vue")]),t._v(":")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ text }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I\'m is Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br")])]),s("p",[t._v("将"),s("code",[t._v("MyComponent")]),t._v("看做被一个变量所引用。如果你使用过 JSX，在这里的使用它的心智模型是一样的。其 kebab-case 格式的"),s("code",[t._v("<my-component>")]),t._v("同样能在模板中使用。不过，我们强烈建议使用 PascalCase 格式以保持一致性。同时也有助于区分原生的自定义元素")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"动态组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#动态组件"}},[t._v("#")]),t._v(" 动态组件")]),t._v(" "),s("p",[t._v("由于组件被引用为变量而不是作为字符串键来注册的, 在"),s("code",[t._v("<script setup>")]),t._v("中要使用动态组件的时候应该使用"),s("code",[t._v("<component>")]),t._v("内置组件动态的"),s("code",[t._v(":is")]),t._v("来绑定:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Foo.vue --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Foo"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Bar.vue --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Bar"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- App.vue --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("flag ? Foo : Bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("flag = !flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("切换"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Foo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./components/Foo.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Bar "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./components/Bar.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"递归组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#递归组件"}},[t._v("#")]),t._v(" 递归组件")]),t._v(" "),s("p",[t._v("一个单文件组件可以通过它的文件名被其自己所引用, 例如: 名为"),s("code",[t._v("Foo.vue")]),t._v("的组件可以在其模板中用"),s("code",[t._v("<Foo/>")]),t._v("引用它自己")]),t._v(" "),s("p",[t._v("请注意这种方式相比于"),s("code",[t._v("import")]),t._v("导入的组件优先级更低, 如果有命名的"),s("code",[t._v("import")]),t._v("导入和组件的推断名冲突了，可以使用"),s("code",[t._v("import")]),t._v("别名导入:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Foo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" MyFoo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Foo.vue'")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"命名空间组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#命名空间组件"}},[t._v("#")]),t._v(" 命名空间组件")]),t._v(" "),s("p",[t._v("可以使用带点的组件标记, 例如"),s("code",[t._v("<Foo.Bar>")]),t._v("来引用嵌套在对象属性中的组件; 这在需要从单个文件中导入多个组件的时候非常有用:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- form-components.js --\x3e")]),t._v(' \nimport Input from "./Input.vue";\nimport Label from "./Label.vue";\nexport { Input, Label }\n\n\n'),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- App.vue --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Form.Input")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Form.Label")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("label"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Form.Label")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Form.Input")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" Form "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./form-components.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"使用自定义指令"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#使用自定义指令"}},[t._v("#")]),t._v(" 使用自定义指令")]),t._v(" "),s("p",[t._v("全局注册的自定义指令将以符合预期的方式工作，且本地注册的指令可以直接在模板中使用，就像上文所提及的组件一样。")]),t._v(" "),s("p",[t._v("但这里有一个需要注意的限制: 必须以"),s("code",[t._v("vNameDirective")]),t._v("的形式来命名本地自定义指令, 以使得它们可以直接在模板中使用:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-my-directive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("This is a Heading"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vMyDirective "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("beforeMount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cssStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("color: #f00; \n                    background-color: #ff0;")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// el.style = cssStr;")]),t._v("\n        el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cssStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br")])]),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入的指令同样能够工作，并且能够通过重命名来使其符合命名规范")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" myDirective "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" vMyDirective "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./MyDirective.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"defineprops-和-defineemits"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#defineprops-和-defineemits"}},[t._v("#")]),t._v(" defineProps 和 defineEmits")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("<script setup>")]),t._v("中必须使用"),s("code",[t._v("defineProps")]),t._v("和"),s("code",[t._v("defineEmits")]),t._v("API 来声明"),s("code",[t._v("props")]),t._v("和"),s("code",[t._v("emits")]),t._v("，它们具备完整的类型推断并且在"),s("code",[t._v("<script setup>")]),t._v("中是直接可用的:")]),t._v(" "),s("p",[s("code",[t._v("Parent.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Parent"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hello foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":bar")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("999"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@myEvent")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleMyEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleMyEvent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[s("code",[t._v("Child.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("props: {{ props }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("emit('myEvent', $event, 'child Data')"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("trigger"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义 Props 类型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Props")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string\n  bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取 props")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" props "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withDefaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("defineProps"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定默认值, 可以是一个值, 也可以是一个函数")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 运行时获取 emit(无法定义类型)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" emit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineEmits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myEvent"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 基于类型获取 emit")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" emit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" defineEmits"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myEvent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br")])]),s("ul",[s("li",[s("p",[s("code",[t._v("defineProps")]),t._v("和"),s("code",[t._v("defineEmits")]),t._v("都是只在"),s("code",[t._v("<script setup>")]),t._v("中才能使用的"),s("strong",[t._v("编译器宏")]),t._v("。他们不需要导入且会随着"),s("code",[t._v("<script setup>")]),t._v("处理过程一同被编译掉。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("defineProps")]),t._v("接收与 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/options-data.html#props",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("props")]),t._v("选项"),s("OutboundLink",{pre:!0})],1),t._v("相同的值，"),s("code",[t._v("defineEmits")]),t._v("也接收 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/options-data.html#emits",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("emits")]),t._v("选项"),s("OutboundLink",{pre:!0})],1),t._v("相同的值（在模板中可以直接使用"),s("code",[t._v("props")]),t._v("中的值相当于默认有"),s("code",[t._v("...toRefs(props)")]),t._v("）")]),t._v(" "),s("li",[s("code",[t._v("defineProps")]),t._v("和"),s("code",[t._v("defineEmits")]),t._v("在选项传入后，会提供恰当的类型推断。")])])]),t._v(" "),s("li",[s("p",[t._v("传入到"),s("code",[t._v("defineProps")]),t._v("和"),s("code",[t._v("defineEmits")]),t._v("的选项会从"),s("code",[t._v("setup")]),t._v("中提升到模块的范围。因此，传入的选项"),s("strong",[t._v("不能")]),t._v("引用在"),s("code",[t._v("setup")]),t._v("范围中声明的局部变量。这样做会引起编译错误。但是，它"),s("strong",[t._v("可以引用导入的绑定")]),t._v("，因为它们也在模块范围内。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("如果使用了 Typescript，"),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/sfc-script-setup.html#%E4%BB%85%E9%99%90-typescript-%E7%9A%84%E5%8A%9F%E8%83%BD",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用纯类型声明来声明 prop 和 emits"),s("OutboundLink",{pre:!0})],1),t._v(" 也是可以的")])]),t._v(" "),s("blockquote",[s("p",[t._v("直接使用"),s("code",[t._v("defineProps")]),t._v("定义"),s("code",[t._v("props")]),t._v("类型就可以在页面中直接使用"),s("code",[t._v("props")]),t._v("里的值了")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"defineexpose"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#defineexpose"}},[t._v("#")]),t._v(" defineExpose")]),t._v(" "),s("p",[t._v("使用"),s("code",[t._v("<script setup>")]),t._v("的组件是"),s("strong",[t._v("默认关闭")]),t._v("内部定义的数据变量的, 即通过"),s("code",[t._v("模板ref")]),t._v("或者"),s("code",[t._v("$parent")]),t._v("获取到的组件的公开实例，不会暴露任何在"),s("code",[t._v("<script setup>")]),t._v("中声明的绑定数据")]),t._v(" "),s("p",[t._v("为了在"),s("code",[t._v("<script setup>")]),t._v("组件中明确要暴露出去的属性, 使用"),s("code",[t._v("defineExpose")]),t._v("编译器宏:")]),t._v(" "),s("p",[s("code",[t._v("Child.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("999")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello i\'m Child"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineExpose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br")])]),s("p",[s("code",[t._v("Parent.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ChildRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onMounted "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ChildRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("InstanceType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" Child"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ChildRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Child 组件实例")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会被自动解包")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ChildRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => 999")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ChildRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => hello i'm Child")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])]),s("p",[t._v("上面的例子当父组件通过"),s("code",[t._v("模板ref")]),t._v("的方式获取到当前组件的实例, 获取到的实例会像这样"),s("code",[t._v("{ a: number, b: number }")]),t._v("("),s("code",[t._v("ref")]),t._v("会和在普通实例中一样被"),s("strong",[t._v("自动解包")]),t._v(")")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"useslots-和-useattrs"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#useslots-和-useattrs"}},[t._v("#")]),t._v(" useSlots 和 useAttrs")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("<script setup>")]),t._v("使用"),s("code",[t._v("slots")]),t._v("和"),s("code",[t._v("attrs")]),t._v("的情况应该是很罕见的，因为可以在模板中通过"),s("code",[t._v("$slots")]),t._v("和"),s("code",[t._v("$attrs")]),t._v("来访问它们。在你的确需要使用它们的罕见场景中，可以分别用"),s("code",[t._v("useSlots")]),t._v("和"),s("code",[t._v("useAttrs")]),t._v("两个辅助函数:")]),t._v(" "),s("p",[s("code",[t._v("Parent.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("child-id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("child-cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child slot content"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[s("code",[t._v("Child.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("slot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useSlots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useAttrs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" slots "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useSlots")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" attrs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useAttrs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br")])]),s("p",[s("code",[t._v("useSlots")]),t._v("和"),s("code",[t._v("useAttrs")]),t._v("是真实的运行时函数，它会返回与"),s("code",[t._v("setupContext.slots")]),t._v("和"),s("code",[t._v("setupContext.attrs")]),t._v("等价的值，同样也能在普通的组合式 API 中使用")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"与普通的-script-一起使用"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#与普通的-script-一起使用"}},[t._v("#")]),t._v(" 与普通的 script 一起使用")]),t._v(" "),s("p",[s("code",[t._v("<script setup>")]),t._v("可以和普通的"),s("code",[t._v("<script>")]),t._v("一起使用。普通的"),s("code",[t._v("<script>")]),t._v("在有这些需要的情况下或许会被使用到:")]),t._v(" "),s("ul",[s("li",[t._v("无法在"),s("code",[t._v("<script setup>")]),t._v("声明的选项，例如"),s("code",[t._v("inheritAttrs")]),t._v("或通过插件启用的自定义的选项")]),t._v(" "),s("li",[t._v("声明命名导出")]),t._v(" "),s("li",[t._v("运行副作用或者创建只需要执行一次的对象")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 普通 <script>, 在模块范围下执行(只执行一次)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runSideEffectOnce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 声明额外的选项")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("inheritAttrs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("customOptions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 setup() 作用域中执行 (对每个实例皆如此)")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br")])]),s("blockquote",[s("p",[t._v("该场景下不支持使用"),s("code",[t._v("render")]),t._v("函数, 请使用一个普通的"),s("code",[t._v("<script>")]),t._v("结合"),s("code",[t._v("setup")]),t._v("选项来代替")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"顶层-await"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#顶层-await"}},[t._v("#")]),t._v(" 顶层 await")]),t._v(" "),s("p",[s("code",[t._v("<script setup>")]),t._v("中可以使用顶层"),s("code",[t._v("await")]),t._v(", 结果代码会被编译成"),s("code",[t._v("async setup()")]),t._v(":")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:8888/test/testData4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ok"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[t._v("另外，await 的表达式会自动编译成在"),s("code",[t._v("await")]),t._v("之后保留当前组件实例上下文的格式")]),t._v(" "),s("blockquote",[s("p",[t._v("注意:"),s("code",[t._v("async setup()")]),t._v("必须与"),s("code",[t._v("Suspense")]),t._v("组合使用,"),s("code",[t._v("Suspense")]),t._v("目前还是处于实验阶段的特性")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"仅限-typescript-的功能"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#仅限-typescript-的功能"}},[t._v("#")]),t._v(" 仅限 TypeScript 的功能")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"仅限类型的-props-emit-声明"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#仅限类型的-props-emit-声明"}},[t._v("#")]),t._v(" 仅限类型的 props/emit 声明")]),t._v(" "),s("p",[s("code",[t._v("props")]),t._v("和"),s("code",[t._v("emits")]),t._v("都可以使用传递字面量类型的纯类型语法做为参数给"),s("code",[t._v("defineProps")]),t._v("和"),s("code",[t._v("defineEmits")]),t._v("来声明:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),t._v(" setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" props "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProps")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" emit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineEmits")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"change"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"change"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])]),s("p",[s("code",[t._v("defineProps")]),t._v("或"),s("code",[t._v("defineEmits")]),t._v("只能是要么使用运行时声明，要么使用类型声明。同时使用两种声明方式会导致编译报错。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("使用类型声明的时候，静态分析会自动生成等效的运行时声明，以消除双重声明的需要并仍然确保正确的运行时行为。")]),t._v(" "),s("ul",[s("li",[t._v("在开发环境下，编译器会试着从类型来推断对应的运行时验证。例如这里从"),s("code",[t._v("foo: string")]),t._v("类型中推断出"),s("code",[t._v("foo: String")]),t._v("。如果类型是对导入类型的引用，这里的推断结果会是"),s("code",[t._v("foo: null")]),t._v("(与"),s("code",[t._v("any")]),t._v("类型相等)，因为编译器没有外部文件的信息。")]),t._v(" "),s("li",[t._v("在生产模式下，编译器会生成数组格式的声明来减少打包体积 (这里的 props 会被编译成"),s("code",[t._v("['foo', 'bar']")]),t._v(")。")]),t._v(" "),s("li",[t._v("生成的代码仍然是有着类型的 Typescript 代码, 它会在后续的流程中被其它工具处理(代码提示, 类型分析)")])])]),t._v(" "),s("li",[s("p",[t._v("截至目前，类型声明参数必须是以下内容之一，以确保正确的静态分析:")]),t._v(" "),s("ul",[s("li",[t._v("类型字面量")]),t._v(" "),s("li",[t._v("在同一文件中的接口或类型字面量的引用")])]),t._v(" "),s("blockquote",[s("p",[t._v("现在还不支持复杂的类型和从其它文件进行类型导入")])])])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"使用类型声明时的默认-props-值"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#使用类型声明时的默认-props-值"}},[t._v("#")]),t._v(" 使用类型声明时的默认 props 值")]),t._v(" "),s("p",[t._v("仅限类型的"),s("code",[t._v("defineProps")]),t._v("声明的不足之处在于，它没有可以给 props 提供默认值的方式。为了解决这个问题，提供了"),s("code",[t._v("withDefaults")]),t._v("编译器宏:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script lang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ts"')]),t._v(" setup"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Props")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    labels"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" props "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withDefaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProps")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定默认值")]),t._v("\n    msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("labels")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"one"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"two"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br")])]),s("p",[t._v("上面代码会被编译为等价的运行时 props 的"),s("code",[t._v("default")]),t._v("选项。此外，"),s("code",[t._v("withDefaults")]),t._v("辅助函数提供了对默认值的类型检查，并确保返回的"),s("code",[t._v("props")]),t._v("的类型删除了已声明默认值的属性的可选标志")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"限制-没有-src-导入"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#限制-没有-src-导入"}},[t._v("#")]),t._v(" 限制: 没有 Src 导入")]),t._v(" "),s("p",[t._v("由于模块执行语义的差异,"),s("code",[t._v("<script setup>")]),t._v("中的代码依赖单文件组件的上下文, 当将其移动到外部的"),s("code",[t._v(".js")]),t._v("或者"),s("code",[t._v(".ts")]),t._v("文件中的时候，对于开发者和工具来说都会感到混乱。因而 "),s("strong",[s("code",[t._v("<script setup>")])]),t._v(" 不能和"),s("code",[t._v("src")]),t._v("attribute 一起使用")]),t._v(" "),s("h2",{pre:!0,attrs:{id:"style-scoped"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#style-scoped"}},[t._v("#")]),t._v(" style scoped")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("<style>")]),t._v("标签带有"),s("code",[t._v("scoped")]),t._v("attribute 的时候，它的 CSS 只会应用到当前组件的元素上")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a heading"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #f00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("p",[t._v("会自动在当前组件的元素中添加一个"),s("code",[t._v("data-v-xxx")]),t._v("的 attribute 转换成如下代码:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-v-ff971dee")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a heading"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-v-ff971dee")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a text"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("h1[data-v-ff971dee]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #f00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"子组件的根元素"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#子组件的根元素"}},[t._v("#")]),t._v(" 子组件的根元素")]),t._v(" "),s("p",[t._v("在带有"),s("code",[t._v("scoped")]),t._v("的时候，父组件的样式将不会泄露到子组件当中。不过，子组件的根节点会同时被父组件的作用域样式和子组件的作用域样式影响。这是有意为之的，这样父组件就可以设置子组件根节点的样式，以达到调整布局的目的")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"深度选择器"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#深度选择器"}},[t._v("#")]),t._v(" 深度选择器")]),t._v(" "),s("p",[t._v("处于"),s("code",[t._v("scoped")]),t._v("样式中的选择器如果想要做更“深度”的选择, 也即: 影响到子组件, 可以使用"),s("code",[t._v(":deep(className)")]),t._v("这个伪类:")]),t._v(" "),s("p",[s("code",[t._v("Child.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child title"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("contetn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Child contetn"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("main")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" green"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 14px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("p",[s("code",[t._v("Parent.vue")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Parent"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child.vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* .child .title {  */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 不生效 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* .child /deep/ .title { */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 可以 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".child :deep(.title)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 可以 */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br")])]),s("p",[t._v("上面的深度选择器代码会被编译成:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-css line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".child[data-v-f2200afa] .title")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br")])]),s("blockquote",[s("p",[t._v("通过"),s("code",[t._v("v-html")]),t._v("创建的 DOM 内容不会被作用域样式影响, 但你仍然可以使用深度选择器来设置其样式")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"插槽选择器"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#插槽选择器"}},[t._v("#")]),t._v(" 插槽选择器")]),t._v(" "),s("p",[t._v("默认情况下，作用域样式不会影响到"),s("code",[t._v("<slot/>")]),t._v("渲染出来的内容，因为它们被认为是父组件所持有并传递进来的。使用"),s("code",[t._v(":slotted")]),t._v("伪类以确切地将插槽内容作为选择器的目标:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(":slotted(div)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"全局选择器"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#全局选择器"}},[t._v("#")]),t._v(" 全局选择器")]),t._v(" "),s("p",[t._v("如果想让其中一个样式规则应用到全局，比起另外创建一个"),s("code",[t._v("<style>")]),t._v("，可以使用"),s("code",[t._v(":global")]),t._v("伪类来实现 (看下面的代码):")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(":global(.red)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("h3",{pre:!0,attrs:{id:"混合使用局部与全局样式"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#混合使用局部与全局样式"}},[t._v("#")]),t._v(" 混合使用局部与全局样式")]),t._v(" "),s("p",[t._v("你也可以在同一个组件中同时包含作用域样式和非作用域样式:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* global styles */")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* local styles */")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br")])]),s("p",[s("strong",[t._v("作用域样式提示")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("作用域样式并没有消除对 CSS 类的需求")]),t._v("。由于浏览器渲染各种各样 CSS 选择器的方式，"),s("code",[t._v("p { color: red }")]),t._v("结合作用域样式使用时会慢很多倍 (即，当与 attribute 选择器组合使用的时候)。如果使用 class 或者 id 来替代，例如"),s("code",[t._v(".example { color: red }")]),t._v("，那你几乎就可以避免这个性能的损失。")]),t._v(" "),s("li",[s("strong",[t._v("小心递归组件中的后代选择器")]),t._v("。对于一个使用了"),s("code",[t._v(".a .b")]),t._v("选择器的样式规则来说，如果匹配到"),s("code",[t._v(".a")]),t._v("的元素包含了一个递归的子组件，那么所有的在那个子组件中的"),s("code",[t._v(".b")]),t._v("都会匹配到这条样式规则")])]),t._v(" "),s("h2",{pre:!0,attrs:{id:"style-module"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#style-module"}},[t._v("#")]),t._v(" style module")]),t._v(" "),s("p",[s("code",[t._v("<style module>")]),t._v("标签会被编译为 "),s("a",{pre:!0,attrs:{href:"https://github.com/css-modules/css-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS Modules"),s("OutboundLink",{pre:!0})],1),t._v(" 并且将生成的 CSS 类作为"),s("code",[t._v("$style")]),t._v("对象的键暴露给组件:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$style.colorRed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a heading"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a text"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".color-red")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #f00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("blockquote",[s("p",[t._v("需要注意的是, "),s("code",[t._v("style module")]),t._v("和"),s("code",[t._v("CSSModule")]),t._v("不支持嵌套的类名")])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"自定义注入名称"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#自定义注入名称"}},[t._v("#")]),t._v(" 自定义注入名称")]),t._v(" "),s("p",[t._v("可以通过给"),s("code",[t._v("module")]),t._v("一个值来自定义注入的类对象的 "),s("code",[t._v("property")]),t._v(" 键:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("classes.colorRed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a heading"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a text"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("classes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".color-red")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #f00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"与组合式-api-一同使用"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#与组合式-api-一同使用"}},[t._v("#")]),t._v(" 与组合式 API 一同使用")]),t._v(" "),s("p",[t._v("注入的类可以通过 "),s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/global-api.html#usecssmodule",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("useCssModule")]),s("OutboundLink",{pre:!0})],1),t._v(" API 在"),s("code",[t._v("setup()")]),t._v("和"),s("code",[t._v("<script setup>")]),t._v("中使用。对于使用了自定义注入名称的"),s("code",[t._v("<style module>")]),t._v("模块，"),s("code",[t._v("useCssModule")]),t._v("接收一个对应的"),s("code",[t._v("module")]),t._v("attribute 值作为第一个参数")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useCssModule "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认, 返回 <style module> 中的类")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" $style "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCssModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// {hide: '_hide_17omn_2'}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 自定义命名, 返回 <style module="classes"> 中的类')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" classes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCssModule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classes"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("classes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// {color-red: '_color-red_1fl2n_2'}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".hide")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("classes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".color-red")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #f00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"cssmodule"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#cssmodule"}},[t._v("#")]),t._v(" CSSModule")]),t._v(" "),s("p",[t._v("除了"),s("code",[t._v("style module")]),t._v("还可以使用"),s("code",[t._v("CSSModule")]),t._v("(不支持嵌套的类名):")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 直接使用对应的类名即可 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("classes.box"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    App...\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" classes "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./index.module.css"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classes: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" classes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"状态驱动的动态-css"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#状态驱动的动态-css"}},[t._v("#")]),t._v(" 状态驱动的动态 CSS")]),t._v(" "),s("p",[t._v("单文件组件的 "),s("code",[t._v("<style>")]),t._v(" 标签可以通过 "),s("code",[t._v("v-bind")]),t._v(" 这一 CSS 函数将 CSS 的值关联到动态的组件状态上:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("box"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a heading"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a text"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"50px"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bgc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yellow"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".box")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("v-bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("v-bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"state.size"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("v-bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"state.bgc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br")])]),s("p",[s("code",[t._v("script setup")]),t._v("中同样可以使用")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("color-red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a heading"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("this is a text"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fontSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'50px'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".color-red")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("v-bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("v-bind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'state.fontSize'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br")])]),s("p",[t._v("实际的值会被编译成 hash 的 CSS 自定义 property, CSS 本身仍然是静态的。自定义 property 会通过"),s("strong",[t._v("内联样式")]),t._v("的方式应用到组件的根元素上，并且在源值变更的时候"),s("strong",[t._v("响应式更新")])]),t._v(" "),s("h2",{pre:!0,attrs:{id:"jsx-和-tsx"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#jsx-和-tsx"}},[t._v("#")]),t._v(" JSX 和 TSX")]),t._v(" "),s("p",[s("a",{pre:!0,attrs:{href:"https://cn.vuejs.org/guide/extras/render-function.html#jsx-tsx",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSX和TSX"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("p",[s("code",[t._v("Vue")]),t._v("项目如果要使用"),s("code",[t._v("JSX")]),t._v("需要配置"),s("a",{pre:!0,attrs:{href:"https://github.com/vuejs/babel-plugin-jsx",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("@vitejs/plugin-vue-jsx")]),s("OutboundLink",{pre:!0})],1),t._v("插件")]),t._v(" "),s("blockquote",[s("p",[t._v("不是"),s("code",[t._v("vite")]),t._v("项目则使用"),s("code",[t._v("@vue/babel-plugin-js")]),t._v("插件")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-typescript line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 安装")]),t._v("\npnpm add "),s("span",{pre:!0,attrs:{class:"token decorator"}},[s("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vitejs")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plugin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("vue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("jsx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置 vite.config.ts")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" vueJsx "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vitejs/plugin-vue-jsx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vueJsx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br")])]),s("ul",[s("li",[t._v("声明文件添加"),s("code",[t._v(".tsx")]),t._v("后缀名文件类型")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-typescript line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vite-env.d.ts")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("declare")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*.tsx"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br")])]),s("ul",[s("li",[t._v("使用"),s("code",[t._v("TSX")]),t._v("之后就不能使用"),s("code",[t._v(".vue")]),t._v("文件命令了需要改成"),s("code",[t._v(".tsx")]),t._v("即可")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-typescript line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// App.tsx")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" attrs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" emit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" expose "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要返回一个函数")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button\n\t\t\t\tid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"box"')]),t._v("\n\t\t\t\tstyle"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fontSize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"30px"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\tonClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t\t\t\tclick me "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br")])]),s("ul",[s("li",[s("p",[t._v("事件都变成"),s("code",[t._v("on")]),t._v("前缀事件名首字母大写, 比如: "),s("code",[t._v("onClick")]),t._v(", "),s("code",[t._v("onChange")])])]),t._v(" "),s("li",[s("p",[t._v("属性带"),s("code",[t._v("-")]),t._v("都变成小驼峰命名, 比如: "),s("code",[t._v("append-to-body")]),t._v("则变成"),s("code",[t._v("appendToBody")])])]),t._v(" "),s("li",[s("p",[t._v("tsx里是支持"),s("code",[t._v("v-model")]),t._v("指令的, 还有"),s("code",[t._v("v-slots")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-tsx line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v-model 指令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v-slots 指令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" slot1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("slot1")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" slot2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("slot2")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" slots "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   slot1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   slot2\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyComp")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-slots")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("slots"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyComp")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("插槽除了"),s("code",[t._v("v-slots")]),t._v("指令为, 还可以直接传递给内部")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-tsx line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 注意内部是一个对象 */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyComp")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("header")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("header")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等价于 默认插槽")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("footer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("footer")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyComp")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("当需要根据变量名动态渲染组件时需要使用"),s("a",{pre:!0,attrs:{href:"https://cn.vuejs.org/api/render-function.html#resolvecomponent",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveComponent")]),s("OutboundLink",{pre:!0})],1),t._v("+"),s("a",{pre:!0,attrs:{href:"https://cn.vuejs.org/api/render-function.html#h",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("h")]),s("OutboundLink",{pre:!0})],1),t._v("函数来手动解析组件")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-tsx line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resolveComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" h "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child1 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Child2 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./Child2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  components"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Child1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Child2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Child1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手动解析组件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ChildComp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ChildComp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("tsx使用内置组件")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-tsx line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" KeepAlive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Teleport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Transition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TransitionGroup "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Transition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'out-in'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br")])])])]),t._v(" "),s("h2",{pre:!0,attrs:{id:"技巧"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#技巧"}},[t._v("#")]),t._v(" 技巧")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"利用组件路径渲染动态组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#利用组件路径渲染动态组件"}},[t._v("#")]),t._v(" 利用组件路径渲染动态组件")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-vue line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 动态组件 --\x3e")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("componentRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("componentValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@vue:")]),t._v("mounted")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("componentOnMounted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" shallowRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" defineAsyncComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" markRaw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type AsyncComponentLoader "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 动态渲染的组件引用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" componentRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" shallowRef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("any"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 动态渲染的组件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" componentValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" shallowRef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("any"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据组件路径获取匹配的值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" businessURLGlob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("glob")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/views/**/**.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 渲染动态组件 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("renderComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据路径获取到组件对象")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" component "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" businessURLGlob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/src/views/my/my.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解析组件对象")]),t._v("\n      componentValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("markRaw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineAsyncComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("component "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" AsyncComponentLoader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("any"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'动态组件获取失败'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'err: '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 监听 component 组件 onMounted 生命周期  */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("componentOnMounted")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("componentRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'componentRef: '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" componentRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'动态组件的 ref 对象获取失败'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'err: '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scss"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scoped")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("36")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("37")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("38")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("39")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("40")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("41")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("42")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("43")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("44")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("45")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("46")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("47")]),s("br")])]),s("h4",{pre:!0,attrs:{id:"封装成hook"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#封装成hook"}},[t._v("#")]),t._v(" 封装成hook")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-ts line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" reactive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" shallowRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" markRaw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" defineAsyncComponent "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AsyncComponentLoader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Ref "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ElMessage "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-plus'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 页面状态 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StateType")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 查看的数据 */")]),t._v("\n  viewRow"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 是否禁用 */")]),t._v("\n  disabled"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 页面组件 */")]),t._v("\n  pageComponent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" AsyncComponentLoader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 返回值类型 */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Resule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("viewEquipmentInfo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StateType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  crudRef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * 查看目标页面表单\n *\n * ```ts\n * // 页面挂载组件\n * <component ref="pageComponentRef" :is="viewPageState.pageComponent" @vue:mounted="vnodeMounted" style="display: none" />\n *\n * // 调用 hook 获取方法, 参数, 传递各种参数\n * const {\n *   renderPage,\n *   vnodeMounted,\n *   pageComponentRef,\n *   pageURLGlob,\n *   state: viewPageState,\n * } = useViewPageForm({\n *   viewPageAfter() {\n *     console.log(\'查看之前\');\n *   },\n *   viewPageBefore() {\n *     console.log(\'查看之后\');\n *   },\n *   getPageViewParams(row) {\n *     console.log(\'getPageViewParams: \', row);\n *     return {\n *       id: row.id,\n *     };\n *   },\n *   getViewPageUrl(row, pageURLGlob) {\n *     console.log(\'getViewPageUrl: \', row, pageURLGlob);\n *     if (row.IS_VIEW) {\n *       return \'/src/views/My.vue\';\n *     }\n *     return row.url;\n *   },\n *   viewPageFn(row, compRef) {\n *      console.log("row: ", row);\n *      console.log("compRef: ", compRef);\n *   }\n * });\n *\n * // 开始解析页面\n * const viewPage = (row: any) => {\n *   renderPage({ ...row, IS_VIEW: true });\n * };\n * ```\n */')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 点击查看页面之前 */")]),t._v("\n  viewPageAfter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 点击查看页面之后 */")]),t._v("\n  viewPageBefore"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 查看的页面URL */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getViewPageUrl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageURLGlob"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 传递给目标页面的参数 */")]),t._v("\n  getPageViewParams"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 自定义查看页面函数 */")]),t._v("\n  viewPageFn"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" compRef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generic-function"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token generic class-name"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("StateType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    viewRow"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    disabled"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pageComponent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 页面组件ref */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pageComponentRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shallowRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * 页面url匹配\n   * TODO 这里是写死的, 因为不能使用变量的原因\n   * @see - https://cn.vitejs.dev/guide/features.html#dynamic-import\n   */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pageURLGlob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("glob")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/views/**/*.vue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'========= useViewPageForm =========: '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageURLGlob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 解析页面 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("renderPage")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("viewRow "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViewPageUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageURLGlob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ElMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warning")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'页面组件解析失败, 请检查 getViewPageUrl 函数返回页面路径是否正确'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" comp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pageURLGlob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("comp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageComponent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineAsyncComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("markRaw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("comp "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" AsyncComponentLoader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ElMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warning")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'页面组件解析失败, 请检查 -> '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViewPageUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageURLGlob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'err: '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      ElMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'发生了错误: '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 监听 component 组件加载成功 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("vnodeMounted")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    opt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("viewPageAfter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewPageAfter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("viewRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ElMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warning")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据获取失败'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ElMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warning")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'目标页面还未解析, 请先调用 renderPage 方法'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("pageComponentRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("crudRefs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ElMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warning")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'目标页面没有暴露表格Ref对象 -> '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViewPageUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("viewRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageURLGlob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\n      opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewPageFn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("viewRow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageComponentRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'err:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      ElMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'发生了错误: '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      opt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("viewPageBefore "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewPageBefore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    renderPage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    vnodeMounted"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pageComponentRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pageURLGlob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("10")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("11")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("12")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("13")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("14")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("15")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("16")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("17")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("18")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("19")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("20")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("21")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("22")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("23")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("24")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("25")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("26")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("27")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("28")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("29")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("30")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("31")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("32")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("33")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("34")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("35")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("36")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("37")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("38")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("39")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("40")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("41")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("42")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("43")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("44")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("45")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("46")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("47")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("48")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("49")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("50")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("51")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("52")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("53")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("54")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("55")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("56")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("57")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("58")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("59")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("60")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("61")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("62")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("63")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("64")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("65")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("66")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("67")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("68")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("69")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("70")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("71")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("72")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("73")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("74")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("75")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("76")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("77")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("78")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("79")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("80")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("81")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("82")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("83")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("84")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("85")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("86")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("87")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("88")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("89")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("90")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("91")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("92")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("93")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("94")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("95")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("96")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("97")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("98")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("99")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("100")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("101")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("102")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("103")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("104")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("105")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("106")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("107")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("108")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("109")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("110")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("111")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("112")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("113")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("114")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("115")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("116")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("117")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("118")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("119")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("120")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("121")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("122")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("123")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("124")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("125")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("126")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("127")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("128")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("129")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("130")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("131")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("132")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("133")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("134")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("135")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("136")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("137")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("138")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("139")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("140")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("141")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("142")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("143")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("144")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("145")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("146")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("147")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("148")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("149")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("150")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("151")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("152")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("153")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("154")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("155")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("156")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("157")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("158")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("159")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("160")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("161")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("162")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("163")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"插件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#插件"}},[t._v("#")]),t._v(" 插件")]),t._v(" "),s("p",[s("code",[t._v("Vue3")]),t._v("的插件和"),s("code",[t._v("Vue2")]),t._v("是一样的, 都是一个拥有"),s("code",[t._v("install")]),t._v("方法的对象, 第一个参数为"),s("code",[t._v("app")]),t._v("后续参数为插件配置:")]),t._v(" "),s("p",[t._v("使用:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-typescript line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.ts")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" test "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./testPlugin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#app"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br")])]),s("p",[t._v("定义:")]),t._v(" "),s("div",{pre:!0,attrs:{class:"language-typescript line-numbers-mode"}},[s("pre",{pre:!0,attrs:{"v-pre":"",class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// testPlugin.ts")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" App "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  install"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" App"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Element"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app 实例")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"options: "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// {title: 'hello'}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{pre:!0,attrs:{class:"line-numbers-wrapper"}},[s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("1")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("2")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("3")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("4")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("5")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("6")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("7")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("8")]),s("br"),s("span",{pre:!0,attrs:{class:"line-number"}},[t._v("9")]),s("br")])]),s("h2",{pre:!0,attrs:{id:"vue3-更改汇总"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#vue3-更改汇总"}},[t._v("#")]),t._v(" Vue3 更改汇总")]),t._v(" "),s("h3",{pre:!0,attrs:{id:"值得注意的新特性"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#值得注意的新特性"}},[t._v("#")]),t._v(" 值得注意的新特性")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/composition-api-introduction.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组合式 API"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/teleport.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Teleport"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/fragments.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fragment(片段)"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/component-custom-events.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("触发组件选项"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://github.com/vuejs/vue-next/tree/master/packages/runtime-core",target:"_blank",rel:"noopener noreferrer"}},[t._v("来自"),s("code",[t._v("@vue/runtime-core")]),t._v("的"),s("code",[t._v("createRenderer")]),t._v("API"),s("OutboundLink",{pre:!0})],1),t._v("，用于创建自定义渲染器")]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/sfc-script-setup.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("单文件组件组合式 API 语法糖 ("),s("code",[t._v("<script setup>")]),t._v(")"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/api/sfc-style.html#%E7%8A%B6%E6%80%81%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%8A%A8%E6%80%81-css",target:"_blank",rel:"noopener noreferrer"}},[t._v("单文件组件状态驱动的 CSS 变量 ("),s("code",[t._v("<style>")]),t._v("中的"),s("code",[t._v("v-bind")]),t._v(")"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://github.com/vuejs/rfcs/blob/master/active-rfcs/0023-scoped-styles-changes.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SFC"),s("code",[t._v("<style scoped>")]),t._v("现在可以包含全局规则或只针对插槽内容的规则"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/suspense.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Suspense"),s("OutboundLink",{pre:!0})],1),t._v(" (实验性)")])]),t._v(" "),s("h3",{pre:!0,attrs:{id:"非兼容性变更"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#非兼容性变更"}},[t._v("#")]),t._v(" 非兼容性变更")]),t._v(" "),s("h4",{pre:!0,attrs:{id:"全局-api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#全局-api"}},[t._v("#")]),t._v(" 全局 API")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/global-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("全局 Vue API 已更改为使用应用程序实例"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/global-api-treeshaking.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("全局和内部 API 已经被重构为支持 tree-shake"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"模板指令"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#模板指令"}},[t._v("#")]),t._v(" 模板指令")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/v-model.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组件上"),s("code",[t._v("v-model")]),t._v("用法已更改，以替换"),s("code",[t._v("v-bind.sync")]),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/v-if-v-for.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("在同一元素上使用的"),s("code",[t._v("v-if")]),t._v("和"),s("code",[t._v("v-for")]),t._v("优先级已更改"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/v-bind.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v('v-bind="object"')]),t._v("现在排序敏感"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/v-on-native-modifier-removed.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("v-on:event.native")]),t._v("修饰符已移除"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/array-refs.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("v-for")]),t._v("中的"),s("code",[t._v("ref")]),t._v("不再注册 ref 数组"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"组件"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#组件"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/functional-components.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("只能使用普通函数创建函数式组件"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/functional-components.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("functional")]),t._v("attribute 在单文件组件 (SFC) 的"),s("code",[t._v("<template>")]),t._v("和"),s("code",[t._v("functional")]),t._v("组件选项中被废弃"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/async-components.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("异步组件现在需要使用"),s("code",[t._v("defineAsyncComponent")]),t._v("方法来创建"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/emits-option.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("组件事件现在需要在"),s("code",[t._v("emits")]),t._v("选项中声明"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"渲染函数"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#渲染函数"}},[t._v("#")]),t._v(" 渲染函数")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/render-function-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("渲染函数 API 更改"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/slots-unification.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("$scopedSlots")]),t._v("property 已移除，所有插槽都通过"),s("code",[t._v("$slots")]),t._v("作为函数暴露"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/listeners-removed",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("$listeners")]),t._v("被移除或整合到"),s("code",[t._v("$attrs")]),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/attrs-includes-class-style.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("$attrs")]),t._v("现在包含"),s("code",[t._v("class")]),t._v("和"),s("code",[t._v("style")]),t._v("attribute"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"自定义元素"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#自定义元素"}},[t._v("#")]),t._v(" 自定义元素")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/custom-elements-interop.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义元素检测现在在模板编译时执行"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/custom-elements-interop.html#%E5%AE%9A%E5%88%B6%E5%86%85%E7%BD%AE%E5%85%83%E7%B4%A0",target:"_blank",rel:"noopener noreferrer"}},[t._v("特殊的"),s("code",[t._v("is")]),t._v("attribute 的使用被严格限制在被保留的"),s("code",[t._v("<component>")]),t._v("标签中"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"其他小改变"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#其他小改变"}},[t._v("#")]),t._v(" 其他小改变")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("destroyed")]),t._v("生命周期选项被重命名为"),s("code",[t._v("unmounted")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("beforeDestroy")]),t._v("生命周期选项被重命名为"),s("code",[t._v("beforeUnmount")])])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/props-default-this.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("default")]),t._v("prop 工厂函数不再可以访问"),s("code",[t._v("this")]),t._v("上下文"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/custom-directives.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义指令的 API 已更改为与组件生命周期一致，且"),s("code",[t._v("binding.expression")]),t._v("已移除"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/data-option.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("data")]),t._v("选项应始终被声明为一个函数"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/data-option.html#mixin-%E5%90%88%E5%B9%B6%E8%A1%8C%E4%B8%BA%E5%8F%98%E6%9B%B4",target:"_blank",rel:"noopener noreferrer"}},[t._v("来自 mixin 的"),s("code",[t._v("data")]),t._v("选项现在为浅合并"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/attribute-coercion.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Attribute 强制策略已更改"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/transition.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("一些过渡的 class 被重命名"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/transition-group.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("<TransitionGroup>")]),t._v("不再默认渲染包裹元素"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/watch.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("当侦听一个数组时，只有当数组被替换时，回调才会触发，如果需要在变更时触发，则必须指定"),s("code",[t._v("deep")]),t._v("选项"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[t._v("没有特殊指令的标记 ("),s("code",[t._v("v-if/else-if/else")]),t._v("、"),s("code",[t._v("v-for")]),t._v("或"),s("code",[t._v("v-slot")]),t._v(") 的"),s("code",[t._v("<template>")]),t._v("现在被视为普通元素，并将渲染为原生的"),s("code",[t._v("<template>")]),t._v("元素，而不是渲染其内部内容。")])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/mount-changes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("已挂载的应用不会取代它所挂载的元素"),s("OutboundLink",{pre:!0})],1)])]),t._v(" "),s("li",[s("p",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/vnode-lifecycle-events.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期的"),s("code",[t._v("hook:")]),t._v("事件前缀改为"),s("code",[t._v("vnode-")]),s("OutboundLink",{pre:!0})],1)])])]),t._v(" "),s("h4",{pre:!0,attrs:{id:"被移除的-api"}},[s("a",{pre:!0,attrs:{class:"header-anchor",href:"#被移除的-api"}},[t._v("#")]),t._v(" 被移除的 API")]),t._v(" "),s("ul",[s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/keycode-modifiers.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("keyCode")]),t._v("作为"),s("code",[t._v("v-on")]),t._v("修饰符的支持"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/events-api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("$on、$off 和 $once 实例方法"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/filters.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("过滤器 (filter)"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/inline-template-attribute.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("内联模板 attribute"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/children.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("$children")]),t._v("实例 property"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("a",{pre:!0,attrs:{href:"https://v3.cn.vuejs.org/guide/migration/props-data.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("propsData")]),t._v("选项"),s("OutboundLink",{pre:!0})],1)]),t._v(" "),s("li",[s("code",[t._v("$destroy")]),t._v("实例方法; 用户不应再手动管理单个 Vue 组件的生命周期")]),t._v(" "),s("li",[t._v("全局函数"),s("code",[t._v("set")]),t._v("和"),s("code",[t._v("delete")]),t._v("以及实例方法"),s("code",[t._v("$set")]),t._v("和"),s("code",[t._v("$delete")]),t._v("; 基于代理的变化检测已经不再需要它们了")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);