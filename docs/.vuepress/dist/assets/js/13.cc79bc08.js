(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{525:function(s,t,a){s.exports=a.p+"assets/img/image-20220106144900720.957f0164.png"},526:function(s,t,a){s.exports=a.p+"assets/img/image-20220305101949058.dbe740e3.png"},527:function(s,t,a){s.exports=a.p+"assets/img/image-20220305100920241.880365d9.png"},528:function(s,t,a){s.exports=a.p+"assets/img/image-20220305101241784.125be1e6.png"},529:function(s,t,a){s.exports=a.p+"assets/img/image-20220305102552432.669bec1d.png"},530:function(s,t,a){s.exports=a.p+"assets/img/image-20220305102822478.e000715f.png"},531:function(s,t,a){s.exports=a.p+"assets/img/image-20220305102934542.c0f04723.png"},532:function(s,t,a){s.exports=a.p+"assets/img/image-20220305102626916.c92cd6c3.png"},533:function(s,t,a){s.exports=a.p+"assets/img/image-20220305103419728.ea62058f.png"},621:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"npm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[s._v("#")]),s._v(" npm")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#npm的介绍"}},[s._v("npm的介绍")])]),t("li",[t("a",{attrs:{href:"#创建包管理文件"}},[s._v("创建包管理文件")])]),t("li",[t("a",{attrs:{href:"#npm常用命令"}},[s._v("npm常用命令")]),t("ul",[t("li",[t("a",{attrs:{href:"#常用命令"}},[s._v("常用命令")])]),t("li",[t("a",{attrs:{href:"#查看命令"}},[s._v("查看命令")])]),t("li",[t("a",{attrs:{href:"#配置淘宝镜像"}},[s._v("配置淘宝镜像")])]),t("li",[t("a",{attrs:{href:"#其他资源镜像"}},[s._v("其他资源镜像")])])])]),t("li",[t("a",{attrs:{href:"#cmd窗口"}},[s._v("CMD窗口")]),t("ul",[t("li",[t("a",{attrs:{href:"#常用的命令"}},[s._v("常用的命令")])]),t("li",[t("a",{attrs:{href:"#环境变量-window系统变量"}},[s._v("环境变量(window系统变量)")])])])]),t("li",[t("a",{attrs:{href:"#npm-script"}},[s._v("npm script")]),t("ul",[t("li",[t("a",{attrs:{href:"#使用-npm-script"}},[s._v("使用npm script")])]),t("li",[t("a",{attrs:{href:"#原理"}},[s._v("原理")])]),t("li",[t("a",{attrs:{href:"#通配符"}},[s._v("通配符")])]),t("li",[t("a",{attrs:{href:"#传参"}},[s._v("传参")])]),t("li",[t("a",{attrs:{href:"#执行顺序"}},[s._v("执行顺序")])]),t("li",[t("a",{attrs:{href:"#默认值"}},[s._v("默认值")])]),t("li",[t("a",{attrs:{href:"#钩子"}},[s._v("钩子")])]),t("li",[t("a",{attrs:{href:"#变量"}},[s._v("变量")])])])]),t("li",[t("a",{attrs:{href:"#npx"}},[s._v("npx")]),t("ul",[t("li",[t("a",{attrs:{href:"#npx查找原理"}},[s._v("npx查找原理")])])])]),t("li",[t("a",{attrs:{href:"#npmrc"}},[s._v(".npmrc")])]),t("li",[t("a",{attrs:{href:"#npm-开发工具包"}},[s._v("npm 开发工具包")]),t("ul",[t("li",[t("a",{attrs:{href:"#npm-本地开发"}},[s._v("npm 本地开发")])]),t("li",[t("a",{attrs:{href:"#npm发布"}},[s._v("npm发布")]),t("ul",[t("li",[t("a",{attrs:{href:"#发布命名空间的包"}},[s._v("发布命名空间的包")])])])])])]),t("li",[t("a",{attrs:{href:"#npm-create"}},[s._v("npm create")])]),t("li",[t("a",{attrs:{href:"#npm-init"}},[s._v("npm init")])]),t("li",[t("a",{attrs:{href:"#npm-实用包"}},[s._v("npm 实用包")])]),t("li",[t("a",{attrs:{href:"#nvm"}},[s._v("nvm")]),t("ul",[t("li",[t("a",{attrs:{href:"#设置镜像源"}},[s._v("设置镜像源")])]),t("li",[t("a",{attrs:{href:"#安装指定版本号的node"}},[s._v("安装指定版本号的node")])]),t("li",[t("a",{attrs:{href:"#查看所有的node版本"}},[s._v("查看所有的node版本")])]),t("li",[t("a",{attrs:{href:"#列出本地的node版本目录"}},[s._v("列出本地的node版本目录")])]),t("li",[t("a",{attrs:{href:"#使用指定版本node"}},[s._v("使用指定版本node")])]),t("li",[t("a",{attrs:{href:"#卸载指定版本node"}},[s._v("卸载指定版本node")])]),t("li",[t("a",{attrs:{href:"#其他命令"}},[s._v("其他命令")])])])]),t("li",[t("a",{attrs:{href:"#multirepo"}},[s._v("multirepo")]),t("ul",[t("li",[t("a",{attrs:{href:"#multirepo缺点"}},[s._v("MultiRepo缺点")])])])]),t("li",[t("a",{attrs:{href:"#monorepo"}},[s._v("monorepo")])]),t("li",[t("a",{attrs:{href:"#yarn"}},[s._v("yarn")])]),t("li",[t("a",{attrs:{href:"#pnpm"}},[s._v("pnpm")]),t("ul",[t("li",[t("a",{attrs:{href:"#npm或yarn-转-pnpm"}},[s._v("npm或yarn 转 pnpm")])]),t("li",[t("a",{attrs:{href:"#monorepo"}},[s._v("monorepo")]),t("ul",[t("li",[t("a",{attrs:{href:"#安装依赖"}},[s._v("安装依赖")]),t("ul",[t("li",[t("a",{attrs:{href:"#全局的公共依赖包"}},[s._v("全局的公共依赖包")])]),t("li",[t("a",{attrs:{href:"#安装到某个模块中"}},[s._v("安装到某个模块中")]),t("ul",[t("li",[t("a",{attrs:{href:"#filter的其他操作"}},[s._v("filter的其他操作")])])])]),t("li",[t("a",{attrs:{href:"#模块之间的相互依赖"}},[s._v("模块之间的相互依赖")])])])]),t("li",[t("a",{attrs:{href:"#只允许pnpm"}},[s._v("只允许pnpm")])])])]),t("li",[t("a",{attrs:{href:"#release工作流"}},[s._v("release工作流")])])])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"npm的介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm的介绍"}},[s._v("#")]),s._v(" npm的介绍")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.npmjs.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm"),t("OutboundLink")],1),s._v(" 是 Node.js 的包管理工具, 用来安装各种 Node.js 的第三方库")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.npmjs.com/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方教程"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/commands/",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm cli"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("阮一峰教程"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"创建包管理文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建包管理文件"}},[s._v("#")]),s._v(" 创建包管理文件")]),s._v(" "),t("p",[s._v("相关属性详解见: "),t("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/configuring-npm/package-json",target:"_blank",rel:"noopener noreferrer"}},[s._v("pageage.json"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("code",[s._v("npm init")]),s._v(" 命令 初始化一个包管理文件")]),s._v(" "),t("p",[t("code",[s._v("npm init -y")]),s._v("命令 初始化全是默认值的包(括号里的就是默认值)")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# code xxx 使用VS Code打开指定的目录需要将VS Code 安装目录添加到系统变量 path 中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" myproject "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" myproject "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" index.ts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" code "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("package name: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("testnpm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 包名字\nversion: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 版本号\ndescription: 描述\nentry point: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("index.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 入口js文件\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" command: 测试命令\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" repository: 代码需要git仓库管理的话加上该仓库地址\nkeywords: 关键字\nauthor: 开发者\nlicense: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ISC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 授权协议\nIs this OK? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("yes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 再次确认  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("得到 "),t("code",[s._v("package.json")]),s._v(" 文件, 大致内容如下:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yang"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"我的第一个NPM项目"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 运行脚本")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"yjb"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"author"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yjb"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 运行依赖, 依赖的项该是正常运行该包时所需要的依赖项")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"excel"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.0.1"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开发依赖, 开发的时候需要的依赖项")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h2",{attrs:{id:"npm常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm常用命令"}},[s._v("#")]),s._v(" npm常用命令")]),s._v(" "),t("p",[s._v("命令行输入"),t("code",[s._v("npm help npm")]),s._v("可以npm本地文档, 使用"),t("code",[s._v("npm help xxx")]),s._v("则是打开对应命令的文档")]),s._v(" "),t("h3",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装项目的所有依赖， install 简写 i")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" 包名 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--global")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装, --global 简写 -g")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" 包名 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--save")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到 dependencies, --save 简写 -S")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" 包名 --save-dev "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到 devDependencies, --save-dev 简写 -D")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" 包名@版本号 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装指定版本号的包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" 包名1 包名2 包名3 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一次性安装多个包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall 包名 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载当前项目的包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" uninstall 包名 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载全局安装的包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update 包名名 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新当前项目包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" update 包名名 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新全局包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前项目安装的包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看全局安装的包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" prune "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清除没有使用到的包")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"查看命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看命令"}},[s._v("#")]),s._v(" 查看命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" root "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看项目中包名所在的目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" root "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看全局安装的包名所在目录")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看npm版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看更详细的版本信息")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view 包名 version "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看包的最新版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view 包名 versions "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看包的历史版本")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" info 包名 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看包的更多信息")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看npm配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config edit "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑npm配置")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"配置淘宝镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置淘宝镜像"}},[s._v("#")]),s._v(" 配置淘宝镜像")]),s._v(" "),t("p",[s._v("使用 npm 安装第三方库需要访问国外的网络, 默认为"),t("code",[s._v("https://registry.npmjs.org/")]),s._v("会比较慢, 可以配置"),t("a",{attrs:{href:"https://npmmirror.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("淘宝镜像"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看源(默认为 https://registry.npmjs.org/)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" get registry\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换源(推荐)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://registry.npm.taobao.org/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("也可以通过"),t("code",[s._v("C:/Users/用户名/.npmrc")]),s._v("文件添加镜像源, 如下:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("registry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://registry.npm.taobao.org/ "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm 淘宝源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("disturl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://npm.taobao.org/mirrors/node\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("electron_mirror")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://npm.taobao.org/mirrors/electron/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("cnpm")]),t("strong",[s._v("不生成 lock 文件, 也不会识别项目中的lock文件")]),s._v("，如果是多人开发，建议使用npm或者其他包管理工具安装插件")])]),s._v(" "),t("blockquote",[t("p",[s._v("也可以使用"),t("a",{attrs:{href:"https://www.npmjs.com/package/nrm",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("nrm")]),t("OutboundLink")],1),s._v("来管理npm镜像配置")])]),s._v(" "),t("h3",{attrs:{id:"其他资源镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他资源镜像"}},[s._v("#")]),s._v(" 其他资源镜像")]),s._v(" "),t("p",[s._v("配置到"),t("code",[s._v(".npmrc")]),s._v("中")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://github.com/cnpm/binary-mirror-config/blob/master/package.json#L53")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODEJS_ORG_MIRROR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/node"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NVM_NODEJS_ORG_MIRROR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/node"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PHANTOMJS_CDNURL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/phantomjs"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CHROMEDRIVER_CDNURL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/chromedriver"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OPERADRIVER_CDNURL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/operadriver"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ELECTRON_MIRROR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/electron/"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ELECTRON_BUILDER_BINARIES_MIRROR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/electron-builder-binaries/"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SASS_BINARY_SITE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/node-sass"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SWC_BINARY_SITE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/node-swc"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NWJS_URLBASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/nwjs/v"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PUPPETEER_DOWNLOAD_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SENTRYCLI_CDNURL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/sentry-cli"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SAUCECTL_INSTALL_BINARY_MIRROR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/saucectl"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_sharp_binary_host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/sharp"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_sharp_libvips_binary_host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/sharp-libvips"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("npm_config_robotjs_binary_host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://cdn.npmmirror.com/binaries/robotj"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For Cypress >=10.6.0, https://docs.cypress.io/guides/references/changelog#10-6-0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CYPRESS_DOWNLOAD_PATH_TEMPLATE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://cdn.npmmirror.com/binaries/cypress/${version}/${platform}-${arch}/cypress.zip'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h2",{attrs:{id:"cmd窗口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cmd窗口"}},[s._v("#")]),s._v(" CMD窗口")]),s._v(" "),t("h3",{attrs:{id:"常用的命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用的命令"}},[s._v("#")]),s._v(" 常用的命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("dir: 列出当前目录下的所有文件\nmd 目录名: 创建一个文件夹\nrd 目录名: 删除一个文件夹\n\n盘符: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 进入指定的盘\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 进入当前目录\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 返回上一级目录\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 进入当前的根目录下\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /d D:/xxx/xxx 进去这个指定的目录\n\ncls: 请空屏幕的命令\n直接在某个文件夹地址栏输入 cmd 直接打开当前目录下的 cmd 窗口\n\n命令 /? "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 对应的命令帮助\nipconfig "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 查看自己的ip信息\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" ip地址: 检查本机到指定ip地址的连通性"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("加上 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 就会一直 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ano")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 查看网络连接、状态以及对应的进程id\ntracert "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 也被称为Windows路由跟踪实用程序, 在命令提示符（cmd）中使用tracert命令可以用于确定IP数据包访问目标时所选择的路径\n    例如: tracert www.baidu.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"环境变量-window系统变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境变量-window系统变量"}},[s._v("#")]),s._v(" 环境变量(window系统变量)")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("path (路径变量)")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("我们在命令行窗口打开一个文件, 或是调用一个程序时, \n系统会首先在当前目录下寻找文件程序, 如果找到则直接打开,\n如果没有找到则会依次到环境变量 path 的路径中寻找, 直到找到为之\n如果没有找到则报错, 可以将一些经常需要访问的程序和文件的路径添加到 path 中,\n这样我们就可以在任意位置来访问这些文件和程序了\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"npm-script"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-script"}},[s._v("#")]),s._v(" npm script")]),s._v(" "),t("h3",{attrs:{id:"使用npm-script"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用npm-script"}},[s._v("#")]),s._v(" 使用"),t("strong",[s._v("npm script")])]),s._v(" "),t("p",[s._v("npm 允许在"),t("code",[s._v("package.json")]),s._v("文件里面，使用"),t("code",[s._v("scripts")]),s._v("字段定义脚本命令")]),s._v(" "),t("p",[t("img",{attrs:{src:a(525),alt:"image-20220106144900720"}})]),s._v(" "),t("p",[t("code",[s._v("scripts")]),s._v("字段是一个对象, 它的每一个属性，对应一段脚本")]),s._v(" "),t("p",[s._v("比如，"),t("code",[s._v("dev")]),s._v("命令对应的脚本就是"),t("code",[s._v("nodemon ./app.js || node ./app.js")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n// 等同于执行\n$ nodemon ./app.js "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" ./app.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("script 里还可以使用"),t("code",[s._v("&&")]),s._v("具体效果和js中的逻辑运算符一样")])]),s._v(" "),t("p",[s._v("这些定义在"),t("code",[s._v("package.json")]),s._v("里面的脚本，就称为 npm 脚本它的优点很多:")]),s._v(" "),t("ul",[t("li",[s._v("项目的相关脚本，可以集中在一个地方")]),s._v(" "),t("li",[s._v("不同项目的脚本命令，只要功能相同，就可以有同样的对外接口用户不需要知道怎么测试你的项目，只要运行"),t("code",[s._v("npm run xxx")]),s._v("即可")]),s._v(" "),t("li",[s._v("可以利用 npm 提供的很多辅助功能")])]),s._v(" "),t("p",[s._v("查看当前项目的所有 npm 脚本命令，可以使用不带任何参数的"),t("code",[s._v("npm run")]),s._v("命令")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),t("p",[s._v("npm 脚本的原理非常简单, 每当执行"),t("code",[s._v("npm run")]),s._v("，就会自动新建一个 "),t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/56532223",target:"_blank",rel:"noopener noreferrer"}},[s._v("Shell"),t("OutboundLink")],1),s._v("，在这个 Shell 里面执行指定的脚本命")]),s._v(" "),t("p",[s._v("令因此，只要是 Shell（一般是 "),t("a",{attrs:{href:"https://baike.baidu.com/item/Bash",target:"_blank",rel:"noopener noreferrer"}},[s._v("Bash"),t("OutboundLink")],1),s._v("）可以运行的命令，就可以写在 npm 脚本里面")]),s._v(" "),t("p",[s._v("比较特别的是，"),t("code",[s._v("npm run")]),s._v("新建的这个 Shell，会将当前目录的"),t("code",[s._v("node_modules/.bin")]),s._v("子目录加入"),t("code",[s._v("PATH")]),s._v("变量，")]),s._v(" "),t("p",[s._v("执行结束后，再将"),t("code",[s._v("PATH")]),s._v("变量恢复原样")]),s._v(" "),t("p",[s._v("这意味着，当前目录的"),t("code",[s._v("node_modules/.bin")]),s._v("子目录里面的所有脚本，都可以直接用脚本名调用，而不必加上路")]),s._v(" "),t("p",[s._v("径比如，当前项目的依赖里面有"),t("strong",[s._v("nodemon")]),s._v("，只要直接写"),t("code",[s._v("nodemon xxx")]),s._v("就可以了")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nodemon ./app.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("而不用写成下面这样")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./node_modules/.bin/nodemon ./app.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("由于 npm 脚本的唯一要求就是可以在 Shell 执行, 因此它不一定是 Node 脚本, 任何可执行文件都可以写在里面")]),s._v(" "),t("p",[s._v("npm 脚本的退出码, 也遵守 "),t("a",{attrs:{href:"https://blog.csdn.net/qq_41891805/article/details/104490404",target:"_blank",rel:"noopener noreferrer"}},[s._v("Shell 脚本规则"),t("OutboundLink")],1),s._v("如果退出码不是"),t("code",[s._v("0")]),s._v("，npm 就认为这个脚本执行失败")]),s._v(" "),t("h3",{attrs:{id:"通配符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通配符"}},[s._v("#")]),s._v(" 通配符")]),s._v(" "),t("p",[s._v("由于 npm 脚本就是 Shell 脚本，因为可以使用 Shell 通配符")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint *.js"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint **/*.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("上面代码中，"),t("code",[s._v("*")]),s._v("表示任意文件名，"),t("code",[s._v("**")]),s._v("表示任意一层子目录")]),s._v(" "),t("p",[s._v("如果要将通配符传入原始命令, 防止被 Shell 转义, 要将星号转义")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tap test/\\*.js"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"传参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#传参"}},[s._v("#")]),s._v(" 传参")]),s._v(" "),t("p",[s._v("向 npm 脚本传入参数，要使用"),t("code",[s._v("--")]),s._v("标明")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run lint --  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reporter")]),s._v(" checkstyle "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" checkstyle.xml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("也可以在"),t("code",[s._v("package.json")]),s._v("里面再封装一个命令")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jshint **.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:checkstyle"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run lint -- --reporter checkstyle > checkstyle.xml"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"执行顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行顺序"}},[s._v("#")]),s._v(" 执行顺序")]),s._v(" "),t("p",[s._v("如果 npm 脚本里面需要执行多个任务，那么需要明确它们的执行顺序")]),s._v(" "),t("p",[s._v("如果是并行执行（即同时的平行执行），可以使用"),t("code",[s._v("|")]),s._v("符号")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run xxx "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run xxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"默认值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#默认值"}},[s._v("#")]),s._v(" 默认值")]),s._v(" "),t("p",[s._v("一般来说 npm 脚本由用户提供, 但是 npm 对两个脚本提供了默认值, 也就是说这两个脚本命令不用定义，就可以直接使用")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node server.js"')]),s._v("，\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"install"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-gyp rebuild"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("上面代码中, "),t("code",[s._v("npm run start")]),s._v("的默认值是"),t("code",[s._v("node server.js")]),s._v(", 前提是项目根目录下有"),t("code",[s._v("server.js")]),s._v("这个脚")]),s._v(" "),t("p",[s._v("本, "),t("code",[s._v("npm run install")]),s._v("的默认值是"),t("code",[s._v("node-gyp rebuild")]),s._v(", 前提是项目根目录下有"),t("code",[s._v("binding.gyp")]),s._v("文件")]),s._v(" "),t("h3",{attrs:{id:"钩子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#钩子"}},[s._v("#")]),s._v(" 钩子")]),s._v(" "),t("p",[s._v("npm 脚本有"),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")]),s._v("两个钩子, 举例来说，"),t("code",[s._v("build")]),s._v("脚本命令的钩子就是"),t("code",[s._v("prebuild")]),s._v("和"),t("code",[s._v("postbuild")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prebuild"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo build命令之前构子"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node -v"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postbuild"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo build命令之后构子"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("用户执行"),t("code",[s._v("npm run build")]),s._v("的时候，会自动按照下面的顺序执行")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run prebuild "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run postbuild\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("因此，可以在这两个钩子里面，完成一些准备工作和清理工作")])]),s._v(" "),t("p",[s._v("npm 默认提供下面这些钩子:")]),s._v(" "),t("ul",[t("li",[s._v("prepublish，postpublish")]),s._v(" "),t("li",[s._v("preinstall，postinstall")]),s._v(" "),t("li",[s._v("preuninstall，postuninstall")]),s._v(" "),t("li",[s._v("preversion，postversion")]),s._v(" "),t("li",[s._v("pretest，posttest")]),s._v(" "),t("li",[s._v("prestop，poststop")]),s._v(" "),t("li",[s._v("prestart，poststart")]),s._v(" "),t("li",[s._v("prerestart，postrestart")])]),s._v(" "),t("p",[s._v("自定义的脚本命令也可以加上"),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")]),s._v("钩子比如，"),t("code",[s._v("myscript")]),s._v("这个脚本命令，也有"),t("code",[s._v("premyscript")]),s._v("和")]),s._v(" "),t("p",[t("code",[s._v("postmyscript")]),s._v("钩子不过，双重的"),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")]),s._v("无效，比如"),t("code",[s._v("prepretest")]),s._v("和"),t("code",[s._v("postposttest")]),s._v("是无效的")]),s._v(" "),t("p",[s._v("npm 提供一个"),t("code",[s._v("npm_lifecycle_event")]),s._v("变量，返回当前正在运行的脚本名称, 可以利用这个变量，在同一个脚本")]),s._v(" "),t("p",[s._v("文件里面，为不同的"),t("code",[s._v("npm scripts")]),s._v("命令编写代码:")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TARGET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_lifecycle_event"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("执行的命令是: npm run ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TARGET")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[s._v("一定要使用"),t("code",[s._v("npm run xxx")]),s._v("的形式才有"),t("code",[s._v("process.env.npm_lifecycle_event")]),s._v("变量的值")])]),s._v(" "),t("h3",{attrs:{id:"变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[s._v("#")]),s._v(" 变量")]),s._v(" "),t("p",[s._v("npm 脚本有一个非常强大的功能，就是可以使用 npm 的内部变量")]),s._v(" "),t("p",[s._v("通过"),t("code",[s._v("npm_package_xxx")]),s._v(", npm 脚本可以拿到"),t("code",[s._v("package.json")]),s._v("里面的字段, 例如: 下面是一个"),t("code",[s._v("package.json")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"foo"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"view"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node ./view.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("那么，变量"),t("code",[s._v("npm_package_name")]),s._v("返回"),t("code",[s._v("node")]),s._v("，变量"),t("code",[s._v("npm_package_main")]),s._v("返回"),t("code",[s._v("index.js")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_package_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// foo")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm_package_main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// index.js")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("上面代码中通过环境变量"),t("code",[s._v("process.env")]),s._v("对象，拿到"),t("code",[s._v("package.json")]),s._v("的字段值")]),s._v(" "),t("blockquote",[t("p",[s._v("如果是 Bash 脚本，可以用"),t("code",[s._v("$npm_package_name")]),s._v("和"),t("code",[s._v("$npm_package_version")]),s._v("取到这两个值")])]),s._v(" "),t("p",[t("code",[s._v("npm_package_")]),s._v("前缀也支持嵌套的"),t("code",[s._v("package.json")]),s._v("字段")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("...\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"myObj"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"myName"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zhangsan"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n...\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("上面的package.json文件中, "),t("code",[s._v("myObj")]),s._v("字段的"),t("code",[s._v("myName")]),s._v("属性，可以通过"),t("code",[s._v("npm_package_myObj_myName")]),s._v("取到")]),s._v(" "),t("p",[t("code",[s._v("env")]),s._v("命令可以列出所有环境变量")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"npx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npx"}},[s._v("#")]),s._v(" npx")]),s._v(" "),t("p",[t("code",[s._v("npx")]),s._v("是 "),t("code",[s._v("npm5.2.0")]),s._v("版本新增的一个工具包，定义为"),t("code",[s._v("npm")]),s._v("包的执行者，相比"),t("code",[s._v("npm")]),s._v("，"),t("code",[s._v("npx")]),s._v(" "),t("strong",[s._v("会自动安装依赖包并执行某个命令, 用完以后就会删除")])]),s._v(" "),t("h3",{attrs:{id:"npx查找原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npx查找原理"}},[s._v("#")]),s._v(" npx查找原理")]),s._v(" "),t("p",[t("code",[s._v("npx")]),s._v(" 会在当前目录下的"),t("code",[s._v("./node_modules/.bin")]),s._v("里去查找是否有可执行的命令，没有找到的话再从全局里查找是否有安装对应的模块，全局也没有的话就会自动下载对应的模块, "),t("code",[s._v("npx")]),s._v("经常用在一些"),t("code",[s._v("cli")]),s._v(", "),t("code",[s._v("校验工具")]),s._v("等, 一般只会执行一次的地方, 如: "),t("code",[s._v("npx create-react-app xxx")]),s._v(", "),t("code",[s._v("npx vue create xxx")]),s._v(","),t("code",[s._v("npx eslint")])]),s._v(" "),t("h2",{attrs:{id:"npmrc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npmrc"}},[s._v("#")]),s._v(" .npmrc")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/using-npm/config#npmrc-files",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmrc"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("code",[s._v(".npmrc")]),s._v("文件可以修改"),t("code",[s._v("npm")]),s._v("项目级别的配置, 例如, 下面是一个典型的"),t("code",[s._v("pnpm monorepo")]),s._v("项目:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像修改")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("registry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://registry.npmjs.org/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用严格依赖")]),s._v("\nstrict-peer-dependencies"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pnpm i 不安装工作区下的所有包的依赖")]),s._v("\nrecursive-install"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布包是不检查 git 是否提交")]),s._v("\ngit-checks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"npm-开发工具包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-开发工具包"}},[s._v("#")]),s._v(" npm 开发工具包")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方教程"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"npm-本地开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-本地开发"}},[s._v("#")]),s._v(" npm 本地开发")]),s._v(" "),t("p",[s._v("初始化"),t("code",[s._v("package.json")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正常初始化")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建带命名空间的包, 例如: @vue/cli")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" project\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" project\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--scoped")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@myName "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对应的包名则叫 @myName/project, 会自动拼接")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("添加"),t("code",[s._v("package.json")]),s._v("中"),t("code",[s._v("bin")]),s._v("字段可以添加可执行文件安装到路径中, "),t("code",[s._v("key")]),s._v("表示命令, "),t("code",[s._v("value")]),s._v("命令执行的文件, 例如:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对应 npm create 命令, 执行的文件是 ./dist/bin/index.js")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/bin/index.js"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("需要注意的是被执行的文件头部必须添加特殊说明使用node解释器去执行:")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须添加如下的")]),s._v("\n#"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("env node\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将本地包链接到全局(调试全局命令的包)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unlink xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消链接")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("通过"),t("code",[s._v("npm ls -g")]),s._v("可以查看本地链接的包, 如下:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v("\nC:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Program Files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("nodejs -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n├── @anlib/cli@0.0.1 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("project"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cli\n├── corepack@0.12.1\n├── front-frame-cli@0.1.2 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("project"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("front-frame-cli\n├── npm@8.15.0\n├── pnpm@7.25.1\n├── typescript@4.9.4\n└── yarn@1.22.19\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"npm发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm发布"}},[s._v("#")]),s._v(" npm发布")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" pack "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地模拟打包发布的产物")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加用户帐户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" login "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("logout")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登出")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前登录用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version patch "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动修改版本并 commit(支持很多的参数可见 npm version -h)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unpublish 包名 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除一个包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unpublish 包名@0.0.1 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除指定版本的包")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("如果配置了淘宝源则需要修改为官方源"),t("code",[s._v("npm config set registry https://registry.npmjs.org")]),s._v(", 然后重新安装依赖再发布")]),s._v(" "),t("blockquote",[t("p",[s._v("如果报"),t("code",[s._v("TLS 1.2")]),s._v("错误需要将"),t("code",[s._v(".npmrc")]),s._v("的"),t("code",[s._v("registry")]),s._v("从"),t("code",[s._v("http")]),s._v("修改为"),t("code",[s._v("https")])])]),s._v(" "),t("h4",{attrs:{id:"发布命名空间的包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布命名空间的包"}},[s._v("#")]),s._v(" 发布命名空间的包")]),s._v(" "),t("blockquote",[t("p",[s._v("使用命名空间的包发布的话还需要在npm上新建一个对应命名空间的"),t("a",{attrs:{href:"https://www.npmjs.com/org/create",target:"_blank",rel:"noopener noreferrer"}},[s._v("组织"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--access")]),s._v(" public "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布私有包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" access ls-packages "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前用户的组织")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可以配置"),t("code",[s._v("npm")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" access public\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("或者在"),t("code",[s._v("package.json")]),s._v("添加如下的配置:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"publishConfig"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"access"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"public"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://registry.npmjs.org/"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"npm-create"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-create"}},[s._v("#")]),s._v(" npm create")]),s._v(" "),t("p",[t("code",[s._v("npm create xxx")]),s._v("是很常见的一个命令, 常常被用于创建各种脚手架, 以"),t("code",[s._v("npm create vite")]),s._v("为例, 具体的执行流程如下:")]),s._v(" "),t("ul",[t("li",[s._v("命令行执行"),t("code",[s._v("npm create vite")]),s._v("会先去找"),t("code",[s._v("create-vite")]),s._v("这个包")]),s._v(" "),t("li",[s._v("执行"),t("code",[s._v("npm exec create-vite")]),s._v("命令")]),s._v(" "),t("li",[s._v("执行"),t("code",[s._v("create-vite")]),s._v("包里的"),t("code",[s._v("create-vite")]),s._v("命令(由"),t("code",[s._v("package.json")]),s._v("里的"),t("code",[s._v("bin")]),s._v("字段定义)")])]),s._v(" "),t("h2",{attrs:{id:"npm-init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-init"}},[s._v("#")]),s._v(" npm init")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.npmjs.com/cli/v6/commands/npm-init#examples",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("init")]),t("OutboundLink")],1),s._v("命令如果后面添加了参数的话, 将转换为相应的"),t("code",[s._v("npx")]),s._v("操作, 如下所示")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("npm init foo")]),s._v(" -> "),t("code",[s._v("npx create-foo")])]),s._v(" "),t("li",[t("code",[s._v("npm init @usr/foo")]),s._v(" -> "),t("code",[s._v("npx @usr/create-foo")])]),s._v(" "),t("li",[t("code",[s._v("npm init @usr")]),s._v(" -> "),t("code",[s._v("npx @usr/create")])])]),s._v(" "),t("h2",{attrs:{id:"npm-实用包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-实用包"}},[s._v("#")]),s._v(" npm 实用包")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/sindresorhus/awesome-nodejs",target:"_blank",rel:"noopener noreferrer"}},[s._v("awesome-nodejs"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("前端工具包")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("包名")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("描述")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("serve")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("快速的为一个文件夹生成一个静态的 http 服务")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("axios")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("网络请求库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("ESLint")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("代码检查工具")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("prettier")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("代码风格修正工具")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("nanoid")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("可以快速生成唯一的 id")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("lodash")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("JavaScript 实用函数库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("ramda")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("JavaScript 实用函数库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("dayjs")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("日期处理库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("mathjs")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("数学库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("jsonwebtoken")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("根据给定的数据生成 token")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("cheerio")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("基于JQuery的node模块, 可用于web爬取, 解析html")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("jsdom")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("文档对象模型模拟器(一般都是配合cheerio使用)")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("puppeteer")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("生成页面 PDF, 抓取 SPA, 自动提交表单, 进行 UI 测试, 键盘输入等, 功能很强大"),t("br"),s._v("可以配合 Headless Recorder 插件进行录制操作")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("fabric")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("canvas库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("xlsx")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("读取和写入excel")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("javascript-obfuscator")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("js代码混淆")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("markdown-it")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("markdown解析")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("monaco-editor")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("vscode web版编辑器")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("qrcode")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("生成二维码")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("relationship.js")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("亲戚关系计算")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("js-base64")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("base64编解码")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("jsencrypt")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("rsa加解密")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("nprogress")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("页面顶部进度条")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("validator")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("字符串校验")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("mitt")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("最小的事件发射器实现")])])])]),s._v(" "),t("p",[t("strong",[s._v("服务端工具包")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("包名")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("作用")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("xlsx")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("读取和写入excel")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("fs-extra")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("封装了fs")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("body-parser")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("解析 post 请求体数据到 req.body")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("bcrypt")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("密码加密")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("compression")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("可以通过压缩大大减小响应体的大小，从而提高 Web 应用程序的速度")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("connect-history-api-fallback")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("express中适配history路由")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("axios")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("网络请求库(前后端同构)")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("request")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("node网络请求库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("pkg")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("将 node 文件打包成 二进制文件")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("forever")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("后台持续运行 node")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("pm2")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("后台持续运行 node, 比 forever 强大")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("winston"),t("br"),s._v("winston-daily-rotate-file")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("日志库"),t("br"),s._v("根据日期分割文件名")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("log4js")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("日志库")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("textract")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("可以读取 DOCX, PDF, HTML, PPTX等数据")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("pdf2json")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("读取 PDF 数据")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("mysql")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("mysql包")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("mongobd")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("mangodb包")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("knex")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("sql语句查询构建器")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("exceljs")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("node操作excel工具库, 支持excel的几乎全部操作")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("node-xlsx")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("node读取和写入excel")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("ws")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("用于WebSocket")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("cross-env")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("使脚本能够跨平台设置和使用环境变量")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("glob")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("使用 shell 的模式匹配文件")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("fast-glob")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("根据 global 遍历文件")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("walkdir")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("遍历目录树")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("piscina")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("多线程实现")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("node-fetch")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("node中的fetch实现")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("tsx")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("直接运行 ts文件")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("open")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("可以编程的打开图片, 网站, 应用")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("ink")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("命令行反应库(实时更新命令行信息)")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("js-yaml")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("js实现解析yaml文件")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("dotenv")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("解析"),t("code",[s._v(".env")]),s._v("文件内容到环境变量("),t("code",[s._v("process.env")]),s._v(")中")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("tesseract.js")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("包装"),t("a",{attrs:{href:"https://github.com/tesseract-ocr/tesseract",target:"_blank",rel:"noopener noreferrer"}},[s._v("tesseract"),t("OutboundLink")],1),s._v("的js库")])])])]),s._v(" "),t("p",[t("strong",[s._v("终端工具")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("包名")]),s._v(" "),t("th",[s._v("作用")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("nodemon")]),s._v(" "),t("td",[s._v("可以监视 node 文件的变化自动更新")])]),s._v(" "),t("tr",[t("td",[s._v("rimraf")]),s._v(" "),t("td",[s._v("跨平台使用 UNIX 命令 "),t("code",[s._v("rm -rf")]),s._v(" , 需以管理员身份安装")])]),s._v(" "),t("tr",[t("td",[s._v("shelljs")]),s._v(" "),t("td",[s._v("执行 shell 命令")])]),s._v(" "),t("tr",[t("td",[s._v("zx")]),s._v(" "),t("td",[s._v("更方便的编写shell命令(兼容性不是很好)")])]),s._v(" "),t("tr",[t("td",[s._v("commander")]),s._v(" "),t("td",[s._v("命令行界面库")])]),s._v(" "),t("tr",[t("td",[s._v("minimist")]),s._v(" "),t("td",[s._v("解析命令行参数")])]),s._v(" "),t("tr",[t("td",[s._v("chalk")]),s._v(" "),t("td",[s._v("终端字符串美化库")])]),s._v(" "),t("tr",[t("td",[s._v("picocolors")]),s._v(" "),t("td",[s._v("也是终端字符串美化库, 但是比 chalk 要小")])]),s._v(" "),t("tr",[t("td",[s._v("log-symbols")]),s._v(" "),t("td",[s._v("终端图标库")])]),s._v(" "),t("tr",[t("td",[s._v("ora")]),s._v(" "),t("td",[s._v("终端加载动画")])]),s._v(" "),t("tr",[t("td",[s._v("prompts")]),s._v(" "),t("td",[s._v("命令行询问选择")])]),s._v(" "),t("tr",[t("td",[s._v("inquirer")]),s._v(" "),t("td",[s._v("命令行交互")])]),s._v(" "),t("tr",[t("td",[s._v("figlet")]),s._v(" "),t("td",[s._v("生成基于 ASCII 的艺术字")])]),s._v(" "),t("tr",[t("td",[s._v("progress")]),s._v(" "),t("td",[s._v("进度条")])]),s._v(" "),t("tr",[t("td",[s._v("update-notifier")]),s._v(" "),t("td",[s._v("应用更新通知")])]),s._v(" "),t("tr",[t("td",[s._v("which-pm-runs")]),s._v(" "),t("td",[s._v("检查当前使用的包管理器")])]),s._v(" "),t("tr",[t("td",[s._v("bumpp")]),s._v(" "),t("td",[s._v("交互式更新package版本")])])])]),s._v(" "),t("h2",{attrs:{id:"nvm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nvm"}},[s._v("#")]),s._v(" nvm")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/coreybutler/nvm-windows/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("nvm"),t("OutboundLink")],1),s._v("是node版本管理器，用于管理多个活动Node.js版本的简单bash脚本，让我们可以设置默认node版本，并在不同开发环境中切换不同版本")]),s._v(" "),t("p",[s._v("在安装nvm时如果本地已经安装有node了会提示是否把本地的node纳入版本管理")]),s._v(" "),t("p",[t("code",[s._v("nvm v")]),s._v(" 查看版本测试是否安装成功")]),s._v(" "),t("p",[t("img",{attrs:{src:a(526),alt:"image-20220305101949058"}})]),s._v(" "),t("h3",{attrs:{id:"设置镜像源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置镜像源"}},[s._v("#")]),s._v(" 设置镜像源")]),s._v(" "),t("p",[s._v("nvm默认node镜像源是"),t("code",[s._v("https://nodejs.org/dist")]),s._v("，从默认的镜像缘源下载会很慢，所以可以通过更换镜像源加快下载")]),s._v(" "),t("ol",[t("li",[s._v("找到安装nvm的文件夹目录，打开"),t("code",[s._v("settings.txt")]),s._v("文件")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(527),alt:""}})]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("新增两行配置，更换"),t("code",[s._v("node")]),s._v("和"),t("code",[s._v("npm")]),s._v("的下载源为淘宝镜像源")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("node_mirror: https://npm.taobao.org/mirrors/node/ "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加 node 镜像")]),s._v("\nnpm_mirror: https://npm.taobao.org/mirrors/npm/ "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加 npm 镜像")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:a(528),alt:"image-20220305101241784"}})]),s._v(" "),t("h3",{attrs:{id:"安装指定版本号的node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装指定版本号的node"}},[s._v("#")]),s._v(" 安装指定版本号的node")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("nvm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装指定版本的node")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:a(529),alt:"image-20220305102552432"}})]),s._v(" "),t("p",[s._v("会在nvm存储文件夹下多一个对应版本号的文件")]),s._v(" "),t("p",[t("img",{attrs:{src:a(530),alt:"image-20220305102822478"}})]),s._v(" "),t("p",[t("code",[s._v("node")]),s._v(" "),t("code",[s._v("npm")]),s._v(" 和 "),t("code",[s._v("npx")]),s._v(" 都会被安装("),t("strong",[s._v("npm 和 npx 会安装对应node版本的")]),s._v(")")]),s._v(" "),t("p",[t("img",{attrs:{src:a(531),alt:"image-20220305103809335"}})]),s._v(" "),t("h3",{attrs:{id:"查看所有的node版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看所有的node版本"}},[s._v("#")]),s._v(" 查看所有的node版本")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("nvm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" available\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"列出本地的node版本目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出本地的node版本目录"}},[s._v("#")]),s._v(" 列出本地的node版本目录")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("nvm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出node版本目录(`*`号表示当前正在使用的node版本)")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:a(532),alt:"image-20220305102626916"}})]),s._v(" "),t("h3",{attrs:{id:"使用指定版本node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用指定版本node"}},[s._v("#")]),s._v(" 使用指定版本node")]),s._v(" "),t("p",[s._v("使用指定版本node(需要有管理员权限), npm也会同时被切换")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("nvm use "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:a(533),alt:"image-20220305103419728"}})]),s._v(" "),t("h3",{attrs:{id:"卸载指定版本node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载指定版本node"}},[s._v("#")]),s._v(" 卸载指定版本node")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("nvm uninstall "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载指定版本node")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他命令"}},[s._v("#")]),s._v(" 其他命令")]),s._v(" "),t("p",[t("code",[s._v("nvm arch [32|64]")]),s._v(": 显示node是运行在32位还是64位")]),s._v(" "),t("p",[t("code",[s._v("nvm current")]),s._v(": 显示活动版本")]),s._v(" "),t("p",[t("code",[s._v("nvm install <version> [arch]")]),s._v(": 安装node， version是特定版本也可以是最新稳定版本latest可选参数arch指定安装32位还是64位版本，默认是系统位数可以添加"),t("code",[s._v("--insecure")]),s._v("绕过- 远程服务器的SSL")]),s._v(" "),t("p",[t("code",[s._v("nvm list [available]")]),s._v(": 显示已安装的列表可选参数available，显示可安装的所有版本"),t("code",[s._v("list")]),s._v("可简化为"),t("code",[s._v("ls")])]),s._v(" "),t("p",[t("code",[s._v("nvm on")]),s._v(": "),t("strong",[s._v("开启")]),s._v("node版本管理")]),s._v(" "),t("p",[t("code",[s._v("nvm off")]),s._v(": "),t("strong",[s._v("关闭")]),s._v("node版本管理")]),s._v(" "),t("p",[t("code",[s._v("nvm proxy [url]")]),s._v(": 设置下载代理不加可选参数url，显示当前代理将url设置为none则移除代理")]),s._v(" "),t("p",[t("code",[s._v("nvm use [version] [arch]")]),s._v(": 使用制定版本node可指定32/64位")]),s._v(" "),t("p",[t("code",[s._v("nvm root [path]")]),s._v(": 设置存储不同版本node的目录如果未设置，默认使用当前目录")]),s._v(" "),t("p",[t("code",[s._v("nvm version")]),s._v(": 显示nvm版本version可简化为v")]),s._v(" "),t("p",[t("code",[s._v("nvm node_mirror [node_mirror_url]")]),s._v(": 设置node镜像默认是"),t("code",[s._v("https://nodejs.org/dist/")]),s._v("如果不写url，则使用默认url设置后可至安装目录"),t("code",[s._v("settings.txt")]),s._v("文件查看，也可直接在该文件操作")]),s._v(" "),t("p",[t("code",[s._v("nvm npm_mirror [npm_mirror_url]")]),s._v(": 设置npm镜像默认是"),t("code",[s._v("https://github.com/npm/cli/archive/")]),s._v("如果不写url，则使用默认url设置后可至安装目录settings.txt文件查看，也可直接在该文件操作")]),s._v(" "),t("h2",{attrs:{id:"multirepo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multirepo"}},[s._v("#")]),s._v(" multirepo")]),s._v(" "),t("p",[s._v("在传统项目开发模式中每个项目都对应单独的一个代码仓库, 这种模式称之为方式"),t("code",[s._v("MultiRepo")])]),s._v(" "),t("p",[s._v("将公共的逻辑代码抽取出来, 然后发布到"),t("code",[s._v("npm")]),s._v(", 这样其他的项目都可以通过安装依赖包进行复用")]),s._v(" "),t("h3",{attrs:{id:"multirepo缺点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multirepo缺点"}},[s._v("#")]),s._v(" MultiRepo缺点")]),s._v(" "),t("p",[s._v("如果依赖包里面某个功能出错了或者是需要更新, 则需要做一下几个步骤：")]),s._v(" "),t("ol",[t("li",[s._v("去修改源代码")]),s._v(" "),t("li",[s._v("重新发布新包")]),s._v(" "),t("li",[s._v("通知所有项目安装新版本依赖包")])]),s._v(" "),t("p",[s._v("只是修改或者更新依赖包，就需要这么复杂的步骤，在开发过程中，修改代码和bug是不可避免的, 这样就增加了很多的开发工作, 当然也有好处那就是一个项目只负责一个部分的功能好维护")]),s._v(" "),t("h2",{attrs:{id:"monorepo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monorepo"}},[s._v("#")]),s._v(" monorepo")]),s._v(" "),t("p",[t("code",[s._v("monorepo")]),s._v("就是把多个工程放到一个"),t("code",[s._v("git")]),s._v("仓库中进行管理，因此它们可以共享同一套构建流程、代码规范也可以做到统一，特别是如果存在模块间的相互引用的情况，查看代码、修改bug、调试等会更加方便")]),s._v(" "),t("blockquote",[t("p",[s._v("包管理器"),t("code",[s._v("yarn")]),s._v("和"),t("code",[s._v("pnpm")]),s._v("都支持"),t("code",[s._v("monorepo")]),s._v(", 获取社区第三方库"),t("a",{attrs:{href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("lerna")]),t("OutboundLink")],1),s._v("也可以做"),t("code",[s._v("monorepo")])])]),s._v(" "),t("h2",{attrs:{id:"yarn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[s._v("#")]),s._v(" yarn")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://yarnpkg.com/getting-started/migration/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("yarn")]),t("OutboundLink")],1),s._v("执行任何"),t("code",[s._v("npm script")]),s._v("都可以直接运行, 如: "),t("code",[s._v("yarn dev")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用`npm`安装")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" init "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化 package.json")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖(可以省略install)")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--save")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到 dependencies, --save 简写 -S")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dev")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到 devDependencies, --dev 简写 -D")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" global "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" remove xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" global remove xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除全局依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" upgrade xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 升级依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" upgrade xxx global "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 升级全局依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" info xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看依赖信息")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" config get registry "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看源")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://registry.npm.taobao.org/ "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换源")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" global list "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--depth")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看全局依赖")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("blockquote",[t("p",[s._v("如果是使用"),t("code",[s._v("nvm")]),s._v("进行node的版本管理后, 需要在每个"),t("code",[s._v("node版本文件")]),s._v("下都需要安装"),t("code",[s._v("yarn")]),s._v("，安装后指定版本时文件夹会新增"),t("code",[s._v("yarn")]),s._v("文件")])]),s._v(" "),t("h2",{attrs:{id:"pnpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pnpm"}},[s._v("#")]),s._v(" pnpm")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.pnpm.cn/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("pnpm")]),t("OutboundLink")],1),s._v("以本地缓存+软链接的方式安装"),t("code",[s._v("node_modules")]),s._v("里面的依赖, 可以大大"),t("strong",[s._v("节约磁盘空间并提升安装速度")]),s._v("而且还可以创建"),t("strong",[s._v("扁平化")]),s._v("的依赖结构, 避免了"),t("code",[s._v("npm")]),s._v('"幽灵依赖"的问题')]),s._v(" "),t("p",[s._v("同样的执行任何"),t("code",[s._v("npm script")]),s._v("使用"),t("code",[s._v("pnpm")]),s._v("都可以直接运行, 如: "),t("code",[s._v("pnpm dev")])]),s._v(" "),t("p",[s._v("同样执行任何"),t("code",[s._v("npm script")]),s._v("都可以直接运行, 如: "),t("code",[s._v("pnpm dev")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用`npm`安装")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" init "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成 package.json")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" run xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行 script 命令")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" dlx create-react-app xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 效果类型与 npx")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" config list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看配置")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" config get registry "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看源")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" config "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" registry http://registry.npm.taobao.org/ "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换源")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖包到 dependencies ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖包到devDependencies")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖包到optionalDependencies")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装依赖包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装项目全部依赖, install 简写 i")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" update "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新依赖包, update 简写 up")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" remove xxx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除依赖包, remove 简写 rm")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看本地安装的依赖, list 简写 ls")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" list "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--global")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看全局安装的依赖, --global 简写 --g")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" outdated "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查过期的依赖")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" publish "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发布依赖包")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" use "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("node版本号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理node版本, 本地安装并使用")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" use "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--global")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("node版本号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理node版本, 全局安装并使用")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br")])]),t("blockquote",[t("p",[s._v("如果是使用"),t("code",[s._v("nvm")]),s._v("进行node的版本管理后, 需要在每个"),t("code",[s._v("node版本文件")]),s._v("下都需要安装"),t("code",[s._v("pnpm")]),s._v("，安装后指定版本时文件夹会新增"),t("code",[s._v("pnpm")]),s._v("文件")])]),s._v(" "),t("h3",{attrs:{id:"npm或yarn-转-pnpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm或yarn-转-pnpm"}},[s._v("#")]),s._v(" npm或yarn 转 pnpm")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("pnpm import")]),s._v("命令可以从"),t("code",[s._v("npm")]),s._v("或"),t("code",[s._v("yarn")]),s._v("的锁文件生成"),t("code",[s._v("pnpm")]),s._v("的锁文件")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除使用 npm 或 yarn 生成的安装的node_modules")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" node_modules\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成 pnpm-lock.yaml(可以根据 package-lock.json 或 yarn-lock 生成)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新安装依赖")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 package-lock.json 或 yarn.lock")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" package-lock.json "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf yarn.lock")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("yarn")]),s._v("也有"),t("code",[s._v("import")]),s._v("命令")])]),s._v(" "),t("h3",{attrs:{id:"monorepo-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#monorepo-2"}},[s._v("#")]),s._v(" monorepo")]),s._v(" "),t("p",[t("code",[s._v("pnpm")]),s._v("内置支持"),t("code",[s._v("monorepo")]),s._v(", 通过一个叫"),t("a",{attrs:{href:"https://www.pnpm.cn/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("workspace")]),t("OutboundLink")],1),s._v("的概念来实现的, 基本使用:")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("创建一个工程项目, 初始化"),t("code",[s._v("package.json")]),s._v("后设置"),t("code",[s._v('"private": "true"')]),s._v("(防止根目录被发布出去)")])]),s._v(" "),t("li",[t("p",[s._v("工程目录创建"),t("code",[s._v("packages")]),s._v("目录, 这个目录里面的就是各个模块")])]),s._v(" "),t("li",[t("p",[s._v("工程目录新建"),t("code",[s._v("pnpm-workspace.yaml")]),s._v("文件, 该文件是配置"),t("code",[s._v("pnpm")]),s._v("的工作空间, 如下:")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pnpm-workspace.yaml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("packages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"packages/*"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("最后的项目结构如下:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── package.json\n├── packages\n│   ├── pkg1\n│   │   ├── package.json\n│   │   ├── src\n│   │   │   └── index.ts\n│   │   └── tsconfig.json\n│   └── pkg2\n│       ├── package.json\n│       ├── src\n│       │   └── index.ts\n│       └── tsconfig.json\n├── pnpm-workspace.yaml\n└── tsconfig.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("workspace")]),s._v("中"),t("code",[s._v("pnpm")]),s._v("安装依赖如下:")]),s._v(" "),t("blockquote",[t("p",[s._v("在 "),t("a",{attrs:{href:"https://pnpm.io/zh/workspaces",target:"_blank",rel:"noopener noreferrer"}},[s._v("workspace"),t("OutboundLink")],1),s._v("内, "),t("code",[s._v("pnpm install")]),s._v(" 会下载项目所有依赖, 如果想禁用这个行为, "),t("code",[s._v(".npmrc")]),s._v("配置 "),t("a",{attrs:{href:"https://pnpm.io/zh/npmrc#recursive-install",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("recursive-install = false")]),t("OutboundLink")],1)])]),s._v(" "),t("h5",{attrs:{id:"全局的公共依赖包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局的公共依赖包"}},[s._v("#")]),s._v(" 全局的公共依赖包")]),s._v(" "),t("p",[s._v("全局的公共依赖包, 是安装到根目录中的, 如: "),t("code",[s._v("rollup")]),s._v(", "),t("code",[s._v("typescript")]),s._v(", "),t("code",[s._v("vue")]),s._v("等")]),s._v(" "),t("p",[t("code",[s._v("pnpm")]),s._v("中提供了"),t("a",{attrs:{href:"https://pnpm.io/zh/pnpm-cli#-w---workspace-root",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("-w")]),s._v("("),t("code",[s._v("--workspace-root")]),s._v(")"),t("OutboundLink")],1),s._v("参数, 可以将依赖安装到工程的根目录下, 作为"),t("strong",[s._v("所有")]),s._v(" 模块的公共依赖, 如:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到根目录的开发依赖中(默认安装到生产依赖)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" typescript "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到根目录的开发依赖")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" rollup "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-wD")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h5",{attrs:{id:"安装到某个模块中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装到某个模块中"}},[s._v("#")]),s._v(" 安装到某个模块中")]),s._v(" "),t("p",[t("code",[s._v("pnpm")]),s._v("中提供了"),t("a",{attrs:{href:"https://www.pnpm.cn/filtering",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("--filter")]),t("OutboundLink")],1),s._v("参数, 可以用来对特定的package进行某些操作, 如安装依赖, 执行命令等, 下面是安装命令的基本使用:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到 pkg1 的开发依赖中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" rollup "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" pkg1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖到 pkg1 的生产依赖中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" chalk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" pkg1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 pkg1 的依赖")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" remove chalk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" pkg1 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("blockquote",[t("p",[s._v("注意"),t("code",[s._v("--filter")]),s._v(" 参数跟着的是模块的 "),t("code",[s._v("package.json")]),s._v(" 里的 "),t("code",[s._v("name")]),s._v(" 字段, "),t("strong",[s._v("而不是")]),s._v("模块目录名")])]),s._v(" "),t("h6",{attrs:{id:"filter的其他操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filter的其他操作"}},[s._v("#")]),s._v(" filter的其他操作")]),s._v(" "),t("p",[t("code",[s._v("--filter")]),s._v("除了安装依赖, 可以执行特定模块的命令, 如下:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 pkg1 里面的 test 命令, 等价于 cd packages/pkg1 && npm run test")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" pkg1 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或 pnpm test --filter pkg1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行 packages 目录下所有包的 test 命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./packages/**'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("更多操作可见官方文档"),t("a",{attrs:{href:"https://www.pnpm.cn/filtering",target:"_blank",rel:"noopener noreferrer"}},[s._v("filtering"),t("OutboundLink")],1)]),s._v(" "),t("h5",{attrs:{id:"模块之间的相互依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模块之间的相互依赖"}},[s._v("#")]),s._v(" 模块之间的相互依赖")]),s._v(" "),t("p",[s._v("一个模块依赖另外的一个或多个模块在"),t("code",[s._v("monorepo")]),s._v("中是很常见, 比如 "),t("code",[s._v("pkg1")]),s._v(" 中将 "),t("code",[s._v("pkg2")]),s._v(" 作为依赖进行安装, "),t("code",[s._v("pnpm")]),s._v("提供了基于"),t("a",{attrs:{href:"https://www.pnpm.cn/workspaces#workspace-protocol-workspace",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("workspace:协议")]),t("OutboundLink")],1),s._v(", 可以很方便的在模块内部进行相互引用, 比如 "),t("code",[s._v("pkg1")]),s._v(" 引用 "),t("code",[s._v("pkg2")]),s._v(" 作为依赖, 命令如下:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 pkg2 到 pkg1 里(默认安装到生产依赖)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" pkg2 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" pkg1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 pkg2 到 pkg1 里的开发依赖")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" pkg2 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),s._v(" pkg1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("此时可以看到"),t("code",[s._v("pkg1")]),s._v("里的"),t("code",[s._v("package.json")]),s._v("里出现了"),t("code",[s._v("pkg2")]),s._v("的依赖项以"),t("code",[s._v("workspace:")]),s._v("开头, 后面跟着具体的版本号, 如下:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("...\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pkg2"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"workspace:^1.0.0"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("查看"),t("code",[s._v("pkg2")]),s._v("的"),t("code",[s._v("node_modules")]),s._v("里面出现了"),t("code",[s._v("pkg1")]),s._v("其实这个就是指向"),t("code",[s._v("packages/pkg1")]),s._v("的软链接,")]),s._v(" "),t("p",[s._v("在设置依赖版本的时候推荐用"),t("code",[s._v("workspace:*")]),s._v(", 这样就可以保持依赖的版本是工作空间里最新版本，不需要每次手动更新依赖版本,")]),s._v(" "),t("p",[s._v("当 "),t("code",[s._v("pnpm publish")]),s._v(" 的时候, 会自动将 "),t("code",[s._v("package.json")]),s._v(" 中的 "),t("code",[s._v("workspace")]),s._v(" 修正为对应的版本号")]),s._v(" "),t("h4",{attrs:{id:"只允许pnpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#只允许pnpm"}},[s._v("#")]),s._v(" 只允许pnpm")]),s._v(" "),t("p",[s._v("当在项目中使用 "),t("code",[s._v("pnpm")]),s._v(" 时, 如果不希望用户使用 "),t("code",[s._v("yarn")]),s._v(" 或者 "),t("code",[s._v("npm")]),s._v(" 安装依赖, 可以在工程根目录下的 "),t("code",[s._v("package.json")]),s._v("里添加一个"),t("code",[s._v("preinstall")]),s._v("命令, 如下:")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"preinstall"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npx only-allow pnpm"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://docs.npmjs.com/cli/v9/using-npm/scripts/",target:"_blank",rel:"noopener noreferrer"}},[s._v("preinstall"),t("OutboundLink")],1),s._v(" 脚本会在 "),t("code",[s._v("install")]),s._v(" 之前执行, 只要有人运行 "),t("code",[s._v("npm install")]),s._v(" 或 "),t("code",[s._v("yarn install")]),s._v("，就会调用 "),t("a",{attrs:{href:"https://github.com/pnpm/only-allow",target:"_blank",rel:"noopener noreferrer"}},[s._v("only-allow"),t("OutboundLink")],1),s._v(" 去限制只允许使用 "),t("code",[s._v("pnpm")]),s._v(" 安装依赖")]),s._v(" "),t("h3",{attrs:{id:"release工作流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#release工作流"}},[s._v("#")]),s._v(" release工作流")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/waynelu92/article/details/73604172",target:"_blank",rel:"noopener noreferrer"}},[s._v("软件开发版本"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("可以使用"),t("a",{attrs:{href:"https://github.com/antfu/bumpp",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("bumpp")]),t("OutboundLink")],1),s._v("包来快速管理版本, 发布依赖包使用"),t("code",[s._v("pnpm publish")]),s._v("或者"),t("code",[s._v("pnpm -r publish")]),s._v("(发布所有的)命令即可")])])}),[],!1,null,null,null);t.default=e.exports}}]);