<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript | An的个人笔记</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/note-sites/favicon.ico">
    <script type="module" src="/note-sites/js/index.js"></script>
    <meta name="description" content="记录学习笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/note-sites/assets/css/0.styles.30b93535.css" as="style"><link rel="preload" href="/note-sites/assets/js/app.c55294e5.js" as="script"><link rel="preload" href="/note-sites/assets/js/7.6eb17415.js" as="script"><link rel="preload" href="/note-sites/assets/js/2.abf597c5.js" as="script"><link rel="preload" href="/note-sites/assets/js/1.fb780807.js" as="script"><link rel="preload" href="/note-sites/assets/js/23.d752123f.js" as="script"><link rel="prefetch" href="/note-sites/assets/js/10.51046515.js"><link rel="prefetch" href="/note-sites/assets/js/11.0469bc21.js"><link rel="prefetch" href="/note-sites/assets/js/14.da38c91a.js"><link rel="prefetch" href="/note-sites/assets/js/15.32650eec.js"><link rel="prefetch" href="/note-sites/assets/js/16.6ed35e7b.js"><link rel="prefetch" href="/note-sites/assets/js/17.9643c847.js"><link rel="prefetch" href="/note-sites/assets/js/18.d40a27db.js"><link rel="prefetch" href="/note-sites/assets/js/19.4381d23e.js"><link rel="prefetch" href="/note-sites/assets/js/20.f142f808.js"><link rel="prefetch" href="/note-sites/assets/js/21.914095b4.js"><link rel="prefetch" href="/note-sites/assets/js/22.6e9d8ff5.js"><link rel="prefetch" href="/note-sites/assets/js/24.42804aa8.js"><link rel="prefetch" href="/note-sites/assets/js/25.68e63073.js"><link rel="prefetch" href="/note-sites/assets/js/26.39cb7e5a.js"><link rel="prefetch" href="/note-sites/assets/js/27.9c4b8e97.js"><link rel="prefetch" href="/note-sites/assets/js/28.e530cc1b.js"><link rel="prefetch" href="/note-sites/assets/js/29.db7f8e73.js"><link rel="prefetch" href="/note-sites/assets/js/3.f7efc8c6.js"><link rel="prefetch" href="/note-sites/assets/js/30.d0a894e7.js"><link rel="prefetch" href="/note-sites/assets/js/31.88774fb5.js"><link rel="prefetch" href="/note-sites/assets/js/32.a7571123.js"><link rel="prefetch" href="/note-sites/assets/js/33.53bdc8e5.js"><link rel="prefetch" href="/note-sites/assets/js/34.6eb48c58.js"><link rel="prefetch" href="/note-sites/assets/js/35.1dca5585.js"><link rel="prefetch" href="/note-sites/assets/js/36.b48fac95.js"><link rel="prefetch" href="/note-sites/assets/js/37.679095e2.js"><link rel="prefetch" href="/note-sites/assets/js/38.1d8ad7e4.js"><link rel="prefetch" href="/note-sites/assets/js/39.3e49a589.js"><link rel="prefetch" href="/note-sites/assets/js/4.7c091c38.js"><link rel="prefetch" href="/note-sites/assets/js/40.39c1d7fa.js"><link rel="prefetch" href="/note-sites/assets/js/41.cd3388e8.js"><link rel="prefetch" href="/note-sites/assets/js/42.8ced05ab.js"><link rel="prefetch" href="/note-sites/assets/js/43.ea97689c.js"><link rel="prefetch" href="/note-sites/assets/js/44.7fe5102e.js"><link rel="prefetch" href="/note-sites/assets/js/45.0fbe7c0f.js"><link rel="prefetch" href="/note-sites/assets/js/46.c4d0f27e.js"><link rel="prefetch" href="/note-sites/assets/js/47.8e771d35.js"><link rel="prefetch" href="/note-sites/assets/js/48.be60736e.js"><link rel="prefetch" href="/note-sites/assets/js/49.38c27c79.js"><link rel="prefetch" href="/note-sites/assets/js/5.ec006bda.js"><link rel="prefetch" href="/note-sites/assets/js/50.0f886c84.js"><link rel="prefetch" href="/note-sites/assets/js/51.63702bc0.js"><link rel="prefetch" href="/note-sites/assets/js/52.1263b61c.js"><link rel="prefetch" href="/note-sites/assets/js/53.e6c99f3a.js"><link rel="prefetch" href="/note-sites/assets/js/54.3f700f55.js"><link rel="prefetch" href="/note-sites/assets/js/55.fc5b45ac.js"><link rel="prefetch" href="/note-sites/assets/js/56.75b7aca3.js"><link rel="prefetch" href="/note-sites/assets/js/57.d941cddb.js"><link rel="prefetch" href="/note-sites/assets/js/58.3c2c868f.js"><link rel="prefetch" href="/note-sites/assets/js/59.308fc164.js"><link rel="prefetch" href="/note-sites/assets/js/6.a80d0425.js"><link rel="prefetch" href="/note-sites/assets/js/60.3e0da199.js"><link rel="prefetch" href="/note-sites/assets/js/61.af0395e9.js"><link rel="prefetch" href="/note-sites/assets/js/62.46194e43.js"><link rel="prefetch" href="/note-sites/assets/js/63.cc096257.js"><link rel="prefetch" href="/note-sites/assets/js/64.b6fabae6.js"><link rel="prefetch" href="/note-sites/assets/js/65.7728bf02.js"><link rel="prefetch" href="/note-sites/assets/js/66.72245c92.js"><link rel="prefetch" href="/note-sites/assets/js/67.23fdcefc.js"><link rel="prefetch" href="/note-sites/assets/js/68.bf0ba0da.js"><link rel="prefetch" href="/note-sites/assets/js/69.728d8aae.js"><link rel="prefetch" href="/note-sites/assets/js/70.58960646.js"><link rel="prefetch" href="/note-sites/assets/js/71.a1776af7.js"><link rel="prefetch" href="/note-sites/assets/js/72.6325b387.js"><link rel="prefetch" href="/note-sites/assets/js/73.89779ad2.js"><link rel="prefetch" href="/note-sites/assets/js/74.2fc6ee67.js"><link rel="prefetch" href="/note-sites/assets/js/75.2f1241d6.js"><link rel="prefetch" href="/note-sites/assets/js/76.6dcf65ee.js"><link rel="prefetch" href="/note-sites/assets/js/8.d24b9a7f.js"><link rel="prefetch" href="/note-sites/assets/js/9.e1707cc2.js"><link rel="prefetch" href="/note-sites/assets/js/vendors~docsearch.d56a942a.js">
    <link rel="stylesheet" href="/note-sites/assets/css/0.styles.30b93535.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>An的个人笔记</h3> <p class="description" data-v-59e6cb88>记录学习笔记</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>An</span>
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-sites/" class="home-link router-link-active"><!----> <span class="site-name">An的个人笔记</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/代理服务器/" class="nav-link"><i class="undefined"></i>
  代理服务器
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/混合开发/" class="nav-link"><i class="undefined"></i>
  混合开发
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" class="nav-link"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/note-sites/assets/img/logo.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    An
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>37</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>29</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#f8b26a;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-mayun" style="color:#e15b64;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-juejin" style="color:#f8b26a;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-npm" style="color:#f47e60;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-bilibili" style="color:#e15b64;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/note-sites/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/note-sites/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  全部
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/categories/第三方库/" class="nav-link"><i class="undefined"></i>
  第三方库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程语言/" class="nav-link"><i class="undefined"></i>
  编程语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/版本管理/" class="nav-link"><i class="undefined"></i>
  版本管理
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/Linux/" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/代理服务器/" class="nav-link"><i class="undefined"></i>
  代理服务器
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/包管理工具/" class="nav-link"><i class="undefined"></i>
  包管理工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/web开发框架/" class="nav-link"><i class="undefined"></i>
  web开发框架
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/混合开发/" class="nav-link"><i class="undefined"></i>
  混合开发
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/系统语言/" class="nav-link"><i class="undefined"></i>
  系统语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/打包工具/" class="nav-link"><i class="undefined"></i>
  打包工具
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/小程序/" class="nav-link"><i class="undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/categories/编程干货/" class="nav-link"><i class="undefined"></i>
  编程干货
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/HTML/HTML.html" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/CSS/CSS.html" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/JavaScript/JavaScript.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/TypeScript/TypeScript.html" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-sites/guide/JQuery/JQuery.html" class="nav-link"><i class="undefined"></i>
  JQuery
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/JavaScript/AJAX.html" class="nav-link"><i class="undefined"></i>
  AJAX
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Axios/Axios.html" class="nav-link"><i class="undefined"></i>
  Axios
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/webpack/webpack.html" class="nav-link"><i class="undefined"></i>
  webpack
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Three/Three.html" class="nav-link"><i class="undefined"></i>
  Three
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/Electron.html" class="nav-link"><i class="undefined"></i>
  electron
</a></li><li class="dropdown-subitem"><a href="/note-sites/guide/Electron/VS Code.html" class="nav-link"><i class="undefined"></i>
  VS Code
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/设计模式.html" class="nav-link"><i class="undefined"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Node.html" class="nav-link"><i class="undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Node/Npm.html" class="nav-link"><i class="undefined"></i>
  npm
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue2.html" class="nav-link"><i class="undefined"></i>
  Vue2
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Vue/Vue3.html" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-16.html" class="nav-link"><i class="undefined"></i>
  React-16
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/React/React-18.html" class="nav-link"><i class="undefined"></i>
  React-18
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/微信小程序/微信小程序.html" class="nav-link"><i class="undefined"></i>
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-sites/guide/Git/Git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/C语言/C语言.html" class="nav-link"><i class="undefined"></i>
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Java/Java.html" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/ArcGIS/ArcGIS.html" class="nav-link"><i class="undefined"></i>
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Linux.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Linux/Shell.html" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/note-sites/guide/Rust/Rust.html" class="nav-link"><i class="undefined"></i>
  Rust
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      博客生成工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress-theme-reco.recoluan.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  vuepress-theme-reco
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>JavaScript</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>An</span>
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">JavaScript</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>An</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022/7/10</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>JavaScript</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h1> <p></p><div class="table-of-contents"><ul><li><a href="#标识符">标识符</a></li><li><a href="#数据类型">数据类型</a><ul><li><a href="#string">String</a><ul><li><a href="#转义字符">转义字符</a></li></ul></li><li><a href="#number">Number</a><ul><li><a href="#js浮点数计算问题">js浮点数计算问题</a></li></ul></li><li><a href="#boolean">Boolean</a></li><li><a href="#null">Null</a></li><li><a href="#undefined">Undefined</a></li><li><a href="#null-和-undefined-的区别">null 和 undefined 的区别</a></li></ul></li><li><a href="#object">Object</a><ul><li><a href="#object-的分类">Object 的分类</a></li><li><a href="#对象的基本知识和操作">对象的基本知识和操作</a></li><li><a href="#基本数据类型和引用数据类型">基本数据类型和引用数据类型</a></li></ul></li><li><a href="#function">Function</a><ul><li><a href="#函数的基本知识和操作">函数的基本知识和操作</a><ul><li><a href="#函数的参数">函数的参数</a></li></ul></li><li><a href="#函数的两个隐含的参数">函数的两个隐含的参数</a><ul><li><a href="#arguments">arguments</a></li></ul></li><li><a href="#函数的返回值">函数的返回值</a></li><li><a href="#函数的length">函数的length</a></li><li><a href="#立即执行函数">立即执行函数</a><ul><li><a href="#函数的方法">函数的方法</a></li></ul></li></ul></li><li><a href="#强制类型转换">强制类型转换</a><ul><li><a href="#其它数据类型转换为string">其它数据类型转换为String</a></li><li><a href="#其它数据类型转换为number">其它数据类型转换为Number</a></li><li><a href="#其他的数据类型转换为boolean">其他的数据类型转换为Boolean</a></li></ul></li><li><a href="#注释">注释</a></li><li><a href="#运算符">运算符</a><ul><li><a href="#算术运算符">算术运算符</a></li><li><a href="#一元运算符">一元运算符</a><ul><li><a href="#自增或自减">自增或自减</a></li></ul></li><li><a href="#逻辑运算符">逻辑运算符</a></li><li><a href="#隐式的类型转换总结">隐式的类型转换总结</a></li><li><a href="#赋值运算符">赋值运算符</a></li><li><a href="#关系运算符">关系运算符</a><ul><li><a href="#相等运算符">相等运算符 ==</a></li><li><a href="#不相等运算符">不相等运算符 !=</a></li><li><a href="#全等运算符">全等运算符 ===</a></li><li><a href="#不全等运算符">不全等运算符  !==</a></li></ul></li><li><a href="#三元运算符">三元运算符</a></li><li><a href="#逗号运算符">逗号运算符</a></li></ul></li><li><a href="#流程控制语句">流程控制语句</a><ul><li><a href="#条件判断语句">条件判断语句</a></li><li><a href="#条件分支语句">条件分支语句</a></li><li><a href="#循环语句">循环语句</a></li></ul></li><li><a href="#作用域">作用域</a><ul><li><a href="#全局作用域">全局作用域</a></li><li><a href="#变量和函数的声明提前">变量和函数的声明提前</a></li></ul></li><li><a href="#函数作用域">函数作用域</a></li><li><a href="#constructor-构造函数">constructor(构造函数)</a><ul><li><a href="#prototype-原型对象">prototype(原型对象)</a></li><li><a href="#关于this的指向问题">关于this的指向问题</a></li><li><a href="#静态属性或方法">静态属性或方法</a></li></ul></li><li><a href="#es5继承">ES5继承</a><ul><li><a href="#组合继承">组合继承</a></li><li><a href="#寄生组合式继承">寄生组合式继承</a></li></ul></li><li><a href="#array">Array</a><ul><li><a href="#数组的常用方法">数组的常用方法</a></li></ul></li><li><a href="#date对象">Date对象</a><ul><li><a href="#date对象的方法">Date对象的方法</a></li></ul></li><li><a href="#相对日期格式">相对日期格式</a><ul><li><a href="#指定格式化">指定格式化</a></li></ul></li><li><a href="#math对象">Math对象</a><ul><li><a href="#math对象的方法">Math对象的方法</a></li></ul></li><li><a href="#string的相关方法">String的相关方法</a></li><li><a href="#regular-expression">Regular Expression</a><ul><li><a href="#正则表达式的相关知识和操作">正则表达式的相关知识和操作</a></li><li><a href="#和正则相关的字符串方法">和正则相关的字符串方法</a></li><li><a href="#禁止贪婪">禁止贪婪</a></li></ul></li><li><a href="#dom">DOM</a><ul><li><a href="#节点">节点</a><ul><li><a href="#文档节点-document">文档节点（document）</a></li><li><a href="#元素节点-element">元素节点（Element）</a></li><li><a href="#获取元素节点">获取元素节点</a></li><li><a href="#获取元素节点的属性">获取元素节点的属性</a></li><li><a href="#获取元素节点的子节点">获取元素节点的子节点</a></li><li><a href="#获取父节点和兄弟节点">获取父节点和兄弟节点</a></li><li><a href="#其他属性或方法">其他属性或方法</a></li><li><a href="#文本节点">文本节点</a></li></ul></li><li><a href="#script标签中的文本">script标签中的文本</a></li><li><a href="#属性节点-attr">属性节点（Attr）</a></li><li><a href="#html-attributes-和-dom-properties">HTML Attributes 和 DOM Properties</a></li><li><a href="#dom增删改操作">DOM增删改操作</a><ul><li><a href="#dom操作css样式">DOM操作css样式</a></li><li><a href="#其他的属性">其他的属性</a></li></ul></li></ul></li><li><a href="#事件">事件</a><ul><li><a href="#事件对象">事件对象</a></li><li><a href="#事件句柄">事件句柄</a></li><li><a href="#事件的冒泡">事件的冒泡</a></li><li><a href="#事件的委派">事件的委派</a></li><li><a href="#事件的绑定">事件的绑定</a></li><li><a href="#事件的解绑">事件的解绑</a></li><li><a href="#事件的传播">事件的传播</a></li><li><a href="#派发事件">派发事件</a></li><li><a href="#文档的加载">文档的加载</a><ul><li><a href="#脚本运行时机-async-与-defer">脚本运行时机: async 与 defer</a><ul><li><a href="#执行顺序">执行顺序</a></li></ul></li></ul></li></ul></li><li><a href="#bom">BOM</a><ul><li><a href="#bom对象的分类">BOM对象的分类</a><ul><li><a href="#一些常用的方法">一些常用的方法</a></li></ul></li></ul></li><li><a href="#json">JSON</a></li><li><a href="#本地存储">本地存储</a><ul><li><a href="#window-sessionstorage">window.sessionStorage</a></li><li><a href="#window-localstorage">window.localStorage</a></li><li><a href="#storage-事件">storage 事件</a></li><li><a href="#document-cookie">document.cookie</a></li><li><a href="#indexeddb">IndexedDB</a></li></ul></li><li><a href="#with语句">with语句</a></li><li><a href="#eval函数">eval函数</a></li><li><a href="#worker对象">Worker对象</a></li><li><a href="#跨上下文信息">跨上下文信息</a></li><li><a href="#url">URL</a><ul><li><a href="#url转解码函数">URL转解码函数</a></li><li><a href="#createobjecturl">createObjectURL</a></li></ul></li><li><a href="#clipboard-api">Clipboard API</a></li><li><a href="#document-execcommand">document.execCommand</a></li><li><a href="#urlsearchparams">URLSearchParams</a></li><li><a href="#打印">打印</a></li><li><a href="#file">File</a><ul><li><a href="#生成文件并下载">生成文件并下载</a></li></ul></li><li><a href="#filereader">FileReader</a><ul><li><a href="#封装filereader">封装FileReader</a></li></ul></li><li><a href="#formdata">FormData</a></li><li><a href="#mutationobserver">MutationObserver</a></li><li><a href="#intersectionobserver">IntersectionObserver</a></li><li><a href="#requestanimationframe">requestAnimationFrame</a></li><li><a href="#blob">Blob</a></li><li><a href="#crypto">crypto</a></li><li><a href="#textencoder-和-textdecoder">TextEncoder 和 TextDecoder</a></li><li><a href="#uint8array">Uint8Array</a></li><li><a href="#es6-简介">ES6 简介</a></li><li><a href="#es6-的新增语法">ES6 的新增语法</a><ul><li><a href="#let-和-const">let 和 const</a></li><li><a href="#var、let、const-的区别">var、let、const 的区别</a></li></ul></li><li><a href="#严格模式">严格模式</a><ul><li><a href="#严格模式中的变化">严格模式中的变化:</a></li></ul></li><li><a href="#箭头函数">箭头函数</a></li><li><a href="#高阶函数-和-函数柯里化">高阶函数 和 函数柯里化</a><ul><li><a href="#高阶函数">高阶函数</a></li><li><a href="#函数的柯里化">函数的柯里化</a></li><li><a href="#函数组合">函数组合</a></li></ul></li><li><a href="#闭包">闭包</a></li><li><a href="#递归">递归</a></li><li><a href="#拷贝">拷贝</a><ul><li><a href="#浅拷贝">浅拷贝</a></li><li><a href="#深拷贝">深拷贝</a></li></ul></li><li><a href="#捕获错误">捕获错误</a><ul><li><a href="#throw-语句">throw 语句</a></li><li><a href="#try-catch-finally-语句">try/catch/finally 语句</a><ul><li><a href="#try-catch-finally-语句的返回值">try/catch/finally 语句的返回值</a></li></ul></li></ul></li><li><a href="#解构赋值">解构赋值</a><ul><li><a href="#数组解构">数组解构</a></li><li><a href="#对象解构">对象解构</a></li><li><a href="#解构赋值交换变量">解构赋值交换变量</a></li><li><a href="#函数形参初始值和解构赋值">函数形参初始值和解构赋值</a></li></ul></li><li><a href="#剩余参数">剩余参数</a><ul><li><a href="#剩余参数和解构配合使用">剩余参数和解构配合使用</a></li></ul></li><li><a href="#symbol-数据类型">Symbol 数据类型</a><ul><li><a href="#公认符号">公认符号</a><ul><li><a href="#symbol-iterator-和-symnol-asynciteraror">Symbol.iterator 和 Symnol.asyncIteraror</a></li><li><a href="#symbol-hasinstalce">Symbol.hasInstalce</a></li><li><a href="#symbol-tostringtag">Symbol.toStringTag</a></li><li><a href="#symbol-species">Symbol.species</a></li><li><a href="#symbol-isconcatspreadable">Symbol.isConcatSpreadable</a></li><li><a href="#模式匹配符号">模式匹配符号</a></li><li><a href="#symbol-toprimitive">Symbol.toPrimitive</a></li><li><a href="#symbol-unscopables">Symbol.unscopables</a></li></ul></li></ul></li><li><a href="#set-数据结构">Set 数据结构</a><ul><li><a href="#weakset">WeakSet</a></li></ul></li><li><a href="#map">Map</a><ul><li><a href="#weakmap">WeakMap</a></li></ul></li><li><a href="#object扩展的功能和方法">Object扩展的功能和方法</a><ul><li><a href="#简写对象的属性和方法">简写对象的属性和方法</a></li><li><a href="#属性名关联外界变量">属性名关联外界变量</a></li><li><a href="#对象常用方法-包括es5和es6">对象常用方法(包括ES5和ES6)</a></li></ul></li><li><a href="#string的扩展功能和方法">String的扩展功能和方法</a><ul><li><a href="#模板字符串">模板字符串</a></li><li><a href="#string-raw">String.raw()</a></li><li><a href="#字符串方法-包括es5和es6">字符串方法(包括ES5和ES6)</a></li></ul></li><li><a href="#正则表达式的扩展功能和方法">正则表达式的扩展功能和方法</a><ul><li><a href="#命名捕获分组">命名捕获分组</a></li><li><a href="#正向断言">正向断言</a><ul><li><a href="#否定正向断言">否定正向断言</a></li></ul></li><li><a href="#反向断言">反向断言</a><ul><li><a href="#否定反向断言">否定反向断言</a></li></ul></li><li><a href="#dotall模式">dotAll模式</a><ul><li><a href="#u修饰符">u修饰符</a></li><li><a href="#y修饰符">y修饰符</a></li></ul></li></ul></li><li><a href="#array的扩展功能和方法">Array的扩展功能和方法</a><ul><li><a href="#展开运算符">展开运算符</a></li><li><a href="#数组常用方法-包括es5和es6">数组常用方法(包括ES5和ES6)</a></li></ul></li><li><a href="#迭代器-iterator">迭代器 (Iterator)</a><ul><li><a href="#迭代器协议和可迭代协议">迭代器协议和可迭代协议</a></li></ul></li><li><a href="#生成器-generator">生成器 (Generator)</a><ul><li><a href="#基本使用">基本使用</a></li><li><a href="#生成器交替迭代">生成器交替迭代</a></li><li><a href="#yield-与递归生成器">yield*与递归生成器</a></li><li><a href="#生成器函数的返回值">生成器函数的返回值</a></li><li><a href="#生成器的-return-和-throw-方法">生成器的 return 和 throw 方法</a></li></ul></li><li><a href="#promise">Promise</a><ul><li><a href="#promise的特点">Promise的特点</a></li><li><a href="#创建promise实例">创建Promise实例</a></li><li><a href="#promise请求失败重试效果">Promise请求失败重试效果</a></li><li><a href="#promise的优缺点">Promise的优缺点</a></li><li><a href="#promise的方法">Promise的方法</a></li></ul></li><li><a href="#async函数">async函数</a><ul><li><a href="#async-捕获错误">async 捕获错误</a></li><li><a href="#async-实现非阻塞的暂停">async 实现非阻塞的暂停</a></li><li><a href="#for-await循环-异步迭代器">for/await循环(异步迭代器)</a></li><li><a href="#async-控制并发数">async 控制并发数</a></li><li><a href="#转移promise执行函数">转移Promise执行函数</a></li></ul></li><li><a href="#代理和反射">代理和反射</a></li><li><a href="#class">class</a><ul><li><a href="#constructor-构造器">constructor(构造器)</a></li><li><a href="#私有属性">私有属性</a></li><li><a href="#类里面也可以使用迭代器">类里面也可以使用迭代器</a></li><li><a href="#class-的-getter和setter">class 的 getter和setter</a></li><li><a href="#class-的一些关键字">class 的一些关键字</a></li><li><a href="#es5继承和es6继承的区别">ES5继承和ES6继承的区别</a></li></ul></li><li><a href="#模块化">模块化</a><ul><li><a href="#es6-module">ES6 module</a><ul><li><a href="#export">export</a></li><li><a href="#import">import</a></li><li><a href="#可以通过一个总的文件来统一暴露所有的模块">可以通过一个总的文件来统一暴露所有的模块</a><ul><li><a href="#结构并分别暴露">结构并分别暴露</a></li></ul></li><li><a href="#import">import()</a></li></ul></li><li><a href="#commonjs-module">commonjs module</a><ul><li><a href="#module-对象">module 对象</a></li></ul></li><li><a href="#amd-module">AMD module</a></li><li><a href="#import-meta">import.meta</a></li></ul></li><li><a href="#时间复杂度和空间复杂度">时间复杂度和空间复杂度</a><ul><li><a href="#复杂度的表示方式">复杂度的表示方式</a></li><li><a href="#时间复杂度">时间复杂度</a></li><li><a href="#空间复杂度">空间复杂度</a><ul><li><a href="#空间复杂度的定义">空间复杂度的定义</a></li></ul></li><li><a href="#复杂度的优化">复杂度的优化</a></li></ul></li><li><a href="#运行时和编译时">运行时和编译时</a><ul><li><a href="#编译时">编译时</a></li><li><a href="#运行时">运行时</a></li></ul></li><li><a href="#chrome高级调试技巧">Chrome高级调试技巧</a><ul><li><a href="#一键重新发起请求">一键重新发起请求</a></li><li><a href="#快速发起请求">快速发起请求</a></li><li><a href="#复制javascript变量">复制JavaScript变量</a></li><li><a href="#复制打印对象">复制打印对象</a></li><li><a href="#快速复制属性路径">快速复制属性路径</a></li><li><a href="#复制请求响应">复制请求响应</a></li><li><a href="#获取elements面板选中的元素">获取Elements面板选中的元素</a></li><li><a href="#复制dom元素的信息">复制DOM元素的信息</a></li><li><a href="#截取一张全屏的网页">截取一张全屏的网页</a></li><li><a href="#一键展开所有dom元素">一键展开所有DOM元素</a></li><li><a href="#控制台引用上一次执行的结果">控制台引用上一次执行的结果</a></li><li><a href="#快速切换主题">快速切换主题</a></li><li><a href="#和-选择器">\$ 和 \$\$ 选择器</a></li><li><a href="#i直接在控制台安装npm包">\$i直接在控制台安装npm包</a></li><li><a href="#添加条件断点">添加条件断点</a></li><li><a href="#文件跳转和源代码行数跳转">文件跳转和源代码行数跳转</a></li><li><a href="#本地浏览去除跨域">本地浏览去除跨域</a></li></ul></li></ul></div><p></p> <p><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/ryanmcdermott/clean-code-javascript" target="_blank" rel="noopener noreferrer">干净的代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="标识符"><a href="#标识符" class="header-anchor">#</a> 标识符</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>在js中所有的可以由自主命名的都可以被称为标识符
例如：变量名、函数名、属性名都属于标识符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>命名一个标识符时需要遵守如下的规则：</p> <ul><li>标识符中可以含<strong>有字母、数字、_、$(不能使用@#)</strong></li> <li>标识符不能以<strong>数字开头</strong></li> <li>标识符不能是ES中的<strong>关键字或保留字</strong> <ul><li>关键字: 是指JS本身已经使用了的单词, 不能再使用它们充当变量名, 方法名</li> <li>保留字: 实际上就是预留的'关键字', 意思是现在虽然还不是关键字, 但是未来可能会成为关键字</li></ul></li> <li>标识符一般采用驼峰命名法
<ul><li>首字母小写, 每个单词的开头字母大写, 其余字母小写</li></ul></li></ul> <blockquote><p>js底层保存标识符时实际上是采用了Unicode编码, 所以理论上讲, 所有的utf-8中含有的内容都可以作为标识符</p></blockquote> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>数据类型指的就是字面量的类型
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在ES5中一共有六种数据类型</p> <ul><li>String 字符串</li> <li>Number 数值</li> <li>Boolean 布尔值</li> <li>Null 空值</li> <li>Undefined 未定义</li> <li>Object 对象</li></ul> <p>其中 <code>String Number Boolean Null Undefined</code> 属于基本数据类, 而 <code>Object</code> 属于引用数据类型</p> <p>js的变量数据类型只有程序在运行过程中, 根据等号右边的值来确定的</p> <p>js是动态语言 变量的类型是可以变化的</p> <h3 id="string"><a href="#string" class="header-anchor">#</a> String</h3> <ul><li>在js中字符串需要用引号引起来, 双引号或单引号都可以</li> <li>引号不能嵌套</li> <li>可以使用 <strong>length</strong> 属性来获取字符串的长度</li></ul> <h4 id="转义字符"><a href="#转义字符" class="header-anchor">#</a> 转义字符</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>在字符串中使用\作为转义字符, 
当表示一些特殊符号时可以使用\进行转义

    \&quot; 表示 &quot;
    \' 表示 '
    \n 表示 换行
    \t 表示 制表符 table键
    \\ 表示 \
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="number"><a href="#number" class="header-anchor">#</a> Number</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>在js中所有的数值都是Number类型, 包括整数和浮点数(小数)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>js中可以表示的数字的最大值: <code>Number.MAX_VALUE</code></p> <p>大于0的最小值: <code>Number.MIN_VALUE</code></p> <p>如果使用Number表示的数字超过了最大值, 则会返回一个<code>Infinity</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Infinity 表示正无穷
-Infinity 表示负无穷
使用typeof 检查 Infinity时也会返回 Number
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>NaN</code> 是一个特殊的数字, 表示 Not A Number 非数</p> <p><code>isNaN()</code> 可以用来判断是不是<code>NaN</code></p> <p><code>Object.is()</code>也可以用来判断<code>NaN</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="js浮点数计算问题"><a href="#js浮点数计算问题" class="header-anchor">#</a> js浮点数计算问题</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>如果使用js进行浮点数计算, 可能得到一个不准确的结果
  可以先各自 *100 再进行计算
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.30000000000000004</span>

<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">*</span><span class="token number">100</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">100</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="boolean"><a href="#boolean" class="header-anchor">#</a> Boolean</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>布尔值只有两个, 主要用来做逻辑判断
        true
            - 表示真, 当数值1看
        false
            - 表示假, 当数值0看
            - 0 '' NaN  null undefined 是false 其他的都为true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="null"><a href="#null" class="header-anchor">#</a> Null</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>类型的值只有一个, 就是null, 代表是空的
数值和null相运算相当于和0做运算

null这个值专门用来表示一个为空的对象

使用typpof检查一个null值时, 会返回object
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="undefined"><a href="#undefined" class="header-anchor">#</a> Undefined</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>类型的值只有一个, 就是undefined

当声明一个变量, 但是不给变量赋值时, 它的值就是undefined
    undefined和任何的数值做运算都是NaN
    undefined和字符串相加就是连起来
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="null-和-undefined-的区别"><a href="#null-和-undefined-的区别" class="header-anchor">#</a> null 和 undefined 的区别</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>null 是一个表示&quot;无&quot;的对象, 表示值被定义了, 定义为&quot;空值&quot;, 转为数值时为 0

undefined 是一个表示&quot;无&quot;的原始值, 根本不存在, 没有定义一说, 转为数值时为 NaN
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>null</code>表示&quot;没有对象&quot;, 即该处不应该有值, 典型用法是:</p> <ul><li><p>作为函数的参数, 表示该函数的参数不是对象</p></li> <li><p>作为对象原型链的终点</p></li></ul> <p><code>undefined</code>表示&quot;缺少值&quot;, 就是此处应该有一个值, 但是没有定义, 典型用法是:</p> <ul><li><p>变量被声明了, 但没有赋值时, 就等于undefined</p></li> <li><p>调用函数时, 应该提供的参数没有提供, 该参数等于undefined</p></li> <li><p>对象没有赋值的属性, 该属性的值为undefined</p></li> <li><p>函数没有返回值时, 默认返回undefined</p></li></ul> <h2 id="object"><a href="#object" class="header-anchor">#</a> Object</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>对象中的值都是 key:value 的结构, 属于一种复合的数据类型, 在对象中可以保存多种不同的数据类型的属性
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="object-的分类"><a href="#object-的分类" class="header-anchor">#</a> Object 的分类</h3> <p>内建对象</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES标准中定义的对象, 在任何ES的实现中都可以使用,
    比如：Math String Number Boolean Function Object...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>宿主对象</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>js运行环境提供的对象, 比如：BOM DOM
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>自定义对象</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>由开发人员自己创建的对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="对象的基本知识和操作"><a href="#对象的基本知识和操作" class="header-anchor">#</a> 对象的基本知识和操作</h3> <p>使用<code>new</code>创建对象</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var obj = new Object()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用对象字面量创建对象</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var obj = {}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>读取对象中的属性:</p> <ul><li><p>常规读取: <code>obj.name</code></p></li> <li><p>特殊的属性名读取/设置:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>obj['name']='张三'  // 以字符串'name'的形式设置
obj[name]           // 以变量name的形式读取
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>使用 <code>obj[变量名]</code> 这种形式去操作对象, 更加的灵活</p></blockquote></li></ul> <p>设置对象的属性值: <code>obj.name = '张三';</code></p> <p>删除对象的属性: <code>delete obj.name</code></p> <p><strong>in</strong> 运算符</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过该运算符可以检查一个对象或其原型链中中是否含有指定的属性
如果有则返回true, 没有则返回false

&quot;name&quot; in obj
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>枚举对象中的属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">用于枚举对象中的非符号键</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span>属性
使用<span class="token keyword">for</span><span class="token operator">...</span><span class="token keyword">in</span>语句<span class="token punctuation">,</span> 对象中有几个属性<span class="token punctuation">,</span> 循环体就执行几次

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> keys <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 数组也是对象所以也可以使用 for...in</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'key:'</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value:'</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><strong>for in</strong> 循环迭代的变量是 <strong>null</strong> 或 <strong>undefined</strong> 则不执行循环体</p></blockquote> <p>垃圾回收（GC）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>当一个对象没有任何的变量和属性对它进行引用, 此时这种对象就是一个垃圾
在js中拥有自动的垃圾回收机制, 会自动将这些垃圾对象从内存中销毁
只需要将不再使用的对象设置为null即可
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>使用 delete 关键字, 可以删除对象属性, 也可以删除对象(不推荐)</p></blockquote> <h3 id="基本数据类型和引用数据类型"><a href="#基本数据类型和引用数据类型" class="header-anchor">#</a> 基本数据类型和引用数据类型</h3> <p>基本数据类型</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>String Number Boolean Null Undefined
基本数据类型的值是直接在栈内存中存储, 值与值之间是独立存在
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引用数据类型</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Object
对象是保存到堆内存中的, 每创建一个新的对象, 就会在堆内存中开辟出一个新的空间, 而变量保存的是对象的内存地址(对象的引用)
如果两个变量保存的是同一个对象的引用, 当一个对象通过变量去修改属性时, 另一个也会受到影响(指向同一块内存空间)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当比较两个基本数据类型时, 就是比较值</p> <p>而比较两个引用数据类型时, 它是比较对象的内存地址</p> <p>如果两个对象是一模一样的, 但是地址不同, 它也会返回<code>false</code></p> <h2 id="function"><a href="#function" class="header-anchor">#</a> Function</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>函数也是一个对象, 也具有对象的功能
函数中可以封装一些功能（代码）, 在需要时可以执行这些功能（代码）
使用typeof检查一个函数时, 会返回 Function
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="函数的基本知识和操作"><a href="#函数的基本知识和操作" class="header-anchor">#</a> 函数的基本知识和操作</h3> <p>使用<code>new</code>创建函数, 可以实现类似<code>eval</code>函数的作用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;a,b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;return a + b;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>函数声明来创建函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>函数表达式创建函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>把函数存放到对象里面, 那这个函数就被称为这个对象的方法</p></blockquote> <h4 id="函数的参数"><a href="#函数的参数" class="header-anchor">#</a> 函数的参数</h4> <ul><li><p>可以在声明函数的<code>()</code>中来指定一个或多个形式参数(<strong>parameters</strong>), 声明形参就相当于在函数内部声明了对应的变量, 但是并没有赋值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>在调用函数时, 可以在<code>()</code>中指定实际参数(<strong>arguments</strong>), 实参将会赋值给函数中对应的形参</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <blockquote><p>调用函数时解析器不会检查实参的类型和实参的数量</p></blockquote> <h3 id="函数的两个隐含的参数"><a href="#函数的两个隐含的参数" class="header-anchor">#</a> 函数的两个隐含的参数</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>在调用函数时, 浏览器每次都会传递进两个隐含的参数
1.函数的执行上下文对象 this (这个后边说)
2.封装实参的对象 arguments
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="arguments"><a href="#arguments" class="header-anchor">#</a> arguments</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>arguments是一个类数组(伪数组), 它也可以通过索引操作数据, 也可以通过 length 获取长度
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>在调用函数时, 所传递的实参都会在<code>arguments</code>中保存</li> <li>即使不定义形参, 也可以通过<code>arguments</code>来使用实参只不过比较麻烦</li> <li>它里边有个属性叫做<code>callee</code>, 这个属性对应当前正在指向的函数</li></ul> <h3 id="函数的返回值"><a href="#函数的返回值" class="header-anchor">#</a> 函数的返回值</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以在函数体里使用 return 来设置函数的返回值
在函数中 return 后的语句都不会执行, 并且只会返回一个值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>如果函数中不写<code>return</code>, 则会默认返回<code>undefined</code></p></blockquote> <h3 id="函数的length"><a href="#函数的length" class="header-anchor">#</a> 函数的length</h3> <p>它表示该函数的形参个数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// fn1.length =&gt; 3</span>
<span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> <span class="token operator">...</span>b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// fn2.length =&gt; 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>注意: 使用<code>rest</code>剩余参数语法将忽略这个剩余参数</p></blockquote> <h3 id="立即执行函数"><a href="#立即执行函数" class="header-anchor">#</a> 立即执行函数</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>函数定义完, 立即被调用, 这种函数叫做立即执行函数(IIFE), 立即执行函数只会执行一次
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 匿名函数要用括号括起来不然会报错, 在后面加个括号就会立即执行, 还可以往里面传参数</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">形参</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>实参<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="函数的方法"><a href="#函数的方法" class="header-anchor">#</a> 函数的方法</h4> <p><code>call()</code>和<code>apply()</code>还有<code>bind()</code></p> <p>这三个方法都是函数的方法, 需要通过函数来调用</p> <p>当对函数调用<code>call()</code>和<code>apply()</code>都会立即调用函数执行</p> <ul><li><p>可以将一个对象指定为第一个参数, 此时这个对象将会成为函数执行时的 <code>this</code></p></li> <li><p><code>call()</code>和<code>apply()</code>不同的是参数的传递</p> <ul><li><p><code>call()</code>的参数是逐个传递的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>fun.call(obj,1,2);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>apply()</code>的参数是用数组统一传递</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>fun.apply(obj,[1,2]);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <p>当对函数调用<code>bind()</code>在绑定<code>this</code>后并不会立马执行, 而是返回一个新的函数</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var newFun = fun.bind(obj,1,2); 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="强制类型转换"><a href="#强制类型转换" class="header-anchor">#</a> 强制类型转换</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>指将一个类型强制转换为其他的数据类型
类型转换主要指, 将其他的数据类型, 转换为 String Number Boolean
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="其它数据类型转换为string"><a href="#其它数据类型转换为string" class="header-anchor">#</a> 其它数据类型转换为String</h3> <p><code>toString</code>方法</p> <ul><li>该方法不会影响原变量, 它会将转换的结果返回</li> <li>在js中几乎所有的数据类型都有<code>toString</code>方法</li></ul> <blockquote><p>注意：<code>null</code>和<code>undefined</code>这两个值没有<code>toString</code>方法, 如果调用它们的方法会报错</p></blockquote> <ul><li><code>String</code>函数
<ul><li>将被转换的数据作为值或变量传递给函数</li> <li>使用String函数做强制类型转换时, 对于<code>Number和Boolean</code>实际上就是调用的toString方法</li> <li>String函数 对于<code>null和undefined</code> <ul><li>它会将 null 直接转换为&quot;null&quot;(字符串)</li> <li>将 undefined 直接转换为&quot;undefined&quot;(字符串)</li></ul></li></ul></li></ul> <h3 id="其它数据类型转换为number"><a href="#其它数据类型转换为number" class="header-anchor">#</a> 其它数据类型转换为Number</h3> <p><code>Number()</code>函数</p> <ul><li>字符串 --&gt; 数字
<ul><li>如果是纯数字的字符串, 则直接转换为数字</li> <li>如果字符串中有非数字的内容, 则直接转换为NaN</li> <li>如果字符串中有非数字的内容, 则直接转换为NaN</li></ul></li> <li>布尔值 --&gt; 数字
<ul><li>true 转成 1</li> <li>false 转成 0</li></ul></li> <li>null --&gt; 转成数字 0</li> <li>undefined --&gt;  转成数字 NaN</li></ul> <p><code>parseInt()</code> 和 <code>parseFloat()</code></p> <ul><li><code>parseInt()</code> 方法
<ul><li>把一个字符串转换为一个整数</li> <li>还可以将一个字符串中的有效<code>整数</code>转换出来</li></ul></li> <li><code>parseFloat()</code> 方法
<ul><li>把一个字符串转换为一个浮点数</li> <li>还可以将一个字符串中的有效的<code>小数</code>转换出来</li></ul></li></ul> <blockquote><p>如果对非 String数据类型 使用 parseInt() 或 parseFloat() , 它会先将其转换为String</p></blockquote> <h3 id="其他的数据类型转换为boolean"><a href="#其他的数据类型转换为boolean" class="header-anchor">#</a> 其他的数据类型转换为Boolean</h3> <p><code>Boolean()</code> 函数</p> <ul><li><p>数字 --&gt; 布尔值</p> <ul><li>除了0和NaN,其余的都是true</li></ul></li> <li><p>字符串 --&gt; 布尔值</p> <ul><li>除了空串, 其余的都是true</li></ul></li></ul> <h2 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h2> <p><strong>单行注释</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 单行注释</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>多行注释</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
	多行注释
	多行注释
*/</span>

<span class="token comment">/* 也可以是单行的 */</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>特殊注释</strong></p> <p>TODO: <code>// TODO: 这里是说明</code></p> <p>如果代码中有该标识，说明在标识处有功能代码待编写，待实现的功能在说明中会简略说明</p> <p>FIXME: <code>// FIXME: 这里是说明</code></p> <p>如果代码中有该标识，说明标识处代码需要修正，甚至代码是错误的，不能工作，需要修复，如何修正会在说明中简略说明</p> <p>XXX: <code>// XXX: 这里是说明</code></p> <p>如果代码中有该标识，说明标识处代码虽然实现了功能，但是实现的方法有待商榷，希望将来能改进，要改进的地方会在说明中简略说明</p> <h2 id="运算符"><a href="#运算符" class="header-anchor">#</a> 运算符</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>运算符也叫操作符, 通过运算符可以对一个或多个值进行运算,并获取运算结果
比如：typeof就是一个运算符, 可以来获得一个值的类型, 它会将该值的类型以字符串的形式返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="算术运算符"><a href="#算术运算符" class="header-anchor">#</a> 算术运算符</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>+ 可以对两个值进行加法运算, 并将结果返回
	如果对两个字符串进行加法运算, 则会做拼串
任何值和字符串做加法运算, 都会先转换成字符串, 然后再和字符串做拼串的操作

- 可以对两个值进行减法运算, 并将结果返回 
	除了+号和字符串相加会转换成String外, 其他的所有运算都是转换成Number进行运算

* 可以对两个值进行乘法运算

/ 可以对两个值惊醒除法运算

% 取模运算（取余数）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>任何数除以0都是<code>infinity</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">9</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">99</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -Infinity</span>

<span class="token comment">// 0 除以 0 得NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="一元运算符"><a href="#一元运算符" class="header-anchor">#</a> 一元运算符</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>一元运算符, 只需要一个操作数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>+ 正号
	正号不会对数字产生任何的影响

- 负号
	负号可以对数字进行负号的取反

对于非Number类型的值
	它会先将其转换为Number, 然后再运算
    可以对一个其它的数据类型使用+, 来将其转换为number
    它的原理和Number()函数一样
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>对一个对象使用一元运算符对象会调用 <strong>valueOf()</strong> 或 <strong>toString()</strong></p></blockquote> <h4 id="自增或自减"><a href="#自增或自减" class="header-anchor">#</a> 自增或自减</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过自增或自减可以使变量在自身的基础上增加或减少1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>自增分成两种：后置递增(递减) 和  前置递增(递减)
<ul><li><code>a++</code> / <code>a--</code>的值等于原变量的值（自增前或自减前的值）</li> <li><code>++a</code> / <code>--a</code>的值等于新值（自增后或自减后的值）</li></ul></li></ul> <h3 id="逻辑运算符"><a href="#逻辑运算符" class="header-anchor">#</a> 逻辑运算符</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES5中为提供了三种逻辑运算符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>! 非</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以对一个值进行非运算(布尔值取反操作)
如果对非布尔值进行运算, 则会将其转换为布尔值, 然后再进行取反操作
    所以可以利用这该特点, 来将一个其他的数据类型两次反转换为布尔值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>&amp;&amp; 与</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&amp;&amp; 可以对符号两侧的值进行与运算并返回结果
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>运算规则</p> <ul><li>两个值中只要有一个值为false就返回false, 只有两个值都为true时, 才会返回true</li> <li>js中的 '与' 运算属于短路的 '与', 如果第一个值或表达式为false, 则不会再检查第二个值</li></ul> <p><code>|| 或</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>||可以对符号两侧的值进行或运算并返回结果
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>运算规则：</p> <ul><li>两个值中只要有一个值为true, 则返回true, 如果两个值都为false, 才返回false</li> <li>js中的 '或' 也属于短路的 '或', 如果第一个值或表达式为true, 则不会检查第二个值</li></ul> <p>&amp;&amp; || 非布尔值的情况</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>对于非布尔值进行与或运算时, 会先将其转换为布尔值, 然后再运算, 并且返回原值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>&amp;&amp;与运算：</p> <ul><li>如果第一个值为true, 则必然返回第二个值</li> <li>如果第一个值为false, 则直接返回第一个值</li></ul> <p>||或运算</p> <ul><li>如果第一个值为true, 则直接返回第一个值</li> <li>如果第一个值为false, 则必然返回第二个值</li></ul> <h3 id="隐式的类型转换总结"><a href="#隐式的类型转换总结" class="header-anchor">#</a> 隐式的类型转换总结</h3> <ul><li>任何值和字符串相加都会转换为<code>String</code>, 并做拼串操作
<ul><li>js对象转换为原始值时会根据预期或偏好来决定会先调用<code>toString</code>方法, 如果没有或返回的不是原始值则会再调用<code>valueOf</code>方法</li> <li>js对象转换原始值的规则就是: <code>Date</code>对象首先使用<code>toString</code>方法, 其他所有类型则首先调用<code>valueOf</code>方法</li></ul></li> <li>任何值做<code>- * + /</code> 运算时都会自动转换为<code>Number</code></li> <li>通过一元运算符进行自动的<code>Number</code>类型转换</li> <li>通过非运算进行自动的<code>Boolean</code>类型转换</li></ul> <h3 id="赋值运算符"><a href="#赋值运算符" class="header-anchor">#</a> 赋值运算符</h3> <ul><li>=   可以将符号右侧的值赋值为左侧的变量</li> <li>+= 可以加上符号右边的值再赋值给自己</li> <li>-=  可以减去符号右边的值再赋值给自己</li> <li>*=  可以乘以符号右边的值再赋值给自己</li> <li>/=  可以除以符号右边的值再赋值给自己</li> <li>%=  可以取模符号右边的值再赋值给自己</li></ul> <h3 id="关系运算符"><a href="#关系运算符" class="header-anchor">#</a> 关系运算符</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt;, &gt;=, &lt;, &lt;= 
通过关系运算符可以比较两个值之间的大小关系, 
如果关系成立它会返回true, 如果关系不成立则返回false
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>非数值的情况</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>对于非数值进行比较时, 会将其转换为数值然后再进行比较
如果符号两侧的值都是字符串时, 会分别比较字符串中的unidentified的编码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>任何关系运算符在涉及<strong>比较NaN</strong> 是都返回 <strong>false</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&gt;=</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="相等运算符"><a href="#相等运算符" class="header-anchor">#</a> 相等运算符 ==</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>相等运算符用来比较两个值是否相等, 返回布尔值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>当使用<code>==</code>来比表两个值时, 如果值的类型不同, 则会自动进行类型的转换, 将字符串转换为数值, 然后再比较</li></ul> <blockquote><ul><li>总结规律:
<ul><li>对象 == 非对象 ---&gt; 对象调用 <strong>valueOf()</strong> 或者 <strong>toString</strong>取的原始值</li> <li>对象 == 对象 ---&gt; 比较是否是同一个对象</li> <li>null == undefined ---&gt; 相等 和其他值不相等</li> <li>NaN == NaN ---&gt; 不相等</li> <li>除了以上三种, 其他的比较都是转换为数字</li></ul></li></ul></blockquote> <h4 id="不相等运算符"><a href="#不相等运算符" class="header-anchor">#</a> 不相等运算符 !=</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>不相等用来判断两个值是否不相等, 返回布尔值
不相等也会对比变量进行自动的类型转换, 如果转换后相等它也会返回false
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="全等运算符"><a href="#全等运算符" class="header-anchor">#</a> 全等运算符 ===</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>用来判断两个值是否全等, 它和相等类似, 不同的是它不会做自动的类型转换, 
如果两个值的类型不同, 直接返回false
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="不全等运算符"><a href="#不全等运算符" class="header-anchor">#</a> 不全等运算符  !==</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>用来判断两个值是否不全等, 和不相等类似, 不同的是它不会做自动的类型转换
 如果两个值的类型不同, 直接返回true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="三元运算符"><a href="#三元运算符" class="header-anchor">#</a> 三元运算符</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>条件表达式?语句1:语句2;

    执行的流程：
        条件运算符在执行时, 首先对条件表达式进行求值, 
         如果该值为true, 则执行语句1, 并返回执行结果
         如果该值为false, 则执行语句2, 并返回执行结果

        如果条件表达式的求值结果为一个非布尔值, 
         则会将其转换为布尔值然后再进行运算
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="逗号运算符"><a href="#逗号运算符" class="header-anchor">#</a> 逗号运算符</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>使用 , 可以分割多个语句, 一般可以在声明多个变量时使用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用逗号赋值赋值, 没什么用</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a = 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener noreferrer">运算符的优先级<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="流程控制语句"><a href="#流程控制语句" class="header-anchor">#</a> 流程控制语句</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>js中的程序是从上往下一行一行执行的, 通过流程控制语句可以控制程序执行流程, 使程序可以根据一定的条件来选择执行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>语句的分类：
<ul><li>条件判断语句</li> <li>条件分支语句</li> <li>循环语句</li></ul></li></ul> <h3 id="条件判断语句"><a href="#条件判断语句" class="header-anchor">#</a> 条件判断语句</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>使用条件判断语句可以在执行某个语句之前进行判断, 
    如果条件成立才会执行语句, 如果条件不成立则不执行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>if语句</p></li> <li><p>if...else...语句</p></li> <li><p>if...else if ...else</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>if(条件表达式){
    语句...
}else if(条件表达式){
    语句...
}else if(条件表达式){
    语句...
}else{
    语句...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <blockquote><p>条件表达式的结果可以是任意值, js会自动调用 <strong>Boolean函数</strong>转换为布尔值</p></blockquote> <h3 id="条件分支语句"><a href="#条件分支语句" class="header-anchor">#</a> 条件分支语句</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>条件分支语句也叫switch语句

语法：
    switch(条件表达式){
        case 表达式:
            语句...
            bleak;
        case 表达式:
            语句...
            bleak;
        case 表达式:
            语句...
            bleak;
        default:
            语句...
            break;
        }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>switch 语句在执行时会依次将 case 后的表达式的值和 switch 后的条件表达式进行<strong>全等比较</strong></li> <li>符合条件后当前 case 后的所有代码都会执行, 可以在 case 的后边跟着一个 break 关键字, 来退出 switch 语句</li> <li>如果所有的比较结果为false, 则只执行 default 后的语句</li></ul> <h3 id="循环语句"><a href="#循环语句" class="header-anchor">#</a> 循环语句</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过循环语句可以反复的执行一段代码多次
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>创建一个循环, 往往需要三个步骤
<ul><li>初始化一个变量</li> <li>在循环设置一个条件表达式</li> <li>定义一个更新表达式, 每次更新初始化变量</li></ul></li></ul> <p>while循环</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1.初始化变量
while(2.条件表达式){
    3.语句代码...
    4.更新表达式 
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>while语句执行流程:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>对条件表达式进行求值判断, 
如果值为true, 则执行循环体, 
循环体执行完毕以后, 继续对表达式进行判断
如果为true, 则继续执行循环体, 以此类推
如果值为false, 则终止循环
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>do...while循环</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1.初始化变量
do{
    2.语句代码...
    3.更新表达式
}while(4.条件表达式) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>do...while语句执行流程:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>do...while语句在执行时, 会先执行循环体一次, 
循环体执行完毕以后, 再对while后的条件表达式进行判断
如果结果为true, 则继续执行循环体, 执行完毕后继续判断以此类推
如果结果为false, 则终止循环
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>for循环</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>for(1.初始化表达式;2.条件表达式;4.更新表达式){
     3.语句...
   }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>for循环执行流程:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1.执行初始化表达式, 初始化变量(初始化表达式只会执行一次)
2.执行条件表达式, 判断是否执行循环
    如果为true, 则执行循环3
    如果为false, 终止循环
4.执行更新表达式, 更新表达式执行完毕继续重复执行②
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>for循环中三个部分都可以省略, 只写两个;; 此时循环是一个死循环会一直循环下去</p></blockquote> <p><code>break</code>和<code>continue</code>关键字</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>break和continue 关键字可以用来退出switch或循环语句
不能在if语句中使用break和continue
break关键字, 会立即终止离他最近的那个循环语句
而continue关键字则可以用来跳过离他最近当次循环, 再继续执行循环
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>可以使用标签语法来退出或跳过指定的循环</p></blockquote> <h2 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>作用域指的是一个变量的作用范围
在js中一个有两种作用域：全局作用域 和 函数作用域
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="全局作用域"><a href="#全局作用域" class="header-anchor">#</a> 全局作用域</h4> <ul><li>直接编写在<code>script</code>便签中的js代码, 都在全局作用域中</li> <li>全局作用域在页面打开时创建, 在页面关闭时销毁</li> <li>在全局作用域中有一个全局对象<code>window</code>,它代表的是一个浏览器的窗口, 它由浏览器创建, 可以直接使用</li></ul> <h4 id="变量和函数的声明提前"><a href="#变量和函数的声明提前" class="header-anchor">#</a> 变量和函数的声明提前</h4> <ul><li>使用<code>var</code>关键字声明变量, 会在所有的代码执行之前被<code>声明</code>(但是不会赋值)
<ul><li>但是如果不使用<code>var</code>关键字, 则变量<code>不会</code>被声明提前</li></ul></li> <li>使用<code>函数声明</code>形式创建的函数, 它会在所有的代码<code>执行之前</code>就被创建, 所以可以在函数声明代码之前就调用函数
<ul><li>使用<code>函数表达式</code>创建的函数, <code>不会</code>被声明提前, 所以不能在声明代码前调用</li></ul></li></ul> <h2 id="函数作用域"><a href="#函数作用域" class="header-anchor">#</a> 函数作用域</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>调用函数时创建函数作用域, 函数执行完毕以后, 函数作用域销毁

每调用一次函数就会创建一个函数作用域, 它们之间是相互独立的

在函数作用域中可以访问到全局作用域的变量, 在全局作用域中无法访问到函数作用域中的变量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>在函数中要访问全局变量可以使用<code>window</code>对象</p></li> <li><p>在函数作用域中也有声明提前的特性, 使用<code>var</code>关键字声明的变量, 会在函数中所有代码执行之前被声明, 函数声明也会在函数中所有的代码执行之前执行</p></li> <li><p>在函数中, 不使用关键字(如:var)声明的变量都会成为全局变量</p></li> <li><p>在函数中定义形参就相当于在函数作用域中声明了变量(并不会赋值, 会在传入实参的时候赋值)</p></li> <li><p>作用域链</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>当在函数作用域操作一个变量时, 它会在自身作用域中寻找, 如果有就直接使用, 如果没有则向上一级作用域中寻找, 
直到找到全局作用域, 如果全局作用域中依然没有找到, 则会报错 ReferenceError (引用错误)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h2 id="constructor-构造函数"><a href="#constructor-构造函数" class="header-anchor">#</a> constructor(构造函数)</h2> <p>构造函数就是一个普通的函数, 创建方式和普通的函数没有区别,</p> <p>普通函数是直接调用, 而构造函数需要使用 <code>new</code> 关键字来调用</p> <ul><li><p>构造函数的特点:</p> <ul><li>构造函数一般首字母大写</li> <li>使用<code>new</code>来创建这个构造函数的实例</li> <li>构造函数里使用了<code>this</code>关键字</li></ul></li> <li><p>构造函数的执行流程：</p> <ul><li><p>立即创建一个新的对象</p></li> <li><p>将新建的对象设置为函数中的<code>this</code>, 在构造函数中可以使用<code>this</code>来引用新建的对象</p></li> <li><p>逐行执行函数的代码</p></li> <li><p>将新建的对象作为返回值返回</p></li> <li><p>在构造函数里面返回一个对象, 会直接返回这个对象, 而不是执行构造函数后创建的对象</p></li> <li><p>通过使用一个构造函数创建的对象, 称为该构造函数的实例</p> <blockquote><p>箭头函数, 异步函数, 生成器函数都不能被当做构造函数</p></blockquote></li></ul></li></ul> <p><code>instanceof</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>可以检查一个对象是否是一个类的实例<span class="token punctuation">,</span> 返回布尔值
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>isPrototypeOf()</code></p> <p>用于测试一个对象是否存在于另一个对象的原型链上</p> <p><code>isPrototypeOf()</code> 与 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener noreferrer"><code>instanceof</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 运算符不同。在表达式 &quot;<code>obj instanceof Object</code>&quot;中，<code>obj</code> 的原型链是针对 <code>Object.prototype</code> 进行检查的，而不是针对 <code>Object</code> 本身</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>检测是否使用<code>new</code>关键字调用构造函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 new 关键字调用 new.target 属性会被填充</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 不使用 new 则在代码层面 new一下</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Person {}</span>
<span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Person {}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>还可以使用<code>this</code>来判断都可以</p></blockquote> <h3 id="prototype-原型对象"><a href="#prototype-原型对象" class="header-anchor">#</a> prototype(原型对象)</h3> <p>创建的每一个函数, 解析器都会向函数中添加一个属性叫<code>prototype</code>, 这个属性对应的是一个对象,</p> <p><code>prototype</code>里保存着<code>constructor</code>(<strong>构造函数</strong>) 的引用, <code>prototype</code>就是所谓的<strong>原型对象</strong></p> <p>如果函数作为普通的函数调用 <code>prototype</code> 没有任何作用</p> <p>当函数以构造函数形式调用时(<code>new</code>), 它创建的实例都会有一个隐含的属性 <strong>proto</strong></p> <p>实例对象的 <strong>proto</strong> 是可以访问到<code>constructor</code>(<strong>构造函数</strong>) 和<code>prototype</code>(<strong>原型对象</strong>)</p> <ul><li><p>当访问对象的一个属性或方法时, 他会先在对象的自身中寻找, 如果有则直接使用, 如果没有则会通过<code>__proto__</code>去构造函数的原型对象上找, 直找到顶层对象 <code>Object.prototype.__proto__</code> 还没有就返回<code>null</code>, 这个就是所谓的<code>原型链</code></p> <blockquote><p>构造函数才有<code>prototype</code> , 实例对象只有<code>__proto__</code>, 效果都一样名字不同而已</p></blockquote></li> <li><p><code>prototype</code>的作用就是存储一些公用的属性和方法, 让该构造函数所实例化的对象们都可以共享</p></li></ul> <h3 id="关于this的指向问题"><a href="#关于this的指向问题" class="header-anchor">#</a> 关于this的指向问题</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>this 默认就是存在的 每个作用域中都有 默认指向当前作用域中的对象(抽象的对象)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>以函数形式调用时, <code>this</code>永远都是<code>window</code></li> <li>以方法的形式调用时, <code>this</code>就是<code>调用方法的对象</code></li> <li>以构造函数的形式调用时, <code>this</code>是<code>新创建的那个对象</code></li> <li>使用<code>call()</code>, <code>apply()</code> 或 <code>bind()</code> 调用时, <code>this</code>就是函数方法<code>指定的那个对象</code></li> <li>以事件形式调用函数时, <code>this</code>就是当前触发的那个<code>事件的对象</code></li></ul> <h3 id="静态属性或方法"><a href="#静态属性或方法" class="header-anchor">#</a> 静态属性或方法</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>构造函数自身里的属性和方法是属于构造函数的, 通过 new 出来的实例也是拿不到的, 这个就被称之为叫 静态成员
只有在原型对象上的属性和方法才会被实例化对象得到
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p><code>hasOwnProperty()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以使用 hasOwnProperty() 来检查对象自身中是否含有该属性
    只有当对象自身中含有属性时, 才会返回true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h2 id="es5继承"><a href="#es5继承" class="header-anchor">#</a> ES5继承</h2> <h4 id="组合继承"><a href="#组合继承" class="header-anchor">#</a> 组合继承</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>特点: 结合了原型链继承和借用父类构造函数继承的优点
      原型链继承: 共有的方法能被继承下来  
      借用构造函数: 实例属性能被子类继承下俩

缺点: 调用了两次父类的构造函数
        1. 实例化子类对象 (多余的)
        2. 子类的构造函数内部 (必要的)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用父类构造函数使用 apply 改变里面的 this 为 Dog 的实例</span>
    <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 修改原型对象</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 构造器指向修改</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog<span class="token punctuation">;</span>
<span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'阿黄'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="寄生组合式继承"><a href="#寄生组合式继承" class="header-anchor">#</a> 寄生组合式继承</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>使用 Object.create(proto) 来创建一个指定原型对象的新对象
把子类的原型对象指向了 父类的原型对象
Dog.prototype = Object.create(Animal.prototype);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用父类构造函数使用apply改变里面的 this 为 Dog 的实例</span>
    <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用 Object.create(proto) 来创建一个指定原型对象的新对象为需要继承的构造函数的原型对象</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 构造器指向修改</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog<span class="token punctuation">;</span>
<span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'阿黄'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="array"><a href="#array" class="header-anchor">#</a> Array</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>数组也是一个对象, 它和普通的对象功能类似, 也是用来存储一些值的

不同的是普通对象是使用字符串作为属性名的, 而数组是使用数字作为索引来操作元素的
 
数组的存储性能比普通的对象要好, 在开发中经常使用数组来存储一些数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>数组索引（index）: 从0开始的整数就是数组索引</p></blockquote> <p>数组的基本知识和操作</p> <ul><li><p>使用 <code>new</code> 构造函数创建数组</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var arr = new Array();
使用typeof检查一个数组时, 会返回object
使用构造函数创建数组时, 也可以同时添加元素, 元素作为函数的参数传递, 元素之间使用,隔开
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>使用字面量来创建数组</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var arr = [];
使用字面量创建数组时, 同样可以在创建时就指定数组中的元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>伪数组</p> <ul><li>具有数组的 length 属性</li> <li>按照索引的方式进行存储</li> <li>它没有真正数组的一些方法<code>pop()</code>,<code>push()</code>等</li></ul></li> <li><p>数组中的值可以是任意的数据类型</p></li> <li><p>向数组中添加元素</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>数组[索引] = 值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>读取数组中的元素</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>数组[索引]
如果读取不存在的索引, 它不会报错而是返回undefined
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>数组的<code>length</code>属性</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>设置或返回数组中元素的长度
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>使用<code>length</code>属性添加属性值</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>数组[数组.lenth] = 值;
可以在数组的最后一个元素添加元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <blockquote><p>其实字符串也是可以使用数组的方式读取的, 只不过不能利用数组的方法和操作来修改字符串</p></blockquote> <h3 id="数组的常用方法"><a href="#数组的常用方法" class="header-anchor">#</a> 数组的常用方法</h3> <p>迭代方法:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>迭代(遍历)方法：forEach()、filter()、find()、map()、some()、every()...

语法:
	array.xxx(function(currentValue, index, arr))

currentValue：数组当前项的值
index：数组当前项的索引
arr：数组对象本身
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>forEach()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>打印出数组所有的信息包括值,索引,数组本身
在forEach里面的数组用return true不会终止迭代(循环)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>filter()</code> 和 <code>find()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>find 和 filter 都是不改变原数组的方法
find只查找出第一个符合条件的结果返回一个对象, 而filter返回全部符合条件的结果是一个数组
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>filter</code>小技巧:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>
<span class="token comment">// 等价于</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> e<span class="token punctuation">)</span>

<span class="token comment">// 结果都是:[1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>map()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>map() 不会改变原始数组
map() 方法按照原始数组元素顺序依次处理元素返回一个新的数组
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>some()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于检测数组中的元素是否满足指定条件, 返回值是布尔值
如果找到第一个满足条件的元素, 则终止循环, 不再继续查找
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>every()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于检测数组所有元素是否都符合指定条件, 与some方法类似, 不过every是检查所有的数组元素
如果数组中检测到有一个元素不满足, 则整个表达式返回 false, 且剩余的元素不会再进行检测
如果所有元素都满足条件, 则返回 true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>reduce()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>条件统计方法, 参数需要一个函数和第一次的默认返回值
arr.reduce(callback,[initialValue])
callback （执行数组中每个值的函数, 包含四个参数）

1、previousValue （上一次调用回调返回的值, 或者是提供的初始值（initialValue））
2、currentValue （数组中当前被处理的元素）
3、index （当前元素在数组中的索引）
4、array （调用 reduce 的数组）

initialValue （作为第一次调用 callback 的第一个参数）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// const result = arr.reduce((上一次的返回值, 数组的每一个元素) =&gt; {
//         return ...逻辑处理
//     }, 第一次返回值)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>reduceRight()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>和 reduce 方法类似不过, reduceRight是从后往前迭代 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>sort()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来对数组中的元素进行排序, 会影响原数组, 默认会按照Unicode编码进行排序
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 升序排序数字</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
    <span class="token comment">// 升序排列字符串</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>常规方法</p> <p><code>push()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>该方法可以向数组的末尾添加一个或多个元素, 并返回数组新的长度
将要添加的元素作为方法的参数传递
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>unshift()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>向数组开头添加一个或多个元素, 并返回新的数组长度
向前边插入元素以后, 其他的元素索引会依次调整
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>shift()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以删除数组的第一个元素,并将被删除的元素作为返回值返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>pop()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以删除数组的最后一个元素,并将被删除的元素作为返回值返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>indexOf()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回第一个参数元素在数组中的索引位置, 若没检索到, 则返回 -1
	支持负数表示从后到前计算
第二个参数表示从那个位置开始检索
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>注意: 检索空字符串会返回 0, 使用的比较方式类似于<code>===</code>, 无法比较<code>NaN</code></p></blockquote> <p><code>lastIndexOf()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>和 indexOf 使用方式一模一样只不过是从后向前检索
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>slice()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来从数组中提取指定元素
该方法不会改变元素的数组, 而是将截取到的元素封装到一个新数组中返回
参数： 
    1.截取开始位置的索引,包含开始索引
    2.截取结束位置的索引,不包含结束索引
        第二个参数可以省略不写,此时会截取从开始索引往后的所有元素
索引可以传递一个负值,如果传递一个负值则从后往前计算
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>splice()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用于删除/替换/插入数组中的指定元素, splice()会影响到原数组
参数： 
    第一个, 表示开始位置的索引
    第二个, 表示删除的数量
    第三个及以后的传递一些新的元素, 这些元素将会自动插入到开始位置索引前边
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将 'hello' 和 'js' 插入到 arr 索引为 1 的位置</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除 arr 索引从 3 开始的后 2 个元素</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'伍'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将 arr 索引为 4 的元素替换为 '伍'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>还可以只指定一个参数效果就和修改数组的<code>length</code>属性效果一样, 只不过会返回被删除的元素</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr1<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
arr2<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里会返回被删除的元素 [4, 5]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>concat()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以连接两个或多个数组, 并将新的数组返回
该方法不会对原数组产生影响, 不仅可以传递数组, 还可以传递元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 1, 2, 3]</span>
<span class="token comment">// concat 会打平数组</span>
arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
<span class="token comment">// 不能打平嵌套的数组</span>
arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, Array(3)]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>如果<code>concat</code>方法的参数(或<strong>this</strong>值)不是一个数组则会简单的把参数追加到新数组的末尾, 但是对于<strong>this</strong>数组或参数数组则会打平拼接到一起</p></blockquote> <p><code>join()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以将数组转换为一个字符串, 不会对原数组产生影响, 而是将转换后的字符串作为结果返回
在join()中可以指定一个字符串作为参数, 这个字符串将会成为数组中元素的连接符, 
     如果不指定连接符, 则默认使用 , 作为连接符
     
join方法刚好与 String.splice方法相反的操作
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3</span>
arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 2 3</span>
arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>
<span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ---------- 长度为9的-线</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>reverse()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用来反转数组(前边的去后边, 后边的去前边), 会直接修改原数组
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="date对象"><a href="#date对象" class="header-anchor">#</a> Date对象</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>在 js 中使用 Dath 来表示一个时间对象
如果直接使用构造函数创建一个 Date 对象, 则会封装为代码执行的时间
时间对象分 东八区时间 和 国际标准时间(格林威治标准时间), 中国默认就是东八区时间(相差八小时)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="date对象的方法"><a href="#date对象的方法" class="header-anchor">#</a> Date对象的方法</h3> <p><code>getFullYear()</code> <code>setYear()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取或设置当前日期对象的年份
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>不推荐使用 <code>getYear()</code></p></blockquote> <p><code>getMonth()</code> <code>setMonth()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取或设置当前时间对象的月份
getMonth 会返回0-11的值
            0表示1月
            1表示2月
            ...
            11表示12月
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>getDay()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前对象是周几
会返回一个0-6的值
    0表示周日
    1表示周一
    ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>getDate()</code> <code>setDate()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取或者设置当前日期对象是几日
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>getHours()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前日期对象的小时数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>getMinutes()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前日期对象的分钟数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>getSeconds()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前日期对象的秒数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>getMilliseconds()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前日期对象的毫秒数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>getTime()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前日期对象的时间戳
时间戳, 指的是从格林威治标准时间的1970年1月1日, 0时0分0秒
    到当前日期所花费的毫秒数（1秒 = 1000毫秒）
计算机底层在保存时间时使用的都是时间戳
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等价于 Date.now()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>setTime()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>设置当前日期对象的时间戳
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 当前时间加上30秒</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>Date.now()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回自 1970 年 1 月 1 日 00:00:00 (UTC) 到当前时间的毫秒数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>performance.now()</code></p> <p>返回一个精确到毫秒的  <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMHighResTimeStamp" target="_blank" rel="noopener noreferrer"><code>DOMHighResTimeStamp</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> t0 <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> t1 <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;test函数执行了&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;毫秒&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>toLocalexxx()</code></p> <p>根据本地时间把 Date 对象转换为字符串, 格式化类型可见<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat" target="_blank" rel="noopener noreferrer">Intl.DateTimeFormat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;2021/8/22 9:18:51&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;2021/8/22&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;9:18:51&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;2021-8-22 9:18:51&quot;</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">year</span><span class="token operator">:</span> <span class="token string">&quot;numeric&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">month</span><span class="token operator">:</span> <span class="token string">&quot;numeric&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2021年8月</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>toUTCString()</code></p> <p>将时间对象转换为 <strong>国际标准时间/格林威治</strong> 标准时间</p> <h2 id="相对日期格式"><a href="#相对日期格式" class="header-anchor">#</a> 相对日期格式</h2> <p>使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat" target="_blank" rel="noopener noreferrer"><code>Intl.RelativeTimeFormat</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>即可实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 指定语言</span>
<span class="token comment">// const rtf = new Intl.RelativeTimeFormat(&quot;en&quot;);</span>
<span class="token keyword">const</span> rtf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">'zh-Hans'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;second&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2秒钟后</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">&quot;minute&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15分钟前</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;hour&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8小时后</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;day&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2天前</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;week&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2周后</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;month&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5个月前</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quarter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2个季度后</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;year&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10年前</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="指定格式化"><a href="#指定格式化" class="header-anchor">#</a> 指定格式化</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> rtf1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&quot;zh-Hans&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf1<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;day&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1天前</span>


<span class="token comment">// 指定格式化</span>
<span class="token keyword">const</span> rtf2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>RelativeTimeFormat</span><span class="token punctuation">(</span><span class="token string">&quot;zh-Hans&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">numeric</span><span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span> <span class="token comment">// or &quot;always&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rtf2<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;day&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 昨天</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="math对象"><a href="#math对象" class="header-anchor">#</a> Math对象</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>Math和其他的对象不同, 它不是一个构造函数, 
它属于工具类不用创建对象, 它里边封装了数学运算相关的属性和方法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="math对象的方法"><a href="#math对象的方法" class="header-anchor">#</a> Math对象的方法</h3> <p><code>abs()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来计算一个数的绝对值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Math.ceil()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以对一个数值进行向上取整, 小数位有值就自动进1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Math.floor()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以对一个数值进行向下取整, 小数部分会被舍掉
使用按位非操作符(~~)更加方便
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>Math.round()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以对一个数进行四舍五入取整
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Math.random()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以生成一个0-1之间的随机数

生成一个0-x之间的随机数
    Math.round(Math.random()*x);

生成一个x-y之间的随机数
    Math.round(Math.random()*(y-x))+x;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>利用随机数就可以简单的写个生成<code>UUID</code>的方法如下:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">genUUID</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[xy]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> r <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">,</span>
          v <span class="token operator">=</span> c <span class="token operator">==</span> <span class="token string">'x'</span> <span class="token operator">?</span> r <span class="token operator">:</span> <span class="token punctuation">(</span>r <span class="token operator">&amp;</span> <span class="token number">0x3</span> <span class="token operator">|</span> <span class="token number">0x8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> v<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>Math.max()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以获取多个数中的最大值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Math.min()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以获取多个数中的最小值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Math.pow(x,y)</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回x的y次幂
使用求幂运算符(**)更加方便
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>Math.sqrt(x)</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于对一个数进行开方运算
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>toFixed(N)</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>保留小数 参数N表示保留几位小数(四舍五入)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="string的相关方法"><a href="#string的相关方法" class="header-anchor">#</a> String的相关方法</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>在底层字符串是以字符数组的形式保存的
一些数组的方法也可以应用到字符串中, 比如：length, 通过索引读取里面的字符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>length</code>属性</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来获取字符串的长度(空格也算)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>charAt()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以根据索引返回字符串指定位置的字符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>replace()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于在字符串中用一些字符替换另一些字符, 或替换一个与正则表达式匹配的字符串
支持链式调用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ret <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">2</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ab3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>trim()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>会把字符串的两端删除空白字符, 中间的空格不会删除, 不影响原字符串本身, 它返回的是一个新的字符串
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>charCodeAt()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取指定索引位置字符的字符编码（Unicode编码）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>String.formCharCode()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>这个属性比较特殊是通过String构造函数去调用的, 可以根据字符编码去获取字符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>concat()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来连接两个或多个字符串, 对原字符串不会产生影响, 作用和 + 一样
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>indexOf()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>如果字符串中含有该内容, 则会返回其第一次出现的索引, 如果没有找到指定的内容则返回-1
可以指定一个第二个参数, 指定开始查找的位置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>lastIndexOf()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>该方法用法和和indexOf()一样, 不同是indexOf是从前往后找, 而lastIndexOf是从后往前找
也可以指定开始查找的位置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>字符串的<code>indexOf</code>和<code>lastIndexOf</code>第二个参数传递负数会被当成0</p></blockquote> <p><code>slice()</code> 和 <code>substring()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以从字符串中截取指定的内容
不会影响字符串, 而是将截取到的内容返回
参数：
        第一个, 开始位置的索引（包括开始位置）
        第二个, 结束位置的索引（不包括结束位置）
            如果省略第二个参数, 则会截取到后边所有的字符
也可以传递一个负数作为参数, 负数的话将会从后边计算
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>substr()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用来截取字符串
 参数：
    第一个, 截取开始位置的索引
    第二个, 截取的长度
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>split()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以将一个字符串拆分为一个数组
参数：
    需要一个字符串作为参数, 将会根据该字符串去拆分数组
    如传递一个空串作为参数, 则会将, 每个字符都拆分为数组中的一个元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>toUpperCase()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将一个字符串转换为大写并返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>toLowerCase()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将一个字符串转换为小写并返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="regular-expression"><a href="#regular-expression" class="header-anchor">#</a> Regular Expression</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>正则表达式用于定义一些字符串的规则, 计算机可以根据正则表达式, 
来检查一个字符串是否符合规则, 或者将字符串中符合规则的内容提取出来
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://juejin.cn/post/7050007484953542692" target="_blank" rel="noopener noreferrer">掘金正则文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="正则表达式的相关知识和操作"><a href="#正则表达式的相关知识和操作" class="header-anchor">#</a> 正则表达式的相关知识和操作</h3> <ul><li><p>使用构造函数创建</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var 变量 = new RegExp(&quot;正则表达式&quot;,&quot;匹配模式&quot;);

使用 typeof 检查正则对象, 会返回 object
在构造函数中可以传递一个匹配模式作为第二个参数(模式修正符),
    可以是:
        i   忽略大小写   
        g   全局匹配模式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用 <code>RegExp</code>构造函数创建正则表达式时的注意点:</p> <ul><li><p>不用写两边外围的<code>/</code></p></li> <li><p>可以使用变量</p></li> <li><p><code>\</code>需要使用<code>\\</code>代替</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> nane <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nane<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\d</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">&quot;gi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等价于 /张三\d/gi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li> <li><p>字面量来创建正则表达式</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var reg = /正则表达式/匹配模式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>方括号</p> <p>方括号里的内容是或的关系</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
[ab] == a|b
[a-z] 任意的小写字母
[A-Z] 任意的大写字母
[A-z] 任意字母
[0-9] 任意数字
[^x] 除了x (内部取反的意思)
^[abc]$ 多选一
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>量词</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过量词可以设置一个内容出现的次数
量词只对它前边的一个内容起作用
量词之间不能有空格
{n} 正好出现n次
{n,m} 出现n-m次
{n,} 出现n次或n次以上
+ 至少一个, 相当于{1,}
* 0个或多个, 相当于{0,}
? 0个或1个, 相当于{0,1}, (可用于禁止贪婪)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>边界符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">^</span> <span class="token function">表示开头</span><span class="token punctuation">(</span><span class="token operator">^</span>写到方括号里是除了的意思<span class="token punctuation">,</span> 内部取反<span class="token punctuation">)</span>
$ 表示结尾
如果在正则表达式中同时使用<span class="token operator">^</span> <span class="token function">$则要求字符串必须完全符合正则表达式</span><span class="token punctuation">(</span>精确匹配<span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">^</span>JavaScript$<span class="token operator">/</span>  <span class="token comment">// 表示匹配独占一行的 JavaScript 字符串</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>元字符</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>. 表示除换行符以外的任意字符

在正则表达式中使用\作为转义字符
\. 表示 .
\\ 表示 \ 

\w  任意字母、数字、_  [A-z0-9_]
\W  除了字母、数字、_  [^A-z0-9_]
\d  任意的数字 [0-9]
\D  除了数字 [^0-9]
\s  空格
\S  除了空格
\b  单词边界
\B  除了单词边界
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>正则表达式的记忆方式: <code>d</code> 是 <strong>digit</strong> 代表数字, <code>s</code> 是 <strong>space</strong> 代表空白, <code>w</code> 是 <strong>word</strong> 代表单词, <code>d, s, w</code> 的大写形式恰好匹配与之相反的字符</p> <blockquote><p>在正则表达式中有一些特殊的标点符号需要在前面加上<code>\</code>转义, 例如: <code>\</code>需要使用<code>\\</code>,</p> <p>分不清那些标点符号需要转义的话可以给所有的标点符号都加上<code>\</code></p></blockquote></li> <li><p>修饰符</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>修饰符 可以在全局搜索中不区分大小写
var reg = /abc/igm;

i	执行对大小写不敏感的匹配
g	执行全局匹配(查找所有匹配而非在找到第一个匹配后停止)
m	执行多行匹配(^xxx&amp;)可以匹配每一行的开头和结尾

// 下面的匹配模式es6部分有细讲
s   (es6新引入)在s修饰符下.号可以匹配任意字符包括换行符
u 	(es6新引入)表示 Unicode 可以让正则匹配 \uxxx 的编码(匹配表情 中文)
y	表示有粘性的, 匹配一个结果效果和 ^ 一样多次匹配时会自动将下一次匹配的索引定到
	匹配的字符串的前一个位置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>任选 分组 和引用</p> <p>正则表达式的语法中也包括指定任选, 分组子表达式和引用前面 子表达式的特殊字符</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>| 表示正则里的 或
() 可以把括号里的当成一个分组, 可以被后 \n 引用
\n 可以引用第n个分组的的表达式
$n 在替换时使用匹配的组数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(abc)123\1</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">// \1表示引用第一个分组(abc) =&gt; abc123abc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>lastIndex</code>属性</p> <p><code>lastIndex</code> 属性是正则表达式的一个可读可写的整型属性, 它表示<strong>正则下一次匹配时的起始位置</strong></p> <p>会对使用了<code>g</code>和<code>y</code>的修饰符的 <code>match</code> <code>exec</code> <code>test</code>方法产生影响</p> <ul><li><p>初始状态下<code>lastIndex</code>的值为<strong>0</strong></p></li> <li><p>若成功匹配，<code>lastIndex</code>的值会被更新成<strong>被匹配字符串后面的第一个字符的index</strong>，或者可理解为<strong>被匹配字符串的最后一个字符index + 1</strong></p></li> <li><p>若匹配失败，<code>lastIndex</code>则被重置为0。</p></li> <li><p>如果继续使用原先的正则进行下一轮匹配，它则会从字符串<code>lastIndex</code>的位置开始进行</p></li></ul> <p>如下就是被<code>lastIndex</code>属性影响的结果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 匹配有 .jeg 的正则</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'test1.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'test2.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'test3.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'test4.jpg'</span><span class="token punctuation">,</span>
    <span class="token string">'test5.jpg'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>第一眼看上面的打印结果肯定全是 <code>true</code> 但是结果却是 <code>true false true false true</code></p> <p>打印一下<code>lastIndex</code>属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span> reg<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>结果:</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAACBCAYAAABThu0aAAAFu0lEQVR4nO2cT0gbWxTGvz66CCh0IwnJoBYEQaSBGOGBhS4EFw4azOq97GsVKsVNcNGNW3HxrCgo3Tc7E1JJoYKLB8nKKNhKoVAwyjRNyEaokN28xUySSaLPmeT4h/D9Vt4k987M5z33ntxzch7puq6DtM0f930DnQKFFIJCCkEhhaCQQlBIIR7f9w1IU0zEEXhdNlsubByEEfbewYV1BxTiO7rvVVovOOl0hxTiO7rP91k/qLyQ/VzfvkU6yLQLSH8qQ930I1h5acSPjakSthKFW7+6LdOuN5ccAkrO/NtiOvkMZkcvMa/5kFaOsQIA6EFSmzAe7HAPyjRqbQDZtRhC8ENbHDZfKSA+t4+FXbM51Y+j7TG4HTzQsz6PpeVB3xCQOi0B8FzXRQRbM9I9E4amRXC06TIeTotA0yLQtMb1p4SQcgx8NN5PRksIrZ3YvBVTxCG/OXYEyaEcAnMZFG31N0Rb2bZ8Pp/B1qrNy7eJuGkvfYzgzYjxd+9TF/Dtwp4Q+R9I7fYgWZ2dQPCvfqi7BaTz9q4dXBzHBnIIKDEoSgzKMqBGHT9CSwjv2i70WmaoeyYMbcZm1/wlUighpcSaxlRtX9+D8HYE4Wq7gPhcDupkj+0RWuXhuD/eLqgA5i1raNvkfyC164K6fLvrI+DQtN193YADU6vD2wUVv3Fm9i0m4ghZ1y/vANQpJ2vqDeQzmB3NAZtjd+JHOpuRIxNIRmMIjcawAMCRw+sdw7y1b9SPo83vCJxWPuBBeHscmNuHohzX+jnZuQ/3oEyXzIYLGweRu3HGATzSdR7sStBBDvn9QiGFoJBCUEghKKQQjy8uLu77HjoCuj9C0LSFoJBCUEghKKQQFFIICikEhRSihRPyE6xXo4QAotYooP1+6uY43s/c/sl1E+aBb0r6PpyFwX/pO68+6L5/vrYRSjfGeBn/1cYYrfJVf+f7oL/Lms2faf2ltd0GDk27hPNdYOmFnRn48CgmvmNlqh9/m1FO49S+IYTbIrLBr7qjfjgw+woNCQKoD+8CZlJBNdbTU5dwcNPY6U9lqJMDtbBFNe59iXPAUSJCI/aEbBRoOmauddaYzQnW//VB0yaqNzk7eoz1F8N1Qvwf2TUzQWD7avGzazGEvvXjSDNiOMVEHAFlz4GYtUwMI3ukG8mDfmC0gLM8EGwjvmPPtEcmzOwHP5ZgzJLmTIthvLHOPu8A1Cngy5nDvJvVn8he+cYJ0qsubCzXAmHumUEsoYT0oZMLFBCfiyFwOgit+g/oRl+bQTJR0643OwN10n7/4GIEScQQqiQJWCOI+Qt8QRkr1QhmjSUH97gyvW9MhIqV5C+RAjDvYIyrEBPSiFNb1yxjvUvd0K+R4GIE2mKtf2DtibHOep/gGVxQW8539OD5pAuAp7bZACie/Qaig20nJYg55OenZWCqC71mu5jI1G0azjGSomoM43m0jIXl1ndY958eqLs5vK2k+eUzePu6LOKFODzYNZxqNOyk1vesjnoSx9h6ajq8jRuW5XPGzt68Y1+VHNC8fDjZudHkkDd6Ba3CE3Ih+F1bCAopBIUUgkIKQSGFoJBCMNNCCPqRQtC0haCQQlBIISikEBRSCAopBIUU4uH8FlEIlmIQgKUYRGApBpZiYCmGGizFIARLMQjxcNwflmKwCUsxWGAphmvhCbkQHeSQ3y8UUggKKQSFFIJCCsEEASHo/ghB0xaCQgpBIYWgkEJQSCEopBAUUgiWYmAphlZgKQYRWIqBpRhYiqEelmK4EZZiYCkGp7AUgwlLMbAUA7EPv2sLQSGFoJBCUEghKKQQFFIIZloIQT9SCJq2EBRSCAopBIUUgkIKQSGFoJBCPJzfIgrBUgwCsBSDCCzFwFIMLMVQg6UYhGApBiEejvvDUgw2YSkGCyzFcC08IReigxzy+4VCCkEhhaCQQlBIIZggIATdHyFo2kJQSCH+A6S6KIervwMnAAAAAElFTkSuQmCC" alt="image-20220204165749635"></p> <p>可以在每次循环匹配时手动重置<code>lastIndex</code>属性来避免</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    reg<span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span> reg<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true 9 打印5次</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>在使用一个正则表达式对多个字符串使 <code>match</code> <code>exec</code> <code>test</code>方法匹配时避免使用<code>g</code>或者<code>y</code>修饰符, 或者手动更正一下<code>lastIndex</code>属性</p></blockquote></li></ul> <h3 id="和正则相关的字符串方法"><a href="#和正则相关的字符串方法" class="header-anchor">#</a> 和正则相关的字符串方法</h3> <p><code>test()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>使用这个方法可以用来检查一个字符串是否符合正则表达式的规则, 返回布尔值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>split()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以将一个字符串拆分成一个数组
方法中可以传递一个正则表达式作为参数, 这样方法将会根据正则表达式去拆分字符串
split()方法即使不指定全局匹配, 也会将匹配到的内容全部拆分
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>search()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以搜索字符串中是否含有指定内容
如果搜索到指定内容, 则会返回第一次出现的索引, 如果没有搜索到则返回-1
它可以接受一个正则表达式作为参数, 然后会根据正则表达式去检索字符串
serach()方法只会查找第一个, 即使设置了全局匹配也没用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>match()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以根据正则表达式, 从一个字符串中将符合条件的内容提取出来, 返回一个数组
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'我的网站是: https://www.baidu.com'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\w+)\:\/\/([\w\.\w]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// https://www.baidu.com</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// https</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// www.baidu.com </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>全局匹配模式下, <code>match</code>方法会匹配到所有的内容封装到一个数组中返回, 即使只查询到一个结果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  ['10', '15', '5', '20']</span>
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'---'</span><span class="token punctuation">)</span> <span class="token comment">// 10---15---5---20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>分组情况下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'我的网站是: https://www.baidu.com'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;协议&gt;\w+)\:\/\/(?&lt;地址&gt;[\w\.]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>groups<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {协议: 'https', 地址: 'www.baidu.com'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>replace()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以将字符串中指定的内容替换成新的内容
参数：
    1.被替换的内容, 可以接受一个正则表达式作为参数
    2.新的内容, 可以是一个空串这样就会删除匹配到的内容
    3.返回值是一个替换完毕的新字符串
默认只会替换第一个可以加上g修饰符替换全局
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@我叫张三@ @你好啊@</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\@</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// #我叫张三# #你好啊#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>replace</code>方法还可以通过<code>$n</code>来引用分组表达式匹配的文本, 非常强大</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'你好 这本书叫&quot;三国演义&quot;'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&quot;(.*?)&quot;$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">sg</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;&lt;$1&gt;&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 匹配以&quot;结尾的两个&quot;&quot;中间的任意内容</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 你好 这本书叫&lt;&lt;三国演义&gt;&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>引用分组名</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'你好 这本书叫&quot;三国演义&quot;'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&quot;(?&lt;书名分组&gt;.*?)&quot;$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">sg</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;&lt; $&lt;书名分组&gt; &gt;&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 你好 这本书叫&lt;&lt; 三国演义 &gt;&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>指定函数处理</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'10进制: 15 加上 5 等于 20'</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> index<span class="token punctuation">,</span> text</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// val 匹配到的字符, index 索引位置, text 源文本</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 替换数字为十六进制</span>
str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// a进制: f 加上 5 等于 14</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>如果正则表达式里有分组则还会收到一个对象, 属性名是分组名, 属性值是匹配的文本</p></blockquote> <p><code>exec()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>在一个指定字符串中执行一个搜索匹配。
返回一个数组, 其中存放匹配的结果。如果未找到匹配, 则返回值为 null
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 准备一个字符串</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;a href='http://www.baidu.com'&gt;百度一下&lt;/a&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 提取 url 与 标签文本</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;a href='(.*)'&gt;(.*)&lt;\/a&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token comment">// 执行</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0: 整个字符串  1: &quot;http://www.baidu.com&quot;  2: &quot;百度一下&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://www.baidu.com</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 百度一下</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="禁止贪婪"><a href="#禁止贪婪" class="header-anchor">#</a> 禁止贪婪</h3> <p>正则表达式在进行重复匹配时，默认是<strong>贪婪匹配模式</strong>，也就是说会尽量匹配更多内容，但是有的时候并不希望匹配更多内容，这时可以通过<code>?</code>进行修饰来禁止重复匹配</p> <table><thead><tr><th>使用</th> <th>说明</th></tr></thead> <tbody><tr><td><code>*?</code></td> <td>重复任意次, <strong>但尽可能少重复</strong></td></tr> <tr><td><code>+?</code></td> <td>重复1次或更多次, <strong>但尽可能少重复</strong></td></tr> <tr><td><code>??</code></td> <td>重复0次或1次, <strong>但尽可能少重复</strong></td></tr> <tr><td><code>{n,m}?</code></td> <td>重复n到m次, <strong>但尽可能少重复</strong></td></tr> <tr><td><code>{n,}?</code></td> <td>重复n次以上, <strong>但尽可能少重复</strong></td></tr></tbody></table> <h2 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h2> <p><strong>Document Object Model</strong> 文档对象模型, 它把<code>HTML</code>文档当做一个对象, 这个对象就是<code>document</code>对象, 这个对象主要定义了处理网页内容的方法和接口</p> <ul><li><p>文档</p> <p>文档表示的就是整个的HTML网页文档</p></li> <li><p>对象</p> <p>对象表示将网页中的每一个部分都转换为了一个对象</p></li> <li><p>模型</p> <p>使用模型来表示对象之间的关系, 这样方便获取对象</p></li></ul> <h3 id="节点"><a href="#节点" class="header-anchor">#</a> 节点</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>节点Node, 是构成网页的最基本的组成部分, 网页中的每一个部分都可以称为是一个节点, 是构成HTML文档最基本的单元
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>常用节点分为四类
<ul><li>文档节点：整个HTML文档</li> <li>元素节点：HTML文档中的HTML标签</li> <li>属性节点：元素的属性</li> <li>文本节点：HTML标签中的文本内容</li></ul></li></ul> <h4 id="文档节点-document"><a href="#文档节点-document" class="header-anchor">#</a> 文档节点（document）</h4> <ul><li><p>文档节点document, 代表的是整个HTML文档, 网页中的所有节点都是它的子节点</p></li> <li><p>document对象作为window对象的属性存在的, 不用获取可以直接使用</p></li> <li><p>通过该对象可以在整个文档访问内查找节点对象, 并可以通过该对象创建各种节点对象</p></li></ul> <h4 id="元素节点-element"><a href="#元素节点-element" class="header-anchor">#</a> 元素节点（Element）</h4> <ul><li><p>HTML中的各种标签都是元素节点, 这也是最常用
的一个节点</p></li> <li><p>浏览器会将页面中所有的标签都转换为一个元素节点,
可以通过document的方法来获取元素节点</p></li></ul> <h4 id="获取元素节点"><a href="#获取元素节点" class="header-anchor">#</a> 获取元素节点</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过document对象调用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.title</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 代表的是页面的标题</span>
document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>document.getElementById()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过id属性获取一个元素节点对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.getElementsByTagName()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过标签名获取一组元素节点对象, 返回一个类数组对象
getElementsByTagName(&quot;*&quot;), 可以获取页面的所有元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>document.getElementsByName()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过name属性获取一组元素节点对象, 返回一个类数组对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.getElementsByClassName()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以根据元素的class属性值查询到一组元素节点对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.querySelector()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>需要一个选择器的字符串作为参数, 可以根据一个css选择器来查询一个元素节点对象
总会返回唯一的一个元素, 如果满足条件的元素有多个, 那么它只会返回第一个
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>document.querySelectorAll()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>和querySelector()类似, 不同的是它会将符合条件的全部元素封装到一个数组中返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.write()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以向body中输出一个内容
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.all</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>代表的是页面中所有的元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.documentElement</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>保存的是html的根标签
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.body</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>保存的是body的引用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.elementFromPoint(x,y)</code></p> <p>根据收到的x, y坐标返回一个DOM元素</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">elementFromPoint</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>利用这个方法, 可以实现高度当前鼠标下的元素的功能, 如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 记录上一次的元素和背景颜色 </span>
<span class="token keyword">let</span> preEl<span class="token punctuation">;</span>
<span class="token keyword">let</span> preBackgroundColor<span class="token punctuation">;</span>

<span class="token keyword">const</span> onmousemove <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pageX<span class="token punctuation">,</span> pageY <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
  <span class="token comment">// 根据坐标获取指定的元素</span>
  <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">elementFromPoint</span><span class="token punctuation">(</span>pageX<span class="token punctuation">,</span> pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pageX<span class="token punctuation">,</span> pageY<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 记录背景颜色</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>preEl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    preEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> preBackgroundColor<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 记录当前的值</span>
    preBackgroundColor <span class="token operator">=</span> el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">;</span>
    preEl <span class="token operator">=</span> el<span class="token punctuation">;</span>
    
    <span class="token comment">// 修改背景颜色</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 鼠标移动事件</span>
document<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> onmousemove<span class="token punctuation">;</span>

<span class="token comment">// 防抖</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><code>document.body.contentEditable</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使网页可编辑</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>contentEditable <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="获取元素节点的属性"><a href="#获取元素节点的属性" class="header-anchor">#</a> 获取元素节点的属性</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>需要读取元素节点的属性可以直接使用  元素.属性名
注意：读取class属性不能采用这种方式, 需要采用 元素.className 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>checked</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过多选框的checked属性可以来获取或设置多选框的选中状态
true  选中
false 没选中
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>nodeValue</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>访问文本节点的文本内容
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>setAttribute</code></p> <p>设置元素属性, 注意: 设置的值总是会被字符串化</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 通过 setAttribute 函数设置到该元素上</span>
box<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-test'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这样设置对应的元素还是被禁用, false 会被 字符串化变成 'false'</span>
btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 还直接设置到 DOM 对象上</span>
box<span class="token punctuation">[</span><span class="token string">'data-test'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>getAttribute</code></p> <p>获取元素属性的值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><code>getAttribute</code>函数获取的值是初始值, 无法获取被动态改变的值(还是初始值), 例如: 文本框的<code>value</code>属性</p></blockquote> <p><code>removeAttribute</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>删除元素的属性值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>hasAttribute()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>判断元素是否有指定的属性值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>dataset.属性名</code></p> <p>DOM对象中有一个<code>dataset</code>属性(<a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Howto/Use_data_attributes" target="_blank" rel="noopener noreferrer">自定义数据集<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), 该属性引用了HTML元素中的<code>data-xxx</code>对应的属性值,</p> <p>可以通过 <code>dataset.属性名</code> 获取, 设置的话直接 <code>dataset.属性名 = xxx</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>box<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="获取元素节点的子节点"><a href="#获取元素节点的子节点" class="header-anchor">#</a> 获取元素节点的子节点</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过具体的节点调用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>childNodes</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>作为节点的属性使用, 会获取包括文本在内的所有节点
根据DOM标准, 标签间的空白也会当成文本节点
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>children</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前元素的所有子元素(子标签), 以数组的形式返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>firstChild</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取到当前元素的第一个子节点（包括空白文本节点）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>firstElementChild</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前元素的第一个子元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>lastChild</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取到当前元素的第一个子节点（包括空白文本节点）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>lastElementChild</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前元素的第一个子元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>contains</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回一个布尔值, 来表示传入的节点是否为该节点的后代节点
语法: node.contains( otherNode )
  - node 是否包含otherNode节点
  - otherNode 是否是node的后代节点
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="获取父节点和兄弟节点"><a href="#获取父节点和兄弟节点" class="header-anchor">#</a> 获取父节点和兄弟节点</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过具体的节点调用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>div.parentNode</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取当前节点的父节点
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>div.previousSibling</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>前一个兄弟节点(也会获取到空白的文本)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>div.previousElementSibling</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取前一个兄弟元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>div.nextSibling</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>元素节点之后的兄弟节点（包括文本节点、注释节点）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>div.nextElementSibling</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回指定元素之后的下一个兄弟元素（相同节点树层中的下一个元素节点）

只返回元素节点之后的兄弟元素节点（不包括文本节点、注释节点）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="其他属性或方法"><a href="#其他属性或方法" class="header-anchor">#</a> 其他属性或方法</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过具体的节点调用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>innerHTML</code></p> <p>通过这个属性可以获取到<strong>元素内部</strong>的html代码, 对于自结束标签没有意义</p> <p><code>outerHTML</code></p> <p>通过这个属性可以获取到包含<strong>元素自身</strong>的html代码, 对于自结束标签可以获取到自己</p> <p><code>innerText</code></p> <p>该属性可以获取到元素内部的文本内容, 它和<strong>innerHTML</strong>类似, 不同的是它会<strong>自动将html的标签去除</strong></p> <p>赋值带有html标签的字符串时, <strong>不会转换</strong>为html元素</p> <p><strong>innerText</strong> 可以用来将容器内的元素只包含文本(不会转义特殊字符)</p> <p>只需要自己赋值给自己就行了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// html</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;box1&quot;</span><span class="token operator">&gt;</span>
    hello div
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">-</span>li1<span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">-</span>li2<span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">-</span>li3<span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    
<span class="token comment">// js</span>
<span class="token keyword">const</span> box1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box1<span class="token punctuation">.</span>innerText <span class="token operator">=</span> box1<span class="token punctuation">.</span>innerText<span class="token punctuation">;</span> <span class="token comment">// 保留换行</span>
                                            <span class="token comment">/*
                                                hello div
                                                -li1-
                                                -li2-
                                                -li3-
                                            */</span>

<span class="token comment">// 赋值给 innerHTML 没有空格</span>
box1<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> box1<span class="token punctuation">.</span>innerText<span class="token punctuation">;</span> <span class="token comment">// 没有换行 hello div -li1- -li2- -li3-</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><code>tagName</code> 或 <code>nodeName</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>该属性返回元素的标签名(始终是大写的)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>cloneNode()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>克隆一个节点
参数: true 深克隆, 克隆所有的子节点
	  false 浅克隆, 只克隆自己
	  
语法: box1.cloneNode(true)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>cloneNode 方法不会复制 js 相关的属性, 如: 事件处理程序</p></blockquote> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView" target="_blank" rel="noopener noreferrer"><code>scrollIntoView()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以让指定元素滚动到页面的指定位置
语法: 
	div.scrollIntoView({behavior: 'smooth', block:'center', inline: &quot;nearest&quot;});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用 scrollIntoView 可以实现简单的导航电梯</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// html</span>
<span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;div&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;div&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;div&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token comment">// css</span>
body<span class="token punctuation">{</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 400vh<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>nav<span class="token punctuation">{</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> fixed<span class="token punctuation">;</span>
    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token literal-property property">right</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
    <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>div<span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>
    background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>
    margin<span class="token operator">-</span>bottom<span class="token operator">:</span> 100vh<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// js</span>
<span class="token keyword">const</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.nav li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> divS <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        divS<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">'smooth'</span><span class="token punctuation">,</span> <span class="token literal-property property">block</span><span class="token operator">:</span><span class="token string">'start'</span><span class="token punctuation">,</span> <span class="token literal-property property">inline</span><span class="token operator">:</span> <span class="token string">&quot;nearest&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><code>contains()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回的是一个布尔值，来表示传入的节点是否为该节点的后代节点
语法: 
	node.contains(要判断的节点)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent" target="_blank" rel="noopener noreferrer"><code>textContent()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>返回一个节点及其后代的文本内容(还可以设置文本节点的内容)</p> <blockquote><p><strong>注意:</strong> <code>textContent</code> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/innerText" target="_blank" rel="noopener noreferrer"><code>HTMLElement.innerText</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 容易混淆，但这两个属性在<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent#%E4%B8%8E_innertext_%E7%9A%84%E5%8C%BA%E5%88%AB" target="_blank" rel="noopener noreferrer">重要方面有不同之处<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType" target="_blank" rel="noopener noreferrer"><code>nodeType</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>表示节点的类型</p> <table><thead><tr><th style="text-align:left;">常量</th> <th style="text-align:left;">值</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>Node.ELEMENT_NODE</code></td> <td style="text-align:left;"><code>1</code></td> <td style="text-align:left;">一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element" target="_blank" rel="noopener noreferrer"><code>元素</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 节点，例如 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/div" target="_blank" rel="noopener noreferrer"><code>](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/p) 和 [</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</td></tr> <tr><td style="text-align:left;"><code>Node.TEXT_NODE</code></td> <td style="text-align:left;"><code>3</code></td> <td style="text-align:left;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element" target="_blank" rel="noopener noreferrer"><code>Element</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Attr" target="_blank" rel="noopener noreferrer"><code>Attr</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中实际的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Text" target="_blank" rel="noopener noreferrer"><code>文字</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>Node.CDATA_SECTION_NODE</code></td> <td style="text-align:left;"><code>4</code></td> <td style="text-align:left;">一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CDATASection" target="_blank" rel="noopener noreferrer"><code>CDATASection</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，例如 <code>&lt;!CDATA[[ … ]]&gt;</code>。</td></tr> <tr><td style="text-align:left;"><code>Node.PROCESSING_INSTRUCTION_NODE</code></td> <td style="text-align:left;"><code>7</code></td> <td style="text-align:left;">一个用于XML文档的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/ProcessingInstruction" target="_blank" rel="noopener noreferrer"><code>ProcessingInstruction</code> (en-US)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，例如 <code>&lt;?xml-stylesheet ... ?&gt;</code> 声明。</td></tr> <tr><td style="text-align:left;"><code>Node.COMMENT_NODE</code></td> <td style="text-align:left;"><code>8</code></td> <td style="text-align:left;">一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Comment" target="_blank" rel="noopener noreferrer"><code>Comment</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 节点。</td></tr> <tr><td style="text-align:left;"><code>Node.DOCUMENT_NODE</code></td> <td style="text-align:left;"><code>9</code></td> <td style="text-align:left;">一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document" target="_blank" rel="noopener noreferrer"><code>Document</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 节点。</td></tr> <tr><td style="text-align:left;"><code>Node.DOCUMENT_TYPE_NODE</code></td> <td style="text-align:left;"><code>10</code></td> <td style="text-align:left;">描述文档类型的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DocumentType" target="_blank" rel="noopener noreferrer"><code>DocumentType</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 节点。例如 <code>&lt;!DOCTYPE html&gt;</code> 就是用于 HTML5 的。</td></tr> <tr><td style="text-align:left;"><code>Node.DOCUMENT_FRAGMENT_NODE</code></td> <td style="text-align:left;"><code>11</code></td> <td style="text-align:left;">一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DocumentFragment" target="_blank" rel="noopener noreferrer"><code>DocumentFragment</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 节点</td></tr></tbody></table> <p><code>cloneNode()</code></p> <p>返回调用该方法的节点的一个副本(克隆)</p> <p>接受一个参数, 表示是否采用<strong>深度克隆</strong>,如果为<code>true</code>,则该节点的所有后代节点也都会被克隆,如果为<code>false</code>,则只克隆该节点本身</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> boxClone <span class="token operator">=</span> box<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="文本节点"><a href="#文本节点" class="header-anchor">#</a> 文本节点</h4> <ul><li>文本节点表示的是HTML标签以外的文本内容, 任意非HTML的文本
都是文本节点</li> <li>它包括可以字面解释的纯文本内容</li> <li>文本节点一般是作为元素节点的子节点存在的</li> <li>获取文本节点时, 一般先要获取元素节点。在通过元素节点获取文本节点</li></ul> <h3 id="script标签中的文本"><a href="#script标签中的文本" class="header-anchor">#</a> script标签中的文本</h3> <p>设置<code>script</code>标签的<code>type=&quot;text/x-custom-data&quot;</code>将会使的这个标签不会解析js代码,</p> <p>但还是会被插入到DOM树中, 但是可以在其上面存储任意的文本数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script id<span class="token operator">=</span><span class="token string">&quot;scrText&quot;</span> data<span class="token operator">=</span><span class="token string">&quot;我是script标签中保存的数据&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text/x-custom-data&quot;</span><span class="token operator">&gt;</span>
    我是script标签内的数据
    可以存任意的文本数据
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'不会打印, 会被当次纯文本'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">const</span> scr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'scrText'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>scr<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 标签属性</span>
    <span class="token comment">// 以下结果都一样(保留换行格式的文本)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>scr<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>scr<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>scr<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="属性节点-attr"><a href="#属性节点-attr" class="header-anchor">#</a> 属性节点（Attr）</h3> <ul><li>属性节点表示的是标签中的一个一个的属性, 这里要注意的是属性节点并非是元素节点的子节点, 而是元素节点的一部分, 可以通过<code>attributes</code>属性获取</li> <li>可以通过元素节点来获取指定的属性节点</li></ul> <h3 id="html-attributes-和-dom-properties"><a href="#html-attributes-和-dom-properties" class="header-anchor">#</a> HTML Attributes 和 DOM Properties</h3> <p><strong>HTML Attributes</strong> 是指定义在 HTML 标签上的属性, 例如: <code>id=&quot;my-input&quot;, type=&quot;text&quot;, value=&quot;foo&quot;</code>, 当浏览器解析完成这些HTML代码时, 会创建一个与之相符的 DOM 元素对象, 然后开发者可以通过 JavaScript 代码来读取这该 DOM 对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;my-input&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;foo&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这个 DOM 会包含很多属性(properties) , 这些属性就是所谓的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/attributes" target="_blank" rel="noopener noreferrer"><strong>DOM Properties</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>; 很多 HTML Attributes 在 DOM 对象上都有与之同名的属性, 例如上面例子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 该 DOM 元素的属性集合</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my-input 对应 HTML Attributes 中的 id=&quot;my-input&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// text 对应 HTML Attributes 中的 type=&quot;text&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo 对应 HTML Attributes 中的 value=&quot;foo&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>但是 <strong>DOM Properties</strong> 和 <strong>HTML Attributes</strong> 的属性名称不总是一模一样, 比如: <strong>HTML Attributes</strong> 中的<code>class</code>属性对应的 DOM 的属性叫: <code>className</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;my-input&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;foo&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;my-class-input&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>

<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token comment">// 获取 DOM 元素上的 HTML Attributes class 值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my-class-input</span>

<span class="token comment">// 通过 getAttribute 函数读取 HTML Attributes class 属性的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// my-class-input</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>还有 <strong>DOM Attributers</strong> 中在 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent" target="_blank" rel="noopener noreferrer"><code>textContent</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以设置元素的文本内容, 但是并没有与之对应的 <strong>HTML Attributes</strong></p> <blockquote><p>一句话总结: <strong>HTML Attributes</strong>的作用是设置与之对应的 <strong>DOM Attributers</strong> 的初始值</p></blockquote> <h3 id="dom增删改操作"><a href="#dom增删改操作" class="header-anchor">#</a> DOM增删改操作</h3> <p><code>insertAdjacentHTML()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以直接把字符串格式元素添加到父元素中
支持追加字符串的子元素

语法:
    元素.insertAdjacentHTML('插入的位置','插入的字符串')

位置属性(要带字符串使用):
    beforebegin 插入到元素自身的前面
    afterbegin  插入到元素内部第一个子节点之前
    beforeend   插入到元素内部最后一个子节点之后
    afterend    插入到元素自身的后面
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>insertAdjacentText()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>只能插入纯文本元素添加到父元素中
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>document.createElement()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用于创建一个元素节点对象, 它需要一个字符串标签名作为参数, 
	并将创建好的元素节点对象作为返回值返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>document.createTextNode()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以创建一个文本对象节点, 需要一个文本内容作为参数,
	将会根据文本内容创建文本节点, 并将新的节点返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>appendChild()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>向一个父节点中添加一个新的子节点
不支持追加字符串的子元素
语法：
    父节点.appendChild(子节点);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>append()</code></p> <p>在父节点的<strong>最后一个子节点之后</strong>插入一个或一组节点</p> <blockquote><p>和<code>appendChild</code>的区别就是可以插入多个节点, 接受字符串作为参数</p></blockquote> <p><code>prepend()</code></p> <p>在父节点的<strong>第一个子节点之前</strong>插入节点, 可接受字符串</p> <p><code>insertBefore()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以在指定的子节点前插入一个新的子节点
注意: 如果节点在页面中存在则会移动该节点

语法：
    父节点.insertBefore(要插入的节点, 参照节点);
   	// 参照节点为 null 效果和 appendChild 一样 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>replaceChild()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以使用指定的子节点替换已有的子节点
语法：
    父节点.replaceChild(新节点, 旧节点);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> newDiv<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>remove()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>删除指定的DOM元素
参数:需要删除的元素
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>removeChild()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以删除一个子节点
语法：父节点.removeChild(子节点);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="dom操作css样式"><a href="#dom操作css样式" class="header-anchor">#</a> DOM操作css样式</h4> <p>修改css样式</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过js修改元素的样式
    语法：元素.style.样式名 = 样式值
如果css的样式名中含有-, 需要将这种样式名修改为驼峰命名法
通过style属性设置的样式都是内联样式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>cssText</code></p> <p>该属性用于设置或者返回元素声明的内联(<code>style</code>)样式(同时修改多个属性)</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>div.style.cssText = <span class="token string">&quot;width:100px; height:100px; background-color:red;&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>需要注意的是直接使用<code>div.style.cssText = ...</code>赋值会覆盖掉之前的内联(<code>style</code>)样式, 可以直接使用拼接的方式:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意: 别漏了前面的 ; 号</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">+=</span><span class="token string">&quot;; color:blue;&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>classList</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回元素的类名, 作为 DOMTokenList 对象
该属性用于在元素中添加, 移除及切换 CSS 类
classList 属性是只读的, 但你可以使用 add() 和 remove() 方法修改它

    length 属性返回类列表中类的数量
    add(class1, class2, ...) 在元素中添加一个或多个类名, 如果指定的类名已存在, 则不会添加
    contains(class) 返回布尔值, 判断指定的类名是否存在
    item(index) 返回元素中索引值对应的类名
    remove(class1, class2, ...) 移除元素中一个或多个类名, 移除不存在的类名, 不会报错
    toggle(class, true|false) 在元素中切换类名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>getComputedStyle</code></p> <p>返回一个对象，该对象保存(<strong>只读</strong>)着计算好的元素的CSS属性和值, 有些属性还会返回<code>auto</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="其他的属性"><a href="#其他的属性" class="header-anchor">#</a> 其他的属性</h4> <p><code>disabled</code></p> <p><strong>disabled</strong> 属性可设置或返回元素是否禁用, 可用于页面主题切换</p> <p><code>clientWidth</code> 和 <code>clientHeight</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>这两个属性可以获取元素的可见宽度和高度
这些属性都是不带px的,返回的一个数字,可以直接进行计算
会获取元素的高度,包括内容区和内边距,不包括边框
这些属性都是只读的,不能修改
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>offsetWidth</code> 和 <code>offsetHeight</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取元素的整个宽度和高度, 包括内容区 内边距和边框
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>offsetParent</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以获取当前元素的定位祖先元素
会获取离当前元素最近的开启了定位的祖先元素
    如果所有的祖先都没有开启定位, 则返回body
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>offsetLeft</code> 和 <code>offsetTop</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>当前元素相对于其定位祖先元素的水平偏移量和垂直偏移量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>scrollWidth</code> 和 <code>scrollHeight</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以获取元素整个滚动区域的宽度和高度
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>scrollLeft</code> 和 <code>scrollTop</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>获取水平和垂直滚动条滚动的距离

当满足 scrollHeight - scrollTop == clientHeight
说明垂直滚动条滚到底了

当满足 scrollWidth - scrollLeft == clientWidth
说明水平滚动条滚到底了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>requestFullscreen()</code></p> <p>用于发出异步请求使元素进入全屏模式</p> <blockquote><p>这个方法只能在用户交互或者设备方向改变的时候调用，否则将会失败</p></blockquote> <p><code>getClientRects()</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>可以获取<span class="token constant">DOM</span>在文档中的位置信息和本身的信息<span class="token punctuation">,</span> <span class="token literal-property property">包括如下信息</span><span class="token operator">:</span>
    x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">,</span>top<span class="token punctuation">,</span>bottom<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right
<span class="token literal-property property">语法</span><span class="token operator">:</span> 
	element<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> box1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>box1<span class="token punctuation">.</span><span class="token function">getClientRects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>getBoundingClientRect()</code></p> <p>效果和 <code>getClientRects()[0]</code> 的结果是一样的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> box1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box1<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>document.visibilityState</code></p> <p>可以判断当前页面是否被隐藏<code>hidden</code>, 会返回(<code>hidden</code>/<code>visible</code>)其中之一的字符串</p> <h2 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h2> <p>事件, 就是文档或浏览器窗口中发生的一些特定的交互瞬间
JavaScript 与 HTML 之间的交互是通过事件实现的</p> <h3 id="事件对象"><a href="#事件对象" class="header-anchor">#</a> 事件对象</h3> <p>当事件的响应函数被触发时, 浏览器每次都会将一个事件作为参数传递进响应函数,</p> <p>在事件对象中封装了当前事件的一切信息, 可以传递一个形参接受这个对象</p> <p><code>target</code>属性</p> <p>事件对象的<strong>target</strong>表示的是触发事件的对象, <strong>事件源对象</strong></p> <p><code>currentTarget</code>属性</p> <p>事件对象的<strong>currentTarget</strong>表示的是事件定义时所在的对象, <strong>绑定事件的对象</strong></p> <p><code>type</code>属性</p> <p>表示事件的类型</p> <p><code>timeStamp</code>属性</p> <p>表示事件发生的时间戳, 可以用来计算两个事件的事件差</p> <p><code>isTrusted</code>属性</p> <p>如果事件是浏览器自身触发时为<code>true</code>, <strong>js</strong> <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/dispatchEvent" target="_blank" rel="noopener noreferrer">派发事件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>为<code>false</code></p> <p><code>event.preventDefault()</code></p> <p>取消默认行为</p> <p><code>event.stopPropagation()</code></p> <p>取消冒泡</p> <p><code>event.stopImmediatePropagation()</code></p> <p>取消同一事件的其他事件监听器被调用</p> <h3 id="事件句柄"><a href="#事件句柄" class="header-anchor">#</a> 事件句柄</h3> <p>原生写法需在事件句柄前加上<code>on</code>(<strong>全部小写</strong>)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>取消默认行为 <code>return false</code></p></blockquote> <p>而使用 <code>addEventListener</code> 方法绑定的事件 <strong>不加 on</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取消默认行为</span>
    event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取消冒泡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th style="text-align:center;">事件名称</th> <th>描述</th> <th>常用的地方</th></tr></thead> <tbody><tr><td style="text-align:center;">mousemove</td> <td>鼠标在元素中移动时触发</td> <td></td></tr> <tr><td style="text-align:center;">contextmenu</td> <td>鼠标右键点击的事件</td> <td></td></tr> <tr><td style="text-align:center;">click</td> <td>鼠标左键点击</td> <td>*</td></tr> <tr><td style="text-align:center;">dblclick</td> <td>鼠标左键双击</td> <td></td></tr> <tr><td style="text-align:center;">abort</td> <td>图像的加载被中断</td> <td></td></tr> <tr><td style="text-align:center;">change</td> <td>内容被改变时</td> <td>多选框</td></tr> <tr><td style="text-align:center;">input</td> <td>文本框内容发生变化之后</td> <td>文本框</td></tr> <tr><td style="text-align:center;">keypress</td> <td>文本框内容发生变化之前, 调用 <code>e.preventDefault()</code>可以阻止输入</td> <td>文本框</td></tr> <tr><td style="text-align:center;">textInput</td> <td>可编辑表单的值<strong>增加</strong>时触发,</td> <td></td></tr> <tr><td style="text-align:center;"></td> <td><strong>e.data</strong> 表示增加的值,</td> <td></td></tr> <tr><td style="text-align:center;">click</td> <td>当用户点击某个对象时触发</td> <td>*</td></tr> <tr><td style="text-align:center;">dblclick</td> <td>当用户双击某个对象时调用的事件句柄</td> <td></td></tr> <tr><td style="text-align:center;">error</td> <td>错误事件, 加载资源错误等</td> <td></td></tr> <tr><td style="text-align:center;">focus</td> <td>元素获得焦点</td> <td>文本框</td></tr> <tr><td style="text-align:center;">blur</td> <td>元素失去焦点</td> <td>文本框</td></tr> <tr><td style="text-align:center;"></td> <td><strong>document.hasFocus(DOM)</strong>, 判断DOM对象是否获得焦点</td> <td></td></tr> <tr><td style="text-align:center;"></td> <td><strong>document.activeElement</strong>, 实时获取获得焦点的DOM对象</td> <td></td></tr> <tr><td style="text-align:center;">keydown</td> <td>某个键盘按键被按下</td> <td></td></tr> <tr><td style="text-align:center;">keypress</td> <td>某个键盘按键被按下并松开</td> <td></td></tr> <tr><td style="text-align:center;">keyup</td> <td>某个键盘按键被松开</td> <td></td></tr> <tr><td style="text-align:center;">load</td> <td>文档或其他资源完成加载</td> <td>*</td></tr> <tr><td style="text-align:center;">error</td> <td>页面报错或图像加载失败时</td> <td></td></tr> <tr><td style="text-align:center;">mousedown</td> <td>鼠标按钮被按下</td> <td></td></tr> <tr><td style="text-align:center;">mouseup</td> <td>鼠标按键被松开</td> <td></td></tr> <tr><td style="text-align:center;">mousemove</td> <td>鼠标被移动</td> <td></td></tr> <tr><td style="text-align:center;">mouseout</td> <td>鼠标从某元素移开</td> <td></td></tr> <tr><td style="text-align:center;">mouseover</td> <td>鼠标移到某元素之上</td> <td></td></tr> <tr><td style="text-align:center;">mouseenter</td> <td>鼠标指针穿过（进入）被选元素时</td> <td></td></tr> <tr><td style="text-align:center;">onmouseleave</td> <td>事件在鼠标移出元素时触发</td> <td></td></tr> <tr><td style="text-align:center;">onmouseenter</td> <td>事件在鼠标指针移动到元素上时触发</td> <td></td></tr> <tr><td style="text-align:center;">reset</td> <td>重置按钮被点击</td> <td></td></tr> <tr><td style="text-align:center;">resize</td> <td>窗口被重新调整大小</td> <td>*</td></tr> <tr><td style="text-align:center;">select</td> <td>文本被选中</td> <td></td></tr> <tr><td style="text-align:center;">submit</td> <td><strong>type = &quot;submit&quot;</strong> 的按钮被点击</td> <td>提交表单</td></tr> <tr><td style="text-align:center;">unload</td> <td>页面卸载(一般是一个页面切换到另一个页面触发)</td> <td></td></tr> <tr><td style="text-align:center;">scroll</td> <td>页面滚动条滚动时触发</td> <td></td></tr> <tr><td style="text-align:center;">wheel</td> <td>鼠标滚轮滚动时触发</td> <td></td></tr> <tr><td style="text-align:center;">contextmenu</td> <td>事件在元素中用户右击鼠标时触发并打开上下文菜单</td> <td></td></tr> <tr><td style="text-align:center;"></td> <td>配合 <strong>e.preventDefault()</strong> 可以自定义菜单项</td> <td></td></tr> <tr><td style="text-align:center;">pointer-events: none</td> <td>指针事件不做出反应</td> <td></td></tr> <tr><td style="text-align:center;">online</td> <td>浏览器能够访问网络, 并且<code>navigator.online</code>的值为<code>true</code> <code>online</code>事件会触发</td> <td></td></tr> <tr><td style="text-align:center;">offline</td> <td>浏览器失去网络连接时, 并且<code>navigator.onLine</code>的值为 <code>false</code> <code>offline</code>事件会触发</td> <td></td></tr> <tr><td style="text-align:center;">hashchange</td> <td>监听地址栏的 hash</td> <td></td></tr> <tr><td style="text-align:center;">popstate</td> <td>监听网页的改变, 如前进, 后退</td> <td></td></tr> <tr><td style="text-align:center;">beforeunload</td> <td>页面卸载之前</td> <td>*</td></tr> <tr><td style="text-align:center;">visibilitychange</td> <td>页面隐藏时触发(切换标签页)</td> <td></td></tr> <tr><td style="text-align:center;">DOMContentLoaded</td> <td>当初始的 <strong>HTML</strong> 文档被完全加载和解析完成之后触发，无需等待样式表、图像和子框架的完全加载</td> <td></td></tr> <tr><td style="text-align:center;">readystatechange</td> <td>document.readyState的属性会变化, 有 loading, interactive, complete等, complete表示载入完成</td> <td></td></tr></tbody></table> <blockquote><p>更多事件句柄见<a href="https://www.w3school.com.cn/jsref/dom_obj_event.asp" target="_blank" rel="noopener noreferrer">W3C<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onbeforeunload</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e <span class="token operator">=</span> window<span class="token punctuation">.</span>event <span class="token operator">||</span> e<span class="token punctuation">;</span>
    e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&quot;确定离开当前页面吗？&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">在拖动目标上触发事件</span> <span class="token punctuation">(</span>源元素要先设置dragstart <span class="token operator">=</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token operator">:</span>
    drag     元素正在拖动时触发
    dragstart  用户开始拖动元素时触发
    dragend    用户完成元素拖动后触发
    dragover  元素拖动结束

<span class="token literal-property property">释放目标时触发的事件</span><span class="token operator">:</span>
    dragenter <span class="token operator">-</span> 当被鼠标拖动的对象进入其容器范围内时触发此事件
    dragover <span class="token operator">-</span> <span class="token function">当被拖动的对象在另一对象容器范围内拖动时触发此事件</span><span class="token punctuation">(</span>需先取消默认行为e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    dragleave <span class="token operator">-</span> 当被鼠标拖动的对象离开其容器范围内时触发此事件
    drop <span class="token operator">-</span> 在一个拖动过程中<span class="token punctuation">,</span> <span class="token function">释放鼠标键时触发此事件</span><span class="token punctuation">(</span>需先取消默认行为 e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
注意： 在拖动元素时<span class="token punctuation">,</span> 每隔 <span class="token number">350</span> 毫秒会触发 drag 事件
        拖拽的默认行为 e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

拖拽的数据交换
    数据交换的对象就是事件对象的属性 event<span class="token punctuation">.</span>dataTransfer 
    dataTransfer 的两个核心方法是 <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 和 <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 用于设置数据<span class="token punctuation">,</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 用语接收数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="事件的冒泡"><a href="#事件的冒泡" class="header-anchor">#</a> 事件的冒泡</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>所谓的冒泡指的就是事件的向上传导<span class="token punctuation">,</span> 当后代元素上的事件被触发时<span class="token punctuation">,</span> 其祖先元素相同的事件也会被触发
大部分情况冒泡都是有用的<span class="token punctuation">,</span> 如果不需要发生事件的冒泡可以通过事件对象来取消冒泡<span class="token punctuation">,</span> <span class="token literal-property property">如下</span><span class="token operator">:</span> 

event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 将事件的冒泡设置为不冒泡</span>
event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将事件的冒泡设置为不冒泡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="事件的委派"><a href="#事件的委派" class="header-anchor">#</a> 事件的委派</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>指将事件统一绑定给元素共同的祖先元素, 这样后代元素上的事件触发时(包括后添加的), 会一直冒泡到祖先元素, 
	而通过祖先元素的响应函数来处理事件
事件委派是利用了冒泡, 通过冒泡可以减少事件绑定的次数, 提高程序的性能
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="事件的绑定"><a href="#事件的绑定" class="header-anchor">#</a> 事件的绑定</h3> <p>对象.事件 = 函数</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>使用 对象.事件 = 函数  的形式绑定响应函数
它只能同时为一个元素的一个事件绑定一个响应函数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener" target="_blank" rel="noopener noreferrer"><code>addEventListener()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以为元素绑定响应函数
 参数:
        1.事件的字符串名称
        2.回调函数, 当事件被触发时该函数会被调用
        3.是否在捕获阶段触发事件, 默认为false, 还可以为一个对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'widnow click event'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 只执行一次</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="事件的解绑"><a href="#事件的解绑" class="header-anchor">#</a> 事件的解绑</h3> <p>用什么方式绑定事件,就应该用对应的方式解绑事件</p> <p>通过<code>addEventListener()</code>添加的事件处理程序只能使用<code>removeEventListener()</code>来移除,</p> <p>移除时传入的参数与添加处理程序时使用的参数必须相同,</p> <p>这也意味着通过<code>addEventListener()</code>添加的匿名函数无法移除</p> <ol><li><p>解绑事件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>对象.on事件名字 = 事件处理函数  ---&gt;  绑定事件
对象.on事件名字 = null;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>解绑事件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>对象.addEventListener(&quot;没有on的事件类型&quot;,命名函数,false);---绑定事件
对象.removeEventListener(&quot;没有on的事件类型&quot;,函数名字,false);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="事件的传播"><a href="#事件的传播" class="header-anchor">#</a> 事件的传播</h3> <p>事件传播分成三个阶段:</p> <ol><li><p>捕获阶段</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>在捕获阶段时从最外层的祖先元素, 向目标元素进行事件的捕获, 但是默认此时不会触发事件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>目标阶段</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>事件捕获到的目标元素, 捕获结束, 开始在目标元素上触发事件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>冒泡阶段</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>事件从目标元素向它的祖先元素传递, 依次触发祖先元素上的事件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <p>使用 <strong>document.createEvent()</strong> 可以模拟事件, 详细见 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createEvent" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>有一些特殊的事件, 如<code>Windows</code>的<code>load</code>, <code>Worker</code>对象的<code>message</code>等都是不需要传播的</p></blockquote> <h3 id="派发事件"><a href="#派发事件" class="header-anchor">#</a> 派发事件</h3> <p><code>windows</code>和<code>DOM</code>对象上都有<code>dispatchEvent</code>方法可以派发<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CustomEvent" target="_blank" rel="noopener noreferrer">自定义事<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我要派发事件了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 派发事件</span>
    window<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token string">'我是test事件派发的参数'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 绑定是一个自定义事件</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是自定义事件 test'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="文档的加载"><a href="#文档的加载" class="header-anchor">#</a> 文档的加载</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>浏览器在加载页面一个页面时, 是按照自上向下的顺序加载的, 读取到一行就运行一行, 
如果将script标签写到页面的上边, 在代码执行时, 页面没有加载DOM对象也没有加载, 
会导致无法获取到DOM对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>可以将js代码编写到页面的下部就可以在页面加载完毕以后再执行js代码</p></li> <li><p><strong>onload</strong>事件会在整个页面加载完毕以后才触发</p> <p>为<code>window</code>绑定一个<strong>onload</strong>事件该事件对应的响应函数将会在页面加载完毕之后执行
这样可以确保代码执行时所有的DOM对象已经加载完毕</p></li></ul> <h4 id="脚本运行时机-async-与-defer"><a href="#脚本运行时机-async-与-defer" class="header-anchor">#</a> 脚本运行时机: async 与 defer</h4> <p>浏览器再遇到<strong>script</strong>标签时会默认运行对应的脚本, 这有可能会严重拖慢(**文件很大或引入script标签)**网页解析和渲染过程,</p> <p>好在可以通过<strong>script</strong>标签的<code>defer</code>和<code>async</code>属性指定浏览器对脚本的不同执行方式,</p> <p>这两个属性是布尔值属性, 只对使用了<code>src</code>属性的<strong>script</strong>标签生效</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script defer src<span class="token operator">=</span><span class="token string">&quot;./defer.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script <span class="token keyword">async</span> src<span class="token operator">=</span><span class="token string">&quot;./async.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="执行顺序"><a href="#执行顺序" class="header-anchor">#</a> 执行顺序</h5> <p><code>defer</code>属性会让浏览器把脚本推迟到文档完全加载和解析之后在执行,</p> <p><code>async</code>属性则会让浏览器<strong>尽早</strong>的运行脚本, 但在脚本运行下载解析过程<strong>不会阻塞文档解析</strong></p> <p>如果<strong>script</strong>同时存在这两个属性, 则<code>async</code>生效</p> <p>推迟(<code>defer</code>)的脚本会按照它们在文档出现的顺序执行, 而异步(<code>async</code>)脚本会在它们加载完成后运行, 所以它们的顺序无法预测</p> <p>带有<code>type=&quot;module&quot;</code>属性的脚本默认会在脚本加载完成后执行, 相当于加上了<code>defer</code>属性, 可以使用<code>async</code>属性覆盖这个默认行为</p> <blockquote><p>使用了<code>defer</code>和<code>async</code>属性的脚本就尽量不要使用<code>document.write()</code>方法了</p></blockquote> <h2 id="bom"><a href="#bom" class="header-anchor">#</a> BOM</h2> <p><strong>Browser Object Mode</strong>l 浏览器对象模型, 它指的是把浏览器当做一个对象来对待, 这个对象主要定义了与浏览器交互的方法和接口, <strong>BOM</strong>的核心是<code>window</code>, 而<code>window</code>对象具有双重角色, 它即是通过JS访问浏览器窗口的一个接口, 有时一个 <code>Global</code>对象, 网页中定义的任何对象, 变量和函数, 都是作为<code>window</code>对象的一个属性或者方法存在</p> <h3 id="bom对象的分类"><a href="#bom对象的分类" class="header-anchor">#</a> BOM对象的分类</h3> <p><code>Window</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>代表整个浏览器的窗口,同时window也是网页中的全局对象
	在全局作用域里的变量会作为window的属性保存
	在全局作用域里的函数会作为window的方法保存
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Window.innerWidth</code> 和 <code>Window.innerHeight</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>表示浏览器窗体的像素宽度和高度
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>window.getSelection().toString()</code></p> <p>获得用户选中的详细信息</p> <p><code>Navigator</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过该对象可以获取当前浏览器的信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>navigator.userAgent</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">该属性可以获取浏览器身份字符串</span><span class="token punctuation">(</span>也可以被修改<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Location</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>代表浏览器的地址栏信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><code>hash</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>设置或返回锚点
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>href</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将location.href属性修改为一个完整的路径, 或相对路径
    页面会自动跳转到该路径, 并且会生成相应历史记录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>assign()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用来跳转到其他的页面,作用和直接修改location一样
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>reload()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于重新加载当前页面,作用和刷新按钮一样
如果在方法中传递一个true,作为参数,则会强制清空缓存刷新页面
 (火狐中的刷新不是清空缓存刷新可以指定清空缓存刷新)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>replace()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以使用一个新的页面替换当前页面, 调用完毕也会跳转页面
   不会生成历史记录, 不能使用回退按钮
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <p><code>URLSearchParams</code> 对象</p> <p>可以解析和检查URL查询字符串, 提供 <strong>has</strong>, <strong>get</strong>, <strong>delete</strong> 方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'?a=100&amp;b=true&amp;c=[1,2,3]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?a=100&amp;b=false&amp;c=[1,2,3]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
str<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除 a</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3] 字符串</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过 eval 可以转换为数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (3) [1, 2, 3]</span>

<span class="token comment">// 支持 forof 迭代</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> val <span class="token keyword">of</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 
        (2) ['a', '100']
        (2) ['b', 'true']
        (2) ['c', '[1,2,3]']
    */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><code>History</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>代表浏览器的历史记录,可以通过History来操作浏览器的历史记录
 由于隐私原因,该对象不能获取到具体的历史记录,只能操作浏览器向前或向后翻页
  而且该操作只在当次访问时有效
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p><code>length</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以获取到当次访问的链接数量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>bakc()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来回退到上一个页面, 作用和浏览器的回退按钮一样
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>forward()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以跳转到下一个页面, 作用和浏览器的前进按钮一样
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>go()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来调整指定的页面
 它需要一个整数作为参数
 	正数表示向前跳转几个页面
 	负数表示向后跳转几个页面
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>pushState()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pushState(state, title[, url])
向当前浏览器会话的历史堆栈中添加一个状态(历史记录)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>replaceState()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>replaceState(stateObj, title[, url])
替换掉当前历史记录实体
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>Screen</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>代表用户屏幕的信息, 通过Screen可以获取到用户显示器的相关信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>这些<code>BOM</code>对象在浏览器中都是作为<code>window</code>对象的属性保存的</p></blockquote></li></ul> <h4 id="一些常用的方法"><a href="#一些常用的方法" class="header-anchor">#</a> 一些常用的方法</h4> <p><code>console.log()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>向控制台输出指定内容
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>还可以输出的时候指定样式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;%chello%cworld&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color: red;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color: green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;%chello%cworld&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;background: red&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;font-size: 28px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>console.dir()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>向控制台输出一个对象所有的属性和方法, 当在node环境下, 一个对象或数组中有太多数据就会被默认隐藏掉一些, 可以指定第二个参数为: { depth: 10 } 输出10层的信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>console.error()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>向控制台输出一个红色的错误字符串
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>console.warn()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>向控制台输出一个警告标识的字符串
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>console.clear()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>清空控制台
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>console.trace(msg: string)</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>打印调用栈信息, 这个堆栈跟踪会显示从当前执行函数开始，一直到全局作用域的函数调用序列，包括文件名、行号和列号等详细信息，有助于开发者理解函数被调用的上下文和流程
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>console.count(xxx)</code></p> <p><code>console.countReset(xxx)</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>接受字符串统计输出次数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123: 1</span>
console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123: 2</span>
console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123: 3</span>
console<span class="token punctuation">.</span><span class="token function">countReset</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123: 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>console.group(xxx)</code></p> <p><code>console.groupCollapsed(xxx)</code></p> <p><code>console.groupEnd()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>控制台输出分组, 参数就是分组名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">'分组1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">groupEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">'分组2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">groupEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">groupCollapsed</span><span class="token punctuation">(</span><span class="token string">&quot;默认折叠分组1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">groupEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>console.time()</code></p> <p><code>console.timeEnd()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>统计代码执行时间
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'time'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'time'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// time: 1.621826171875 ms</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>alert()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>控制浏览器弹出一个警告框
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>confirm()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于弹出一个带有确认和取消按钮的提示框
需要一个字符串作为参数, 该字符串将会作为提示文字显示出来
如果点击确认则会返回true, 如果点击取消则返回false
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>prompt()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>弹出一个提示框, 该提示框中会有一个文本框, 用户可以在文本框中输入一段内容, 
用户输入的内容将会作为函数的返回值返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>setInterval()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>定时调用(异步宏任务)
可以将一个函数, 每隔一段时间执行一次

- 参数:
    1.回调函数,该函数会在每隔一段时间被调用一次
    2.每次调用的间隔时间,单位是毫秒

返回一个Number类型的数据, 这个数字用来表示该定时器的唯一标识
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一秒一次递增输出i</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定时器第三个以后的参数会作为第一个参数函数调用的参数</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一秒输出一次 1 'hello' {} []</span>

<span class="token comment">// 这样使用需要注意传递的参数是不变的所以下面只会输出1, 无法递增</span>
<span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每次给的参数都是n++, 也就是1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>clearInterval()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以用来关闭一个定时器
方法中需要一个定时器的标识作为参数, 这样将关闭标识对应的定时器
如果参数不是一个有效的标识, 则什么也不做
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>setTimeout()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>延时调用(异步宏任务)
可以将一个函数, 一段时间以后再执行, 而且只会执行一次

参数:
    1.回调函数,该函数只会执行一次
    2.调用的时间,单位是毫秒

返回一个Number类型的数据, 这个数字用来表示该定时器的唯一标识

延时调用和定时调用的区别,定时调用会执行多次,而延时调用只会执行一次
clearTimeout()来停止延时调用和clearInterval()类似用法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 一秒后alert hello</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 同样可以直接给第一个函数传参</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>window.devicePixelRatio</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>获取设备的像素比
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="json"><a href="#json" class="header-anchor">#</a> JSON</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>全称 JavaScript Object Notation JS对象表示法

JS中的对象只有JS自己认识, 其他的语言都不认识
JSON就是一个特殊格式的字符串, 这个字符串可以被任意的语言识别
    并且可以转换为任意语言中的对象, JSON在开发中主要用来数据的交互

JSON和JS对象的格式一样,只不过JSON字符串中的属性名必须加双引号, 和JS的语法一致
 
JSON分类:
    1.对象{}
    2.数组[]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><p>JSON中允许的值:</p> <ul><li>字符串</li> <li>数值</li> <li>布尔值</li> <li>null</li> <li>对象(普通对象, 不包括函数)</li> <li>数组</li></ul> <blockquote><p><code>undefined</code>数据类型会自动被  JSON 忽略</p></blockquote></li></ul> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse" target="_blank" rel="noopener noreferrer"><code>JSON.parse()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>可以将JSON字符串转换为JS对象
它需要一个JSON字符串作为参数, 会将该字符串转换为JS对象并返回</p> <p>第二个参数可以是一个函数(会收到<code>key</code>和<code>value</code>可以对指定属性进行操作)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> j <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {&quot;name&quot;:&quot;张三&quot;,&quot;date&quot;:&quot;2022-01-11T16:00:00.000Z&quot;}</span>

<span class="token comment">// 时间对象转换为时间戳格式</span>
<span class="token keyword">const</span> newJ <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> k <span class="token operator">===</span> <span class="token string">'date'</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ==&gt; {name: '张三', date: 1641916800000}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" target="_blank" rel="noopener noreferrer"><code>JSON.stringify()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>可以将一个JS对选哪个转换(序列化)为JSON字符串
需要一个JS对象作为参数, 会返回一个JSON字符串</p> <p>第二个参数可以是数组 函数 <code>null</code> , 表示过滤器</p> <p>第三个参数是插入的换行符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token string">'test'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'gender'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'---'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 长度限制最多10个字符串来作为换行符</span>
<span class="token comment">/*
    {
    ---&quot;age&quot;: 18,
    ---&quot;name&quot;: &quot;张三&quot;,
    ---&quot;gender&quot;: &quot;男&quot;
    }
*/</span>

<span class="token comment">// 可以指定需要转换的字段</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'gender'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
{
    &quot;age&quot;: 18,
    &quot;name&quot;: &quot;张三&quot;,
    &quot;gender&quot;: &quot;男&quot;
}
*/</span>

<span class="token comment">// 如果第二个参数为 null 或者未提供，则对象所有的属性都会被序列化</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
{
    &quot;name&quot;: &quot;张三&quot;,
    &quot;age&quot;: 18,
    &quot;gender&quot;: &quot;男&quot;,
    &quot;test&quot;: &quot;test&quot;
}
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><blockquote><p>如果被序列化的对象存在<code>toJSON</code>方法, 则会覆盖该对象的默认序列化行为, 不是该对象被序列化，而是调用 <code>toJSON</code> 方法后的返回值会被序列化</p></blockquote> <h2 id="本地存储"><a href="#本地存储" class="header-anchor">#</a> 本地存储</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>数据存储在用户浏览器中, 设置 读取 设置页面刷新都不丢失数据
容量较大, 能够存储约5M
只能存储字符串, 可以将对象JSON.stringify()编码后存储
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="window-sessionstorage"><a href="#window-sessionstorage" class="header-anchor">#</a> window.sessionStorage</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>1. 生命周期为关闭浏览器窗口
2. 在同一个窗口(页面)下数据可以共享
3. 以键值对的形式存储使用的
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>存储数据:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sessionStorage.setltem('key', value)
参数: 'key' 表示名字(随便起字符串形式) value 表示要存储的数据
在 F12 -&gt; Application -&gt; Session Storage 里面可以查看数据的存储
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>获取数据:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>sessionStorage<span class="token punctuation">.</span><span class="token function">getltem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除数据:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除<code>sessionStorage</code>的所有数据:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="window-localstorage"><a href="#window-localstorage" class="header-anchor">#</a> window.localStorage</h3> <div class="language- extra-class"><pre><code>1. 生命周期永久生效, 除非手动删除否则关闭页面数据也不会丢失
2. 可以多窗口(页面)共享数据(同一浏览器)
3. 也是以键值对的形式存储使用
</code></pre></div><p>存储数据:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>localStorage.setItem('key', value)
参数: 'key' 表示名字(随便起字符串形式) value 表示要存储的数据
在 F12 -&gt; Application -&gt; Local Storage 里面可以查看数据的存储
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>获取数据:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>localStorage.getItem('key')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除数据:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>localStorage.removeItem('key')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除<code>localStorage</code>的所有数据:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>localStorage.clear();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><code>sessionStorage</code>和<code>localStorage</code>虽然是对象但是它们<strong>只能存储字符串</strong>, 如果需要存储对象, 需要自行转换为JSON来存储</p></blockquote> <h3 id="storage-事件"><a href="#storage-事件" class="header-anchor">#</a> storage 事件</h3> <p><code>sessionStorage</code>和<code>localStorage</code>存储的数据变动时触发</p> <p>触发<code>storage</code>事件的条件</p> <ul><li>同一浏览器打开了<strong>两个</strong>同源页面</li> <li>其中一个页面修改了 <code>sessionStorage</code> 或 <code>localStorage</code></li> <li>另一个网页注册了这个事件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'storage'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">+</span> <span class="token string">' 键已经从 '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>oldValue <span class="token operator">+</span> <span class="token string">' 改变为 '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="document-cookie"><a href="#document-cookie" class="header-anchor">#</a> document.cookie</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank" rel="noopener noreferrer"><code>document.cookie</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>获取或设置当前网站的 <code>cookie</code>, 设置新的<code>cookie</code>格式是一个键值对形式的字符串</p> <p>需要注意的是，用这个方法一次只能对一个<code>cookie</code>进行设置或更新, 请求头里的<code>cookie</code>的格式如下:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 请求头字段名为 set-cookie 值以 key=value; 注意每一个键值对后面都有一个;</span>
set-cookie: <span class="token assign-left variable">name</span><span class="token operator">=</span>value<span class="token punctuation">;</span> <span class="token assign-left variable">Path</span><span class="token operator">=</span>/<span class="token punctuation">;</span> <span class="token assign-left variable">Expires</span><span class="token operator">=</span>UTC Date<span class="token punctuation">;</span> <span class="token assign-left variable">Domain</span><span class="token operator">=</span>.domain.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>cookie</code>生命周期只在会话期间存在(可以手动指定过期时间), 会随着客户端的网络请求自动发送给服务器端,</p> <p>一个<code>cookie</code>的大小大约是 <strong>4kb</strong> 只能用来存储少量的数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 30天后的过期时间</span>
<span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expires 设置有效期, 值是一个日期对象字符串</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是key=我是value;Expires=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以下可选的cookie属性值可以跟在键值对后，用来具体化对cookie的设定/更新，使用分号以作分隔：</p> <ul><li><code>Path</code>: 表示这个<code>cookie</code>影响到的路径, 匹配这个路径或是其子路径下会自动携带<code>cookie</code>, 如果没有定义，默认为当前文档位置的路径(<code>/</code>)</li> <li><code>Domain</code>: 如果没有定义，默认为当前文档位置的路径的域名部分。与早期规范相反的是，在域名前面加 . 符将会被忽视，因为浏览器也许会拒绝设置这样的cookie。如果指定了一个域，那么子域也包含在内。</li> <li><code>Expires</code>: 指定<code>cookie</code>的过期时间,  如果没有定义，<code>cookie</code>会在对话结束时过期, 这个值的格式为<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date/toUTCString" target="_blank" rel="noopener noreferrer">Date.toUTCString()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>Max-Age</code>: 指定<code>cookie</code>的经过多久时间过期</li> <li><code>Secure</code>: 设置为<code>true</code>时, <code>cookie</code>只通过<code>https</code>协议传输</li> <li><code>HttpOnly</code>: 设置<code>cookie</code>是否可以通过<code>document.cookie</code>去修改(请求过程依旧可以携带)</li></ul> <p><code>cookie</code>的值字符串可以用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" target="_blank" rel="noopener noreferrer">encodeURIComponent()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法来保证它不包含任何逗号、分号、中文或空格(cookie值中禁止使用这些值)</p> <h3 id="indexeddb"><a href="#indexeddb" class="header-anchor">#</a> IndexedDB</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API" target="_blank" rel="noopener noreferrer"><strong>IndexedDB</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个对象数据库, 不是关系型数据库, 与<code>localStoreage</code>类似, <strong>IndexedDB</strong>的作用域限定为包括文档的来源, 同源的网页</p> <p>可以互相访问对方的数据库, 但不同源的网页无法相互访问</p> <h2 id="with语句"><a href="#with语句" class="header-anchor">#</a> with语句</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/with" target="_blank" rel="noopener noreferrer"><code>with语句</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可以扩展一个代码块的作用域链</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 将obj对象添加到下面的代码块的作用域中,当访问属性会首先去obj对象上查找属性</span>
<span class="token keyword">with</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等价于 obj.name</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等价于 obj.age</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>不建议使用<code>with语句</code>, 在严格模式中使用会报错, 推荐的替代方案是声明临时变量来保存需要的属性</p></blockquote> <h2 id="eval函数"><a href="#eval函数" class="header-anchor">#</a> eval函数</h2> <p><code>eval()</code> 函数会将传入的字符串当做 JavaScript 代码进行执行</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">eval</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">alert('hello eval')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// alert 一个 hello eval</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>作用域是在当前<code>eval</code>函数执行的地方, 在<code>eval</code>函数内可以修改当前作用域的变量</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不同的作用域</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'alert(x+y)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>

<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
    <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'alert(x+y)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 33</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 会修改当前作用域的变量</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
    <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'x = 999'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 999</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p><code>eval()</code>函数的功能很强大也很危险, 因为可以直接执行js代码, 性能比其他替代方法更慢, 因为它必须调用 JS 解释器, 最好不要使用这个函数,</p></blockquote> <h2 id="worker对象"><a href="#worker对象" class="header-anchor">#</a> Worker对象</h2> <p>众所周知js是单线程的, 但是在浏览器端可以通过<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Worker" target="_blank" rel="noopener noreferrer"><code>Worker</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>类来创建一个与主线程和事件循环同时运行的工作线程,</p> <p>工作线程(<code>Worker</code>)运行于独立的运行环境, 有着完全独立的全局对象, <strong>不能访问</strong><code>window</code>或<code>document</code>对象,</p> <p><code>Worker</code>只能通过异步消息机制通信, 这意味着不能<strong>并发的修改DOM</strong>, 写长时间运行的代码而<strong>不会阻塞主线程, 卡死浏览器</strong></p> <p>工作线程(<code>Worker</code>)适合一些计算密集型任务, 比如图像处理, 为了执行简单的操作而创建工作线程是完全没必要的</p> <p><code>Worker</code>API分为两个部分, 一部分是<code>Worker</code>, 另一部分是<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WorkerGlobalScope" target="_blank" rel="noopener noreferrer"><code>WorkerGlobalScope</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 前者是线程的外在部分, 后者是内在部分</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 主线程</span>
<span class="token comment">// 创建一个工作者线程</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'./count.js'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'我是工作者线程'</span><span class="token punctuation">,</span> <span class="token comment">// 名字</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'module'</span> <span class="token comment">// 会当成es6模块, 工作者线程就不能使用 this 了</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 向工作者线程发送数据</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'我是主线程发送到工作者线程的数据'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 监听工作者线程 message 事件(数据通信)</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里收到工作者线程的数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 监听工作者线程 error 事件(捕获错误)</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻止默认行为(不会控制台打印错误)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// 工作者线程</span>
<span class="token comment">// 执行大量计算任务代码 ...</span>
self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里收到主线程发送的数据</span>
    
    <span class="token comment">//  这里发送数据给主线程</span>
    self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'我是工作者线程返回给主线程的数据'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>在 Worker 线程中，<code>self</code> 和 <code>this</code> 都代表子线程的全局对象。对于监听 <code>message</code> 事件，以下的四种写法是等同的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 写法 1</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 写法 2</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 写法 3</span>
<span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 写法 4</span>
<span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>停止线程</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 主线程</span>
worker<span class="token punctuation">.</span><span class="token function">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Dedicated Worker 线程中(工作者线程)</span>
self<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Shared Worker 线程中(共享者线程)</span>
self<span class="token punctuation">.</span>port<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>更多有关 Worker 见<a href="https://juejin.cn/post/6844903736238669837#comment" target="_blank" rel="noopener noreferrer">掘金文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="跨上下文信息"><a href="#跨上下文信息" class="header-anchor">#</a> 跨上下文信息</h2> <p>可以在不同执行上下文件传递信息, 包括和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/iframe" target="_blank" rel="noopener noreferrer"><code>iframe</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>通信, 主要使用: <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" target="_blank" rel="noopener noreferrer"><code>window.postMessage()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <code>message</code> 事件</p> <h2 id="url"><a href="#url" class="header-anchor">#</a> URL</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URL" target="_blank" rel="noopener noreferrer">URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个构造函数, 可以实例化url类来处理url相关操作</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:5000/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 可以指定 params 参数</span>
url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
<span class="token comment">// 还可以直接用于 fetch</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="url转解码函数"><a href="#url转解码函数" class="header-anchor">#</a> URL转解码函数</h3> <p><code>encodeURIComponent</code>和<code>decodeURIComponent</code></p> <p>用于转义<strong>url</strong>中的特殊字符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'./你好啊/哈哈哈.html'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// .%2F%E4%BD%A0%E5%A5%BD%E5%95%8A%2F%E5%93%88%E5%93%88%E5%93%88.html</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ./你好啊/哈哈哈.html</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><code>encodeURI</code>和<code>decodeURI</code>函数也可以实现互相转义</p></blockquote> <h3 id="createobjecturl"><a href="#createobjecturl" class="header-anchor">#</a> createObjectURL</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URL/createObjectURL" target="_blank" rel="noopener noreferrer">URL.createObjectURL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可以将一个File或Blob对象转换为一个url, 可以直接给img表示直接使用来访问这个图片</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code><span class="token keyword">const</span> blob <span class="token operator">=</span> new <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token comment">/*...*/</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;url: &quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 释放相关的内存</span>
<span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="clipboard-api"><a href="#clipboard-api" class="header-anchor">#</a> Clipboard API</h2> <p>剪贴板 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Clipboard" target="_blank" rel="noopener noreferrer"><strong>Clipboard</strong> <strong>API</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 提供了响应剪贴板命令（剪切、复制和粘贴）与基于<code>Promise</code>的读写系统剪贴板的能力</p> <p>从权限 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Permissions_API" target="_blank" rel="noopener noreferrer">Permissions API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 获取权限后, 才能访问剪贴板内容, 如果用户没有授予权限, 则不允许使用 <strong>Clipboard API</strong></p> <blockquote><p><a href="https://www.ruanyifeng.com/blog/2021/01/clipboard-api.html" target="_blank" rel="noopener noreferrer">阮一峰文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 复制函数</span>
<span class="token function">copyText</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;只有在 https 或在 localhost 中才可以使用复制API&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// &quot;复制成功&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// &quot;复制失败&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 粘贴函数</span>
<span class="token function">pasteText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;只有在 https 或在 localhost 中才可以使用粘贴API&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">clipText</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;剪切板文本数据:&quot;</span><span class="token punctuation">,</span> clipText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// &quot;粘贴失败&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><blockquote><p><strong>Chrome</strong> 浏览器规定: 在<strong>https</strong>或者<strong>localhost</strong>的环境下才能使用这个 <strong>Clipboard API</strong></p></blockquote> <h2 id="document-execcommand"><a href="#document-execcommand" class="header-anchor">#</a> document.execCommand</h2> <p>可以用来操作<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/contenteditable" target="_blank" rel="noopener noreferrer">可编辑内容区域<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的文本</p> <p>可以复制鼠标选中的文本:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这个是鼠标选中的文本</span>
    <span class="token comment">// const value = window.getSelection().toString().trim();</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>execCommand<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 复制鼠标选中的文本</span>
        document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">&quot;Copy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="urlsearchparams"><a href="#urlsearchparams" class="header-anchor">#</a> URLSearchParams</h2> <p>提取请求参数, 参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="打印"><a href="#打印" class="header-anchor">#</a> 打印</h2> <p>自定义封装打印hook, 如下:</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// usePrint.ts</span>

<span class="token keyword">class</span> <span class="token class-name">CreatePrint</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span>
		<span class="token comment">/** dom元素 */</span>
		<span class="token keyword">public</span> dom<span class="token operator">:</span> Element <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">,</span>

		<span class="token comment">/** 打印配置 */</span>
		<span class="token keyword">public</span> options<span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token comment">/** 打印方向
			 * - portrait 纵向
			 * - landscape 横向
			 */</span>
			direction<span class="token operator">:</span> <span class="token string">&quot;portrait&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;landscape&quot;</span><span class="token punctuation">;</span>
			<span class="token comment">/** 清除页边距和内边距 */</span>
			clearMarginAndPadding<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
			<span class="token comment">/** 打印页的style */</span>
			printStyleContent<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
			<span class="token comment">/** 打印页 @page 里添加自定义的style */</span>
			printPageStyleContent<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
			<span class="token punctuation">{</span>
				clearMarginAndPadding<span class="token operator">:</span> <span class="token boolean">true</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			options
		<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> dom <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> queryDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>queryDom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token operator">=</span> queryDom<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleError</span><span class="token punctuation">(</span><span class="token string">&quot;dom元素不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">writeHtmlToIframe</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/**
	 * 获取所有内联和外部引用的样式标签，并添加一些自定义的样式规则。
	 * 这个方法可能用于生成一个包含页面所有样式的字符串，比如为了打印或导出页面时使用。
	 *
	 * @return {string} 返回一个包含所有样式标签和额外样式规则的字符串。
	 */</span>
	<span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
		<span class="token comment">// 选取页面上所有的 &lt;style&gt; 和 &lt;link&gt; 标签。</span>
		<span class="token keyword">const</span> styles <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;style,link&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> styles<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 在特殊情况下，换行会变成br标签</span>
			str <span class="token operator">+=</span> styles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>outerHTML<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;br&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		str <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;style&gt;
      html {
        -webkit-text-size-adjust: none; /* 禁止用户调整文字大小 */
        -webkit-print-color-adjust: exact; /* 打印时颜色精确匹配 */
      }
      * {
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>clearMarginAndPadding <span class="token operator">?</span> <span class="token string">&quot;margin: 0; padding: 0;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> /* 是否清除边距 */
      }
      @page { /* 定义打印页面的样式 */
        size:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>direction <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; /* 设置页面的方向，如果没有方向选项，则为空 */
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>clearMarginAndPadding <span class="token operator">?</span> <span class="token string">&quot;margin: 0; padding: 0;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> /* 是否清除边距 */
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>printPageStyleContent <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>printPageStyleContent <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
      }

      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>printStyleContent <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>printStyleContent <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
      &lt;/style&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> str<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/** 获取 html 相关的字符串 */</span>
	<span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 部分表单的元素需要处理一下, 不然会出现打印页面的状态无法对应的问题</span>
		<span class="token keyword">const</span> inputs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> inputs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> item <span class="token operator">=</span> inputs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> type <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;checkbox&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token string">&quot;radio&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>checked <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					item<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;checked&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;checked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					item<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;checked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				item<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				item<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">const</span> textareas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;textarea&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> textareas<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> item <span class="token operator">=</span> textareas<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;textarea&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				item<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> item<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">const</span> selects <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;select&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> selects<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> item <span class="token operator">=</span> selects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;select-one&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">const</span> childs <span class="token operator">=</span> item<span class="token punctuation">.</span>children<span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> childs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">const</span> child <span class="token operator">=</span> childs<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">&quot;OPTION&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							child<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
							child<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
    
		<span class="token keyword">const</span> outerHTML <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token keyword">as</span> Element<span class="token punctuation">)</span><span class="token punctuation">.</span>outerHTML<span class="token punctuation">;</span>
		<span class="token keyword">return</span> outerHTML<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/** 写入html字符串到 iframe 中 */</span>
	<span class="token function">writeHtmlToIframe</span><span class="token punctuation">(</span>content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> iframe<span class="token operator">:</span> HTMLIFrameElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;iframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		iframe<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;print-iframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		iframe<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;position:absolute;width:0;height:0;top:-10px;left:-10px;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">const</span> iframeWindow <span class="token operator">=</span> iframe<span class="token punctuation">.</span>contentWindow <span class="token operator">||</span> iframe<span class="token punctuation">.</span>contentDocument<span class="token punctuation">;</span>
		<span class="token keyword">const</span> iframeDocument <span class="token operator">=</span> iframe<span class="token punctuation">.</span>contentDocument <span class="token operator">||</span> iframe<span class="token punctuation">.</span>contentWindow<span class="token operator">?.</span>document<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>iframeDocument<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			iframeDocument<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			iframeDocument<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
			iframeDocument<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">execPrint</span><span class="token punctuation">(</span>iframeWindow<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleError</span><span class="token punctuation">(</span><span class="token string">&quot;打印失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/** 执行打印命令 */</span>
	<span class="token function">execPrint</span><span class="token punctuation">(</span>frameWindow<span class="token operator">:</span> HTMLElement <span class="token operator">|</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				frameWindow<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>frameWindow<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">&quot;print&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						frameWindow<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					frameWindow<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				frameWindow<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">handleError</span><span class="token punctuation">(</span>err<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/** 打印方法 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">usePrint</span><span class="token punctuation">(</span>dom<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CreatePrint</span><span class="token punctuation">(</span>dom<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/** 根据A4纸张或者其他纸张的宽高结合当前电脑DPI的值计算出相应的宽高,一般是px属性 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mmToPx</span> <span class="token operator">=</span> <span class="token punctuation">(</span>width<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> getDPIInfo <span class="token operator">=</span> <span class="token function">getDPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		width<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">25.4</span><span class="token punctuation">)</span> <span class="token operator">*</span> getDPIInfo<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
		height<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>height <span class="token operator">/</span> <span class="token number">25.4</span><span class="token punctuation">)</span> <span class="token operator">*</span> getDPIInfo<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 获取当前电脑的DPI */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getDPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> dpiInfo <span class="token operator">=</span> <span class="token punctuation">{</span>
		height<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		width<span class="token operator">:</span> <span class="token number">0</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> screenInfo <span class="token operator">=</span> window<span class="token punctuation">.</span>screen <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>screenInfo<span class="token punctuation">.</span>deviceXDPI<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		dpiInfo<span class="token punctuation">.</span>width <span class="token operator">=</span> screenInfo<span class="token punctuation">.</span>deviceXDPI<span class="token punctuation">;</span>
		dpiInfo<span class="token punctuation">.</span>height <span class="token operator">=</span> screenInfo<span class="token punctuation">.</span>deviceYDPI<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> tmpNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		tmpNode<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden&quot;</span><span class="token punctuation">;</span>
		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>tmpNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
		dpiInfo<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>tmpNode<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		dpiInfo<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>tmpNode<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmpNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> tmpNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>tmpNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> dpiInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br></div></div><p>基本使用如下:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>

<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>test print<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token comment">/* body {
      background-color: blue;
    } */</span>

    <span class="token selector">.print-comtainer</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
      <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.display</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> -99999px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">button</span> <span class="token punctuation">{</span>
      <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
      <span class="token property">box-shadow</span><span class="token punctuation">:</span> 1px 1px 2px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 4px 6px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">button:active</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> .8<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>display<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>print-comtainer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      打印内容
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>全局样式按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>print-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>打印<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> usePrint<span class="token punctuation">,</span> mmToPx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./usePrint.js'</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> printBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.print-btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    printBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> printComtainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.print-comtainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>printComtainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取A4纸张的像素, 一般是 {width: 794, height: 1123}</span>
        <span class="token keyword">const</span> a4Info <span class="token operator">=</span> <span class="token function">mmToPx</span><span class="token punctuation">(</span><span class="token number">210</span><span class="token punctuation">,</span> <span class="token number">297</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/** 打印方向
         * - portrait 纵向
         * - landscape 横向
         */</span>
        <span class="token keyword">const</span> direction <span class="token operator">=</span> <span class="token string">'portrait'</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">===</span> <span class="token string">'portrait'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          printComtainer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> a4Info<span class="token punctuation">.</span>widht <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
          printComtainer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> a4Info<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

          <span class="token comment">// 纵向打印则是a4纸的width等于高度, height等于宽度</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>direction <span class="token operator">===</span> <span class="token string">'landscape'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          printComtainer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> a4Info<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
          printComtainer<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> a4Info<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/** 打印 */</span>
        <span class="token function">usePrint</span><span class="token punctuation">(</span>printComtainer<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          direction<span class="token punctuation">,</span>
          <span class="token literal-property property">printStyleContent</span><span class="token operator">:</span> <span class="token string">&quot;body { background: #ff0 !important; }&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;打印元素获取失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><h2 id="file"><a href="#file" class="header-anchor">#</a> File</h2> <p>在web中使用文件可以参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/File_API/Using_files_from_web_applications#example.3a_using_object_urls_to_display_images" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="生成文件并下载"><a href="#生成文件并下载" class="header-anchor">#</a> 生成文件并下载</h3> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/** 生成文件并下载 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">genFileDownload</span> <span class="token operator">=</span> <span class="token punctuation">(</span>fileContent<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> fileName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 转换为Blob对象</span>
	<span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fileContent<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;text/plain;charset=utf-8&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
	link<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>
	link<span class="token punctuation">.</span>download <span class="token operator">=</span> fileName<span class="token punctuation">;</span>
	link<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>

	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>

	link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	link<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		link<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 释放资源</span>
  <span class="token comment">// URL.revokeObjectURL(url);</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">genFileDownload</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="filereader"><a href="#filereader" class="header-anchor">#</a> FileReader</h2> <p>HTML5定义了<strong>FileReader</strong>作为文件API的重要成员用于读取文件，根据W3C的定义，FileReader接口提供了读取文件的方法和包含读取结果的事件模型</p> <p><strong>检测浏览器对FileReader的支持</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>FileReader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// add your code here</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;不支持FileReader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>FileReader对象的方法</strong></p> <p>FileReader 的实例拥有 4 个方法，其中 3 个用以读取文件，另一个用来中断读取</p> <table><thead><tr><th style="text-align:left;">方法名</th> <th style="text-align:left;">参数</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">abort</td> <td style="text-align:left;"></td> <td style="text-align:left;">无需参数, 用于中段读取</td></tr> <tr><td style="text-align:left;">readAsBinaryString</td> <td style="text-align:left;">file</td> <td style="text-align:left;">参数为要读取的文件，用于将文件读取为二进制码</td></tr> <tr><td style="text-align:left;">readAsDataURL</td> <td style="text-align:left;">file</td> <td style="text-align:left;">参数为要读取的文件, 用于将文件读取为URL格式的<strong>Base64</strong>字符串</td></tr> <tr><td style="text-align:left;">readAsText</td> <td style="text-align:left;">file, [encoding]</td> <td style="text-align:left;">参数为要读取的文件，用于将文件读取为文本</td></tr> <tr><td style="text-align:left;">readAsArrayBuffer</td> <td style="text-align:left;">file</td> <td style="text-align:left;">参数为要读取的文件, 用于将文件读取为<strong>ArrayBuffer</strong>的数据对象</td></tr></tbody></table> <blockquote><p>注意: 无论读取成功或失败，方法并不会返回读取结果，而是将这一结果存储在 <strong>result</strong> 属性中</p></blockquote> <ul><li><p><strong>readAsText</strong>：该方法有两个参数，其中第二个参数是文本的编码方式，默认值为 UTF-8。这个方法非常容易理解，将文件以文本方式读取，读取的结果即是这个文本文件中的内容</p></li> <li><p><strong>readAsBinaryString</strong>：该方法将文件读取为二进制字符串，通常可以将它传送到后端，后端可以通过这段字符串存储文件</p></li> <li><p><strong>readAsDataURL</strong>：该方法将文件读取为一段以 <strong>data:</strong> 开头的字符串，这段字符串的实质就是 Data URL，Data URL是一种将小文件直接嵌入文档的方案</p> <blockquote><p>Data URL: 就是利用base64编码把图片数据翻译成标准ASCII字符</p></blockquote></li></ul> <p><strong>处理事件</strong></p> <p>FileReader 包含了一套完整的事件模型，用于捕获读取文件时的状态, 如下:</p> <table><thead><tr><th style="text-align:left;">事件</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">onabort</td> <td style="text-align:left;">中断时触发</td></tr> <tr><td style="text-align:left;">onerror</td> <td style="text-align:left;">出错时触发</td></tr> <tr><td style="text-align:left;">onload</td> <td style="text-align:left;">文件读取成功完成时触发</td></tr> <tr><td style="text-align:left;">onloadend</td> <td style="text-align:left;">读取完成触发，无论成功或失败</td></tr> <tr><td style="text-align:left;">onloadstart</td> <td style="text-align:left;">读取开始时触发</td></tr> <tr><td style="text-align:left;">onprogress</td> <td style="text-align:left;">读取中</td></tr></tbody></table> <p>文件一旦开始读取，无论成功或失败，实例的 <code>.result</code> 属性都会被填充。如果读取失败，则 <code>.result</code> 的值为 null ，否则即是读取的结果，绝大多数的程序都会在成功读取文件的时候，抓取这个值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>读取失败则会填充到<code>.error</code>属性为错误对象</p></blockquote> <p><strong>上传图片预览代码</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">function</span> <span class="token function">showPreview</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取文件路径</span>
        <span class="token keyword">const</span> file <span class="token operator">=</span> source<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 判断支不支持 FileReader API</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>FileReader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 实例化 FileReader</span>
            <span class="token keyword">const</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 文件读取成功完成</span>
            fr<span class="token punctuation">.</span><span class="token function-variable function">onloadend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 将读取成功的文件路径赋值给 img 标签</span>
                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;portrait&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">// 读取文件</span>
            fr<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
 
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;file&quot;</span> οnchange<span class="token operator">=</span><span class="token string">&quot;showPreview(this)&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>img id<span class="token operator">=</span><span class="token string">&quot;portrait&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;70&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;75&quot;</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>限定上传文件的类型，可以通过文件选择器获取文件对象并通过<code>.type</code>属性来检查文件类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">image\/\w+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;请确保文件为图像类型&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>文件的字节大小存储在<code>size</code>属性中</p> <blockquote><p>如果需要增加一个进度条，可以使用 HTML5 的**<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/progress" target="_blank" rel="noopener noreferrer">progress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>**标签</p></blockquote> <h3 id="封装filereader"><a href="#封装filereader" class="header-anchor">#</a> 封装FileReader</h3> <p><code>FileReader</code>可以使用<code>Promise</code>的封装一下, 可以读取多种类型的数据, 如下:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// fileReader 读取 Blob, 支持类型: ArrayBuffer | Binary | Base64 | Text</span>
<span class="token keyword">const</span> fileReaderFile <span class="token operator">=</span> <span class="token punctuation">(</span>
  file<span class="token operator">:</span> Blob<span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">&quot;ArrayBuffer&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;Binary&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;Base64&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;Text&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;Base64&quot;</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> ArrayBuffer <span class="token operator">|</span> <span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;ArrayBuffer&quot;</span><span class="token operator">:</span>
        fileReader<span class="token punctuation">.</span><span class="token function">readAsArrayBuffer</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Binary&quot;</span><span class="token operator">:</span>
        fileReader<span class="token punctuation">.</span><span class="token function">readAsBinaryString</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Base64&quot;</span><span class="token operator">:</span>
        fileReader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Text&quot;</span><span class="token operator">:</span>
        fileReader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;未知的读取类型: &quot;</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>fileReader<span class="token punctuation">.</span>readyState <span class="token operator">===</span> FileReader<span class="token punctuation">.</span><span class="token constant">DONE</span> <span class="token operator">&amp;&amp;</span> fileReader<span class="token punctuation">.</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    fileReader<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="formdata"><a href="#formdata" class="header-anchor">#</a> FormData</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>FormData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一种表示表单数据的键值对 <code>key/value</code> 的数据, 常用于表单或者文件上传, 可以通过<code>new FormData()</code>来获取实例, 基本的方法如下:</p> <ul><li><code>append()</code>
向 FormData 中添加新的属性值, FormData 对应的属性值存在也不会覆盖原值, 而是新增一个值, 如果属性不存在则新增一项属性值</li> <li><code>delete()</code>
从 FormData 对象里面删除一个键值对</li> <li><code>entries()</code>
返回一个包含所有键值对的<code>iterator</code>对象</li> <li><code>get()</code>
返回在 FormData 对象中与给定键关联的第一个值</li> <li><code>getAll()</code>
返回一个包含 FormData 对象中与给定键关联的所有值的数组</li> <li><code>has()</code>
返回一个布尔值表明 FormData 对象是否包含某些键</li> <li><code>keys()</code>
返回一个包含所有键的<code>iterator</code>对象</li> <li><code>set()</code>
给 FormData 设置属性值, 如果FormData 对应的属性值存在则覆盖原值, 否则新增一项属性值</li> <li><code>values()</code>
返回一个包含所有值的<code>iterator</code>对象</li></ul> <p>基本使用如下:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// 从 form 标签中解析 formData</span>
<span class="token comment">// const formEl = document.getElementById('form');</span>
<span class="token comment">// const formData = new FormData(formEl);</span>

<span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>k<span class="token punctuation">,</span> v<span class="token punctuation">]</span> <span class="token keyword">of</span> formData<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> objData <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;objData: &quot;</span><span class="token punctuation">,</span> objData<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: '张三', age: '18', file: File}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sex key: &quot;</span><span class="token punctuation">,</span> formData<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;name: &quot;</span><span class="token punctuation">,</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>

<span class="token comment">// 可以添加重复的键值</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;name all: &quot;</span><span class="token punctuation">,</span> formData<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;张三&quot;, &quot;李四&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>也可以通过<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/form" target="_blank" rel="noopener noreferrer"><code>form</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>标签来自动解析生成</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:8900/test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>get<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>名称: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>邮箱: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456@qq.com<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- http://localhost:8900/test?name=hello&amp;email=123456%40qq.com --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>确定<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> formEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> formdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>formEl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> objData <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formdata<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;objData: &quot;</span><span class="token punctuation">,</span> objData<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'hello', email: '123456@qq.com'}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="mutationobserver"><a href="#mutationobserver" class="header-anchor">#</a> MutationObserver</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver" target="_blank" rel="noopener noreferrer"><code>MutationObserver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>接口提供了监视对DOM树所做更改的能力, 接受一个 callback 参数，用来处理节点变化的回调函数，该回调调用会收到两个参数：</p> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationRecord" target="_blank" rel="noopener noreferrer">mutations<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：节点变化记录列表</li> <li><code>observer</code>：构造 MutationObserver 对象</li></ul> <p>MutationObserver 对象有三个方法, 分别如下：</p> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver/observe" target="_blank" rel="noopener noreferrer">observe<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：设置观察目标, 接受两个参数, target: 观察目标(DOM元素), <a href="https://developer.mozilla.org/zh-CN/docs/conflicting/Web/API/MutationObserver/observe_2f2addbfa1019c23a6255648d6526387" target="_blank" rel="noopener noreferrer">options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: 通过对象成员来设置观察选项</li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver/disconnect" target="_blank" rel="noopener noreferrer">disconnect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：告诉观察者停止观察变动, 可以通过调用其 observe 方法来重用观察者</li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver/takeRecords" target="_blank" rel="noopener noreferrer">takeRecords<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：清空记录队列并返回里面的内容</li></ul> <p>MutationObserver 有以下特点：</p> <ul><li>它等待所有脚本任务完成后才会运行，即采用异步方式</li> <li>它把 DOM 变动记录封装成一个数组进行处理，而不是一条条地个别处理 DOM 变动</li> <li>它即可以观察发生在 DOM 节点的所有变动，也可以观察某一类变动</li></ul> <p>当 DOM 发生变动会触发 MutationObserver 事件; 但是，它与事件有一个本质不同：事件是同步触发，就是说 DOM 发生变动立刻会触发相应的事件；MutationObserver 则是<strong>异步触发</strong>，DOM 发生变动以后，并不会马上触发，而是要等到当前所有 DOM 操作都结束后才触发(提升性能)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 选择需要观察变动的节点</span>
<span class="token keyword">const</span> targetNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'some-id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 观察器的配置（需要观察什么变动）</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">childList</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 当观察到变动时执行的回调函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">mutationsList<span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> mutation <span class="token keyword">of</span> mutationsList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 添加或删除了子节点</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'childList'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'添加或删除了子节点'</span><span class="token punctuation">,</span> mutation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'attributes'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>attributeName <span class="token operator">+</span> <span class="token string">'这个属性改变了'</span><span class="token punctuation">,</span> mutation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个观察器实例并传入回调函数</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 以上述配置开始观察目标节点</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 之后，可停止观察</span>
<span class="token comment">// observer.disconnect();</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="intersectionobserver"><a href="#intersectionobserver" class="header-anchor">#</a> IntersectionObserver</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver/IntersectionObserver" target="_blank" rel="noopener noreferrer">IntersectionObserver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> API可以监听某个元素是否进入了&quot;视口&quot;(viewport), 即用户能不能看到它</p> <p>目标元素的可见性变化时, 就会调用观察器的回调函数 callback,</p> <p>callback 一般会触发两次, 一次是目标元素刚刚进入视口(开始可见)，另一次是完全离开视口(开始不可见)</p> <p>callback 函数的参数(entries)是一个数组，每个成员都是一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserverEntry" target="_blank" rel="noopener noreferrer">IntersectionObserverEntry<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 监听到出现视口后的回调</span>
<span class="token keyword">const</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// entries 是一个数组, 每个成员都是一个 IntersectionObserverEntry 对象</span>
    <span class="token comment">// 这个对象里面保存有一些信息</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOM元素'</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>isIntersecting <span class="token operator">?</span> <span class="token string">'可见'</span> <span class="token operator">:</span> <span class="token string">'不可见'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 监听配置</span>
<span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> io <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> option<span class="token punctuation">)</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'some-id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 开始观察</span>
io<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 观察多个节点</span>
<span class="token comment">// io.observe(el2);</span>


<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 停止观察</span>
    <span class="token comment">// io.unobserve(el);</span>

    <span class="token comment">// 可以继续观察</span>
    <span class="token comment">// io.observe(el);</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 关闭观察器, 以后就无法继续观察了</span>
<span class="token comment">// io.disconnect();</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>实现图片的懒加载(到可视区域再加载)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 属性选择器获取指定属性名的 img 标签</span>
<span class="token comment">// img标签要有 data-src=&quot;图片URL&quot; 属性</span>
<span class="token keyword">const</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img[data-src]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rootMargin</span><span class="token operator">:</span> <span class="token string">'0px'</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">0</span> 
<span class="token punctuation">}</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entries<span class="token punctuation">,</span> self</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 可见</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 获取元素</span>
            <span class="token keyword">const</span> img <span class="token operator">=</span> entry<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
            <span class="token comment">// 获取src</span>
            <span class="token keyword">const</span> src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 设置src</span>
                img<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
                <span class="token comment">// 删除属性 data-src</span>
                img<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 解除观察</span>
            self<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 循环观察</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> image <span class="token keyword">of</span> imgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="requestanimationframe"><a href="#requestanimationframe" class="header-anchor">#</a> requestAnimationFrame</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame" target="_blank" rel="noopener noreferrer"><code>window.requestAnimationFrame()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 用来代替定时器执行动画, 浏览器会在下次重绘之前调用指定的回调函数更新动画(类似于定时器)</p> <p>该方法需要传入一个回调函数作为参数, 该回调函数会在浏览器下一次重绘之前执行,</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>兼容性处理</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> _requestAnimationFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        window<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">||</span>
        window<span class="token punctuation">.</span>webkitRequestAnimationFrame <span class="token operator">||</span>
        window<span class="token punctuation">.</span>mozRequestAnimationFrame <span class="token operator">||</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>基本使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 保存唯一标识</span>
<span class="token keyword">let</span> timer<span class="token punctuation">;</span>
<span class="token comment">// 动画函数</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 两个离散时间点之间的时间差, 单位为毫秒 </span>
    <span class="token comment">// 这可以执行一些动画</span>
    timer <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行会返回一个唯一标识用于结束动画</span>
<span class="token punctuation">}</span>
<span class="token comment">// 执行会返回一个唯一标识用于结束动画(第一帧渲染)</span>
timer <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// cancelAnimationFrame 函数可以根据标识结束动画</span>
<span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>与 <code>setTimeout</code> 相比，<code>requestAnimationFrame</code> 最大的优势是由系统来决定回调函数的执行时机, 如果屏幕刷新率是 60Hz, 那么回调函数就每 16.7ms 被执行一次，如果刷新率是 75Hz，那么这个时间间隔就变成了 1000/75=13.3ms, 也就是说，<code>requestAnimationFrame</code> 的步伐跟着系统的刷新步伐走, 它能保证回调函数在屏幕每一次的刷新间隔中只被执行一次，这样就不会引起掉帧现象，也不会导致动画出现卡顿的问题</p> <h2 id="blob"><a href="#blob" class="header-anchor">#</a> Blob</h2> <p>Blob 对象表示一个不可变、原始数据的类文件对象; 它的数据可以按文本或二进制的格式进行读取, 也可以转换成 ReadableStream 来用于数据操作;</p> <p>Blob 表示的不一定是 JavaScript 原生格式的数据; File 接口基于Blob, 继承了 blob 的功能并将其扩展使其支持用户系统上的文件;</p> <p>要从其他非 blob 对象和数据构造一个 Blob, 请使用 Blob() 构造函数; 要创建一个 blob 数据的子集 blob, 请使用 slice() 方法;</p> <p>要获取用户文件系统上的文件对应的 Blob 对象, 请参阅 File 文档; 接受 Blob 对象的 API 也被列在 File 文档中, 基本使用如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;hello Blob&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 Blob 构造函数构造二进制对象</span>
<span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blob: &quot;</span><span class="token punctuation">,</span> blob<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取该流操作对象</span>
<span class="token keyword">const</span> blobStream <span class="token operator">=</span> blob<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blobStream: &quot;</span><span class="token punctuation">,</span> blobStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取该二进制对象的所有的二进制数组数据</span>
blob<span class="token punctuation">.</span><span class="token function">arrayBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blob.arrayBuffer(): &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取该二进制对象的文本(UTF-8编码)</span>
blob<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blob.txt(): &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 或者使用 FileReader 对象去读取</span>
<span class="token keyword">const</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取二进制对象的文本</span>
fileReader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取二进制对象的二进制数组数据</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  fileReader<span class="token punctuation">.</span><span class="token function">readAsArrayBuffer</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fileReader.result: &quot;</span><span class="token punctuation">,</span> fileReader<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>使用<code>split()</code>方法可以随意切片二进制对象的信息, 使用同数组的<code>split()</code>方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;hello Blob&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 截取指定的长度的数据并返回新的二进制对象</span>
<span class="token keyword">const</span> newBlob <span class="token operator">=</span> blob<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blob: &quot;</span><span class="token punctuation">,</span> blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;newBlob: &quot;</span><span class="token punctuation">,</span> newBlob<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>blob <span class="token operator">===</span> newBlob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

blob<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blob.text(): &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello Blob</span>
newBlob<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;newBlob.text(): &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="crypto"><a href="#crypto" class="header-anchor">#</a> crypto</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Crypto" target="_blank" rel="noopener noreferrer"><code>Crypto</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>提供了当前上下文中可用的基本的加密功能。它允许访问一个密码学安全的随机数生成器和加密原语, <code>Crypto</code>可以直接代替<code>uuid</code>或者<code>nanoid</code>之类的库:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>crypto<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// '79bff95e-2abd-410b-a578-9f5f79b06158'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="textencoder-和-textdecoder"><a href="#textencoder-和-textdecoder" class="header-anchor">#</a> TextEncoder 和 TextDecoder</h2> <p><code>TextDecoder</code>可以对<code>UintArray</code>, <code>IntArray</code>等字节数组转换为字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> utf8decoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 默认编码为 &quot;utf-8&quot; 或 &quot;utf8&quot;</span>

<span class="token keyword">const</span> u8arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">,</span> <span class="token number">183</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> i8arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">96</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">82</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">73</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> u16arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint16Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">41200</span><span class="token punctuation">,</span> <span class="token number">47022</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> i16arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int16Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">24336</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">18514</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> i32arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Int32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1213292304</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utf8decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>u8arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 𠮷</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utf8decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>i8arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 𠮷</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utf8decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>u16arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 𠮷</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utf8decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>i16arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 𠮷</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utf8decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>i32arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 𠮷</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>TextEncoder</code>可以对字符串转换为<code>Uint8Array</code>(二级制数组)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> encoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> view <span class="token operator">=</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;!@#&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uint8Array(3) [33, 64, 35]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="uint8array"><a href="#uint8array" class="header-anchor">#</a> Uint8Array</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noopener noreferrer"><code>Uint8Array</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <code>Int8Array</code>, <code>Uint16Array</code>, <code>Int16Array</code>, <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noopener noreferrer"><code>ArrayBuffer</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等这些都是用来存储二进制数据的</p> <h2 id="es6-简介"><a href="#es6-简介" class="header-anchor">#</a> ES6 简介</h2> <blockquote><p><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer">阮一峰 ES6 入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES 的全称是 ECMAScript , 它是由 ECMA 国际标准化组织, 制定的一项脚本语言的标准化规范

    年份	     版本
    2015年6月	 ES2015
    2016年6月	 ES2016
    2017年6月	 ES2017
    2018年6月	 ES2018

ES6 实际上是一个泛指, 泛指  ES2015 及后续的版本
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="es6-的新增语法"><a href="#es6-的新增语法" class="header-anchor">#</a> ES6 的新增语法</h2> <h3 id="let-和-const"><a href="#let-和-const" class="header-anchor">#</a> let 和 const</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>let      ES6中新增的用于声明变量的关键字
const    声明常量, 常量就是值（内存地址）不能变化的量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p><code>let</code> 和 <code>const</code> 声明的变量只在所处于的块级有效 (不会污染全局变量 也不影响作用域链)</p></li> <li><p><code>let</code> 和 <code>const</code>不存在变量提升, 必须先声明再使用</p></li> <li><p>使用 <code>const</code> 关键字声明常量时必须赋值</p></li> <li><p>暂时性死区 (不能重复声明)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES6明确规定, 如果区块中存在let或const命令, 这个区块对这些命令声明的变量, 从一开始就形成了封闭作用域.
凡是在声明之前就使用这些变量, 就会报错, 在代码块内, 使用let命令声明变量之前, 该变量都是不可用的.
这在语法上, 称为 &quot;暂时性死区&quot;（temporal dead zone, 简称 TDZ）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <blockquote><p>注意：<code>const</code>如果定义了一个复杂数据类型里面的值是可以更改, 但是不能重新赋值, 也就是说内存地址不可更改</p></blockquote> <h3 id="var、let、const-的区别"><a href="#var、let、const-的区别" class="header-anchor">#</a> var、let、const 的区别</h3> <ol><li>使用 <code>var</code> 声明的变量, 其作用域为该语句所在的函数内, 且存在变量提升现象</li> <li>使用 <code>let</code>声明的变量, 其作用域为该语句所在的代码块内, 不存在变量提升</li> <li>使用 <code>const</code>声明的是常量, 在后面出现的代码中不能再修改该常量的值</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>var	          let	          const
函数级作用域	  块级作用域	      块级作用域
变量提升	      不存在变量提升	  不存在变量提升
值可更改	      值可更改	      值不可更改
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="严格模式"><a href="#严格模式" class="header-anchor">#</a> 严格模式</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>JavaScript 除了提供正常模式外, 还提供了严格模式(strict mode), 即在严格的条件下运行 JS 代码
对应代码块里加上 &quot;use strict&quot; 开启严格模式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="严格模式中的变化"><a href="#严格模式中的变化" class="header-anchor">#</a> 严格模式中的变化:</h3> <ol><li><p>变量规定</p> <ul><li><p>在正常模式中, 如果一个变量没有声明就赋值, 默认是全局变量. 严格模式<code>禁止</code>这种用法, 变量都必须先声明, 然后再使用</p></li> <li><p>禁止<code>删除已经声明变量</code>, 例如, delete x;   语法是错误的</p></li></ul></li> <li><p>严格模式下 <code>this</code> 指向问题</p> <ul><li>严格模式下全局作用域中函数中的 <code>this</code> 是 <code>undefined</code></li> <li>严格模式下,如果 构造函数不加<code>new</code>调用, <code>this</code> 指向的是<code>undefined</code> 如果给他赋值则 会报错</li> <li>定时器 <code>this</code> 还是指向 <code>window</code></li> <li>事件、对象的<code>this</code> 还是指向调用者</li></ul></li> <li><p>函数变化</p> <ul><li>函数不能有<code>重名</code>的参数</li> <li>函数必须声明在<code>顶层</code>, 新版本的 JavaScript 会引入 &quot;块级作用域&quot; ( ES6 中已引入 )为了与新版本接轨, 不允许在非函数的代码块内声明函数</li></ul></li></ol> <h2 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES6中新增的定义函数的方式 () =&gt; {}
箭头函数是用来简化函数定义语法的
注意: 箭头函数中无法使用arguments(可以使用剩余参数)
	 不能作为构造函数实例化对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>箭头函数的特点:</p> <ul><li>箭头函数中 如果函数体中只有<code>一句代码</code> 并且代码的执行结果就是函数的<code>返回值</code>函数体大括号可以省略(<code>箭头函数会默认return</code>)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> n1 <span class="token operator">+</span> n2<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>在箭头函数中 如果<code>形参只有一个</code> 形参外侧的小括号也是可以省略的 (没有形参时小括号不能省略)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>箭头函数<code>不绑定this</code> 箭头函数没有自己的 this关键字 如果在箭头函数中使用this, this关键字将指向箭头函数<code>上一层作用域</code>中的 this</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Window  </span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>总结:
<ul><li>箭头函数适合与 <code>this</code>无关的回调, 定时器, 数组的方法等</li> <li>箭头函数不适合与 <code>this</code>有关的回调, 事件回调, 对象的方法等</li></ul></li></ul> <h2 id="高阶函数-和-函数柯里化"><a href="#高阶函数-和-函数柯里化" class="header-anchor">#</a> 高阶函数 和 函数柯里化</h2> <h3 id="高阶函数"><a href="#高阶函数" class="header-anchor">#</a> 高阶函数</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>高阶函数是对其他函数进行操作的函数, 它接收函数作为参数或将函数作为返回值输出
最典型的就是回调函数, 常见的 Promise setTimeout arr.map()等等
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="函数的柯里化"><a href="#函数的柯里化" class="header-anchor">#</a> 函数的柯里化</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>通过函数调用继续返回函数的方式, 实现多次接受参数最后统一处理的函数编码形式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token operator">+</span>c
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="函数组合"><a href="#函数组合" class="header-anchor">#</a> 函数组合</h3> <p>利用<a href="https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/ch3.html#%E8%BF%BD%E6%B1%82%E2%80%9C%E7%BA%AF%E2%80%9D%E7%9A%84%E7%90%86%E7%94%B1" target="_blank" rel="noopener noreferrer"><code>纯函数</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的特新让两个函数组合之后返回了一个新函数就像把两个乐高积木组合起来一样</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 组合函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 获取数组中的第一项</span>
<span class="token keyword">const</span> <span class="token function-variable function">getHead</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> param<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 数组颠倒</span>
<span class="token keyword">const</span> <span class="token function-variable function">reverse</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> param<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 转换为大写</span>
<span class="token keyword">const</span> <span class="token function-variable function">toUpperCase</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> param<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 数据</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'write'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 自右向左将函数组合成一个新的函数</span>
<span class="token comment">// 先颠倒数组, 再获取第一项</span>
<span class="token keyword">let</span> newFunc <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>getHead<span class="token punctuation">,</span> reverse<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newFunc</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// write</span>

<span class="token comment">// 先颠倒数组, 再获取第一项, 再转换为大写</span>
newFunc <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>toUpperCase<span class="token punctuation">,</span> <span class="token function">compose</span><span class="token punctuation">(</span>getHead<span class="token punctuation">,</span> reverse<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newFunc</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// WRITE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>更多关于函数式编程相关可见:</p> <ul><li><p><a href="https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/ch1.html" target="_blank" rel="noopener noreferrer">函数式编程指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html" target="_blank" rel="noopener noreferrer">阮一峰教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>变量根据作用域的不同分为两种: 全局变量和局部变量
1. 函数内部可以使用全局变量
2. 函数外部不可以使用局部变量
3. 当函数执行完毕, 函数(已经执行完毕的函数)作用域内的局部变量会销毁
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>一个作用域可以访问另外一个<code>函数内部的局部变量</code>, 访问这个局部变量的函数, 被称为闭包函数</li> <li>闭包的主要作用就是:  保存, 保护变量和延伸变量的作用范围</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 常见的闭包形式如下:</span>
<span class="token comment">// 1.立即执行函数</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
    
    
<span class="token comment">// 2.函数里返回函数</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// result 实际是调用 fn返回的那个函数</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// n是fn的局部变量</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 返回的函数里引用了 fn函数的局部变量n, 形成了闭包, 所以 n 这个变量不会被销毁</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 </span>
<span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="递归"><a href="#递归" class="header-anchor">#</a> 递归</h2> <p>递归函数, 函数内部自己调用自己, 这个函数就是递归函数</p> <p>递归里面<strong>必须加退出条件</strong>, 不然就会造成 <code>堆栈溢出</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 递归 1 ~ 100 的和</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5050 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="拷贝"><a href="#拷贝" class="header-anchor">#</a> 拷贝</h2> <p>拷贝分两种: 浅拷贝和深拷贝</p> <ul><li>浅拷贝只是拷贝一层, 更深层次引用对象级别的属性只拷贝引用</li> <li>深拷贝拷贝多层, 每一级别的数据都会拷贝</li></ul> <h3 id="浅拷贝"><a href="#浅拷贝" class="header-anchor">#</a> 浅拷贝</h3> <p><code>Object.assgin()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将所有可枚举属性的值从一个或多个源对象分配到目标对象, 返回目标对象对象
target 目标对象
sources 源对象

Object.assign(target [,sources ...])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">//es6解构赋值浅拷贝</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token operator">...</span>result<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>

<span class="token comment">//es6语法糖浅拷贝</span>
result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//for...in 实现浅拷贝</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// k 是属性名   obj[k]是属性值</span>
    result<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token operator">...</span>result<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="深拷贝"><a href="#深拷贝" class="header-anchor">#</a> 深拷贝</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>利用JSON转换实现深拷贝
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 一般情况下使用JSON来实现深克隆是最常用的</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>JSON 转换的一些问题:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">time</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">ig</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj.f'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">set</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">weakset</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">weakmap</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// j: { quote: data } // 循环引用</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span>a <span class="token operator">=</span> obj<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 函数 和 Symbol 无法拷贝(没了)</span>
<span class="token comment">// 日期对象会被转换为 字符串</span>
<span class="token comment">// 正则对象, Set(WeakSet), Map(WeakMap) 会被拷贝为空对象</span>
<span class="token comment">// 遇到循环引用会报错</span>
<span class="token keyword">const</span> copyObj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copyObj<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>函数递归实现深克隆</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">time</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">ig</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// f: function (a, b, c) { console.log(a, b, c) },</span>
    <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">set</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">weakset</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">weakmap</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">j</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">str</span><span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token literal-property property">bool</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">k</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">quote</span><span class="token operator">:</span> data <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 循环引用</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
data<span class="token punctuation">.</span>a <span class="token operator">=</span> obj<span class="token punctuation">;</span>


<span class="token comment">// 返回克隆的数组, 对象, 时间对象, 正则对象, Set Map</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> constructor <span class="token keyword">of</span> <span class="token punctuation">[</span>Date<span class="token punctuation">,</span> RegExp<span class="token punctuation">,</span> Set<span class="token punctuation">,</span> Map<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">constructor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">constructor</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 获取目标构造函数</span>
	<span class="token keyword">const</span> targetConstructor <span class="token operator">=</span> obj<span class="token punctuation">.</span>constructor<span class="token punctuation">;</span>
    
    <span class="token comment">// 防止循环引用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> targetConstructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 构造一个对应的数据类型</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">targetConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> keys <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 引用数据类型递归</span>
                result<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>keys<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 基本数据类型直接赋值</span>
                result<span class="token punctuation">[</span>keys<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>keys<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 返回克隆的结果</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>嗲
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="捕获错误"><a href="#捕获错误" class="header-anchor">#</a> 捕获错误</h2> <h3 id="throw-语句"><a href="#throw-语句" class="header-anchor">#</a> throw 语句</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>throw语句用来抛出一个用户自定义的异常, 当前函数的执行将被停止 (throw之后的语句将不会执行)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 抛出一个值为字符串的异常</span>
<span class="token keyword">throw</span> <span class="token string">&quot;Error&quot;</span><span class="token punctuation">;</span>              <span class="token comment">//控制台报错: Uncaught Error</span>

<span class="token comment">// 抛出一个值为整数100的异常</span>
<span class="token keyword">throw</span> <span class="token number">100</span><span class="token punctuation">;</span>                    <span class="token comment">//控制台报错: Uncaught 100</span>

<span class="token comment">// 抛出一个值为true的异常</span>
<span class="token keyword">throw</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                 <span class="token comment">//控制台报错: Uncaught true</span>

<span class="token comment">// 抛出一个错误对象</span>
<span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//控制台报错: Uncaught Error: abc </span>
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//控制台报错: Uncaught Error: abc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="try-catch-finally-语句"><a href="#try-catch-finally-语句" class="header-anchor">#</a> try/catch/finally 语句</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于处理代码中可能出现的错误信息

当错误发生时, JavaScript 会停止执行, 并生成一个错误信息. 
使用 throw 语句 来创建自定义消息(抛出异常). 
如果你将 throw 和 try  catch一起使用, 就可以控制程序输出的错误信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>try</code>语句 允许定义在执行时进行错误测试的代码块</li> <li><code>catch</code>语句 允许定义当 <code>try</code>代码块发生错误时, 所执行的代码块</li> <li><code>finally</code>语句 在 <code>try</code>和 <code>catch</code>之后无论有无异常都会执行</li></ul> <blockquote><p>注意: <code>catch</code> 和 <code>finally</code> 语句都是可选的, 但你在使用 <code>try</code>语句时必须至少使用一个</p></blockquote> <blockquote><p>再使用了<code>finally</code>以后 <code>try</code>块和<code>catch</code>块里的<code>return</code>语句会被自动忽略</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里写会出现错误的代码</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 修改常量</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// catch 里会捕获到 try 里的错误</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: Assignment to constant variable</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span> <span class="token comment">// 这里不能加括号</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'报不报错我都要执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报不报错我都要执行</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="try-catch-finally-语句的返回值"><a href="#try-catch-finally-语句的返回值" class="header-anchor">#</a> try/catch/finally 语句的返回值</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这个返回值无效</span>
        <span class="token keyword">return</span> <span class="token string">'try'</span><span class="token punctuation">;</span> 
        <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 捕获错误, finally里没有返回值, 则返回这个</span>
        <span class="token keyword">return</span> <span class="token string">'catch'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这个返回值优先级最高</span>
        <span class="token keyword">return</span> <span class="token string">'finally'</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="解构赋值"><a href="#解构赋值" class="header-anchor">#</a> 解构赋值</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES6中允许从数组中提取值, 按照对应位置, 对变量赋值, 对象也可以实现解构
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="数组解构"><a href="#数组解构" class="header-anchor">#</a> 数组解构</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>数组解构, 是根据数组索引进行解构赋值的
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如果解构不成功, 变量的值为 undefined</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="对象解构"><a href="#对象解构" class="header-anchor">#</a> 对象解构</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>对象解构, 匹配变量名进行解构赋值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'男'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token operator">...</span>all<span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name:'张三', age:18, sex:'男'}</span>

<span class="token comment">// -------------------------------------------------------</span>

<span class="token comment">// 对象还可以解构以后再解构</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">9999</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span>b<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9999</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a is not defined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="解构赋值交换变量"><a href="#解构赋值交换变量" class="header-anchor">#</a> 解构赋值交换变量</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> a<span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

<span class="token comment">// 数组也可以</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 2, 1]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="函数形参初始值和解构赋值"><a href="#函数形参初始值和解构赋值" class="header-anchor">#</a> 函数形参初始值和解构赋值</h3> <ol><li><p>形参初始值, 具有默认值的参数(也可以是一个函数), 位置一般都是靠后的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">3</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
<span class="token punctuation">}</span>

<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>与解构赋值结合</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 男</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">'男'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <h2 id="剩余参数"><a href="#剩余参数" class="header-anchor">#</a> 剩余参数</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>剩余参数语法(...)可以把多个独立的参数合并到一个数组中, 如果有多个参数 则剩余参数必须放到最后
一般使用在函数的形参上(代替arguments属性)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> pre <span class="token operator">+</span> cur<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 60</span>


<span class="token comment">// function fn(a, ...args, b){ 错误示范 最后一个参数永远都是undefined</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [4,5,6]</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="剩余参数和解构配合使用"><a href="#剩余参数和解构配合使用" class="header-anchor">#</a> 剩余参数和解构配合使用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token string">'王五'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>s1<span class="token punctuation">,</span> <span class="token operator">...</span>s2<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 李四, 王五</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="symbol-数据类型"><a href="#symbol-数据类型" class="header-anchor">#</a> Symbol 数据类型</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" rel="noopener noreferrer"><code>Symbol</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是ES6新增的原始数据类型, 它表示的是独一无二的值</p> <p>一般用来定义对象的私有变量, 无法通过 <code>for...in</code> 或 <code>Object.keys</code> 打印出来</p> <p>可以通过 <code>Object.getOwnPropertySymbols()</code> 获取到由Symbol数据类型组成的一个数组</p> <p>也可以通过 <code>Reflect.ownKeys()</code> 返回一个由目标对象自身的属性键组成的数组</p> <p>Symbol数据类型不能与其他的数据进行 <strong>运算, 对比, 比较</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Symbol 括号里的字符串是这个变量的描述, 输出控制台可以看到</span>
<span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token comment">// 通过symbol.for()创建的symbol数据类型可以通过创建的变量得到这个数据</span>
<span class="token keyword">const</span> s3 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> s4 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s3 <span class="token operator">===</span> s4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'张三'</span> <span class="token comment">// 此处一定要用[变量名] 不然就是一个普通字符串了</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 如果用 Symbol 定义的对象中的变量, 取值时一定要用[变量名]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>Symbol.prototype.description</code></p> <p>获取 <strong>Symbol</strong> 数据类型的字符串描述</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建 Symbol</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// description 获取 Symbol数据类型的字符串描述</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="公认符号"><a href="#公认符号" class="header-anchor">#</a> 公认符号</h3> <p>在 JavaScript 中有一些特殊的符号属性, 可以<strong>控制 JavaScript 对象和类的某些底层行为</strong>, 这些符号都是以 <strong>Symbol</strong> 的属性存在</p> <h4 id="symbol-iterator-和-symnol-asynciteraror"><a href="#symbol-iterator-和-symnol-asynciteraror" class="header-anchor">#</a> <strong>Symbol.iterator</strong> 和 <strong>Symnol.asyncIteraror</strong></h4> <p>这两个符号可以把对象或类变成可迭代对象(异步可迭代对象),  详细见<a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8" title="Iterator">生成器</a></p> <h4 id="symbol-hasinstalce"><a href="#symbol-hasinstalce" class="header-anchor">#</a> <strong>Symbol.hasInstalce</strong></h4> <p>用于判断某对象是否为某构造器的实例, 可以用它来自定义 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener noreferrer"><code>instanceof</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 操作符在某个类上的行为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Array1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义 一个Symbol.hasInstance键的方法来自定义 instanceof 操作符的行为</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// or</span>

<span class="token keyword">class</span> <span class="token class-name">Array2</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Array1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Array2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="symbol-tostringtag"><a href="#symbol-tostringtag" class="header-anchor">#</a> <strong>Symbol.toStringTag</strong></h4> <p>一个内置 symbol，它通常作为对象的属性键使用，对应的属性值应该为字符串类型，这个字符串用来表示该对象的自定义类型标签，通常只有内置的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" target="_blank" rel="noopener noreferrer"><code>Object.prototype.toString()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法会去读取这个标签并把它包含在自己的返回值里</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Object]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 为空</span>

<span class="token keyword">function</span>  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function  fn(params) {return 123}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ()=&gt;123</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>使用<code>Object.prototype.toString()</code>会得到一些有趣的结果</p> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Number]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Boolean]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object String]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Object]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Function]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Array]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Null]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Undefined]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object RegExp]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Date]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// [object Promise]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [object Set]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [object Map]</span>
        
<span class="token comment">// NaN 是个例外会返回 [object Number]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Number]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>使用<code>Object.prototype.toString.call()</code>几乎可以判断任何<strong>内置数据类型</strong>, 除了<code>NaN</code></p> <p>可以利用这个特性封装一个类型判断函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">classOf</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断 NaN</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'nan'</span><span class="token punctuation">;</span>
	
    <span class="token keyword">const</span> typeStr <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 截取需要的部分, 并转换成小写</span>
    <span class="token keyword">return</span> typeStr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">classOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// number </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">classOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">classOf</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">classOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// date</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在ES6之前<code>Object.prototype.toString</code>只对内置数据类型有效</p> <p>例如: 自定义的类只会返回<code>Object</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">classOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>而在ES6中<code>Object.prototype.toString</code>会在自己的参数及原型中寻找<code>Symbol.toStringTag</code>的键的属性,</p> <p>如果有这个属性, 则使用这个属性的返回值作为输出, 故可以手动添加一个<code>Symbol.toStringTag</code>属性来自定义<code>Object.prototype.toString</code>的行为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span> 
    <span class="token comment">// </span>
    <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'MyClass'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object MyClass]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">classOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// myclass</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="symbol-species"><a href="#symbol-species" class="header-anchor">#</a> <strong>Symbol.species</strong></h4> <p>在ES6之前, JavaScript 没有提供创建内置数据类型的子类相关API, 直到ES6后,</p> <p>可以使用<code>class</code>和<code>extends</code>关键字就可以很方便的扩展任何类型的子类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义一个继承数组的 MyArray类</span>
<span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">get</span> <span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// MyArray(3) [1, 2, 3]</span>
arr<span class="token punctuation">.</span>first<span class="token punctuation">;</span> <span class="token comment">// 1</span>
arr<span class="token punctuation">.</span>last<span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>MyArray</strong>类会继承<strong>Array</strong>类的一些方法, <code>map, slice, filter, connect</code>等, 这些方法都会返回数组,</p> <p>但是返回的数组是谁的实例呢? 这个就是<code>Symbol.species</code> 这个属性决定的(<strong>这个符号是构造函数的属性</strong>)</p> <p>在使用<code>extends</code>关键字创建子类时, 子类构造函数也会继承这个符号属性, <code>Symbol.species</code>的定义如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Array<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在ES6及之后的版本中, <code>map</code>和<code>slice</code>方法等创建并返回的新数组都会经过一些修改, 它们不仅会创建<code>Array</code>,</p> <p>实际上还会调用<code>new this.constructor[Symbol.species]()</code>创建新数组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mapArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span>item<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 应该返回的是 Array 的实例才对</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// MyArray(3) [10, 20, 30]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapArr<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">MyArray</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapArr<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>但是在ES6中结果却不是如此, 这是因为<code>Array</code>的<code>Symbol.species</code>属性是只读的访问器, 其获取函数只是简单的返回<code>this</code></p> <p>如果想要修改这个默认行为, 不能直接直接通过赋值语句来设置这个符号属性, 只能通过<code>Object.defineProperty</code>方法设置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>MyArray<span class="token punctuation">,</span> Symbol<span class="token punctuation">.</span>species<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> Array <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mapArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10, 20, 30]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapArr<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">MyArray</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapArr<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>最简单的还是在一开始创建子类时就指定<code>Symbol.species</code>属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义一个继承数组的 MyArray类</span>
<span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> Array<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="symbol-isconcatspreadable"><a href="#symbol-isconcatspreadable" class="header-anchor">#</a> Symbol.isConcatSpreadable</h4> <p>Array的<code>concat</code>方法返回的数组也是受<code>Symbol.species</code>属性影响来决定返回的是那个构造函数的实例, 但是<code>concat</code>方法也是使用了<code>Symbol.isConcatSpreadable</code>符号属性,</p> <p>在ES6之前, 使用<code>concat</code>方法前需要使用判断<code>Array.isArray</code>方法判断是否是数组属性</p> <p>在ES6中进行了一些调整, 如果<code>concat</code>方法的参数(或<strong>this</strong>值)是对象且有<code>Symbol.isConcatSpreadable</code>符号属性, 就会根据这个符号属性的布尔值来决定是否应该打平数组, 如果没有这个属性则按之前的规则来</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token comment">// 修改 Symbol.isConcatSpreadable 属性影响 concat 方法的特性非数组参数被展开了</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, '张三']</span>
<span class="token comment">// 正常情况只是简单的追加</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, {…}]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Array</strong>的子类<code>concat</code>方法默认是可展开的, 可以手动的修改</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改 Symbol.isConcatSpreadable 属性影响 concat 方法的特性数组参数不会自动展开</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, MyArray(2)]</span>
<span class="token comment">// 正常情况会展开</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="模式匹配符号"><a href="#模式匹配符号" class="header-anchor">#</a> 模式匹配符号</h4> <p><strong>RegExp</strong>参数可以执行诸如: <code>match, matchAll, seaarch, replace splice</code>这些匹配模式操作方法</p> <p>在ES6及之后的版本中都统一泛化为既能够使用<strong>RegExp</strong>对象, 也能通过任何具有符号名称属性定义了模式匹配的对象,</p> <p>这些模式匹配方法都有一个与之对应的符号属性, <code>Symbol.match</code> <code>Symbol.seaarch</code> <code>Symbol.replace</code>等</p> <h4 id="symbol-toprimitive"><a href="#symbol-toprimitive" class="header-anchor">#</a> Symbol.toPrimitive</h4> <p><code>Symbol.toPrimitive</code>符号属性允许我们控制js对象转换为原始值的转换行为,</p> <p>需要定义一个名字为这个符号属性的方法, 它的返回值必须能够表示对象的原始值,</p> <p>这个方法在被调用时会收到一个字符串参数</p> <ul><li>参数如果是<code>string</code>则表示js把对象作为字符串插入到一个模板字面量中(预期为字符串)</li> <li>参数如果是<code>number</code>则表示js在通过<code>&lt;</code>或<code>&gt;</code>来比较对象, 或者使用<code>-</code>或<code>*</code>来计算对象(预期为数值)</li> <li>参数如果是<code>default</code>则表示js在通过<code>+</code> <code>==</code> <code>!=</code>比较对象((预期为字符串或者数值)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyObject</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自定义对象转换为对象时的行为</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">flag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">999</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">123</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string  999123(999拼接123)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// number  998 (999减去1)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// default  true (999不等于1)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="symbol-unscopables"><a href="#symbol-unscopables" class="header-anchor">#</a> Symbol.unscopables</h4> <p>它是ES6之后针对<code>with</code>语句而引入的一个兼容性变通方案, 可以将某个属性从<code>with</code>语句的作用域中排除</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 定义 Symbol.unscopables 符号属性</span>
obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 排除 age 变量</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">with</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// age is not defined</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>Array.prototype[Symbol.unscopables]</code>会返回<strong>Array</strong>的<code>Symbol.unscopables</code>对象配置, 默认已经被排除了一些方法在<code>with</code>语句的作用域</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//=&gt; ['copyWithin','entries','fill','find','findIndex','flat','flatMap','includes','keys','values','at']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="set-数据结构"><a href="#set-数据结构" class="header-anchor">#</a> Set 数据结构</h2> <p>ES6 提供了新的数据结构<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="noopener noreferrer"><strong>Set</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 它类似于数组, 但与数组不同的是, <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Keyed_collections#%E9%9B%86%E5%90%88" target="_blank" rel="noopener noreferrer">集合<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>没有索引或顺序, 所有成员的值都是唯一的, 没有<strong>重复的值</strong>, 可以在初始化时通过参数传值,也可以新建一个空的集合后通过<code>add</code>方法添加属性, 集合的速度是很快的比数组要快很多</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; Set(0) {size: 0} 空集合</span>
<span class="token keyword">const</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; Set(2) {'a', 1} 有两个成员的集合</span>

<span class="token comment">// 集合的值不一定是数组但是必须是一个可迭代对象</span>
<span class="token keyword">const</span> s3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; Set(3) {'1', '2', '3'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>size</code> 返回 Set 对象中的值的个数</li> <li><code>add(value)</code>：添加某个值, 返回 Set 结构本身故可以链式调用</li> <li><code>delete(value)</code>：删除某个值, 返回一个布尔值, 表示是否删除成功</li> <li><code>has(value)</code>：返回一个布尔值, 表示该值是否为 <code>Set</code> 的成员</li> <li><code>clear()</code>：清除所有成员, 没有返回值</li> <li><code>forEach()</code>: 数组 forEach 的一模一样(不会传递索引参数, 第一, 二个参数都是值本身)</li> <li><code>keys()</code> <code>values()</code> <code>entries()</code>: Set 对象也拥有<code>Object</code>身上的这些API</li></ul> <p><code>set</code>类型可迭代的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mySet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">999</span><span class="token punctuation">,</span> <span class="token string">&quot;some text&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;b&quot;</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 按顺序迭代, set没有索引 key 和 value 都是同一个值</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> mySet<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1, &quot;some text&quot;, {&quot;a&quot;: 1, &quot;b&quot;: 2}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key <span class="token operator">===</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; true </span>
<span class="token punctuation">}</span>

<span class="token comment">// 用 forEach 迭代</span>
mySet<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>用<code>set</code>数据结构实现数组去重的方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 使用 Array.from 也是转换 Set 为 Array 的</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="weakset"><a href="#weakset" class="header-anchor">#</a> WeakSet</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakSet" target="_blank" rel="noopener noreferrer"><code>WeakSet</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对象是一组对象的集合, <code>WeakSet</code>中的对象不重复且不可枚举</p> <p>与<code>Set</code>对象的主要区别有：</p> <ul><li><code>WeakSets</code>中的<strong>值必须是对象类型</strong>, 不可以是别的类型</li> <li><code>WeakSet</code>的“<em>weak</em>”指的是, 对集合中的对象, <strong>如果不存在其他引用, 那么该对象将可被垃圾回收</strong>, 于是不存在一个当前可用对象组成的列表, 所以<code>WeakSets</code><strong>不可枚举</strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> weakset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 闭包环境</span>
    <span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 都设置一个值</span>
    set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    weakset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 强引用</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
<span class="token comment">// 弱引用, 已经被垃圾回收了</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakset<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 获取不到 weakmap 里的值了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>WeakSet</code>的用例很有限，比如使用DOM元素作为键来追踪它们而不必担心内存泄漏</p> <h2 id="map"><a href="#map" class="header-anchor">#</a> Map</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noopener noreferrer"><strong>Map</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>数据结构是键值对的<strong>有序列表</strong>, 其中每个键都<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Keyed_collections#%E6%98%A0%E5%B0%84" target="_blank" rel="noopener noreferrer">映射<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>着一个值, 也是类似于数组, 只不过<code>map</code>可以运行任何值作为键或值, 初始化<code>Map</code>也是需要一个可迭代对象, 一般都是二维数组<strong>数组的索引0作为 key, 索引1作为 value多余的值会被忽略</strong>, 或者直接初始化一个空 <code>Map</code>, 通过<code>set</code>方法添加数据, 映射的速度同样是很快</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">123</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'hello'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Map(4) { {…} =&gt; 123, Array(3) =&gt; 'hello', Set(0) =&gt; ƒ, ƒ =&gt; Map(0) }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>set(key, value)</code>:设置一个值, 返回 Map 结构本身故可以链式调用</li> <li><code>get(key)</code>: 获取指定的值(通过键名)</li> <li><code>delete(value)</code>：删除某个值, 返回一个布尔值, 表示是否删除成功</li> <li><code>has(value)</code>：返回一个布尔值, 表示该值是否为 <code>Map</code> 的成员</li> <li><code>clear()</code>：清除所有成员, 没有返回值</li> <li>支持<code>for...of</code>和<code>Array.from(myMap)</code>同时有<code>keys()</code> <code>values()</code> <code>entries()</code></li></ul> <h3 id="weakmap"><a href="#weakmap" class="header-anchor">#</a> WeakMap</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" target="_blank" rel="noopener noreferrer"><code>WeakMap</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对象也是键值对的集合。它的<strong>键必须是对象类型</strong>，值可以是任意类型。它的键被弱保持，也就是说，当其键所指对象没有其他地方引用的时候，它会被GC回收掉。<code>WeakMap</code>提供的接口与<code>Map</code>相同。</p> <p>与<code>Map</code>对象不同的是, <code>WeakMap</code>的键是<strong>不可枚举的</strong>, <strong>不提供列出其键的方法</strong>, 列表是否存在取决于垃圾回收器的状态, 是不可预知的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> weakmap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 闭包环境</span>
    <span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 都设置一个值</span>
    map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    weakmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>bar<span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 强引用</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
<span class="token comment">// 弱引用, 已经被垃圾回收了</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakmap<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 获取不到 weakmap 里的值了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="object扩展的功能和方法"><a href="#object扩展的功能和方法" class="header-anchor">#</a> Object扩展的功能和方法</h2> <h3 id="简写对象的属性和方法"><a href="#简写对象的属性和方法" class="header-anchor">#</a> 简写对象的属性和方法</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>当对象的属性名和属性值一样时就可以使用简写的方式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">,</span> <span class="token comment">// 等价于name: name</span>
        age   <span class="token comment">// 等价于age: age</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: '张三', age: 18}</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="属性名关联外界变量"><a href="#属性名关联外界变量" class="header-anchor">#</a> 属性名关联外界变量</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>name <span class="token operator">+</span> <span class="token string">'bc'</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token comment">// 等价于 abc: 123</span>
    <span class="token punctuation">[</span><span class="token string">'f'</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">// 等价于 fa: ƒ</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {abc: 123, fa: ƒ}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="对象常用方法-包括es5和es6"><a href="#对象常用方法-包括es5和es6" class="header-anchor">#</a> 对象常用方法(包括ES5和ES6)</h3> <ul><li><p><code>Object.keys()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于获取对象自身所有的 key 属性, 效果类似 for…in, 返回一个由 key 属性名组成的数组
不能获取不可枚举属性
语法: Object.keys(obj)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>Object.values()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于获取对象自身所有的 value 属性, 效果类似 for…in, 返回一个由 value 属性名组成的数组
语法: Object.values(obj)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>Object.assign()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于将所有可枚举属性的值从一个或多个源对象分配到目标对象, 它将返回目标对象

target 目标对象
sources 源对象
语法: Object.assign(target, ...sources)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>Object.defineProperty()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>语法: Object.defineProperty(obj, prop, descriptor)
    obj: 某个对象
    prop: 这个对象的 value
    descriptor:描述符(descriptor)说明： 以对象形式 { } 书写如下是配置项:
      - value: 设置属性的值  默认为 undefined
      - writable: 值是否可以重写。true | false  默认为false
      - enumerable: 目标属性是否可以被枚举。true | false 默认为 false
      - configurable: 目标属性是否可以被删除或是否可以再次修改特性 true | false  默认为false
      - 高级设置
        - get函数和set函数, 类似现用现取的意思, 可以实现对对象 属性读取 和 属性设置 的劫持
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p>利用 <code>Object.defineProperty()</code>可以实现对对象<code>属性读取</code>和<code>属性设置</code>的劫持</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token literal-property property">_age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 设置 obj 对象的 age 值</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当有人读取 obj 的 age 属性时, get函数(getter)就会被调用, 并且返回值就是 age 的值</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'有人读取age属性了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回 number 就是 obj.age 的值</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">.</span>_age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 当有人修改 obj 的 age 属性时, set函数(setter)就会被调用, 并且会收到修改的具体值</span>
    <span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'有人修改了age属性了, 值是'</span> <span class="token operator">+</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 修改age的_age为传进来的值</span>
        obj<span class="token punctuation">.</span>_age <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 有人读取age属性了     18</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 有人修改了age属性了, 值是20    20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p>注意:  <code>Object.defineProperty()</code>里的 <code>get</code> 函数里不能再次获取当前的值不然就会死循环</p></blockquote></li></ul></li> <li><p><code>Object.definePropertys()</code></p> <p><code>Object.definePropertys()</code>(多一个<strong>s</strong>)方法和<code>Object.defineProperty()</code>类似, 只不过可以一次设置多个属性的特征对象</p></li> <li><p><code>Object.is()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>比较两个值是否严格相等 (NaN也可以比较)
语法: Object.is(value1, value2)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>Object.create()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>创建一个指定原型对象的新对象
proto 新创建对象的原型对象(可以为null)
propertiesObject 可选: 一个描述对象, 该对象的属性参照Object.defineProperties()的第二个参数

语法: Object.create(proto, [propertiesObject])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>instanceof</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>instanceof 运算符用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上, 返回布尔值
通俗点说就是 判断是否是某个对象的实例

object    某个实例对象
constructor   某个构造函数
语法: object instanceof constructor
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>使用 <strong>typeof</strong> 检测基本数据类型, 使用 <strong>instanceof</strong> 检测引用数据类型</p></blockquote></li> <li><p><code>Object.getOwnPropertyDescriptor</code></p> <p>返回指定对象上一个自有属性对应的属性描述符对象(自有属性指的是该对象自身的属性, 不包括原型链上的属性)
描述符对象就是 <code>Object.defineProperty</code> 里第<strong>三个参数指定的特性</strong>
语法: <code>Object.getOwnPropertyDescriptor(obj, prop)</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> random <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> objDescriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> randomDescriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>random<span class="token punctuation">,</span> <span class="token string">'num'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>objDescriptor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: '张三', writable: true, enumerable: true, configurable: true}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>randomDescriptor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {set: undefined, enumerable: true, configurable: true, get: ƒ}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>对继承的属性或不存在的属性使用<code>Object.getOwnPropertyDescriptor</code>返回<code>undefined</code></p></blockquote></li> <li><p><code>Object.getOwnPropertyDescriptors</code></p> <p>和<code>Object.getOwnPropertyDescriptor</code>(少一个<strong>s</strong>)效果一样, 只不过是返回指定对象所有自身属性的描述符对象, 如果没有任何自身属性, 则返回空对象</p></li> <li><p><code>Object.hasOwnProperty</code></p> <p>返回一个布尔值, 判断对象自身属性中是否具有指定的属性(也就是, 是否有指定的 key, 不包括继承和原型链上的)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>Object.getOwnPropertyNames()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>返回一个指定对象的所有自身属性的属性名(包括不可枚举属性但不包括Symbol值作为名称的属性)组成的数组
类似 Object.keys() 不过可以获取不可枚举属性
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>Object.entries()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于将对象转换为多维数组形式(每一个成员是一个数组, 下标0为key,下标1为value)
方便用于创建 Map 对象的
语法: Object.entries(obj)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>Object.fromEntries()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将二维数组转换为对象
Object.fromEntries(arr)
Object.fromEntries 和 Object.entries 是互为逆运算的
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>Object.freeze()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>可以冻结一个对象, 一个被冻结的对象再也不能对这个对象进行操作(添加属性, 删除属性, 修改属性), 
冻结一个对象后该对象的原型也不能被修改, 返回值和传入的参数相同的对象
语法: Object.freeze(obj)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>Object.preventExtensions()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>让一个对象变的不可扩展，也就是永远不能再添加新的属性, 返回这个对象
语法: Object.preventExtensions(obj)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>?.</code> <code>?.[name]</code></p> <p>可选链操作符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不使用可选链操作符</span>
<span class="token keyword">let</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span>

<span class="token comment">// 有当 a 存在的时候,才去访问 a 的 name 属性</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>
	b <span class="token operator">=</span> a<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
	b <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// 使用可选链操作符</span>
<span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// 模拟数据未定义(null也可以)</span>
<span class="token comment">// const a = date.a; // Error</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> date<span class="token operator">?.</span>x<span class="token punctuation">;</span> <span class="token comment">// 不报错</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> date<span class="token operator">?.</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 使用变量的形式</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> date<span class="token operator">?.</span>x<span class="token operator">?.</span>y<span class="token operator">?.</span>z<span class="token punctuation">;</span> <span class="token comment">// 链式调用</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> date<span class="token operator">?.</span>x<span class="token operator">?.</span>y<span class="token operator">?.</span><span class="token function">z</span><span class="token punctuation">(</span><span class="token string">'还是不报错'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>可选链操作符是用来代替<code>.</code>操作符, 和逻辑运算符一样也是有短路效应的, 即<code>obj</code>变量和<code>obj.x</code>属性存在才读取值, 不存在则返回<code>undefined</code>且右边的操作都不看(短路)</p></li> <li><p><code>??</code></p> <p>空值合并运算符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不使用空值合并运算符</span>
<span class="token keyword">let</span> b<span class="token punctuation">,</span>
    a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    c <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span>

<span class="token comment">// a 除了 undefined 或者 null 之外的任何值(包括0)都可以</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>a <span class="token operator">||</span> a <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// b = 0</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    b <span class="token operator">=</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用空值合并运算符</span>
<span class="token keyword">let</span> b<span class="token punctuation">,</span>
    a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    c <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span>

b <span class="token operator">=</span> a <span class="token operator">??</span> c<span class="token punctuation">;</span> <span class="token comment">// b = 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>当<code>a</code>除了<code>undefined</code>或者<code>null</code>之外的任何值(<strong>包括0</strong>), <strong>b都会等于a</strong>,<strong>否则就等于c</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 相反同理</span>
b <span class="token operator">=</span> c <span class="token operator">??</span> a<span class="token punctuation">;</span> <span class="token comment">// b = '张三'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>??=</code></p> <p>空值赋值运算符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token string">&quot;你好&quot;</span><span class="token punctuation">,</span>
    c <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    d <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
a <span class="token operator">??=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>  <span class="token comment">// a = 0 (0不属于 null undefined) </span>
b <span class="token operator">??=</span> a<span class="token punctuation">;</span>  <span class="token comment">// b = &quot;你好&quot;</span>
c <span class="token operator">??=</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// c = &quot;张三&quot;</span>
d <span class="token operator">??=</span> <span class="token number">999</span><span class="token punctuation">;</span> <span class="token comment">// d = 999</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当<code>??=</code><strong>左侧</strong>的值为<code>null</code>或者<code>undefined</code>的时候(<strong>不包括0</strong>),才会将<strong>右侧</strong>的值赋值给左侧变量.其他所有值都不会进行赋值</p></li></ul> <h2 id="string的扩展功能和方法"><a href="#string的扩展功能和方法" class="header-anchor">#</a> String的扩展功能和方法</h2> <h3 id="模板字符串"><a href="#模板字符串" class="header-anchor">#</a> 模板字符串</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>用来代替字符串('' &quot;&quot;)模板字符(``)串中支持换行, 可以解析变量不需要拼串, 可以调用函数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    	<span class="token keyword">return</span> <span class="token string">'我是fn函数'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 换行</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
       &lt;div&gt;
           &lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;	
           &lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;	
       &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// 解析换行</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对应上面的结构</span>
<span class="token comment">// 解析变量</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, 我的名字叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Hello, 我的名字叫张三</span>
<span class="token comment">// 调用函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是模板字符串, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 我是模板字符串, 我是fn函数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="string-raw"><a href="#string-raw" class="header-anchor">#</a> String.raw()</h3> <p><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/raw" target="_blank" rel="noopener noreferrer">String.raw()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 是一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Template_literals" target="_blank" rel="noopener noreferrer">模板字符串<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的标签函数是用来获取一个模板字符串的原始字符串的，比如说，占位符（例如 <code>${foo}</code>）会被处理为它所代表的其他字符串，而转义字符（例如 <code>\n</code>）不会</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!\n</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// =&gt; Hi5!\n</span>

String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\t\n\u1234</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// =&gt; \t\n\u1234</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span>
String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我的名字叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token comment">// =&gt; 我的名字叫张三</span>

<span class="token comment">// 函数形式调用</span>
String<span class="token punctuation">.</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">raw</span><span class="token operator">:</span> <span class="token string">'我的名字叫张三'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 我0的1名2字3叫4张5三</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="字符串方法-包括es5和es6"><a href="#字符串方法-包括es5和es6" class="header-anchor">#</a> 字符串方法(包括ES5和ES6)</h3> <ul><li><p><code>startsWith()</code> 和 <code>endsWith()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>startsWith(): 表示参数字符串是否在原字符串的头部, 返回布尔值
endsWith(): 表示参数字符串是否在原字符串的尾部, 返回布尔值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'Hello ECMAScript 2015'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'2016'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'2015'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>repeat()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>repeat方法表示将原字符串重复n次, 返回一个新字符串
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// yyyyy</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>trimStart()</code> 和 <code>trimEnd()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>trimStart(): 清除字符串头部的空白
trimEnd(): 清除字符串尾部的空白
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span>  str <span class="token operator">=</span> <span class="token string">'   Hello word    '</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// Hello word  没有空白</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Hello word    后面有空白</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//    Hello word   前面有空白</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll" target="_blank" rel="noopener noreferrer"><code>matchAll</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法</p> <p>返回一个包含所有匹配正则表达式的结果及分组捕获组的迭代器</p> <p>可以配合<code>for of</code>来快速迭代, 并且不会修改正则表达式的<code>lastIndex</code>属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> text<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h2 id="正则表达式的扩展功能和方法"><a href="#正则表达式的扩展功能和方法" class="header-anchor">#</a> 正则表达式的扩展功能和方法</h2> <h3 id="命名捕获分组"><a href="#命名捕获分组" class="header-anchor">#</a> 命名捕获分组</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span>分组名<span class="token operator">&gt;</span>xxx<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">例如</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span>text<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 将 <span class="token punctuation">.</span><span class="token operator">*</span> 匹配到的文本存储到 正则对象<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>text 变量中
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 准备一个字符串</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;a href='http://www.baidu.com'&gt;百度一下&lt;/a&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 提取 url 与 标签文本</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;a href='(?&lt;url&gt;.*?)'&gt;(?&lt;text&gt;.*?)&lt;\/a&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token comment">// 执行</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://www.baidu.com</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 百度一下 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="正向断言"><a href="#正向断言" class="header-anchor">#</a> 正向断言</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">/</span><span class="token function">yyy</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span>xxx<span class="token punctuation">)</span><span class="token operator">/</span> 表示 <span class="token operator">?</span><span class="token operator">=</span> 后面的是 xxx 并且满足 yyy 才算匹配条件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明字符串</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'YANG12345哈哈哈你好啊555555啦啦啦'</span><span class="token punctuation">;</span>
<span class="token comment">// /\d+(?=啦)/     ?= 后面的是 啦 并且满足 \d+ 才算匹配条件</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+(?=啦)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 555555 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="否定正向断言"><a href="#否定正向断言" class="header-anchor">#</a> 否定正向断言</h4> <p><code>/yyy(?!xxx)/</code>与正向断言相反即, <code>?!</code> 后面的<strong>不是</strong> xxx 并且满足 yyy 才算匹配条件</p> <h3 id="反向断言"><a href="#反向断言" class="header-anchor">#</a> 反向断言</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;=</span>xxx<span class="token punctuation">)</span>yyy<span class="token operator">/</span> 表示 <span class="token operator">?</span><span class="token operator">&lt;=</span> 前面的是 xxx 并且满足 yyy 才算匹配条件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'YANG12345哈哈哈你好啊555555啦啦啦'</span><span class="token punctuation">;</span>
<span class="token comment">// /(?&lt;=啊)\d+/     ?&lt;= 前面的是 啊 并且满足 \d+ 才算匹配条件</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=啊)\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 555555</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="否定反向断言"><a href="#否定反向断言" class="header-anchor">#</a> 否定反向断言</h4> <p><code>/(?&lt;!xxx)yyy/</code>与反向断言相反即, <code>?&lt;!</code> 前面的<strong>不是</strong> xxx 并且满足 yyy 才算匹配条件</p> <h3 id="dotall模式"><a href="#dotall模式" class="header-anchor">#</a> dotAll模式</h3> <p>元字符<code>.</code> 默认可以匹配除换行符以外的任意单个字符, 但加上<code>s</code>修饰符元字符后<code>.</code>将可以匹配任意字符包括换行</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;ul&gt;
              &lt;li&gt;
                  &lt;a&gt;亮剑&lt;/a&gt;
                  &lt;p&gt;上映时间: 2000-10-1&lt;/p&gt;
              &lt;/li&gt;
              &lt;li&gt;
                  &lt;a&gt;手撕鬼子&lt;/a&gt;
                  &lt;p&gt;上映时间: 2000-9-1&lt;/p&gt;
              &lt;/li&gt;
          &lt;/ul&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// 加上 s修饰符 .* 匹配多个空格和换行 其他正常写</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;li&gt;.*?&lt;a&gt;(.*?)&lt;\/a&gt;.*?&lt;p&gt;(.*?)&lt;\/p&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">sg</span></span>

<span class="token comment">// 默认匹配一个结果</span>
<span class="token comment">// const result = reg.exec(str);</span>

<span class="token keyword">let</span> result<span class="token punctuation">;</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// while循环 多个匹配 不加g修饰符会死循环</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 92 201</span>
  <span class="token comment">// 保存数据</span>
  data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">time</span><span class="token operator">:</span>result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果如下</span>
<span class="token comment">// [</span>
<span class="token comment">//     {title: '亮剑', time: '上映时间: 2000-10-1'},</span>
<span class="token comment">//     {title: '手撕鬼子', time: '上映时间: 2000-9-1'}</span>
<span class="token comment">// ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h4 id="u修饰符"><a href="#u修饰符" class="header-anchor">#</a> u修饰符</h4> <p>其实正则不加<code>u</code>修饰符也可以匹配 <code>unicode</code>码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\u4e00-\u9fa5]{2,3}$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">;</span> <span class="token comment">// 2到3位汉字</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'李狗蛋'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'张三hello'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="y修饰符"><a href="#y修饰符" class="header-anchor">#</a> y修饰符</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">;</span> <span class="token comment">// 使用 y 模式第一次匹配的字符必须在开始位置</span>
<span class="token keyword">let</span> result<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>result <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;123 456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3条件匹配结果数组</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;正则下一次匹配的索引是: &quot;</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 索引分别是: 1 2 3</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="array的扩展功能和方法"><a href="#array的扩展功能和方法" class="header-anchor">#</a> Array的扩展功能和方法</h2> <h3 id="展开运算符"><a href="#展开运算符" class="header-anchor">#</a> 展开运算符</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>一般使用与数组上, 展开运算符不能应用在对象上, 如果要复制一个对象请这样 {...obj}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>可以将数组拆分成以逗号分隔的参数序列:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a b c</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>展开运算符应用于数组合并</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法一</span>
<span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">]</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>

<span class="token comment">// 方法二</span>
arr1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>使用展开运算符将类数组或可遍历对象转换为真正的数组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> divS <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>divS<span class="token punctuation">]</span><span class="token punctuation">;</span>

arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 可以调用数组的方法</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>展开运算符还可以应用在函数传参上</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>numbers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> pre <span class="token operator">+</span> cur<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="数组常用方法-包括es5和es6"><a href="#数组常用方法-包括es5和es6" class="header-anchor">#</a> 数组常用方法(包括ES5和ES6)</h3> <ul><li><p><code>includes()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>表示某个数组是否包含给定的值, 返回布尔值
用于替代 indexOf来判断数组中是否有指定的值的不足
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token comment">// includes方法可以识别出 NaN</span>
arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// -1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p><code>Array.from()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将类数组或可遍历对象转换为真正的数组(可以使用[...xxx]代替)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 效果等价于 [...arr]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (5) [1, 2, 3, 4, 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Array.from()</code>方法还可以接受第二个参数,
作用类似于数组的<code>map</code>方法, 用来对每个元素进行处理, 将处理后的值放入返回的数组, 利用这个特点可轻松实现数组的快速初始化:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">DATA</span> <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">名称</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i <span class="token operator">+</span> <span class="token number">10</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">DATA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 0: {name: '名称1', age: '10'}</span>
<span class="token comment">// 1: {name: '名称2', age: '11'}</span>
<span class="token comment">// 2: {name: '名称3', age: '12'}</span>
<span class="token comment">// 3: {name: '名称4', age: '13'}</span>
<span class="token comment">// 4: {name: '名称5', age: '14'}</span>
<span class="token comment">// 5: {name: '名称6', age: '15'}</span>
<span class="token comment">// 6: {name: '名称7', age: '16'}</span>
<span class="token comment">// 7: {name: '名称8', age: '17'}</span>
<span class="token comment">// 8: {name: '名称9', age: '18'}</span>
<span class="token comment">// 9: {name: '名称10', age: '19'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>二维数组的初始化:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">WIDTH</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">HEIGHT</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> grid <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token constant">WIDTH</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token constant">HEIGHT</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> y<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 0: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
<span class="token comment">// 1: [10, 11, 12, 13, 14, 15, 16, 17, 18, 19]</span>
<span class="token comment">// 2: [20, 21, 22, 23, 24, 25, 26, 27, 28, 29]</span>
<span class="token comment">// 3: [30, 31, 32, 33, 34, 35, 36, 37, 38, 39]</span>
<span class="token comment">// 4: [40, 41, 42, 43, 44, 45, 46, 47, 48, 49]</span>
<span class="token comment">// 5: [50, 51, 52, 53, 54, 55, 56, 57, 58, 59]</span>
<span class="token comment">// 6: [60, 61, 62, 63, 64, 65, 66, 67, 68, 69]</span>
<span class="token comment">// 7: [70, 71, 72, 73, 74, 75, 76, 77, 78, 79]</span>
<span class="token comment">// 8: [80, 81, 82, 83, 84, 85, 86, 87, 88, 89]</span>
<span class="token comment">// 9: [90, 91, 92, 93, 94, 95, 96, 97, 98, 99]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p><code>Array.of()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>和 new Array 效果类似, 只不过可以只创建一个元素的数组
而 new Array 只传一个元素则会创建指定长度的数组
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> result1 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10] 一个元素的数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [empty × 10] 长度为9的空数组 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>flat()</code> 与 <code>flatMap()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>flat 将多维数组转换为低维数组, 参数是一个数字(表示展平多少维的数组)
flatMap 相当于是 map 加 flat 的结合, 处理数组中的每一项 如果返回的是数组就展平
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// flat 将多维数组转换为低维数组</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 while 也可以展平多维数组</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 toString()方法也可以只不过会把每个元素都转成字符串</span>
arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ['1', '2', '3', '4', '5', '6', '7', '8']</span>

<span class="token comment">// flatMap 相当于是 map 加 flat 的结合</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 map 返回数组结果全部变成一维数组</span>
<span class="token comment">// const result = arr2.map(item=&gt;[item*10]); </span>

<span class="token comment">// flatMap 处理数组中的每一项 如果返回的是数组就展平</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">[</span>item<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [10, 20, 30, 40, 50]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li> <li><p><code>findIndex()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>用于找出第一个符合条件的数组成员的位置, 如果没有找到返回-1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> index <span class="token operator">=</span>  arr<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>fill</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>用于填充数组<span class="token punctuation">,</span>会修改数组并返回修改后的数组
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建长度为5的数组</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 全部填充0 [0,0,0,0,0]</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 索引为1开始填充5 [0,5,5,5,5]</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 索引2开始到-1索引填充8 [0,8,8,8,5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>for...of</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>会按照可迭代对象(迭代器)的 next方法产生值的顺序迭代元素
    用法类似 for...in, 可以直接使用也可以搭配

  数组的 entries() keys() values()返回一个遍历器  再使用for...of循环遍历需要的值

keys()是对键名(数组索引)的遍历
values()是对键值的遍历
entries()是对键值对的遍历
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>可迭代对象: 实现了 <strong>symbol[iterator]</strong> 接口的对象, 如: 字符串, 数组, arguments, map, set</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> arr<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 </span>
     				 <span class="token comment">// 1</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> val <span class="token keyword">of</span> arr<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a </span>
    			      <span class="token comment">// b</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> arr<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [0, 'a']</span>
                    <span class="token comment">// [1, 'b']</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p><code>for...of</code>循环同样支持<code>continue</code> <code>break</code></p></blockquote></li> <li><p><code>for...of</code> 和 <code>for...in</code> 的区别</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> xiyou <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'唐僧'</span><span class="token punctuation">,</span> <span class="token string">'孙悟空'</span><span class="token punctuation">,</span> <span class="token string">'猪八戒'</span><span class="token punctuation">,</span> <span class="token string">'沙僧'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// for of循环</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">of</span> xiyou<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 唐僧 孙悟空 猪八戒 沙僧 </span>
<span class="token punctuation">}</span>
<span class="token comment">// 或者配合 Object.entries</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>xiyou<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 1 2 3</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 唐僧 孙悟空 猪八戒 沙僧 </span>
<span class="token punctuation">}</span>

<span class="token comment">// for in循环</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> xiyou<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 1 2 3 (键名[索引])</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xiyou<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 唐僧 孙悟空 猪八戒 沙僧 (键值)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul> <h2 id="迭代器-iterator"><a href="#迭代器-iterator" class="header-anchor">#</a> 迭代器 (Iterator)</h2> <p>ES6 引入的一种新的迭代机制,(迭代器), 它可以被<code>for...of</code>消化, 可以使用<code>...</code>操作符, 作用是迭代各种数据结构可被便捷的访问, js中 <code>String</code> <code>Array</code> <code>arguments</code> <code>Set</code> <code>map</code> 都是已经实现了迭代器</p> <p>可迭代对象就是实现了<strong>迭代器协议</strong>的对象, 要获得迭代器就必须定义一个键为 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" target="_blank" rel="noopener noreferrer"><code>symbol[iterator]</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的方法, 它的返回值对象就是迭代器, 这个对象有<code>next</code>(<strong>可迭代协议</strong>)和<code>return</code>方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 调用 [Symbol.iterator] 方法获取迭代器</span>
<span class="token keyword">const</span> iter <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: &quot;one&quot;, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: &quot;two&quot;, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: &quot;three&quot;, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: undefined, done: true}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> v <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// one,two,three </span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> <span class="token string">'four'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['one', 'two', 'three', 'four']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>迭代器 next 方法</strong></p> <p>迭代器的<code>next</code> 方法可以多次调用, 每次调用获取一个迭代之后的结果对象, 格式是<code>{ value: xxx, done: false }</code>, <code>value</code>代表是当次迭代的值, <code>done</code>表示是否迭代完成</p> <p><strong>迭代器 return 方法</strong></p> <p>如果迭代器没有迭代到<code>next</code>方法返回<code>{ value: undefined, done: true }</code>被中止了(<code>break, return</code>), 则会去调用迭代器的<code>return</code>方法, <code>return</code>方法必须返回一个对象, 返回非对象属性会报错</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 自定义封装迭代器, 使用for...of每一次返回stus这个数组里的成员</span>
<span class="token keyword">const</span> banji <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'三年级'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stus</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'小明'</span><span class="token punctuation">,</span>
        <span class="token string">'小红'</span><span class="token punctuation">,</span>
        <span class="token string">'小张'</span><span class="token punctuation">,</span>
        <span class="token string">'小李'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 迭代器[Symbol.iterator]方法, 要加[]</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 闭包保存索引变量</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回迭代器对象</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// next方法 使用箭头函数里面要用到外面的 this</span>
            <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stus<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 构建指定类型的数据</span>
                    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stus<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">dome</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token comment">// 索引自增</span>
                    index<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token comment">// 返回结果</span>
                    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 迭代完成</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// return 方法迭代器被中止时触发, return break</span>
            <span class="token function-variable function">return</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'迭代器被中止了....'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> banji<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">===</span> <span class="token string">'小李'</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>数组的<code>values</code>方法就是返回自身的迭代器对象</p> <p><strong>迭代使用<code>...</code>语法可以再转换为数组</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 拿到迭代器</span>
<span class="token keyword">const</span> iter <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> head <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">// head =&gt; 1</span>
<span class="token keyword">const</span> rest <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>iter<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 转换为 数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// rest =&gt; [2, 3, 4, 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>需要注意的是每个迭代器只能使用一次, 调用一次<code>next</code>方法就会迭代一次, 迭代数据就会少一个, 当迭代完成以后再使用同一个迭代器里面就没有数据了</p></blockquote> <h3 id="迭代器协议和可迭代协议"><a href="#迭代器协议和可迭代协议" class="header-anchor">#</a> 迭代器协议和可迭代协议</h3> <p><strong>可迭代协议</strong>: 是一个对象实现了 <code>Symbol[iterator]</code> 方法</p> <p><strong>迭代器协议</strong>: 是一个对象实现了 <code>next</code> 方法</p> <p>但是一个对象是可以<strong>同时</strong>实现 <strong>可迭代协议</strong> 和 <strong>迭代器协议</strong>, 例如:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// obj 就是一个可迭代对象</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 迭代器协议</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// value: xxx,</span>
            <span class="token comment">// done: xxx</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 可迭代协议</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="生成器-generator"><a href="#生成器-generator" class="header-anchor">#</a> 生成器 (Generator)</h2> <p>生成器是使用ES6语法定义的迭代器, 特别适合迭代一些不是数据结构的值, 而是计算结构的场景</p> <p>生成器看上去像一个函数, 区别就是<strong>function</strong>关键字后面, 函数名前面多了一个星号<code>*</code>, 调用生成器函数并不会执行函数体, 而是返回一个生成器对象,</p> <p>这个生成器对象也是一个迭代器, 调用它的<code>next</code>方法会将导致生成器函数**从头(或从当前位置)**开始执行, 直至遇见<code>yield</code>关键字, <code>yield</code>是ES6的新特性, 类似于<code>return</code>语句来返回(<strong>回送</strong>)值, <code>yield</code>语句的值就是调用<code>next</code>方法返回的值</p> <h3 id="基本使用"><a href="#基本使用" class="header-anchor">#</a> 基本使用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 声明一个生成器</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'生成器函数被调用了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'调用第一次 next 方法'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'调用第二次 next 方法'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">'生成器函数已经调用完了'</span><span class="token punctuation">;</span> <span class="token comment">// 这里就直接返回对应值, 会自动添加到 next 方法返回值对象的value属性上</span>

<span class="token punctuation">}</span>
<span class="token comment">// 返回一个遍历器对象 和迭代器一样 可以使用next()方法</span>
<span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 打印 生成器函数被调用了</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 1, done: false}</span>
<span class="token comment">// 打印 调用第一次 next 方法</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 2, done: false}</span>
<span class="token comment">// 打印 调用第二次 next 方法</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: '生成器函数已经调用完了', done: true}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: undefined, done: true}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>生成器函数简写</strong></p> <p>在ES6的语法下定义方法时可以简写</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// geo: function* () {</span>
    <span class="token operator">*</span><span class="token function">geo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> item
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">.</span><span class="token function">geo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>注意: 箭头函数不可以定义生成器函数</p></blockquote> <h3 id="生成器交替迭代"><a href="#生成器交替迭代" class="header-anchor">#</a> 生成器交替迭代</h3> <p>生成器可以实现交替迭代给定元素的每个值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 利用 ... 语法把参数汇总成数组</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">alternate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取的迭代器组成的数组</span>
    <span class="token keyword">const</span> iterables <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 索引</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 迭代器数组有值就循环</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>iterables<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 索引超出数组长度归零(根据索引来拿迭代器))</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> iterables<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 调用迭代器 next 获取数据</span>
        <span class="token keyword">const</span> item <span class="token operator">=</span> iterables<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 是否迭代完成</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 迭代完成删除对应的迭代器</span>
            iterables<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// yield 对应的值</span>
            <span class="token keyword">yield</span> item<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token comment">// 索引自增</span>
            index<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">alternate</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['h', 1, 'e', 2, 'l', 3, 'l', 4, 'o', 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="yield-与递归生成器"><a href="#yield-与递归生成器" class="header-anchor">#</a> <strong>yield</strong>*与递归生成器</h3> <p>生成器函数还可以按顺序迭代指定元素</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">sequence</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>iterables</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> iter <span class="token keyword">of</span> iterables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'hi'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">sequence</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['h', 'i', 1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>像这种在生成器函数里回送其他可迭代对象的的操作还是很常见的, 所以在ES6中为这种行为定义了特殊的语法就是使用关键字<code>yield*</code>(注意后面带有<code>*</code>号), 它不只是回送一个值, 而是回送迭代可迭代对象的每一个回送值, 使用<code>yield*</code>可以将上面的<strong>sequence</strong>函数简写成如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">sequence</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>iterables</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> iter <span class="token keyword">of</span> iterables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用 yield* 来自动回送迭代器</span>
        <span class="token keyword">yield</span><span class="token operator">*</span> iter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'HTML'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">sequence</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['H', 'T', 'M', 'L', 1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>使用数组的<code>forEach</code>方法来消化迭代器是不行的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">sequence</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>iterables</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    iterables<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span>iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 什么也不会打印</span>
        <span class="token keyword">yield</span><span class="token operator">*</span> iter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>yield</code>和<code>yield*</code>只能在生成器函数中使用</p> <p><code>yield*</code>可以回送任何可迭代对象, 包括通过生成器实现的, 这意味着<code>yield*</code>可以定义递归生成器,</p> <p>利用这个特性可以简单的通过非递归迭代遍历, 通过递归递归定义的树结构数据</p> <h3 id="生成器函数的返回值"><a href="#生成器函数的返回值" class="header-anchor">#</a> 生成器函数的返回值</h3> <p>生成器函数行为类似于迭代器对象, 内部可以使用<code>yield</code>关键字来将函数的执行挂起, 后面继续调用<code>next</code>方法时会从上一次挂起的位置继续执行, 直至迭代完成, 迭代完成以后可以<strong>回送</strong>一个值, 这个值将会被赋值给<code>next</code>方法迭代完成后返回的第一个<code>deon</code>属性等于<code>true</code>的对象<code>value</code>属性上, 如果使用<code>for...of</code>和<code>...</code>操作符是拿不到最后那个<code>return</code>返回的值, 手动调用<code>next</code>方法可以拿的到</p> <p>一句话总结: 就是生成器通过<code>yield</code>向调用者返回值, 而调用者可以通过<code>next</code>方法向生成器传递值, 生成器和调用者是两个<strong>独立</strong>的执行流, 它们互相交替着传递值(和控制权), 如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'生成器被调用了收到第一个参数是'</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">'第一个 yield'</span><span class="token punctuation">;</span> <span class="token comment">// 第二次next()传进来的参数会覆盖掉这个yield的返回值对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第一次调用 next 方法收到的参数是'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token string">'第二个 yield'</span><span class="token punctuation">;</span> <span class="token comment">// 第三次next()传进来的参数会覆盖掉这个yield的返回值对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第二次调用 next 方法收到的参数是'</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取迭代器, 传递第一个参数</span>

<span class="token comment">// 生成器被调用了收到第一个参数是 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'这个参数谁也拿不到'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 第一个 yield, done: false}</span>

<span class="token comment">// 第一次调用 next 方法收到的参数是 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 第二个 yield, done: false}</span>

<span class="token comment">// 第二次调用 next 方法收到的参数是 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 5, done: true} 这个是最后 return 的值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p>生成器的第一次<code>next</code>方法传递的参数生成器函数是获取不到的,  要想传递第一个参数只能在调用生成器函数时传递才可以被生成器函数的形参获取到, 第二次<code>next</code>方法传递的参数会覆盖掉生成器函数第一个<code>yield</code>语句的返回值, 第三次参数覆盖第二个<code>yield</code>关键字的返回值, 依次类推</p></blockquote> <h3 id="生成器的-return-和-throw-方法"><a href="#生成器的-return-和-throw-方法" class="header-anchor">#</a> 生成器的 return 和 throw 方法</h3> <p>生成器和迭代一样也是有<code>return</code>方法, 生成器比迭代器多一个<code>throw</code>方法, 效果就想<code>throw</code>关键字一样</p> <p>生成器的功能非常强大, 可以使函数挂起, 然后可以在特定的时候再恢复执行, 不过滥用生成器的话代码会非常难以理解, 不过还好ES6已结推出了更加好用且友好的<code>Promise</code>对象和<code>async</code>函数</p> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h2> <p><code>Promise</code> 也称<strong>期约</strong>, 是异步编程的一种解决方案, 比传统的解决方案<strong>回调函数和事件</strong>更合理且更强大
它最早由社区提出并实现, ES6将其写进了语言标准, 统一了用法, 并让原生js也提供了<code>Promise</code>对象</p> <h3 id="promise的特点"><a href="#promise的特点" class="header-anchor">#</a> Promise的特点</h3> <p>Promise对象有一个状态, 这个状态不受外界影响, 状态一共分为3种:</p> <ul><li>**Pending状态 （进行中 \ 待定）**初始状态</li> <li><strong>Fulfilled状态 （已成功 \ 兑现）</strong></li> <li><strong>Rejected状态（已失败 \ 拒绝）</strong></li></ul> <p>一旦Promise对象的状态改变就不会再变, 是<strong>单向</strong>的, 不可逆转的 （两种状态改变: 成功或失败）
<strong>Pending -&gt; Fulfilled</strong> <strong>Pending -&gt; Rejected</strong></p> <h3 id="创建promise实例"><a href="#创建promise实例" class="header-anchor">#</a> 创建Promise实例</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>Promise构造函数接受一个函数作为参数, 该函数会收到两个参数, 这两个参数分别是 resolve 和 reject, 
	它们是两个函数, 由JavaScript引擎提供, 不用自己部署

resolve 和 reject 这两个参数(函数)可以在 Promise 构造函数接受的函数里面调用(可以传参), 
	这样将会改变 Promise 对象的状态

resolve()  ---&gt; 将 Promise对象的状态修改为成功 (Fulfilled), 并返回括号里的实参
reject()   ---&gt; 将 Promise对象的状态修改为失败 (Rejected), 并返回括号里的实参
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>注意: <code>Promise</code>对象在新建(<code>new</code>)后会被立即同步执行</p></blockquote> <p><code>then()</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>then方法是Promise实例的方法, Promise实例的状态不论成功或失败都会调用其then方法
该方法接受两个回调函数作为参数, 分别指定 Primise实例里面状态改变时调用的回调函数, 
接受到的参数就是 Promise 里面修改状态时传递的实参
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建一个Promise对象</span>
<span class="token keyword">const</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 模拟ajax获取数据</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// resolve('用户数据');</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'失败了!!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  then方法里面根据 pro对象里的状态, 来决定那个回调函数</span>
pro<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用户数据</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 失败了!!!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>then()</code>的返回值</p> <p><code>then</code>方法如果是返回一个新的<code>Promise</code>对象, 就可以继续使用<code>then</code>方法这种调用方式被称为<strong>链式调用</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建一个Promise对象</span>
<span class="token keyword">const</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 模拟ajax获取数据</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'用户数据1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

pro<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">// 模拟ajax获取数据</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>res <span class="token operator">+</span> <span class="token string">'用户数据2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用户数据1用户数据2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><p>如果<code>then()</code>成功回调函数中返回的结果 <code>非Promise</code>类型的属性, 那返回的<code>Promise</code>对象的状态为<code>成功</code>, 返回值为对象的成功值</p></li> <li><p>如果<code>then()</code>成功回调函数中返回的结果 <code>是Promise</code> 对象, 那这个对象内部的<code>Promise</code>对象的状态决定了<code>then()</code>返回的<code>Promise的状态</code></p></li> <li><p>如果<code>then()</code>成功回调函数中返回的结果是抛出错误(<code>thorw语句</code>), 那返回的<code>Promise</code>对象的状态为<code>失败</code>, 返回值就是抛出错误的值</p> <blockquote><p>如果返回<strong>错误对象</strong>那返回的<code>Promise</code>对象的状态为<strong>成功</strong>, 值是错误对象</p></blockquote></li> <li><p>根据<code>then()</code>的特点在上一个<code>then()</code>里面, <code>return</code> 想要的数据, 这样就可以被下一个<code>then()</code>拿到这个数据了, 依次类推</p></li></ul> <p><code>catch()</code></p> <p>可以捕获在这一条 <code>Promise</code> 链式调用上的异常</p> <p>在使用 <code>then</code> 捕获失败回调, 一般不会指定第二个参数, 而是使用 <code>catch</code>方法</p> <p><code>catch</code>方法可以比作是<code>then</code>方法的第二个期约拒绝时的函数参数的简写</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'用户数据1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

pro<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> res <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">用户数据2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">'出错了!!!'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">// 最后的catch()方法可以捕获在这一条 Promise 链式调用上的异常</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 出错了!!!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>finally()</code></p> <p>同<code>try/catch</code>异常捕获中的<code>finally</code>子句效果一样, 但是使用时有一点区别</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'resolve'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// p = Promise.reject('reject');</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 这里是要使用括号的, 接受一个函数作为参数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'finally'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无论成功还是失败都会执行这里</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="promise请求失败重试效果"><a href="#promise请求失败重试效果" class="header-anchor">#</a> Promise请求失败重试效果</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 记录重试的次数</span>
<span class="token keyword">let</span> retries <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">// 请求函数</span>
<span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter">onError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 失败5次后成功回调</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>retries <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'resolve'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// load 函数接受一个 onError 回调函数</span>
<span class="token keyword">function</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter">onError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onError <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">&quot;onError 参数必须是一个函数&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 调用 request 函数</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 捕获错误并返回</span>
  <span class="token keyword">return</span> p<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 错误发生时, 返回一个 promise 对象</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// retry 函数用于重试, 调用时会重新调用 request 函数</span>
      <span class="token keyword">const</span> <span class="token function-variable function">retry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 重新调用 load 函数</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">load</span><span class="token punctuation">(</span>onError<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 重试次数++</span>
        retries<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// fail 函数用于中断重试</span>
      <span class="token keyword">const</span> <span class="token function-variable function">fail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 这里一定要调用 onError回调并传递 retry 和 fail 函数</span>
      <span class="token function">onError</span><span class="token punctuation">(</span>retry<span class="token punctuation">,</span> fail<span class="token punctuation">,</span> retries<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token function">load</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">retry<span class="token punctuation">,</span> fail<span class="token punctuation">,</span> retries</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">正在重试</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>retries<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">次</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 失败后一直重试</span>
    <span class="token function">retry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 失败后不重试</span>
    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;失败&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h3 id="promise的优缺点"><a href="#promise的优缺点" class="header-anchor">#</a> Promise的优缺点</h3> <p><strong>优点:</strong></p> <ul><li>解决回调地狱的问题</li> <li>可以链式调用</li> <li>减少代码嵌套</li></ul> <p><strong>缺点:</strong></p> <ul><li>无法取消<code>Promise</code>, 一旦新建它就会立即执行, 无法中途取消</li> <li>如果不设置回调函数, <code>Promise</code>内部抛出的错误, 不会反映到外部</li> <li>当处于<code>pending</code>状态时, 无法得知目前在哪一个阶段, 是刚刚开始还是即将完成</li></ul> <h3 id="promise的方法"><a href="#promise的方法" class="header-anchor">#</a> Promise的方法</h3> <p><code>Promise.resolve()</code></p> <p>立即返回一个状态是**成功(Fulfilled)**的 <code>Promise</code> 对象, 可以传参, 参数就会被 <code>then</code> 成功回调(<strong>异步微任务</strong>)接受到</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>利用<code>Promise.resolve()</code>方法可以创建一个微任务</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'-宏任务-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; setTimeout(() =&gt; console.log('-宏任务-'), 0);</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'-resolve微任务-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; p.then(res =&gt; console.log(res));</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-同步任务-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 先输出 -同步任务- -resolve微任务- 最后输出 -宏任务-</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>Promise.reject()</code></p> <p>和 <code>Promise.resolve()</code> 一样不过返回的状态是<strong>失败(Rejected)<strong>的 <code>Promise</code> 对象(同样是</strong>微任务</strong>)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'-宏任务-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'-reject微任务-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; p.then(_ =&gt; { }, console.log);</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-同步任务-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 先输出 -同步任务- -reject微任务- 最后输出 -宏任务-</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>Promise.all()</code></p> <p>接收一个参数, 是数组但里面存储的是<code>Promise</code> 对象</p> <p><code>Promise.all</code> 会等待所有的 <code>Promise</code> 对象都<strong>完成(或第一个失败)</strong>, 返回一个 <code>Promise</code> 对象</p> <p>它最终只有两种状态: 成功或者失败, 它的状态受参数内各个值的状态影响,</p> <p>即里面状态全部为<strong>成功(fulfilled)时, 它才会变成成功, 否则变成失败(rejected)</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token string">'b'</span>
<span class="token keyword">const</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// const p3 = Promise.reject('c');</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 三个异步任务</span>
res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">arr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 三个Promise 对象都成功时(Fulfilled) 才算成功</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['a', 'b', 'c']</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 任何一个失败都会失败</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>使用 <code>Promise.all(req1,req2, req3)</code> 可以并行请求数据, 减少请求时间</p></blockquote> <p><code>Promise.allSettled()</code></p> <p><code>Promise.allSettled()</code>和<code>Promise.all()</code>类似只不过是接受的期约对象无论是成功还是失败都会触发<code>then</code>回调每个期约返回一个对象<code>status</code>属性表示状态, <strong>fulfilled</strong>表示兑现  <code>value</code> 就是兑现的值,<strong>rejected</strong>  表示拒绝  <code>reason</code> 就是拒绝的值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token string">'b'</span>
<span class="token keyword">const</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> res <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 三个异步任务</span>
res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">arr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 无论三个 Promise 对象是兑现还是拒绝都会触发</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>status<span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// fulfilled a</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>status<span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// rejected c</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>Promise.race()</code></p> <p><code>Promise.race()</code>和<code>Promise.all()</code>类似, 都接收一个可以迭代的参数, 但是不同之处是</p> <p><code>Promise.race()</code>的状态变化不是全部受参数内的状态影响, 一旦参数内有一个值的状态发生了改变,</p> <p>那么返回的<code>Promise</code>对象的状态就是最先改变的那个参数的值</p> <h2 id="async函数"><a href="#async函数" class="header-anchor">#</a> async函数</h2> <p>顾名思义, 异步, <strong>async</strong> 是一种函数是对 <code>Generator</code> 函数的改进, 只需在<strong>function</strong>前面加上 <code>async</code> 关键字, 即可创建一个 <code>async 函数</code></p> <p><strong>特点:</strong></p> <ul><li><code>async函数</code>总是返回一个<code>Promise对象</code>, 如果代码中有<code>return 非Promise对象</code>, 同 <code>then()</code>的返回值一样处理</li> <li><code>async函数</code>内部抛出错误, 会导致返回的 <code>Promise</code> 对象变为失败<code>rejected</code>状态, 抛出的错误对象也会被<code>catch()</code>捕获</li></ul> <p><strong>优点:</strong></p> <ul><li>内置执行器</li> <li>更好的语义</li> <li>更广的适用性</li> <li>返回值是 <code>Promise</code></li></ul> <p><strong><code>await</code>表达式</strong></p> <ul><li><p><code>await</code> 必须写在 <code>async 函数</code> 里</p></li> <li><p><code>await</code> 会等待右侧的表达式, 一般为 <code>Promise</code> 对象, 如不是则会转换</p></li> <li><p><code>await</code> 返回的是 <code>Promise</code> 成功的值</p></li> <li><p><code>await</code> 等待的 <code>Promise</code> 失败了, 就会抛出异常, 需要通过 <code>try...catch</code> 捕获处理</p></li> <li><p><code>await</code>都是配合<code>async函数</code>使用可以让异步带代码跟同步代码一样</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建一个async 函数</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'async + await'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> promise <span class="token comment">// 等待直到promise执行完才往下执行</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 一秒后执行弹窗 'async + await'</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul> <h3 id="async-捕获错误"><a href="#async-捕获错误" class="header-anchor">#</a> async 捕获错误</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>function <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> new <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token char">'Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用<strong>try/catch</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>async</strong> 也是可以使用 <strong>.catch</strong></p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
async function <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> await <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="async-实现非阻塞的暂停"><a href="#async-实现非阻塞的暂停" class="header-anchor">#</a> async 实现非阻塞的暂停</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1000 毫秒后向下执行</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2000 毫秒后向下执行</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1000 毫秒后向下执行</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello async await'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="for-await循环-异步迭代器"><a href="#for-await循环-异步迭代器" class="header-anchor">#</a> for/await循环(异步迭代器)</h3> <p><code>for/await</code>与常规的<code>await</code>表达式类似也是只能在<code>async</code>函数内使用, <code>for/await</code>相当于是基于期约的, 可以执行异步的<code>for/of</code>循环</p> <p>示例使用<code>for/await</code>循环请求接口数据:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// node 路由</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 跨域</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/hello'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/world'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务启动成功, 3000端口'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//-------------------------------------------------------</span>

<span class="token comment">// 需要循环遍历的 url 地址</span>
<span class="token keyword">const</span> urlList <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;http://localhost:3000/&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://localhost:3000/hello&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://localhost:3000/world&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 map + fetch 构建期约数组</span>
<span class="token comment">// const urlMap = urlList.map(url =&gt; fetch(url));</span>
<span class="token keyword">const</span> urlMap <span class="token operator">=</span> urlList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 调用请求处理函数</span>
<span class="token function">request</span><span class="token punctuation">(</span>urlMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 请求处理函数</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter">urlMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 for/await...of</span>
    <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> urlMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里面就可以不用 await item 这样写了</span>
        <span class="token comment">// 直接可以获取到返回的期约结果</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// index</span>
        				   					<span class="token comment">// hello </span>
        				   					<span class="token comment">// world</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h3 id="async-控制并发数"><a href="#async-控制并发数" class="header-anchor">#</a> async 控制并发数</h3> <p>有时在开发中会碰到发送多个异步任务的情况, 可以使用<code>Promise</code>下面的<code>all</code>, <code>allSettled</code>, <code>race</code>等方法, 但是这些方法并没有提供控制并发数量的方式, 我们可以使用<code>Promise</code>+<code>栈</code>的方式实现, 如下:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/** 数据类型, 必须指定 task */</span>
<span class="token keyword">type</span> <span class="token class-name">SyncTaskType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 异步任务 */</span>
  <span class="token function-variable function">task</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
    
  <span class="token comment">/** 其它参数 */</span>
  <span class="token punctuation">[</span>k<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 执行并发操作 */</span>
<span class="token keyword">const</span> syncTask <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>opt<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">/** 异步任务队列 */</span>
  taskList<span class="token operator">:</span> SyncTaskType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">/** 并发数 */</span>
  limit<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">/** 任务执行成功回调 */</span>
  onSuccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> item<span class="token operator">:</span> SyncTaskType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token comment">/** 任务执行失败回调 */</span>
  onError<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> item<span class="token operator">:</span> SyncTaskType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token comment">/** 任务执行完成回调 */</span>
  onFinally<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> SyncTaskType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token comment">/** 成功的返回值 */</span>
  successList<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">/** 失败的返回值 */</span>
  errorList<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 正在运行的任务</span>
    <span class="token keyword">const</span> runningPool<span class="token operator">:</span> SyncTaskType<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 等待运行的任务</span>
    <span class="token keyword">const</span> waitinggPool<span class="token operator">:</span> SyncTaskType<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 成功运行返回值</span>
    <span class="token keyword">const</span> successList<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 失败运行返回值</span>
    <span class="token keyword">const</span> errorList<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 运行任务</span>
    <span class="token keyword">const</span> <span class="token function-variable function">walker</span> <span class="token operator">=</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> SyncTaskType<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      item
        <span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          opt<span class="token punctuation">.</span>onSuccess <span class="token operator">&amp;&amp;</span> opt<span class="token punctuation">.</span><span class="token function">onSuccess</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
          successList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          opt<span class="token punctuation">.</span>onError <span class="token operator">&amp;&amp;</span> opt<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
          errorList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          opt<span class="token punctuation">.</span>onFinally <span class="token operator">&amp;&amp;</span> opt<span class="token punctuation">.</span><span class="token function">onFinally</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token comment">// 任务出栈</span>
          runningPool<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>waitinggPool<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 拿出下一个任务</span>
            <span class="token keyword">const</span> next <span class="token operator">=</span> waitinggPool<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// 继续入栈任务</span>
              runningPool<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token comment">// 继续运行</span>
              <span class="token function">walker</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当前没有正在运行的任务</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>runningPool<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                successList<span class="token punctuation">,</span>
                errorList
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 开始执行</span>
    opt<span class="token punctuation">.</span>taskList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 当前正在执行的任务小于给定的并发数</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>runningPool<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> opt<span class="token punctuation">.</span>limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 入栈任务</span>
        runningPool<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 开始执行</span>
        <span class="token function">walker</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 超过最大并发, 保存到等待运行任务中</span>
        waitinggPool<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 异步休眠函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token punctuation">(</span>timeout<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 测试代码</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">syncTask</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      taskList<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token function-variable function">task</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token function-variable function">task</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token function-variable function">task</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token function-variable function">task</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      limit<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
			<span class="token function">onSuccess</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;onSuccess: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">onError</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;onError: &quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">onFinally</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;onFinally: &quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
    <span class="token comment">/**
     * onSuccess:  1 { task: [Function: task], a: 1 }
     * onSuccess:  2 { task: [Function: task], data: 2 }
     * onFinally:  { task: [Function: task], a: 1 }
     * onFinally:  { task: [Function: task], data: 2 }
     * onError:  3 { task: [Function: task], age: 18 }
     * onFinally:  { task: [Function: task], age: 18 }
     * onSuccess:  undefined { task: [Function: task], b: true }
     * onFinally:  { task: [Function: task], b: true }
     * res:  { successList: [ 1, 2, undefined ], errorList: [ 3 ] }
     */</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;res: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;err: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br></div></div><h3 id="转移promise执行函数"><a href="#转移promise执行函数" class="header-anchor">#</a> 转移Promise执行函数</h3> <p>在<code>new Promise(resolve, reject =&gt; { // ... })</code>时可以得到两个修改并触发<code>Promise</code>状态的方法, 这个两个方法可以临时保存起来, 然后在需要触发的时候调用即可触发, 这样的场景在使用第三方批量打印标签并且需要在打印完成后读取标签数据时会用到, 具体业务就是<strong>使用<code>websocket</code>批量发送打印标签数据, 标签是逐个打印的, 打印完成后返回标签的数据,需要对返回的数据进行处理</strong>, 这个场景第一时间肯定会想到使用栈的方式去执行, 打印前入栈, 打印完成后出栈, 然后继续入栈, 出栈这里不多说, 直接看如何使用<code>Promise</code>的方式去处理, 如下:</p> <p>这里定义一个全局变量和一个获取<code>Promise</code>的<code>resolve</code>函数的方法:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/** 全局 Promise resolve */</span>
<span class="token keyword">let</span> <span class="token function-variable function">_gloablePromiseResolve</span><span class="token operator">:</span> <span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">void</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'没有重新赋值为Promise resolve函数, 请检查代码'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 全局 Promise reject */</span>
<span class="token keyword">let</span> <span class="token function-variable function">_gloablePromiseReject</span><span class="token operator">:</span> <span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">void</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'没有重新赋值为Promise reject函数, 请检查代码'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 打印超时时间定时器 */</span>
<span class="token keyword">let</span> timeoutTimer<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>Timeout <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">AnyParamsFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token comment">/** 立即获取一个 Promise 的 resolve 和 reject 函数 */</span>
<span class="token keyword">const</span> getCallbackAsync <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function-variable function">getResolve</span><span class="token operator">:</span> <span class="token punctuation">(</span>resolveFn<span class="token operator">:</span> AnyParamsFn<span class="token punctuation">,</span> rejectFn<span class="token operator">:</span> AnyParamsFn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">getResolve</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>具体的业务:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/** 定义打印SDK的类型 */</span>
<span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
	<span class="token constant">PRINT_JSSDK</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function">print</span><span class="token punctuation">(</span>printData<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 打印超时 30s</span>
<span class="token keyword">const</span> <span class="token constant">PRINT_TIMOUT</span> <span class="token operator">=</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">handlePrint</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>opt<span class="token operator">:</span> PrintOption<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token comment">// websocket 连接</span>
		<span class="token keyword">const</span> connectRes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			wsIp<span class="token operator">:</span> config<span class="token punctuation">.</span>wsIp<span class="token punctuation">,</span>
			port<span class="token operator">:</span> config<span class="token punctuation">.</span>wsPort
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>connectRes<span class="token punctuation">.</span>ws<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// websocket 监听事件</span>
			connectRes<span class="token punctuation">.</span>ws<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> handleOnMessage<span class="token punctuation">;</span>

			<span class="token comment">// 加载打印的SDK</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span><span class="token constant">PRINT_JSSDK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// @ts-ignore</span>
				<span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../PRINT_JSSDK.min.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span><span class="token constant">PRINT_JSSDK</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;PRINT_JSSDK加载失败, 无法打印&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> opt<span class="token punctuation">.</span>printList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">const</span> item <span class="token operator">=</span> opt<span class="token punctuation">.</span>printList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// 开始打印, 这里的打印成功或者失败是不知道的, 需要通过 websocket 返回通知才能确定</span>
				window<span class="token punctuation">.</span><span class="token constant">PRINT_JSSDK</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
				<span class="token comment">// 重点: 这里异步阻塞, 一直等到有打印结果就继续往下执行</span>
				<span class="token keyword">const</span> printRes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">getCallbackAsync</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span>
					isSuccess<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
					printData<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
					remarks<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolveFn<span class="token punctuation">,</span> rejectFn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          
          <span class="token comment">// 赋值 _gloablePromiseResolve 函数</span>
          <span class="token function-variable function">_gloablePromiseResolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span>par<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 这里触发打印完成时, 关闭超时打印定时器</span>
            timeoutTimer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutTimer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 触发 Promise 的 resolve 函数</span>
            <span class="token function">resolveFn</span><span class="token punctuation">(</span>par<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          
          <span class="token comment">// 赋值 _gloablePromiseReject 函数</span>
          _gloablePromiseReject <span class="token operator">=</span> rejectFn<span class="token punctuation">;</span>
          
          <span class="token comment">// 这里开启超时打印定时器, 避免前端发送了打印数据, 但是打印机不返回数据, 就会一直卡着</span>
          timeoutTimer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutTimer<span class="token punctuation">)</span><span class="token punctuation">;</span>
          timeoutTimer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 这里可以执行 resolve</span>
            <span class="token function">_gloablePromiseResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              isSuccess<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              printData<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
              remarks<span class="token operator">:</span> <span class="token string">&quot;打印超时&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// 也可以执行 reject </span>
            <span class="token comment">// _gloablePromiseReject(new Error(`打印超时, 超时的打印数据如下: ${JSON.stringify(item, null, 2)}`));</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">PRINT_TIMOUT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 这里就可以对打印结果进行处理了</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>printRes<span class="token punctuation">.</span>isSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;打印成功: &quot;</span><span class="token punctuation">,</span> printRes<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;打印失败: &quot;</span><span class="token punctuation">,</span> printRes<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// 打印完成</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;websocket connect fail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;err: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>err <span class="token keyword">instanceof</span> <span class="token class-name">Error</span> <span class="token operator">?</span> err<span class="token punctuation">.</span>message <span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 处理 websocket onMessage 事件 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleOnMessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> MessageEvent<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token function-variable function">triggerPrintError</span> <span class="token operator">=</span> <span class="token punctuation">(</span>remarks<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里把保存的 Promise 的 resolve 执行, 并返回结果, 就会解除上面打印的阻塞</span>
		<span class="token function">_gloablePromiseResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			isSuccess<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
			printData<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
			remarks
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理打印响应</span>
		<span class="token keyword">const</span> printData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
		<span class="token keyword">if</span> <span class="token punctuation">(</span>printData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里把保存的 Promise 的 resolve 执行, 并返回结果, 就会解除上面打印的阻塞</span>
			<span class="token function">_gloablePromiseResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				isSuccess<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				printData<span class="token operator">:</span> printData<span class="token punctuation">,</span>
				remarks<span class="token operator">:</span> <span class="token string">&quot;success&quot;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token function">triggerPrintError</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">打印失败: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">triggerPrintError</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">JSON反序列化失败: </span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br></div></div><h2 id="代理和反射"><a href="#代理和反射" class="header-anchor">#</a> 代理和反射</h2> <p>ES6新增的代理和反射提供了拦截基本操作可以嵌入额外的能力, 只需要给目标对象定义一个代理对象, 通过代理对象来访问这个目标对象</p> <p><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">Proxy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 对象用于创建一个<strong>对象的代理</strong>，从而实现基本操作的拦截和自定义（如属性查找、赋值、枚举、函数调用等)</p> <p><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect" target="_blank" rel="noopener noreferrer">Reflect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 是一个内置的对象, 它提供对一个对象的默认行为(读取, 设置, 调用或一些特定API), 这些默认行为的API <strong>在 Proxy 的捕获器中都能找到一样的方法</strong>,<code>Reflect</code>不是一个函数对象，因此它是不可构造的</p> <p>简单例子, 代理获取, 设置, 删除属性:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取属性额外行为</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// API名和参数都一样</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置属性额外行为</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参数一样可以直接使用 arguments + 展开运算符</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'del()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除属性额外行为</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参数一样可以直接使用 arguments + 展开运算符</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span>a <span class="token comment">// get()</span>
proxy<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// set()</span>
<span class="token keyword">delete</span> proxy<span class="token punctuation">.</span>a<span class="token punctuation">;</span> <span class="token comment">// del()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p><code>Proxy</code>对象的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/get" target="_blank" rel="noopener noreferrer"><code>get</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set" target="_blank" rel="noopener noreferrer"><code>set</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法可以收到第三个或第四个参数表示获取或设置值的<code>this</code>指向(<strong>是谁在读取或设置值</strong>)</p></blockquote> <blockquote><p><code>Reflect</code>对象的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/get" target="_blank" rel="noopener noreferrer"><code>get</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set" target="_blank" rel="noopener noreferrer"><code>set</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法可以指定第三个或第四个参数表示获取或设置值的<code>this</code>指向(<strong>要读取或设置谁的值</strong>)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bar
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">999</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; 是 999 而不是 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>可撤销代理</strong></p> <p><code>Proxy.revocable</code>是一个工厂函数, 返回一个对象包括<code>proxy</code>和<code>revoke</code>函数, 调用<code>revoke</code>函数代理立即失效</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'我是数据'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> proxy<span class="token punctuation">,</span> revoke <span class="token punctuation">}</span> <span class="token operator">=</span> Proxy<span class="token punctuation">.</span><span class="token function">revocable</span><span class="token punctuation">(</span>getData<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 我是数据</span>
<span class="token function">revoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 撤销代理</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>利用代理包装一个目标对象的只读包装器</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">readOnlyProxy</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">readonly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token string">'代理对象为只读, 不可修改'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// 属性设置操作的捕捉器</span>
        <span class="token literal-property property">set</span><span class="token operator">:</span> readonly<span class="token punctuation">,</span>
        <span class="token comment">// Object.defineProperty 方法的捕捉器</span>
        <span class="token literal-property property">defineProperty</span><span class="token operator">:</span> readonly<span class="token punctuation">,</span>
        <span class="token comment">// Object.setPrototypeOf 方法的捕捉器</span>
        <span class="token literal-property property">setPrototypeOf</span><span class="token operator">:</span> readonly<span class="token punctuation">,</span>
        <span class="token comment">// delete 操作符的捕捉器</span>
        <span class="token literal-property property">deleteProperty</span><span class="token operator">:</span> readonly<span class="token punctuation">,</span>
        <span class="token comment">// Object.isExtensible 方法的捕捉器(查看是否可扩展)</span>
        <span class="token function-variable function">isExtensible</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">// Object.getOwnPropertyDescriptor 方法的捕捉器(返回属性描述符对象)</span>
        <span class="token literal-property property">getOwnPropertyDescriptor</span><span class="token operator">:</span> readonly<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">readOnlyProxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>
proxy<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">;</span> <span class="token comment">// TypeError 不可以修改属性</span>
proxy<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// TypeError 不可以修改原型</span>
<span class="token keyword">delete</span> proxy<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// TypeError 不可以删除属性</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError 不可以获取描述符对象</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'李四'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError 不可以修改属性</span>
Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong>代理对象隐藏目标对象的特定属性</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'小红'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token literal-property property">weight</span><span class="token operator">:</span> <span class="token string">'50kg'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">160</span><span class="token punctuation">,</span>
    <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">'女'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 隐私属性</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'weight'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token string">'个人隐私无可奉告'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// Uncaught 个人隐私无可奉告</span>
proxy<span class="token punctuation">.</span>weight<span class="token punctuation">;</span> <span class="token comment">// Uncaught 个人隐私无可奉告</span>
proxy<span class="token punctuation">.</span>height<span class="token punctuation">;</span> <span class="token comment">// Uncaught 个人隐私无可奉告</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>利用代理对象来检验构造函数参数是否符合要求</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> argumentsList<span class="token punctuation">,</span> newTarget</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target <span class="token operator">===</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>argumentsList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, true, {…}]</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newTarget <span class="token operator">===</span> proxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>argumentsList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第一个参数必须为数值1</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">proxy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
<span class="token keyword">new</span> <span class="token class-name">proxy</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught 第一个参数必须为数值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>代理不变式</strong></p> <p>代理的对象和目标对象的状态不一致时, 代理就会抛出 <strong>TypeError</strong> 错误</p> <p>例如: 为不可扩展对象, 创建代理, 而他的<code>isExtensible()</code>处理器却返回<code>true</code>(可以扩展), 代理就会抛出错误</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">isExtensible</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Reflect<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>同样一个对象的某个值不可修改, 不可配置, 如果他的代理的<code>get()</code>返回了跟这个属性不一致的值, 也会报错</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">999</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
proxy<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">// TypeError</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><strong>Proxy</strong> 的捕获器方法和 <strong>Reflect</strong> 的API都是一 一对应的(参数也是一样的), 几乎可以拦截代理对象的一切常规操作</p></blockquote> <h2 id="class"><a href="#class" class="header-anchor">#</a> class</h2> <p>在 ES6 中的class关键字用于声明类(类声明), 没有声明提升, ES6 的class可以看作是一个语法糖, 而类本身可以看作一个构造函数
既然是构造函数, 就能够<code>new</code>实例</p> <ul><li>在<code>class</code>中声明的函数实际上是绑定在原型上的</li> <li>在<code>class</code>上的函数不需要写<code>fucntion</code></li> <li>多个方法之间<strong>不需要</strong>添加逗号分隔</li> <li>在<code>class</code>的方法中默认开启了局部严格模式</li> <li><code>class</code>是不允许不使用<code>new</code>关键字直接调用的</li></ul> <h3 id="constructor-构造器"><a href="#constructor-构造器" class="header-anchor">#</a> constructor(构造器)</h3> <ul><li><code>constructor</code>方法写在 class 里用于传递参数, 返回实例对象, 通过 <code>new</code> 生成实例时会自动调用</li> <li><code>constructor</code>方法里的 <code>this</code> 就是通过 new class 创建的实例对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    a <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 所有的 Person 实例都会在自身赋值 a = 1</span>

	<span class="token comment">// 写在 constructor方法 以外的方法都会被声明到 这个class的原型对象上 </span>
    <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="私有属性"><a href="#私有属性" class="header-anchor">#</a> 私有属性</h3> <p>在 class 里面使用<code>#变量名</code>定义的就是私有属性, 只能在类的内部访问, 外部访问会报错</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token comment">// 共有属性(写不写都行)</span>
    name<span class="token punctuation">;</span>
    <span class="token comment">// 私有属性(必须需提前声明才可以使用赋值给 this)</span>
    #weight<span class="token punctuation">;</span>
    #age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
    <span class="token comment">// 构造方法</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> weight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#weight <span class="token operator">=</span> weight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 在 calss 里读取</span>
    <span class="token function">infro</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>#weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 还可以使用 get 来获取</span>
    <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 实例化</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span> <span class="token string">'50kg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// console.log(p1.name); // 小红</span>
<span class="token comment">// console.log(p1.#weight); // 类外部不能访问报错</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 利用get获取不会报错</span>
p1<span class="token punctuation">.</span><span class="token function">infro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 小红 50</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="类里面也可以使用迭代器"><a href="#类里面也可以使用迭代器" class="header-anchor">#</a> 类里面也可以使用迭代器</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>class MyClass <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char">'张三'</span><span class="token punctuation">,</span> <span class="token char">'李四'</span><span class="token punctuation">,</span> <span class="token char">'王五'</span><span class="token punctuation">,</span> <span class="token char">'赵六'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 自定义生成器</span>
  <span class="token comment">// *[Symbol.iterator]() {</span>
  <span class="token comment">//     yield* Object.entries(this.value); // 这里加*号可以展开所有的数据</span>
  <span class="token comment">// }</span>

  <span class="token comment">// 直接返回迭代器实例</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> cls <span class="token operator">=</span> new <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> of cls<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="class-的-getter和setter"><a href="#class-的-getter和setter" class="header-anchor">#</a> class 的 getter和setter</h3> <p>可以和class的方法进行一个绑定</p> <ul><li>设置了<code>get</code>关键字的方法被获取时, 会自动执行get对应的函数, 函数里的返回值就是这个属性的值</li> <li>设置了<code>set</code>关键字的方法被修改时, 会自动执行set对应的函数(set必须要有一个参数), 且这个函数会收到要修改的值</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当被读取时触发这个方法</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getter value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 返回的值就是调用这个属性的值</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当被修改时触发, 且最少要设置一个形参</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setter &quot;</span> <span class="token operator">+</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 实例化对象</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;getter value&quot;</span>
<span class="token comment">//  张三</span>
s<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">;</span> <span class="token comment">// setter 李四</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>ES6的类其实可以当做是ES5构造函数的语法糖</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
per<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hello world</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="class-的一些关键字"><a href="#class-的一些关键字" class="header-anchor">#</a> class 的一些关键字</h3> <p><code>static</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>将类的属性或方法设置为静态属性或方法, 只能通过class自身调用(定义在类身上), 实例无法访问
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> name <span class="token operator">=</span> <span class="token string">&quot;Person&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你好 我是一个人&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
Person<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>extends</code></p> <p><code>extends</code>关键字要和<code>super</code>关键字相互使用, 完成继承指定 calss 里的属性和方法</p> <p><code>super</code></p> <p>用于访问和调用父类的构造函数</p> <p><code>exteds</code>和<code>super</code> 的基本使用(ES6继承)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 动物类</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">kind<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>kind <span class="token operator">=</span> kind<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> kind<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">你好啊! 我属于</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>kind<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">类动物, 叫</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">岁了!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义 狗类 继承自 动物类</span>
<span class="token keyword">class</span> <span class="token class-name">Deg</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不指定 constructor 会把子类收到的参数统统都传递给父类</span>
    
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Deg test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义 猫类 继承自 动物类</span>
<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">kind<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>kind<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token comment">// 相当于 Animal.constructor(kind, name, age)</span>
        <span class="token comment">// 子类继承父类的话 this必须写在 super关键字后面</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Deg</span><span class="token punctuation">(</span><span class="token string">'狗'</span><span class="token punctuation">,</span> <span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">'猫'</span><span class="token punctuation">,</span> <span class="token string">'小喵'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

d1<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 你好啊! 我属于狗类动物, 叫旺财, 2岁了!</span>
c1<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 你好啊! 我属于猫类动物, 叫小喵, 1岁了!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><ul><li><p>继承的几个注意点:</p> <ul><li><p>子类在构造函数中使用<code>super</code> , 那么子类的 <code>this</code> 必须放到 <code>super</code> 后面</p></li> <li><p><code>super</code>方法只能在<strong>子类构造函数</strong>和<strong>子类静态方法</strong>中使用</p></li> <li><p>调用<code>super</code>方法会调用父类的构造函数, 并将返回的实例赋值给 <code>this</code></p></li> <li><p>不能单独引用 <code>super</code> 要么调用它, 要么利用在子类静态方法里面调用父类静态方法</p> <p><code>super</code> 的详细使用注意点如下:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>class Parent <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'Parent constructor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">parentStaticFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'Parent parentStaticFn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

class child extends Parent<span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// console.log(this); // Error super 之前不能访问 this</span>
        
        <span class="token function">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ok 在子类的构造函数里是可以调用 super 的</span>
            
        <span class="token comment">// console.log(super); // Error 不能访问 super</span>
            
        <span class="token comment">// this.init(); </span>
        child<span class="token punctuation">.</span><span class="token function">childStaticFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">childStaticFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// console.log(super); // Error 不能访问 super</span>
        
        <span class="token comment">// super() // Error 不能访问 super</span>
        
        super<span class="token punctuation">.</span><span class="token function">parentStaticFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok 在子类的静态方法里是可以访问 super 的</span>
    <span class="token punctuation">}</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// super(); // Error 不能访问 super</span>
        
        <span class="token comment">// console.log(super); // Error 不能访问 super</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

new <span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div></li> <li><p>子类在继承父类时不写构造函数默认会自动传递所有的参数给父类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Chlid</span> <span class="token keyword">extends</span> <span class="token class-name">Parent</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">// 子类不定义构造函数会自动将参数传递给父类</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Chlid</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Chlid {a: 110, b: 'hello'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>子类里写了构造函数则必须要调用 <code>super</code>方法 或者 返回一个对象</p></blockquote> <div class="language-c line-numbers-mode"><pre class="language-c"><code>class Parent <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">999</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
class Chlid extends Parent <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// super();</span>
    <span class="token comment">// console.log(this); // Chlid {a: 999}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> str<span class="token operator">:</span> <span class="token char">'hello'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 返回的对象就是 this</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>new <span class="token function">Chlid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {str: 'hello'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>子类可以重写在父类继承的同名方法</p></li></ul></li></ul> <h3 id="es5继承和es6继承的区别"><a href="#es5继承和es6继承的区别" class="header-anchor">#</a> ES5继承和ES6继承的区别</h3> <ul><li><p>ES5的继承时通过<code>prototype</code>或构造函数机制来实现. <strong>ES5的继承实质上是先创建子类的实例对象, 然后再将父类的方法添加到this上</strong></p></li> <li><p>ES6的继承机制完全不同, <strong>实质上是先创建父类的实例对象this（所以必须先调用父类的super方法）, 然后再用子类的构造函数修改this</strong></p> <ul><li>具体的：
<ul><li>ES6通过<code>class</code>关键字定义类, 里面有构造方法, 类之间通过<code>extends</code>关键字实现继承</li> <li>子类必须在<code>constructor</code>方法中调用<code>super</code>方法, 否则新建实例报错. 因为子类没有自己的<code>this</code>对象, 而是继承了父类的<code>this</code>对象, 然后对其进行加工</li> <li>如果不调用<code>super</code>方法, 子类得不到<code>this</code>对象, 这就是子类必须要在<code>super</code>后才能使用 <code>this</code> 的原因</li></ul></li></ul></li></ul> <h2 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>模块化是指将一个大的程序文件, 拆分成许多小的文件, 然后将小文件组合起来
模块可以是一个属性, 一个变量, 一个函数, 一个对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="es6-module"><a href="#es6-module" class="header-anchor">#</a> ES6 module</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES6 module 功能主要由两个命令构成: export 和 import
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="export"><a href="#export" class="header-anchor">#</a> <code>export</code></h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> 命令用于暴露模块

<span class="token literal-property property">语法</span><span class="token operator">:</span> 
	分别暴露
        <span class="token keyword">export</span> 变量
        <span class="token keyword">export</span> 函数或者对象
              
    <span class="token function">统一暴露</span> <span class="token punctuation">(</span>利用解构<span class="token punctuation">,</span> 可以使用<span class="token keyword">as</span>重命名 外围的<span class="token punctuation">{</span><span class="token punctuation">}</span>不会被解析成对象 <span class="token punctuation">)</span>
        <span class="token keyword">export</span> <span class="token punctuation">{</span>变量<span class="token number">1</span><span class="token punctuation">,</span> 函数或者对象<span class="token punctuation">,</span> 变量<span class="token number">2</span> <span class="token keyword">as</span> <span class="token keyword">default</span><span class="token punctuation">}</span>
        
    <span class="token function">默认暴露</span> <span class="token punctuation">(</span>模块指定默认输出<span class="token punctuation">,</span> 一个文件只能指定一个<span class="token punctuation">)</span>
        <span class="token keyword">export</span> <span class="token keyword">default</span> 变量<span class="token punctuation">,</span> 函数或者对象

	结构并分别暴露 
        <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> 变量<span class="token number">1</span><span class="token punctuation">,</span> 变量<span class="token number">2</span> <span class="token punctuation">}</span> <span class="token operator">=</span> 对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="import"><a href="#import" class="header-anchor">#</a> <code>import</code></h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> 命令用于引入其他模块<span class="token punctuation">,</span>可以使用 <span class="token keyword">as</span>来重命名

<span class="token literal-property property">语法</span><span class="token operator">:</span>
    通用导入 <span class="token operator">*</span> 表示全部
        <span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> 重命名模块名称  <span class="token keyword">from</span> <span class="token string">&quot;需要导入模块的路径&quot;</span>

    <span class="token function">解构赋值形式导入</span><span class="token punctuation">(</span>名字需要对应 <span class="token keyword">export</span> 暴露的名字<span class="token punctuation">)</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span> 变量名<span class="token punctuation">,</span> 函数名 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;需要导入模块的路径&quot;</span>

    可以在加载时重命名模块名称
        <span class="token keyword">import</span> <span class="token punctuation">{</span> 模块名称 <span class="token keyword">as</span> 重命名模块名称 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;需要导入模块的路径&quot;</span>

    默认导入  只针对默认暴露
        <span class="token keyword">import</span> 模块名 <span class="token keyword">from</span> <span class="token string">&quot;需要导入模块的路径&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="可以通过一个总的文件来统一暴露所有的模块"><a href="#可以通过一个总的文件来统一暴露所有的模块" class="header-anchor">#</a> 可以通过一个总的文件来统一暴露所有的模块</h4> <p><strong>util1.js</strong> 文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> a <span class="token punctuation">,</span> add <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>util2.js</strong> 文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello esmodule'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> b<span class="token punctuation">,</span> hi <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>utilExp.js</strong> 文件</p> <p>统一暴露所有的模块, 只针对<strong>分别暴露</strong>, 默认暴露是<strong>不行</strong>的, 有重名的模块会被<strong>直接忽略</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./util1.js'</span><span class="token punctuation">;</span> <span class="token comment">// 注意这里是 export * (不是 import *)</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./util2.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>还可以在导出时重命名, 这样就会形成模块命名空间, 会把对应暴露的所有模块都放到对应的模块空间中</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">as</span> util1 <span class="token keyword">from</span> <span class="token string">'./util1.js'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">as</span> util2 <span class="token keyword">from</span> <span class="token string">'./util2.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>导出时重命名, 可以应用于都是默认导出的模块重命名后导出</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./src/index.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> formValue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./src/formValue.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> initValue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./src/initValue.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> event <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./src/event.js&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>index.js</strong> 文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 未使用模块命名空间的</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> util <span class="token keyword">from</span> <span class="token string">'./utilExp.js'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>util<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 所有的分别暴露模块都在这里了</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>util<span class="token punctuation">)</span> <span class="token comment">// ['a', 'add', 'b', 'hi']</span>

<span class="token comment">// 使用了模块命名空间的</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>util<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { util1: Module, util2: Module }</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>util<span class="token punctuation">)</span> <span class="token comment">// ['util1', 'util2']</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>util<span class="token punctuation">.</span>util1<span class="token punctuation">)</span> <span class="token comment">// ['a', 'add', 'default']</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>util<span class="token punctuation">.</span>util2<span class="token punctuation">)</span> <span class="token comment">// ['b', 'hi']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>注意点:</p> <ul><li>使用了模块化的js文件一定要在<code>script</code>标签上指定 <code>type=&quot;module&quot;</code></li> <li><code>export</code>分别暴露的模块再使用<code>import</code>导入模块时名称需要和分别暴露的名称相同(可以使用<code>as重命名</code>)</li> <li><code>export default</code>默认暴露的模块, 一个js文件只能有一个默认暴露, 所以 <code>import</code> 引入时不需要加大括号, 名字也可以随便起, 不过一般不会随便起</li></ul> <h5 id="结构并分别暴露"><a href="#结构并分别暴露" class="header-anchor">#</a> 结构并分别暴露</h5> <p>还可以从一个对象中解构出指定的值并暴露:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&quot;8100&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 解构并分别暴露</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> port<span class="token punctuation">,</span> version <span class="token punctuation">}</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="import-2"><a href="#import-2" class="header-anchor">#</a> <code>import()</code></h4> <p>跟<code>import</code>语法类似, 接受一个字符串文件路径, 可以动态按需加载指定的文件, 返回一个<code>Promise</code>对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./util.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">util</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">// 等价于 import * as util form './util.js'</span>
    
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>util<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="commonjs-module"><a href="#commonjs-module" class="header-anchor">#</a> commonjs module</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>在服务器端: 模块的加载是运行时同步加载的
在浏览器端: 模块需要提前编译打包处理
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="module-对象"><a href="#module-对象" class="header-anchor">#</a> module 对象</h4> <p><code>module.exports</code>属性</p> <p><code>module</code>表示模块本身, <code>module.exports</code>属性表示当前模块对外输出的接口,</p> <p>其他文件加载该模块, 实际上就是读取<code>module.exports</code>变量</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token function-variable function">b</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>exports</code>变量</p> <p>node 为每一个模块提供了一个<strong>exports</strong>变量(可以说是一个对象), 指向 <strong>module.exports</strong></p> <p>这就相当于为每个模块中都有一句这样的命令 <code>var exports = module.exports;</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>exports <span class="token operator">===</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在对外输出时, 可以在<code>exports</code>这个变量上添加方法, 例如:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不能把exports直接指向一个值, 这样就相当于切断了 exports 和 module.exports 的关系</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token parameter">r</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>错误示例如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">r</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意: <code>module.exports</code> 可以对外输出一个变量, 一个函数或一个对象的值, 而<code>export</code>不可以</p></blockquote> <p><code>require</code>关键字</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>require 命令用于加载模块文件(类似ES6的 import ), 
返回该模块的exports对象, 没有发现指定模块, 则会报错
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>const 模块名称 = require('模块路径');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>在 <code>node</code> 环境下, 第一次加载对应模块, <code>node</code>会缓存该模块. 再次加载时会直接从缓存中取出该模块的 <code>module.exports</code> 属性</p></blockquote> <p><code>commonsJS</code>的模块加载机制</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>输入的是被输出值的拷贝, 也就是说, 一旦输出一个值, 模块内部的变化就影响不到这个已经输出的值了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="amd-module"><a href="#amd-module" class="header-anchor">#</a> AMD module</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>它采用异步方式加载模块, 模块的加载不影响它后面语句的运行
所有依赖这个模块的语句, 都定义在一个回调函数中, 等到加载完成之后, 这个回调函数才会运行

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>AMD也采用<code>require()</code>语句加载模块, 但是不同于CommonJS, 它要求两个参数
语法: <code>require(modules, callback);</code></p> <ul><li><p><strong>module</strong>:  一个数组</p></li> <li><p><strong>callback</strong>: 模块加载成功之后的回调函数</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'模块名称'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token string">'模块路径'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="import-meta"><a href="#import-meta" class="header-anchor">#</a> import.meta</h3> <p>返回当前模块的元信息</p> <blockquote><p><code>import.meta</code>只能在模块内部使用，如果在模块外部使用会报错</p></blockquote> <h2 id="时间复杂度和空间复杂度"><a href="#时间复杂度和空间复杂度" class="header-anchor">#</a> 时间复杂度和空间复杂度</h2> <h3 id="复杂度的表示方式"><a href="#复杂度的表示方式" class="header-anchor">#</a> 复杂度的表示方式</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">T</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token constant">S</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面的叫: <strong>大O表示法</strong>，其中:</p> <ul><li><p><strong>T</strong>代表的是算法需要执行的<strong>总时间</strong></p></li> <li><p><strong>S</strong>表示的算法需要的<strong>总空间</strong></p></li> <li><p><strong>f(n)<strong>表示的是代码执行的</strong>总次数</strong></p></li></ul> <p>举个例子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//这里执行了n次</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">//这里执行了n*n次</span>
      item <span class="token operator">=</span> item <span class="token operator">+</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>上边这段代码复杂度是: <code>1 + n*n</code></p> <p>也就是说 <code>T(n) = O(f(n*n))</code></p> <p>时间复杂度看的是一个代码执行的时间的趋势,  所以说在于<code>n</code>(常见的于循环)，也就是规模比较大的时候，那些常量是起不到决定性的作用的，所以忽略这些常量，这里只看最大量级的循环就可以了, 所以最后的这个代码的时间复杂度是<code>T(n) = O(n²)</code></p> <h3 id="时间复杂度"><a href="#时间复杂度" class="header-anchor">#</a> 时间复杂度</h3> <p>算法的时间复杂度就是说一个算法的执行时间根据数据规模增长的一个趋势，</p> <p>并不是说代码执行的具体时间</p> <ul><li><p>最简单的<code>O(n)</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p>上面这段代码的执行时间完全由<code>n</code>来控制，所以说<code>T(n) = O(n)</code></p> <ul><li><p>当然还有个更简单的<code>O(1)</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello wolrd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <p>这段函数不受任何参数影响，代码走一遍就完事，这种的代码用<code>T(n) = O(1)</code> 表示</p> <ul><li>时间复杂度多块代码的情况<code>T(n) = O(n²)</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 这里执行 n 次</span>
    res <span class="token operator">=</span> res <span class="token operator">+</span> <span class="token function">go</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 那么 go 函数也会执行 n 次</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在上边的代码种第二段代码里边调用了第一段代码，所以说在这个代码里边是</p> <p><code>go: (1+n)</code></p> <p>一个函数在另一个函数里边被调用，这种情况是被把<strong>两个函数</strong>的时间复杂度<strong>相乘</strong></p> <p>在main函数里边的时候是<code>O(n*n)</code></p> <p>所以最后的时间复杂度是<code>T(n) = O(n²)</code></p> <ul><li>多块代码的时间复杂度</li></ul> <p>在一个函数里边有多块代码，但是并没有被相互调用，那么这种情况的时候，我们只需要取<strong>复杂度最大</strong>的代码块就可以了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>上边这块代码中，第一块代码有两层循环，通过上边的例子我们已经得知复杂度是<strong>n²</strong></p> <p>下边这块代码，是<strong>n</strong>, 那么在这种情况的时候，当<strong>n</strong>接近无限大的时候<strong>n</strong>是对<strong>n²</strong>起不到决定性作用</p> <p>的，所以上边这块代码的时间复杂度就是取最大值的<strong>n²</strong></p> <ul><li>对数阶和相加情况</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    i <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>while</strong>里边，作为判断条件的<strong>i</strong>被每次<strong>10</strong>，那么最后循环的次数并不是<strong>n</strong>次，而是说<strong>十分之一n次</strong>，</p> <p>所以说这个时候的时间复杂度是<strong>10i=n</strong>（<strong>i=logn</strong>）</p> <p>所以得出结论就是时间复杂度是<code>T(n) = O(logn)</code></p> <ul><li>改变的变量去增加循环次数</li></ul> <p>同理是增加了时间复杂度, 还有一些其他的情况比如时间复杂度相加</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这段代码里边一个函数里边有两个循环，但是形参有两个，我们现在无法得知<strong>n</strong>和<strong>m</strong>到底谁大谁</p> <p>小，所以说这个时候代码的时间复杂度是<code>O(m+n)</code></p> <h3 id="空间复杂度"><a href="#空间复杂度" class="header-anchor">#</a> 空间复杂度</h3> <p><img src="/note-sites/assets/img/fzd.dc766298.png" alt=""></p> <h4 id="空间复杂度的定义"><a href="#空间复杂度的定义" class="header-anchor">#</a> 空间复杂度的定义</h4> <p>时间复杂度看的是代码的执行时间的趋势, 那么同理的, <strong>空间复杂度就是指的占用内存的趋势</strong></p> <p>空间复杂度没有时间复杂度那么复杂，常见的就那么几种:</p> <ul><li><p><code>O(1)</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>O(n)</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面代码中创建了一个<strong>n</strong>长度的数组, 很明显数组的长度根据<strong>n</strong>来决定, 所以是<code>O(n)</code></p></li> <li><p><code>O(n²)</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> j
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>只要不是在循环里边不停的<strong>声明变量</strong>，只改变值的话是不会层加空间复杂度的</p></li></ul> <h3 id="复杂度的优化"><a href="#复杂度的优化" class="header-anchor">#</a> 复杂度的优化</h3> <p>举个比较简单的优化的例子</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">go1</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> item <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item <span class="token operator">+=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">go2</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> item <span class="token operator">=</span> n <span class="token operator">*</span> <span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">go1</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// a: 0.002197265625 ms</span>
<span class="token function">go2</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// b: 0.0009765625 ms</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="运行时和编译时"><a href="#运行时和编译时" class="header-anchor">#</a> 运行时和编译时</h2> <h3 id="编译时"><a href="#编译时" class="header-anchor">#</a> 编译时</h3> <p>编译时就是编译器帮你把源代码翻译成机器能识别的代码 (一般意义上可以这么说, 实际上可能只是翻译成某个中间状态的语言, 比如: 把一个C语言代码或其他可编译语言的代码编译成二进制代码) ,<strong>编译时就是简单的作一些翻译工作</strong> ,比如: 检查代码有没有写错啊, 语法对不对呀, 对应词法分析, 语法分析之类的过程, 如果发现了错误编译器就会报一些 warning 或者 error , 这时的错误就叫编译时错误, 这个过程中做的类型检查也就叫<strong>编译时类型检查</strong>或<strong>静态类型检查</strong>(如: typescript或其他静态语言)</p> <h3 id="运行时"><a href="#运行时" class="header-anchor">#</a> 运行时</h3> <p>所谓运行时就是代码跑起来了, 代码被加载到内存中了, 而运行时类型检查就与前面讲的编译时类型检查(或者静态类型检查)不一样, 不是简单的扫描代码, 而是在内存中做一些操作, 运行代码, 有问题代码就跑不起来了</p> <h2 id="chrome高级调试技巧"><a href="#chrome高级调试技巧" class="header-anchor">#</a> Chrome高级调试技巧</h2> <h3 id="一键重新发起请求"><a href="#一键重新发起请求" class="header-anchor">#</a> 一键重新发起请求</h3> <ol><li>控制台面板选中<code>Network</code></li> <li>点击<code>Fetch/XHR</code></li> <li>选择要重新发送的请求</li> <li>右键选择<code>Replay XHR</code></li></ol> <h3 id="快速发起请求"><a href="#快速发起请求" class="header-anchor">#</a> 快速发起请求</h3> <ol><li>控制台面板选中<code>Network</code></li> <li>点击<code>Fetch/XHR</code></li> <li>右键选择<code>Copy --&gt; Copy as fetch</code></li> <li>控制台粘贴代码</li> <li>修改参数，回车搞定</li></ol> <h3 id="复制javascript变量"><a href="#复制javascript变量" class="header-anchor">#</a> 复制JavaScript变量</h3> <p>在控制台可以使用<code>copy</code>函数将需要的复制的对象通过参数的形式传递即可复制该对象对应的<code>json</code></p> <p>效果和<code>JSON.stringify(object, null, 2)</code>是一样的</p> <p><img src="/note-sites/assets/img/image-20220420085654829.37ba5920.png" alt="image-20220420085654829"></p> <h3 id="复制打印对象"><a href="#复制打印对象" class="header-anchor">#</a> 复制打印对象</h3> <p>右键点击打印的对象<code>Copy object</code>即可快速复制</p> <p><img src="/note-sites/assets/img/image-20220428114018872.3cdbf02b.png" alt="image-20220428114018872"></p> <p>也可以将打印的对象存储到控制台的临时变量中, 如下:</p> <p><img src="/note-sites/assets/img/image-20220428114314495.a4dd00f5.png" alt="image-20220428114314495"></p> <h3 id="快速复制属性路径"><a href="#快速复制属性路径" class="header-anchor">#</a> 快速复制属性路径</h3> <p>鼠标放到对象属性上会悬浮提示属性路径, 右键<code>Copy property path</code>即可</p> <p><img src="/note-sites/assets/img/image-20220428115659404.86b62dab.png" alt="image-20220428115659404"></p> <h3 id="复制请求响应"><a href="#复制请求响应" class="header-anchor">#</a> 复制请求响应</h3> <p>鼠标放到对应请求记录上, 右键<code>Copy -&gt; Copy response</code>即可</p> <p><img src="/note-sites/assets/img/image-20220428120052361.366db014.png" alt="image-20220428120052361"></p> <h3 id="获取elements面板选中的元素"><a href="#获取elements面板选中的元素" class="header-anchor">#</a> 获取Elements面板选中的元素</h3> <ol><li>控制台面板通过<code>Elements</code>面板选中需要要调试的元素</li> <li>控制台直接用<code>$0</code>即可访问选中的元素</li></ol> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZsAAABzCAYAAABO+K+jAAAZPklEQVR4nO3dfVRUdf4H8DdlrWwhEihPPjTApFm4B5ooqNMZ+pFuZGqQqHhqW1iw41by25NB5FYW2qidRXtgE47+WveIAYKP2QqmHNsGdEdYYwkNcFQUhpBUWFY7a+f+/pinO08wT1eQ3q9z5pyZe7/3e7/3znA/8/18v8P1ycnJEVa9WwCin7vr//3vcDeBaNQaM9wNIBopxtx223A3gWjUumW4G0BERKMfgw0REUluDACc+q59uNtBRESj2BgAeDB25nC3g4iIRjGm0YiISHK39Pzw7+FuAxERjXK33A7+toCIiKR1i/9dAcPdBiIiGuU4ZkNERJJjsCEiIskx2BARkeRGVLBpUMmxRjPcrSAiIm9zK9j09fVh69atuHjxolca0aCSQxYhR2oxUJImhyyjAj3iAhoVZBFy04MBiYjo5uJWsDl58iT6+vqwc+dODwNOD8oy5EhFObSny5EFJVTqVmi3LMAEYxFdBTLS2vXLT7dCW56JkrQslOk82C0REd1QbgWbuLg4TJ8+HT/++KNnAUdXiwO1QFZSjGFBJOQhlkUaPs3H4exlWGhcrsiESlmLvE8b3dsnERHdcG6P2SQlJXkecEKiEAWgpKgCPbo2tCkjMdmiQCP+ViwORgA0m5FXC+C7NstUGxERjVgeTRCwDjh9fX0u1hCDfPUaJNbmIy4hH4ftllEicpL+WYNKDllRJI6VZwK17ejwpPFERHTDeBRsfvzxR1OPRiaTYdy4ca5XErIAW0634tg6JVCbj7gIOWQq6xRZI9ZEyPFRlNo8nmPTCyIiopHK7WAjTp9Nnz4dSUlJHjWko60WievU0JZnAsVpohlntchLKEKkuhVbntVPG+g5w/vvEBHdTG7598BVlzfydqAxirp7AqCYjSzTkhj8OhuAeIIADIEpWWmesUZERCPaLXfe4evyRidOnPByoOlB63f6sZmeHUUoEY3TxCZZ9XQ0KqQWKzH7UYYaIqKbxRh3NoqLi4Ofnx/uvfdez/auq0CGeGJAghxAJipP5yHWuEyRB205IEuTowQAoIRKXWLR0yEiopHNJycnRygsLBzeVugqkJEPrBX/mJOIiEaNkfG/0c63O5j2TEREo4FbaTSvU+RBu2W4G0FERFIZGT0bIiIa1RhsiIhIcgw2REQkOQYbIiKSHIMNERFJjsGGiIgkx2BDRESSY7AhIiLJMdgQEZHkGGyIiEhyDDZERCQ5j4PN1auu33zNGf/5jzT1EhHRjedRsGlubkZ9fT36+/u91R6T6oNforSsgkGHiGgUcCvYXL9+Hc3Nzejs7ISvry98fV2/26czqmsO4c13VuPkqe8kqZ+IiG4Ml4PN9evXodFo0NnZCT8/PygUCowZI92dCi5e7IVqfaGHvRwdajJW4ZNKnRdbJkWdQ6nDvlk+KDY8tu+6kft2gWYr1gauwmcaq+dO+n7XboQvrcf3kjVQCt3YubQMWbu63dj2W3wQXoZw42PDt15r1fENonrdOqf6z/najP3otng+ktwkfxdWuis3is7laLlGOeZSsDEGmv7+fgQEBFgEGrVaDbVaLUkjAfZy9OIxp1pAdnUX7vPwjtzSG4/AMHvP9W7OgCKFbuxc2oS1K6Jx4cJC/SNnhtdqfyBHX2fjx2MdlnHqvZgRimB7z73k4q5UFC8vxUW3tr6Z/i6MdPjm88uYuizZ6+dypHIp2Pzwww+m8ZmwsDBToLl69SoGBgYwMDAg2YQBwNzLGTrgjKyI/rMTFgR/e8/Jjl507ANyH/NegPGuEATPsPd8lNFsxdrArfjGW/V17scngRtR0+lof9Vo2C3DDIW3dugl3j4PIi7lvyZOnAiFQoF//vOfaG5uBqAPOr6+voiLiwMAycZvACAw8C5kZfwG06fdM0ipRnwWuAdnX5+L3NQQq3VdqMnYhIbd+lf+xUvxoqhMd+VGfJp92fTaej069+OT6H/giqhG/6fE2wbgyd7nMdOqLTjwFhY5/aHS4evloWhuMS8JUwmYE+vu9im476+VeET09enkhz44stf82m9ZFxbPFx1nw2oU5600v753G1I2piPI2SaEJePFXuML8XP9t+iY318zvDqLmPCzhudj8ZFmHp4JNZftEJddEW35jb+rHlmKs9hv3MvHSpTMDzbv40wwPmo5i5f2Abl7o4Gnm7DWah/HN5Rh7npjhYHYcyEJDzh7jHbaAADJT4oLdGPn0lq8tM/wcs5UNG56GBNd2UfDQYQ/LTqB4vPQcBDhT8Oi3cc3lGEuop3qHTn7Xsx89S3TZ1r83HmOP9MXd6WiqqjKsLQKVbOWGJ4bP7d12DcrAf1Wn9GLu1JRdTjVhc+lVRusP9OK5/FC8UZ8GrgR3U3L8USYg2qcodmKtbO1mHrgLYf1fFOrhX/xUjvncpivUd48D9ZycnIEV/X19QmHDh0Sqqurhfb2dpe3d8bO3XuF32S+aHps214uDAz8Z/CN/vEXQXXX28Kfd3RZregSqn/7tqC6621h+z/EZTcI1Rf0L3U7Ngiqu/4inDBt0yBsF9d14XPhz+LtDXWa96Uvb15vqPO3nws6p4+6S/j7KxA2faB2qlzpTuvjFISenQXC30U7bPkAwqZXtgk9pvUpFq9t6LYJpU+kWNRhsXrHBkF119u2D5eOUxC6d+4SwrLrhG5H68I+E8IKm/ULOuuE34V9Jmw8Lth/LTQLG8M+E363U2ex/cbjgqAp/EwIC9slVHXqhKpscxlN4WcW+9dvUyNonD0AmzZY1m98bToG630er9Efo81jl1DVKTou0fY2+zxeY9NmTaHlPi3O6WDn28E6b2j5YOjP9GCfS9t1amHvExD2Hrcu6ejvwvbvyvrvwsThNcQ5J9a/bXFdsevC58KfbcqMsGuUh+fBHrdmo4knBrS3t+PSpUteDH+WAgPvQt6K/0X6ogX45S8d95q6Kzdi7exLiG16yzLSi/gXLzX3MBSzEDvvMno7AWP+1L94lijixyCxeDyufN6AbgDdda248vrcQXooMZjxOnC2ttHw2lDnU7HO52QbNqO5pQCPvRzv7BY2gua/YdGLmf5IAdCitcyFt1Ti1KAjvFU4V2c/BRmcuhy5vW/ZPrZ4Ofc8Zyoajd/OQ2VIngM0ndM3+vuj3di/IhqvmHp7M7Do47HY/4XWPO4wZyoWGdevkOOZ0GBMMeXzv8XX68fio7fNvYyJ8+XIRS++bnCuebZtsNKlxf59gdgj6mE8sHAqkvd14+suALFJhjGaaOQCyN1rGK+5IO7dzcAr4h6K1Xm4qew9hJNubhoUnwo/8We24RA6UYAoZ3v73YdwzurvanraNss6jRTPI7fpQSB7E9a+3wjn6VP3X3z7IF7oHbxHoL+WPGa3zIi5Rrl9HhxzexqZMeBcunQJAQEBXmmMtVlJj2P+3DmDBhm9RhzOvgxgvMv7uHxWByi60LsbGL/MMkgFTw0Adl/UzxbRXra7vdjM9Aehjm7CN6/GYGZnA9p3y5CwxX7gs+fiuQbg3lTn01X2dJdi+3NLYPnLpwLTs6D5lUhBKqqe80GzYd1j1W9gurFAcDoW/xXY/lwoiov0i8RpPOtuvMm8B/GCtwOOAx1nrgHrmxC+vslyxRwnK+jqQxOuYa2iDC9ZrcoVPbdMs8EihdVx5hoG1fVv7Ecv9oeXWa0Yi2Qnm2m3DbBO1Y18018WAPjgyKyVOAK4npYNTkfM00vQWKfDI/NDcPLrlfBb1mX+zA7lghb9WGnev0mK/fJhoRgP4Mp7R1CTHuNcKklTrU99zRuqYCMOZwOxTTFOVKo3bNcod87DIDyas+zn5wc/Pz/PWuDArKT/cSLIGMVgUW+MPlcavQrt1nlMuyzfvMB5QPtZHaAQ5UfPXgLmyREMODfVMywWkfM24VsNEHy2FShe6FJ+O2hKrKkX4l7AqcO+55YAy7qQbcxvN6xGcZ7VfuZXInu+/vnJD31wZLkMQeI//uB0LK5OF22fiq8N4z7BqcuRm+pW47xm8t1jgRVyh+MSQ85wCx2HaIxFstUYkbUHchbiQo6bjQy9E8kAXnR1HEjk+127MXe9eCxJPwa0f4jtRqLpLwuY/jJgHDup+lCGbBd68NMfKcCRvxzCxfkytO0tQEy181/iEC6DHwoQI/5S5YhhvMW/eKmdMd9BKJ5Hbi/wzfur8GlgK2IdjXdomnB2nhyJTl24h/Ea5e55GMSI/d9ozgcaEcXzyO2di/FOdP26K4/gLIyzQUIw86nxuJJdbZ6F0bkfO7PNUxNnKmXAe02G9TqLQTyzEDyxTIazRRuxMzsACa6+SbGPIwwrceTDOte2Mx2UFv0A/KYY91uHfeKBfjuCJjv4dmcULoMUXycmTrkDMKaUXN32oWAkr2/CB06mvGzNwCMrruGlt92fev3AY4HA+k4cB2AzEQAwpLx6MdeD38x0nLkGzLkTkw2vv99Vb7WPO5GMAZzrMq7fbdMLcoYn74XrQhAYZbtU/0VrkPRubCbuwxLULH8f/csyne/VAEDw45hy79B/Vw5T8boKZETIkbGjB9CoIIvIQpkO6NmRBVmECuKP4cxX30LugQA0RNv7bZkONUVap6c7D9c1ypkhCXdI92vMYRODRb2hqMnYhE8qQw0nSz9lsyF7E9ZmG4rNexAv9Jrf9ODU5XhSuwpfBK7CF4ZlU8WzyBTP48nXzev9i5fiyRmbYPPLIkU0pu7eg7OvP+bGrJ14zKlWY9+sBBSLZouZ0ljWs8RaDKmup9X6b4nB6XhiWSWq8nxQDABIwX2qbejP05o2sZ6Jpk+jiXo11vsw7P8Rb+fHYpOwZ0UZ5ppSWbaz0RwKfRglGiBLUYZw0WLxjLShPJCzEHs2lIlmYAEuzUgztt+QJkv+WIk999biE1OBYDyzSQksrUV4uCjd58KMtAdyopEb3mRu44po7FnRZN5H6MN4UXwOV0Sj8eNWxJwxFvgWH4Q3Ya2pRuOMM6vj9OS9GJLtTDR9Gs2qVxP7Bh572gdHTOld61mUIZiWmILmIuC+fKsL4FB/FwjBIxu7gOWhKJ5l3Q7DZ1+z1c5MLUtRd09w7pAVzyO3aT8+id6IGnEPx5S2srfRCLlGOXEe3OWTk5MjFBYWernanzN3pjsT0VBcn+48snzz/iqoZc6k+KU2PNeoEZtGu1l9877+Nz4MNERe1F2KmiLgvvybM9Cgcz/U741HZPxwB5rhu0aNwjTacBDlR+c9iBe2OD/ThIgGIUqRSZLOvVHCLH/cfOMN/zWKaTQiIpIc02hERCQ5BhsiIpIcgw0REUluDABcuXJlqHJERERuGwMA/v684wgREUmHaTQiIpIcgw0REUmOwYaIiCTHYENERJJjsCEiIskx2BARkeRGVLBpUMmxxuaGQ0REdLNzO9j09fV5rRENKjlkEXKkFgMlaXLIMirQIy6gUUEWITc9vB2Q9HfcM9Zveee9G8JwJ0DL4+5BWQaDLxGNDm4Fm5aWFmzduhUtLS1DFx6U/oKainJoT5cjC0qo1K3QblkA0z3xdBXISGvXLz/dCm15JkrS9Ldl9ZYJz5aY6h4+SiSiGoe8eFxERCOFW8FmwoQJuP322/Hll1/iq6++cn/vulocqAWykoz3VoiE3PqOr5/m43D2Miw0LldkQqWsRd6nje7vd4SanRw5Ko+LiMitYBMUFISUlBTcfvvtOHHiBL788kv39h4ShSgAJUUV6NG1oU0ZickWBRrxt2JxMAKg2Yy8WgDftVmm2oZilYqzSdW5ur3KKigYU2EO03H6Xtyg6cBHZyOr+IDjNJ7DNhhSbjuMbVChwVjWTmrO7XNAROQmt8dsgoKCsGjRIgQFBaGlpcXNgBODfPUaJNbmIy4hH4ftllEicpL+WYNKDllRJI6VZwK17ehwdjcaFWTiVNxpq1TdkBqx5uBs87bqNUgsThMFi0asSchHVLmo/tN5iBXV0KBKQN495aL1rci3uS1rDLLWteNvdsdphmoDUPJaO146XY4sbEZqUSSOqdcgsdaYmutBWYZlGyrvyUccAw4R3QAezUYbN24cgoL0dwRvb293b9JAyAJsOd2KY+uUQG0+4uz1GtCINRFyfBSlNgcJm16QIz0oK9qMxHVrzKk4l8UgP0/UuwpRYrYSaDtjeZkuOThECmywXovBhEdnoa3IXgAYug2J6zJNAS5r2QJMMPQcARhSlpmoFNUR+4I4GBERSWeMJxsfPHgQJ0+ehJ+fH5566imMGzfO7bo62mqRuE6NLXdvhiwtDWuSjN/8a5GXAKjUrcg3BIueM+0AIp2s+Tzaa4GoZc73Y+xpUOlny4klJhufxSD/dDkQkQaZoUziOjW2PGveZ2xeKyohR2rEZv0C5Rocs9e7ClFiNvJxSKd0sQ1DON+Ow9iMw8b9mygx28kqiIjc5XbPxhhoxOk0T0XdPQFQzEaWaUkMfp0NQDxBAIbAlKx0Mg02CZF2eiGu6NmRhdTiTFSaUmBqqGxiQQzyRSkuvJZgMyYTmyfaHvmIs+nBAcAELFwWiQN/P+9GGwYxKRKJEG9vfJR40OMjInKOW8Hm2LFjpkDzzDPP4Be/+IWHzehB63f6sZmeHUUoEY3TxCZlAuKxCY0KqcVKzH7UMtSYfitjcwGfgMeTlTj8Wr7b06U72mot0nY9O/L1kxQcEaev7JoA+T2DrFbMRtT+A2j3pA02bVJitnIzUu0GOCIiabmVRouLiwMA/OpXv/Is0OgqkCGeGJAgB5CJSvHguiIP2nJAliZHCQBACZXatW/jE54twTFkIS5BjjzjQlMayzBwLrpw61Nd5v3E5pUjKyINcRH5+gLZ5ajMrsVHjo4DhjSaaQKA7T70+xeNwViIQVZyEeJeA7KW6ZcM2YahzwIWblEDGQmQRVi3w5XJEkRErvPJyckRCgsLh7cVugpk5ANredEjIhqVRsb/Rjvf7mDaMxERjQYezUbzGkUetFuGuxFERCSVkdGzISKiUY3BhoiIJMdgQ0REkmOwISIiyTHYEBGR5BhsiIhIcgw2REQkOQYbIiKSHIMNERFJjsGGiIgkx2BDRESS8zjYXL161RvtICKiUcyjYNPc3Iz6+nr09/d73JBz7/rgqM9qnHN1w/rV7m03zHq3p+JoWil63dhWf66MD+8de+/2VO/Ue74UGh8faLa7ebc6Ihp13Ao2169fR3NzMzo7O+Hr6wtfX1+PG3JHVIrjledLofFJxanzjov8XPRuT0XXmwUIFQQ8JAh4SHgDU7xUd+DiSn2ddQWOCznzXkySYayX2kREo4PLweb69evQaDTo7OyEn58fFAoFxozx0p0KFshwh3dqGrUG2qqAdx73WoCR0liZC7dTJaJRzaVgYww0/f39CAgIsAg0arUaarXa7YYELq7EQ+XpCBQvNKRjjk5egp9QhcuTzekjmxRN/WpzCsgmPaXDqTQf++vrV+NoWilOvWust85U9l/1Duq3XucUyza0pVfZlPA4PWY8X3bPQx3+ZfeYnNyPK+8F4nG/IOD+h109ACIarVwKNj/88INpfCYsLMwUaK5evYqBgQEMDAx4d8LApHQoBAEPdWzDrUjB+A5j6kiAYrH4W/NKdP1JhihBwEOCGndULIHWdAHU4VRaKC5Hq03bhkYvQZv4QlyxBP1RXYgqTcFP6Qn47x8EhL4DDNTU6dfXr8bR+Abz/ju24Vq8KwHHtg1RpZZpw3Pv+qCraZvhGARElTagyxQI9IHiqI8Put4E8GaCnQu9Dqf+D5CZ0mvW58FDTr8XRES2XAo2EydONPVmjGM2AODr64u4uDjExcV5ZfzGdQUINfWK4jHuHeCnNq1+1flD6K8oQOgf402lp/x2G26tqMTF8+btJxovmAu2IfRhyzGkczUrcWvpx5g2ybBgUjomioPRUOy0wVId+t5Mwfg/mXt2gYtfxR1Yib56/THdbwyU7wB4R23nQh+CaX8U9wytzgMR0TByecxGnD5rbm7G6dOnAQD+/v7w9/f3egM9dl6Ln7ASXeL00uQl+MnpCnS42gT8lB5qkUbretOylOVMLqsU1nnt4Ps7r8U1q9TUUZ8EDLh4qNZtsG4jEdFwcWtk3zgxQKPRoL29HQEBAQgICPB227xjkgy3ogATHc3aGnKGWwh8o4H+Z7oGTRcFLq5E4GL32zgWKbito9Lce3JV/Wq0pQPjOwRTHefe9UGXm9UREXmT27+zMQacadOmSR9oJskwFlXo/8qN8YdJj8NvwUp0vetkysuOKU8U4Kf037s/9frhx0UpMX0PxHKCQDzGvVOFy39w73c3ANCrbQAQC19jsKpfbdWzkeG2BcA1reEcni+FJn6l6zvy5L0gop8tj37U6efnhylTbsQk3HjcX1dgkcpy/geDIZhW3oXxTQmO01xDefgNPFQXa5XmcmWCgL79A/GGmWg7UxFl9VuWKX80TFzwcW9GWuDijzF+gShd+CcZQi0mIYRg2h9E53CyFhM7tuFW03rRbLn4lYAp9Wj9mxpP3gsi+rnyycnJEQoLC4e7HURENIrxH3ESEZHkGGyIiEhyDDZERCQ5BhsiIpLcGAC4cuXKcLeDiIhGsTEARuYv/4mIaNRgGo2IiCTHYENERJJjsCEiIskx2BARkeQYbIiISHIMNkREJLn/B62s4/qzxwKgAAAAAElFTkSuQmCC" alt="image-20220420090136613"></p> <blockquote><p>$0, $1, $2, $3, $4, 五个指令相当于在<code>Elements</code>面板最近选择过的五个引用</p></blockquote> <h3 id="复制dom元素的信息"><a href="#复制dom元素的信息" class="header-anchor">#</a> 复制DOM元素的信息</h3> <p>可以复制对应的<code>DOM selec</code>选择器路径, 复制<code>DOM</code>元素标签等等</p> <p><img src="/note-sites/assets/img/image-20220614112116190.6d0f6704.png" alt="image-20220614112116190"></p> <h3 id="截取一张全屏的网页"><a href="#截取一张全屏的网页" class="header-anchor">#</a> 截取一张全屏的网页</h3> <ol><li>在控制台面板中<kbd>ctrl </kbd>+<kbd>chift</kbd>+<kbd>p </kbd> 执行<code>Command</code>命令</li> <li>输入<code>Capture full size screenshot</code> 按下回车</li></ol> <p>如果要截取部分元素, <code>Elements</code>面板选中该元素第二步执行<code>Capture node screenshot</code>命名即可</p> <h3 id="一键展开所有dom元素"><a href="#一键展开所有dom元素" class="header-anchor">#</a> 一键展开所有DOM元素</h3> <p>按住<kbd>ctrl </kbd>点击对应的元素前面的(<strong>展开三角形</strong>)即可展开其所有的后代元素</p> <h3 id="控制台引用上一次执行的结果"><a href="#控制台引用上一次执行的结果" class="header-anchor">#</a> 控制台引用上一次执行的结果</h3> <p>使用<code>$_</code>引用上一次操作的结果</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAACcCAYAAACAyK5aAAAIYElEQVR4nO2cf0ic9x3HXxlqIuwMpufSaePiosMQll/K0Rk2THGMJtmYaSpJ6R8znetgaekG/YGw0CWk0RS2EttCFFqQUZlmXFhDtmHshBDjUrUqHOeaqBmJJt4lkejkFA6e/XF6ntG707vn7nNnPi944Dzl+/nyfd19n+/zfB/fax5N/s9AEeMb0h140lEBwqgAYVSAMCpAmJT/fD0o3YcnmjWGYegyVBCdgoRRAcKoAGFUgDAqQBgVIIwKEEYFCBNUwMTEBI2Njdy/fz9unXnQBEVr4PWmuJVcQP9JX/25oz8ONYMKGBgYYGJiArvdHhcJFyrgD8DLMa8UhE6oBLoN3/HpCaisgAcxLhtUgM1mo7CwkJmZmZhLeNAEw7+Ds0diViI8z0L37+d/3F4Je1rgyp3Ylg15DigrK4uLhKeOwG+fNaetnpoC8mq+MqexOBD2JPy4hImJiXj0S5z+T+Hqi/DDZ2JbJyXcH8zMzPg/+Xl5eWRkZMS2R4lAJ1Qeh5evwVMxLhVSQODUU1hYSFlZWYy7Exnu81XY3moPeKeCvHrfq71nOvjkUNbyG+uEoh/Ans/MmxZDEVRAsgw+QNahBoYP+V731BTwAs0Mv7Nr5Q3dgddnBz9eC4KgAvr6+pJi8M3kT5vg6gnojuNqLKgAm82GxWJh69atse/F7Nfez0tQ9BJwYuHSMJb0n4Q/AxyHouMBv4hxH3RLUhi9FySMChBGBQijAoRRAcKoAGFUgDAqQBgVIIwKEEYFCKMChFEBwoTdkgTweDykp6dHXMR1wc6u30zPv3HgO3x1roRvRdzi6iHs7WiHw4HL5aK4uBiLxWJCyTHsr37Bpeefo+HnG01oL7kJOgV5vV4cDgejo6Okp6dH9Q1YyEZyt8KlW/F74i6RWXIK8nq9dHV1MTk5icViobi4mJSUZc1Wy8DB1ffh7c+3mdRecrNoVAMHPzMzk507d/oHv6OjA4CSkpIVF+r+oImfve97ve+j52jYHUWvVxGLpqCHDx8yOTkJQHZ2tn/wPR4PU1NTTE1N4fF4Vlyo6I0jjIz4jl/f+oKcVztwRdn51cCSJ+Hx8XF6e3vxer1s27aN7OxsAB49egTA+vXro6t6t4Oq4jH2dZVT/u3omkp2ljwJZ2Zm+ud9h8PB0NAQ4Bv4qAffzzfJfcIHH0KsggJPvoODg4yPj5tUcgz7u//l0pvZFJnUYjIT9jpgcnKS8fFxcnNzIyzhW/cfuzj/zr6P9BpgDn0uSBi9FySMChBGBQijAoRRAcKoAGFS5m4vKDLodYAwOgUJowKEUQHCqABhVIAwKkCYuAvoqSngva54V01c4paY1VNTQN53C3ihHhoqCsg72oLblJYX4j5fFbHgVZqY5eYvR2fzG4aaqaKUmo4bDH/yIiuI0FhWjQUD31WzstwgocQsjBC0trYadXV1Rn19veF2u0P9aXDuNhuVefnGqS8NwzB6jFN5p43uyFoKS/fpfGNz3uxxuie6xm4bxmsYhv22OX0LRuwTs57OJx9o+LgF972b3CzdwqYIPywrYW9+jJOWTCIOiVm7qO54j73t1dhKqvlXhB0NjW8K+kfZDa6fKaWq+Qa1VEcVXRavxKyQU5BhGMb09LTR1NRk1NXVGa2trVF93VwtvzRvighRwzfdRcE1w9iNYfzxmildCklIAWYOvmH45ujKFpdhfHna2Ow/LyQYs4P/2mfxKRd0CopVYlb+5iwo/glVprRmMgKJWUEFmJ+Y5ebG16VseQbc5z+mAd/rRGIuMSue+aUhN2ScTmf0iVn3Wji66OT7Cn8deodEekK9/6QvKXERqyYx614LR6uh1tQLsOQnfveC7gzGaAma3IjvCffU+O4PBeVXEUZQJgniAp50dD9AGBUgjAoQRgUIowKEUQHCqABhVIAwKkAYFSBMWAGjo6N0dnbi9XqjLtb9QRM5ObOHhnUAYSLLRkdHcTgcAP74mshwcDann9o3tzMyojlBgQS9GRc4+IGJKZHgumBn163vMfKGDv7jLDkFBRt8t9uN273SBwrHuPr3ad7+kQ7+UiwS4HK5lhx8j8dDb28vvb29Kwxsus/ti+vYRAdVOfPngLM9pvQ/6VkkYMOGDf50xMCImvT0dFJTU0lNTY0gwG+aY+fg1Gxi1sjnVmp/asd+N6q+rwoWCUhJSfFHVAZORQClpaWUlpZGUGYdH74bkBO6ezsfHpjm0r/HIuv1KmLJc0AoCSvHyqYD09xe4tP+/VzNDAp6HfC4hMgTszay5/l11J4LWPf39HPsopU9ifRcihBh94S9Xi8ulyuqZSgsjK0EK38b+bFGlqGb8uLovSBhVIAwKkAYFSCMChBGBQijiVnC6HWAMDoFCaMChFEBwqgAYVSAMCpAmJACVh7MER5NzFpIUAFOp5PGxkacTqcpheKVmJVsBBWQlZVFWloabW1tXLlyJYoS8UjMSl6CCrBarRw8eJC0tDT6+vpoa2uLrMK9dv7ZDlVlc//ru4WCpyNrajUS8hxgtVo5fPgwVqsVp9MZmQShxKxkIewqKCMjA6vVCsDg4GCCJmYlL2Fvxl2+fJmBgQEsFgv79+/3y4gE9/kqbG+1+35Y5REEyyXkN2Bu8AOnomi4fbOdvWc6GG5+BeordDlKCAHXr1/3D355eTlr1641pWBCJ2YJEPQfNGw2GwA7duwwafBnE7N+MZ+YVZNgiVkSxH5DJkkSs6TQxCxhNDFLGPE9YU3M0k15UXQ/QBgVIIwKEEYFCKMChFEBwqgAYVSAMCpAGBUgjCZmCaOJWcJoYpYwmpgljCZmCaOJWcJoYpYwmpgljCZmCaOJWcLoprwwei9IGBUgjAoQRgUIo3lBwvwfLIn7cqKJ/mgAAAAASUVORK5CYII=" alt="image-20220420091222821"></p> <h3 id="快速切换主题"><a href="#快速切换主题" class="header-anchor">#</a> 快速切换主题</h3> <ol><li>在控制台面板中<kbd>ctrl </kbd>+<kbd>chift</kbd>+<kbd>p </kbd> 执行<code>Command</code>命令</li> <li>输入<code>Switch to dark theme</code>或者<code>Switch to light theme</code>进行主题切换</li></ol> <h3 id="和-选择器"><a href="#和-选择器" class="header-anchor">#</a> $ 和 $$ 选择器</h3> <p>在控制台使用<code>document.querySelector</code>和<code>document.querySelectorAll</code>选择当前页面的元素是最常见的需求, 不过方法太长了, 可以使用<code>$</code>和<code>$$</code>替代</p> <p><img src="/note-sites/assets/img/image-20220420091546991.bfaeec45.png" alt="image-20220420091546991"></p> <h3 id="i直接在控制台安装npm包"><a href="#i直接在控制台安装npm包" class="header-anchor">#</a> $i直接在控制台安装npm包</h3> <p>有时候想使用比如<code>dayjs</code>或者<code>lodash</code>的某个<code>API</code>, 但是又不想去官网查, 如果可以在控制台直接试出来就好了</p> <p>Console Importer 就是这么一个插件, 用来在控制台直接安装<code>npm</code>包</p> <ol><li>安装<code>Console Importer</code>插件</li> <li><code>$i(&quot;name&quot;)</code>安装npm包</li></ol> <h3 id="添加条件断点"><a href="#添加条件断点" class="header-anchor">#</a> 添加条件断点</h3> <p>假设有下面这段代码, 我们<strong>希望item是3时才触发断点</strong>, 可以怎么弄？</p> <p>如果没有条件断点那就要点<code>n</code>次<code>debugger</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在控制台<code>Source</code>中找到需要打断点的地方<code>右键 -&gt; Add conditional breakpoint</code>输入条件添加即可</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVQAAAChCAYAAACYukerAAAgAElEQVR4nO3df0xb973w8XenZ1OlPTeTFoHpbbJhIOx2IWlgDG1s6UzCDbTdI603QLSqIolT548oytqJMMrUTblVjOOgmzSK8kcQNHCrrMFkm3TbBmcQ/JTd7CohkBK6aAFC7preYFtcablPpWn/+Pnj+Mfx8bGxzTHG8HlJSNjn+Pv9nmP74++v8z0EltmNWx8vd5bGutkRKDR3BG5luxw55FZHSaCwYzzbxVilfIH39seeX5/r1dz6nN7sCBSaXw2890j95HjguLkksN/ly1apUva/ECLDKtr6sRU1YT4Ptv5p2iuzXaLVJI89Pf3MBs9vxAEu32+jIlvFSlVlGzecNqqqN9GmerrGeZ2ehrysFStVTwQCgcByZnhzfJJvV2xdziyFEGJZfCHbBRBCiNVCAqoQQhhEAqoQQhhEAupqMObA7JjQPDmBvcjBuAHJ+wdsmIs2Yba68BuQnhCr1eKj/FN9tPZN6WzIp66lhZ35AFP0tfYR3mtrM85Xyowr5Zo3gb2oCfRGyMccmJtmcVwv12wox+Y8R5XVxY2eRtIeJ5138bNWcFyfZk9BuokIsTYsHlDLmnE6Nc9N9dHaB6b84MN3+6DZibMMQsG1c6iFltp8o8ubM8Ydm9hNP3Nt2kBnpAnsTd3Y+vWDXV6DHceH1VQ5StIvx8NZRiy7OCHBVIhFpdHk9zE8OEX+rnpCddCyV5w0hyukZdTvysd3+w4+gwop9PkHztFlsWOLO68zjz12OzXnz3FpPs08HsymWzwh1pzUA+rUIG5fPuVbV3Dtc8yh9PmF/lR9f/4Bm9LfqN5H2/+oeb19TJP+vAtrnPTHHcpzu88D55tU6UT3Z4b209sWW4YmumIO0s+1Dz3YDi3SnC+wUGfx4P699H4KkXGpXlp151+PBo7+651EewR6jx4NnPydV3drxi891b2ELUK5JK9EdVmecnnb8ZtxXv+oP7BfvT3gC7zX0R+IXAynf3lcosstb3WUBAr3R9KIuUww5hg0ZQyXK/5xxhxzmpd+3urIrUv/hMim1GqovmEGJ/Op2xV/wGnq3T6mKKM+K/2nfi6d66bGaV9kAEV9Wd4Gii0w80CpwY0PaV5f0Mjhg9A1FKrF5rGnTV0rLKf+IIzMPEyyjBMMnrfgsEfSyGs4hI1uBoM14Zgy6Hk4ywjFbEq2b/PeTEoj9KGR/cHa6Zy69E+IbErpWv6pq258W5uDI/s6299tpW8yn7qWZrIzxv+QWQ+UHFokAFiK2Rh+kMeenmn2AOBn+h6MnK/G3Kp5zcHIv/4BG1WtnrjbE5qfYQYPXZprlgFsqjJQkmR6GZLX0MVcg9I1YX2QW9dTC5EtyQdU3zCDk1DWrB8qfUOdwWDaEjfgZp5S23Q/8ENlOgEgj02lUPNCggAy5qBKM41IGdFPUkEJJViou961tGlIG4qp4SrT81CRTDqlJWlNndpYYmHkQw/+hiVMvRJijUi6ye+bnMCXX0e9Xjyd6qPzqo+y5mwGU4A8drxgYaS1Pe1R7YraAwlfr4x6q5raYw5lAEpjY4kFzrt1JtaXU3/QQ1t7vEnywWP40BPcrsxBjRmUSnqwSRm8qinZsMh+QoilSi6g+obpu+qjrH4nsfFyir7gxP+pvlZaWyN/utcDZFheQxc3nNBWrT8Kv6jKNub6i6Nfrxrpz2uw47B0szu07Vwxl50WnXJo9lON5Fe0TXO5tJ2qIv2R/rwGOw5C25ug/zqOmCy0gTeOeQ9uj4W670v9UohMk+X7cppSe52Ju2akn0vWatyJujAWM+bAfK54aVdbCbFGyLX8Oa2c9v74XRT+gXbasHNiKQNKG4qp8VzlWppdKEKsJRJQc12oi+JC7OIoXa3FXF5qzbKgkROhLhRZHEWIhKTJL4QQBpEaqhBCGEQCqhBCGEQCqhBCGEQCag7wD9iwDshw0GoWvitC0SbMRba0L0zJbX4uWRPPHzfuuzCBPd5qcktgyIr9vqFOOq+qVj/Nr6OlRe8igNxy98TbfHI89Ggjmx//E88scxmUdQOKuXx/9c4CHXdsYvf5HLuPvA7fwDt8ZH0cfLSOr93dT9XTKSRgsSec77vwK9j1MnzvIpz58RILq+PUE/Bu6ME/w603jU1/8i3Y/wvVEzF5RNbV8A/YqPowNo28hkOUFFVjL9S5e0UKxh1NdB00fgF4Q1bsz69twVkb2uhjuLOTvqEtOb1iv2/gHT45np0gGha+/chKDTSfMLJuCIZ/Qs23M5TFvAtr9dWlr32QaTd/zUdW+Nrdn6QWRJP02ya49hK8AswZnzyTbwF/gFvfUR6fegKOlBgbuLe+GR1ATz0Bp/4RXv9OKqkoc6/NTTaK0/5MKAsQ2Q4ZfzcNQ1bsj5aPqQB887m9Xv/C7GP4+TeyF0yB8QvtjBw8tLIDiQEq2qaZy/Xa6X/+BV4yU5iBYLrwK5j7aWZqpSFb34wObM0X4d9/AwuZyxJzI8yl8+tQ2cblgx6dudfJUlaly4SUlu8Dwiv218VdsX+K8QSrUq0KN3/NwM5PI49/XkvDzzaHH9498TazxS9TxfvhJuCTPS/zw5SuWAqumxpz872I6C4JbR5K7THyhVDXtv3c2HuRzw+/zJfPXuTPv1H2WK+taWqP86Vnea7XQr427Z1vMxD6X3MuEoleBlHT5J93Ya1uZyT4cES13GGN+lJbzX7qbf4BG1Uzu3Dca6fNA7b+fmhqogsLjhRqN9FN+XTey6VZ/2N4fdlyWyYP4ZoLdvxLei+vqD0ATW7G28pX1A9xygF16vYU6KyJqqyFqvyfv6uFlpyMp9ogNMTA8SFA9SW6+WsGdv5F1bRTgtPACaICyV+tF/nopWd57rGF/M88vP/M+9z4bgp9amNuuijmcpwv/d0Tb/PJH4PpxzmOz3tepiH4xfcNvMNH634Nqi6MhZ0XYfgnNPQGt+/8NXdD2z/z8H7UcaptpubxZpba5A+tuarcuVWzsaCRnvuNiZv8wWBa0j9NTyUoAw3VWFEF3PPtzPZPc7l0E7ubzuG4fh1HezXu3/vZk0RQVILpV9j8eH/wvH3CyLqLvM/L/LABbuyN/CDBx3z0m4+Vf1P4YVmJ+oJ9tesNTve3TfCWS/n/lT/Aj9JdBK2yDhvnkl++Um1+hhkOcHgJfbDxGLZif9krTpxO5a9+vpPWzuEcvEnfZmoe/4SGxz9h889RvhTBx6Eayd1rn8LPq1RBJo+qwxvh+J+4q04qXJsDns7jyzzm8/9KviT+B7OahbBVPvMwe3wdX7PrBVPg5p9YYCPFqoCR31DFej5l/mZktyd7Xg4HwvzvmnmSv/A/n6kTeozvDyt3doH/91cZOdivGpwox+bUrMClvonhwUPsKVDWvE0yBx7822Oe7Nmu6vrZzOaedfz13z7BRx5Vvcrn47medcp7Hvy85HIwnXxLGZx6NQNdDD/qh1sB5c/8L/Ctt5aSmofZZG+UAYRH9tvhRIa6mFIKqMqK/fWLrnlatquOfN8Ed3Ivoi7Cz//8EZ4s1pyAv/9qbDD6Zp4q2CmB2rCBm//6b/7KV/i7OLVdpT/vq5raRT5ffgk+/88kA+TTFn5491mwXmRg3dsMrHubkZuLv2w5fTrj0dwIcVPsnRSWxMfnv4Evfz26Jpv/9a/Ab/47o/2L2RIaiX/zU8j0BeI/+inwC5jMcD4R5bTfn2bODj/TuzGmAZIPqKEV+7cl25bPD88CWD3y+Ltvwl9nNb8UiwS4tHIqLAbPLJ/qbdQL4Cr6X3j94JDQ0xZ+GKpxDW9kYec73IiTZzZsLLHAwX7m7k9H/xm21KD+j5D+D1buW/hVJJim3RRPVSOk/7WxUJxOOQtKKFHdw81IxqzYH70nw31ufFsrsnRfqcx6ZsdGOH5DFVg+YWTnp5pmoQEq66Ju3Bfl6c3kv/SYP7d79LtVvv0N1vMps6oJ0HdPDLHw0rNsTreW/Pdf5cmYJ5WAs3DtkzQTTUJBCSXo35kg7/u7qDnfZOjEbE0OFP6fdfzVOhrpzvnMww3rY9YfjtPdkkWhiwPSmvj+H8oc18X6NUO3PzfinJ/6LnzvpTT7aYNjDEnfpHKZJDcoFVqxv1lvsr4y79Stnte/qwVnDs9BTejb/8RzPe/w0TNv8+fgU5kZ9VXuprp7aIL2Su1Ifx5VvS/D3ot8tO7j8LORcmym5q6f95+5yIA1uFHdp5sM7Qg/yiyA6AGqPKrsz+J7JjJ4l/xgjLL4dZuqhb67qBtiRuBD8w4jN04Mj+QXNNJzHazVmzCrUq6Ju+B26vIb9rN59m0+Wfc2oZ+NmNkQmfYf8K3vqh6/DN96mZiJ8Xnf30UNHkZauxlvSK2P8FQw/Xe/q5rcjxJg1dOpKmoPwPluus65sKXYEoi6cCCY9pmU5qBGjA91w8H+FTXCD8By37f6xq2PlzvL3PWoP7DfXBI4fjPbBRGZ5nO9Gijc3x/wLS2VwHv7SwxIJ5HxwHFzSaCwYzxjOQQCi5yPmx2BQnNH4Fb6qQfe25+Z75Vcy7+SFTRywmmhqykzHehilRnrps0DNS9YMna7Gv/AOboAW63xVxklZwJ7Uze2/qWM0iszPbqG0r0wID4JqCucctPBWc7K4iirnyd0Y8ZUF0cJLirS1I2tf9qw7o5oypSj0C3Ul3IdfXyRxVHizdbwD5xjxnl9yflXtPVjC84QMbIPXlbsF0IIg0gNVQghDCIBVQghDCIBVQghDCIBVQghDGLIiv0RoUn+etuEEGJ1M2TF/hDfUB9u8lfcJXlCCLEcDFyxf4rBq1DXXC8BVQixJqUeUIMr9pdrVuyferePqSSW9hNCiNUq5YCqrNivCZy+YQYny2h+ZTWuLyWEEMkxYMV+Zbk+4t60Twgh1oalr9g/NYibOppX63J9QgiRpORv0hdasV9zN9Op21Pgm6Kz1R39fGcr7vw6Wlr01lAVQojVJ+mAGlqxX3t36LJXnETPqpqir3WQp2UeqhBijUmuyR9asb9eaptCCBGPLN8nhBAGkWv5hRDCIBJQhRDCIBJQhRDCIBJQhRDCIBJQhRDCIMlP7DfQzfHJbGQrhBAZlZWA+o3S4mxkK4QQGSVNfiGEMIgEVCGEMIgEVCGEMIgEVCGEMIgEVCGEMIgEVCGEMIgEVCGEMIgEVCGEMIgEVCGEMIgEVCGEMMgqDKheRjtaONIxxEK2i7Im3cH1Wguu0HINk70cUT/WleX3bLKXI6+dZNQbZ7t3iFOLHkMGLWv+yvt35MKd5chs1cnKtfxL5h3iVMcgG6ydNGbrbirBMszF2bxdt2x3cL3Wy6ipnl++Ucv6jBQsmMeiZRFCGC03A2pCJra/0cn2jGdTy+una2OeXnCf5Nh4OTt0AtiCezAq0BltwX2SY1e8bLd2ckaV/70LLbjIUlDdupczp9VPeBntOInrqb2c2bcl+NwyvWciCVtoPN1JY6ovm+zlSI+PxjeOst2UeNdrw8NJJblj585US5F1qzCgZtMdrl3xst2qU/v0DtF3BbZvMzH6KANZT/Zy7Ao0vtEZ84Eu3ddJaQayFCIdpd8o5Z3ubv72t7/pbjcXFWE98Ooyl8oYqzKg3rvQwtlHkWZ1+PGLn3GsJ9Q3ZNL5NdU0l1Nsmt+70Mvotr1RtcNwuh2D8PxRdtAXHVCDXQc8f5TX6xb5aY/Ly+gHdzA/v3jtIFyehN0CkVrkL58a5NiVUOfiFg6f3hsVnEO14kg6ezVFU3XPmFTdJN5ejrwGbFNqqtr3DAjWetR9eZr8w2kfpeCDk7hCxdimrv3qHW/scSQneF5C+Wg/H6FamrWcsZ5B5lT5xJ6n6BaDdrs54echdDyhz3C89yuJz3hMWbQtiMU/C/cutHD2tvKsq6MFl26+ERs2bOS5H/yAod/9LmbbF77wBXbW/mOc4175VmVA1eUd5Nj4Xs6c3kv4Q9IzxDdDXwjVF18JiMo+xzpILqh6h/jgtonGN7bEbAoH2joTC26jDwzw3mHMCxueSiKaqgL4mdAX1jvEqY4WTmm/xLd76XvqKGdOmwh9Ec9euBMOVkoQUNeKg+cV9JvvplpeP71Fp8kfKzbt4HOvnYz5so729NH4RidnTASDWi+uyUiQuHdhnGfDzViljGc7hlLux47KJ3g+Yj8fXlwfwC9Pd4afC/9YnA7uN9nLkZ4WCAUy7xDXaA6e59D2k7ie0uum8TLa0cuo3o9C1PsVzLfjJITOVyrvvVaCz0Lpvk7OpNDkB/iBpYaZmRkezEWPQuysreXrX//64gmsUKtwlD8OUz2/VPfZvbgFvBP8MfiDe+/KIHPb9qo+wLH7JKK8vj7mw7TgPsnZ21s4HC94mGp5/XTnEmqnkfIWJJHEvSuDzJnqaVbnZ6ql+XkTc1cGuafeedteVbm2sON5E9weD+6jdG+Yn29WHbOJ7dZ6zEs8Ev20YX1dM40mL64r0SPQ262qL/HWehpNMDoe2ad0nzrwhN7Xz1KeURBdni00WvU/H9tfVAXY0A+tuhtIW0ZTLY3q9yO4/eGj2A/evQsncXnj1LA172vpvr1sx8vYbSWdlN57rYSfhfTU1OyIeryptJTnfmBZQorZt3ZqqAl58T4i0gyNklyt74PbsN2qCZrhfs10mpeZoBynuWJLTM1s/VP5gA+vF0qTie1eLw8xUblNs7PJxIYlFzNO2pgwPQU88rJA7DEkSDC6qR5MK+ljDe4fe6xPY+YO815UHxPND5v3M+bwMtfRgkub5FOq/2O6N4BHPnXCPPzgJKPxgil672s+BSYYfeRTimLUe2+QouJitj/3A0Y/+r986UtfyslBKC0JqCqJ+63iW7g9wRxbeDGqeab0a0KoX0ltkGOvDaadXwyTiQ3Bmsh2I9JbTULT20zaJrdvGQuRuM821AcZ6cuMdJ3EusPHk1C6SqbB1ezYwczMNM8+u40NGzZmuzhLJgEVCNV85sbvsFBnSnF+qJc/jnthW73mC6M/FSg0rcrYeahbeHYbjF4Z5F5dotpw/ONceOQDUznfTCkeezW1M2BynFHi9KEmK+4PRPwadjyhH7vDqvO98CidYBp7rPo/pBqmpzEzmCAI3uHj28qPeaS7yafk9VT0nhtePErzo5McU/e/qsxparShvvXtLyotJ2Pfe2N88YtfZMfOnfzDPzyz/JlnwNrpQ11EacUW8A7S51a1C71DnFrsipHQh7Yi/gBL4tcrV8GccifRUZtA6b6jNJrucFbnip97FyJX2ZQ+X49Z5zj7rnij+/4WY6rlxW0w2qPO7w4ubbM19oWqZns8Sh/d3JW+qGNZcPfh8m7hxRRq4ermLBA+1nSM9vRG+gxD6WyrSNydY9pCpUnzWpS+UOXYlGb5nCrI37vQG3e+8vq6oxzeBqM9OldO3e5VPedltEepmYfmRBv23use59OYQz86KVotwRRyvIY62tMS/cELTmNJy9a9nHljiFMdJzlyRZ3eIoHS+xlzmKjMeks7WCOe7OWIposhalqMqZbXT5twvaY6Tky681cXU7qvk8MXWjgbzk9p2vJab+LXPV+PuUPp9oid4qRYX3eUM09pjkXdbE/W1r0c3qYqo6meX1q3cCyNJv/255/mg9daOBt8bFaPlselvC+mCy2cfa0lkpa1k0ZTcLu1nrGOSP/9dutRGh/Fa/KrzntPCw+fP8rrdcEN2/by7HgLR3pCWWumdRn43sceZi0vbhvkbE+LajrXEtPMQU8EAoHAcmZ4c3xSbiMthKH0rj4T2SBNfiGEMIgEVCGEMIgEVCGEMIj0oQohhEGkhiqEEAaRgCqEEAaRgCqEEAaRgCqEEAaRgCqEEAZZ0ZeervvfX852EYQQImlSQxVCCINIQBVCCINIQBVCCINIQBVCCINIQBVCCINIQBVCCINIQBVCCINIQBVCCIPkdkAdc2Au2oR9LNsFyYyFX8G3nlD9NZHgxnZCiGzL7YCa0AT2HA+2638MtwKRvzeBY7/KdqmEEPGs6EtPF1XZxtz9tmyXYtkUbYG3ZrJdCiFEPLlZQ513YS3ahDn4F10LVWqm5qImuoCupsh+ZseEaj8/l6yqbVYX/tCmMQdmq4tLDmWbdWAivG82a7zDv4BX/jF7+QshEsvNgFrQSM/9aebu92OL2VhOu2qbrX+aufvBv7by4D5+LlmraSvtD2+7XNpOlTqoetpxl1znhtPCSGsTs4emuXwQuoYmYnLU4x+wRYJ1UZzAnYTJtyJ9qHMX4fXvpPBiIcSyyu0mf7rmPbg9B7jcUx5+qmKfnZrqq1ybb2QPAAc43JAHA4DFjq0SeGCBJJvceQ1dzDUsvahb34Rbbyr/T76lDExd7Yf1S09aCGGwtRlQH84yQjcjRd2aDRbqDMrCP2CjqtUTu8Fi50ZPI3lppLl1P3xvI4w+hB9tWHIRhRAGW5sBdUMxNRzg8P02KvS2P1x6FkbVUPUUSTAVYkXKzT7UpGyg2BKnz7PAQp2lm92O5PpDV4rf/hT+/Z9ha7YLIoTQlZM11JjmdNMmuoAa53V6GkKN6Tz22O24q5swnw8+dbA/ODCVx56e62CtxlykSngJzfFM+G0TvOWKPP7eRbj14+yVRwiR2BOBQCCwnBneHJ/kG6XFSe0rt0ARQuSSVdzkF0KI5SUBVQghDCIBVQghDCIBVQghDCIBVQghDCIBVQghDCIBVQghDCIBVQghDLKir5R6/P8+z3YRhBAiaVJDFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg0hAFUIIg2RlcZQ/3ZvNRrZCCJFRWQmo367Ymo1shRAioxYPqFN9tPZN6WzIp66lhZ356ud8DHd24vbpbRNCiNVt8YBa1ozTqXluqo/WPjBpAqZvqA83+UgcFUKsRWkMSvkYHpwif1c9ZVHPTzF4Feqa6yWgCiHWpNQD6tQgbl8+5Vujw+bUu31Mba2XZr4QYs1KOaBO3Z4CbeD0DTM4WUbzK2VxXydExo05MDsmsl0KHRPYixyMZ7sYIuNSC6i+YQYn86nbpQ6cPob73BDTBSBWMv+ADXPRpuBfZr7s445NkTysLvwZyCNszIG5aRbHvnKdjX4uWZehDHGVY3POsjtr+YvlklJAnbrqxqetnU4N4qaO5lpp6+eSvIYu5u5PM9d/IGN5VLRNM3d/mhtOS8byUExgb+rG1t/FnoLUX+0fsGU82OY12HHQTtWKrEELoyQ/D9U3zOAklDVrhqJuT4Fvis5Wd/Tzna248+toadkpg1Qio/wD5+iy2LlRGW+PPPb0TLNnOQulVwa7HXf1OS7tSy/wi5Uv6Rqqb3ICX34d9Zp2fdkrTpxO9V8zZeRT1+LEuZaD6ZhD1aTWNjeDTdDwdhuX5iMv9Q/YMDsmopvl2prNvAurOv2YZvsE9oTbUz8G+1iqCSwm8XkAbdeE3rH4ufahB9uhRvJ0ckjU7RBKu6rVA552quKVI+55UMpvHwi9Fw7GQ/vq1XgLLNRZPLh/r1cXDp0L6WvNaYFkeIcCJ48eDfTeSWbnO4HeoycDQ179rTdufZxUljntZkeg0Pxq4L1Heht9gff2lwQKO8bj7u9zvRooNKv2edQf2G8uCRy/GXrBeOB41GMtZft+ly+Sq+vVQKG5I3BLt6zxnlcdQ0wZkudzvRoo3N8f8EU/u+h50H+sKeuj/sD+uOd6sTIsvi3xeQgeg7kjcCt4zgv39wd8Ccrkc70afcyRLaq0RK5Kroaav5MWp5PmpEadymh2ruWrpPxcOtdNjdOu36yb9+D2WKIHTyoP4NDWXCx2brQF9ymwUGeBmQfRNZuuoTj9cWNuujjA4YZInS2v4RA2uhlMspY5PqQ5hoJGDh9MkGeqkjgP/gezcPBQpAyVddiYZVpde3w4ywjFbMpQEzqZ81DjPEBF8H/boUbyCkooSZTovRmd/lqlW2Lufls4LZF7ZLUpwz1k1gMlhXoNUOIEgDw2lcLIzMMk8yin/X4/tvNN4WaodUDVofBgFizFbIx6zQaKdYKyPj/T92CktTqqqbv7fJLFS0YS5yGvsBjOnws3v/0D5+jKYPCMtQznQawqWVkcZXVTApf7gR8qdYLqhmJquMr0PFSEA4Pyxa15YUMK+ZTTfn+adlD6U6ursRdO014ZDESeWT4FVb9iMNAfihPooyiBreaF6/Q0JLN/GpI+Dx7aqjfRBoAFx3VNDU43HaMsdh7SnBdQWqLb3ytyn9RQDZfHjhcsjLS2xwywAOGBibYLkSajf6CdNk90Ez0l2iZmZR02ujmrqrWOO5rostixxR0Jj1ZReyD+MaiEB41SnQ6UxHlQmtvXleld96eZu68zOp5woCc5yg/QVa7pHGuy5yE5ygBaTYneD2doUCp2YE7kDqmhZkBeQxc3sFEVrlmh9In2NJJHHnt6+pktasIcbjoe4HIqfWfzLqzV7YyonqpxXqcnHCzLab9ux1pdjblVmz8oX95q2jyR1+8u6kapAQaDVmUbc/0OzOpjAGz9Si14cRPYi5roCj/2UFXUrjrWxc9DxT47qI9BtwzKD1jbhx78DdqR/sXKEFTZxuWDm9gdVRM26jyoBPuN6+x6P5xKbRiP8uOwJ1MtA5FZyz0KtiZG+YUBlFFv9UyFQCDebIXYWQ0rj/7xRLnZEShc8cchEpEmv1ihlD5frU9nPDoDbuW09xvZNDeef6CdNuycSFDzHB/qBpbQ9SOy7olAIBBYzgxvjk/Kiv0iOTpdG9FdFxpjDsxDdcy16V3Pn00T2Ivc1Mfr1gkfZ4pdP2LFWTygJrFiv2+ok86rvujNW5tx6qw+JQFVCLFaGbdif5wAKoQQa4WBK/YLIcTaZtiK/UIIsdalPA9VWbG/OfZa/ck+WsPzBctodjbnaA02MnexxpnBK4WEEKtOaqP8vmE6OycoX+QW0VPvttI3qR9Uc0q7nEcAAAAySURBVGZQat6Ftfoqdddl7UohRHKWvmK/jrJddeTjw+tLvN+KFrykcTbZ9UqEEGve/wfymTkwA5K2eAAAAABJRU5ErkJggg==" alt="image-20220420092356537"></p> <p>这在大量数据下, 只想对符合条件时打断点条件将会非常方便</p> <blockquote><p>DOM元素也是可以添加断点的<code>右键 -&gt; Break On -&gt; xxx</code></p></blockquote> <h3 id="文件跳转和源代码行数跳转"><a href="#文件跳转和源代码行数跳转" class="header-anchor">#</a> 文件跳转和源代码行数跳转</h3> <p>控制台支持<kbd>ctrl</kbd>+<kbd>p</kbd>进行查找</p> <ul><li>查找文件名: 输入对应文件即可</li> <li>跳转行数: <code>:行数:字符数</code></li></ul> <h3 id="本地浏览去除跨域"><a href="#本地浏览去除跨域" class="header-anchor">#</a> 本地浏览去除跨域</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token string">&quot;C:\Program Files\Google\Chrome\Application<span class="token entity" title="\c">\c</span>hrome.exe&quot;</span> --disable-web-security --user-data-dir<span class="token operator">=</span><span class="token string">&quot;D:\ChromeDevUserData&quot;</span>

<span class="token comment">### </span>

<span class="token string">&quot;C:\Program Files\Google\Chrome\Application<span class="token entity" title="\c">\c</span>hrome.exe&quot;</span> --disable-site-isolation-trials --disable-web-security --disable-features<span class="token operator">=</span>SameSiteByDefaultCookies,CookiesWithoutSameSiteMustBeSecure --user-data-dir<span class="token operator">=</span><span class="token string">&quot;D:\ChromeDevUserData&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2024/7/14 11:44:36</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#标识符" class="sidebar-link reco-side-标识符" data-v-b57cc07c>标识符</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#数据类型" class="sidebar-link reco-side-数据类型" data-v-b57cc07c>数据类型</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#string" class="sidebar-link reco-side-string" data-v-b57cc07c>String</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#number" class="sidebar-link reco-side-number" data-v-b57cc07c>Number</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#boolean" class="sidebar-link reco-side-boolean" data-v-b57cc07c>Boolean</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#null" class="sidebar-link reco-side-null" data-v-b57cc07c>Null</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#undefined" class="sidebar-link reco-side-undefined" data-v-b57cc07c>Undefined</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#null-和-undefined-的区别" class="sidebar-link reco-side-null-和-undefined-的区别" data-v-b57cc07c>null 和 undefined 的区别</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#object" class="sidebar-link reco-side-object" data-v-b57cc07c>Object</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#object-的分类" class="sidebar-link reco-side-object-的分类" data-v-b57cc07c>Object 的分类</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#对象的基本知识和操作" class="sidebar-link reco-side-对象的基本知识和操作" data-v-b57cc07c>对象的基本知识和操作</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#基本数据类型和引用数据类型" class="sidebar-link reco-side-基本数据类型和引用数据类型" data-v-b57cc07c>基本数据类型和引用数据类型</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#function" class="sidebar-link reco-side-function" data-v-b57cc07c>Function</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数的基本知识和操作" class="sidebar-link reco-side-函数的基本知识和操作" data-v-b57cc07c>函数的基本知识和操作</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数的两个隐含的参数" class="sidebar-link reco-side-函数的两个隐含的参数" data-v-b57cc07c>函数的两个隐含的参数</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数的返回值" class="sidebar-link reco-side-函数的返回值" data-v-b57cc07c>函数的返回值</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数的length" class="sidebar-link reco-side-函数的length" data-v-b57cc07c>函数的length</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#立即执行函数" class="sidebar-link reco-side-立即执行函数" data-v-b57cc07c>立即执行函数</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#强制类型转换" class="sidebar-link reco-side-强制类型转换" data-v-b57cc07c>强制类型转换</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#其它数据类型转换为string" class="sidebar-link reco-side-其它数据类型转换为string" data-v-b57cc07c>其它数据类型转换为String</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#其它数据类型转换为number" class="sidebar-link reco-side-其它数据类型转换为number" data-v-b57cc07c>其它数据类型转换为Number</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#其他的数据类型转换为boolean" class="sidebar-link reco-side-其他的数据类型转换为boolean" data-v-b57cc07c>其他的数据类型转换为Boolean</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#注释" class="sidebar-link reco-side-注释" data-v-b57cc07c>注释</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#运算符" class="sidebar-link reco-side-运算符" data-v-b57cc07c>运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#算术运算符" class="sidebar-link reco-side-算术运算符" data-v-b57cc07c>算术运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#一元运算符" class="sidebar-link reco-side-一元运算符" data-v-b57cc07c>一元运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#逻辑运算符" class="sidebar-link reco-side-逻辑运算符" data-v-b57cc07c>逻辑运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#隐式的类型转换总结" class="sidebar-link reco-side-隐式的类型转换总结" data-v-b57cc07c>隐式的类型转换总结</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#赋值运算符" class="sidebar-link reco-side-赋值运算符" data-v-b57cc07c>赋值运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#关系运算符" class="sidebar-link reco-side-关系运算符" data-v-b57cc07c>关系运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#三元运算符" class="sidebar-link reco-side-三元运算符" data-v-b57cc07c>三元运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#逗号运算符" class="sidebar-link reco-side-逗号运算符" data-v-b57cc07c>逗号运算符</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#流程控制语句" class="sidebar-link reco-side-流程控制语句" data-v-b57cc07c>流程控制语句</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#条件判断语句" class="sidebar-link reco-side-条件判断语句" data-v-b57cc07c>条件判断语句</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#条件分支语句" class="sidebar-link reco-side-条件分支语句" data-v-b57cc07c>条件分支语句</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#循环语句" class="sidebar-link reco-side-循环语句" data-v-b57cc07c>循环语句</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#作用域" class="sidebar-link reco-side-作用域" data-v-b57cc07c>作用域</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数作用域" class="sidebar-link reco-side-函数作用域" data-v-b57cc07c>函数作用域</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#constructor-构造函数" class="sidebar-link reco-side-constructor-构造函数" data-v-b57cc07c>constructor(构造函数)</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#prototype-原型对象" class="sidebar-link reco-side-prototype-原型对象" data-v-b57cc07c>prototype(原型对象)</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#关于this的指向问题" class="sidebar-link reco-side-关于this的指向问题" data-v-b57cc07c>关于this的指向问题</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#静态属性或方法" class="sidebar-link reco-side-静态属性或方法" data-v-b57cc07c>静态属性或方法</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#es5继承" class="sidebar-link reco-side-es5继承" data-v-b57cc07c>ES5继承</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#array" class="sidebar-link reco-side-array" data-v-b57cc07c>Array</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#数组的常用方法" class="sidebar-link reco-side-数组的常用方法" data-v-b57cc07c>数组的常用方法</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#date对象" class="sidebar-link reco-side-date对象" data-v-b57cc07c>Date对象</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#date对象的方法" class="sidebar-link reco-side-date对象的方法" data-v-b57cc07c>Date对象的方法</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#相对日期格式" class="sidebar-link reco-side-相对日期格式" data-v-b57cc07c>相对日期格式</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#指定格式化" class="sidebar-link reco-side-指定格式化" data-v-b57cc07c>指定格式化</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#math对象" class="sidebar-link reco-side-math对象" data-v-b57cc07c>Math对象</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#math对象的方法" class="sidebar-link reco-side-math对象的方法" data-v-b57cc07c>Math对象的方法</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#string的相关方法" class="sidebar-link reco-side-string的相关方法" data-v-b57cc07c>String的相关方法</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#regular-expression" class="sidebar-link reco-side-regular-expression" data-v-b57cc07c>Regular Expression</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#正则表达式的相关知识和操作" class="sidebar-link reco-side-正则表达式的相关知识和操作" data-v-b57cc07c>正则表达式的相关知识和操作</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#和正则相关的字符串方法" class="sidebar-link reco-side-和正则相关的字符串方法" data-v-b57cc07c>和正则相关的字符串方法</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#禁止贪婪" class="sidebar-link reco-side-禁止贪婪" data-v-b57cc07c>禁止贪婪</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#dom" class="sidebar-link reco-side-dom" data-v-b57cc07c>DOM</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#节点" class="sidebar-link reco-side-节点" data-v-b57cc07c>节点</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#script标签中的文本" class="sidebar-link reco-side-script标签中的文本" data-v-b57cc07c>script标签中的文本</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#属性节点-attr" class="sidebar-link reco-side-属性节点-attr" data-v-b57cc07c>属性节点（Attr）</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#html-attributes-和-dom-properties" class="sidebar-link reco-side-html-attributes-和-dom-properties" data-v-b57cc07c>HTML Attributes 和 DOM Properties</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#dom增删改操作" class="sidebar-link reco-side-dom增删改操作" data-v-b57cc07c>DOM增删改操作</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件" class="sidebar-link reco-side-事件" data-v-b57cc07c>事件</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件对象" class="sidebar-link reco-side-事件对象" data-v-b57cc07c>事件对象</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件句柄" class="sidebar-link reco-side-事件句柄" data-v-b57cc07c>事件句柄</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件的冒泡" class="sidebar-link reco-side-事件的冒泡" data-v-b57cc07c>事件的冒泡</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件的委派" class="sidebar-link reco-side-事件的委派" data-v-b57cc07c>事件的委派</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件的绑定" class="sidebar-link reco-side-事件的绑定" data-v-b57cc07c>事件的绑定</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件的解绑" class="sidebar-link reco-side-事件的解绑" data-v-b57cc07c>事件的解绑</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#事件的传播" class="sidebar-link reco-side-事件的传播" data-v-b57cc07c>事件的传播</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#派发事件" class="sidebar-link reco-side-派发事件" data-v-b57cc07c>派发事件</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#文档的加载" class="sidebar-link reco-side-文档的加载" data-v-b57cc07c>文档的加载</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#bom" class="sidebar-link reco-side-bom" data-v-b57cc07c>BOM</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#bom对象的分类" class="sidebar-link reco-side-bom对象的分类" data-v-b57cc07c>BOM对象的分类</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#json" class="sidebar-link reco-side-json" data-v-b57cc07c>JSON</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#本地存储" class="sidebar-link reco-side-本地存储" data-v-b57cc07c>本地存储</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#window-sessionstorage" class="sidebar-link reco-side-window-sessionstorage" data-v-b57cc07c>window.sessionStorage</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#window-localstorage" class="sidebar-link reco-side-window-localstorage" data-v-b57cc07c>window.localStorage</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#storage-事件" class="sidebar-link reco-side-storage-事件" data-v-b57cc07c>storage 事件</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#document-cookie" class="sidebar-link reco-side-document-cookie" data-v-b57cc07c>document.cookie</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#indexeddb" class="sidebar-link reco-side-indexeddb" data-v-b57cc07c>IndexedDB</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#with语句" class="sidebar-link reco-side-with语句" data-v-b57cc07c>with语句</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#eval函数" class="sidebar-link reco-side-eval函数" data-v-b57cc07c>eval函数</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#worker对象" class="sidebar-link reco-side-worker对象" data-v-b57cc07c>Worker对象</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#跨上下文信息" class="sidebar-link reco-side-跨上下文信息" data-v-b57cc07c>跨上下文信息</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#url" class="sidebar-link reco-side-url" data-v-b57cc07c>URL</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#url转解码函数" class="sidebar-link reco-side-url转解码函数" data-v-b57cc07c>URL转解码函数</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#createobjecturl" class="sidebar-link reco-side-createobjecturl" data-v-b57cc07c>createObjectURL</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#clipboard-api" class="sidebar-link reco-side-clipboard-api" data-v-b57cc07c>Clipboard API</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#document-execcommand" class="sidebar-link reco-side-document-execcommand" data-v-b57cc07c>document.execCommand</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#urlsearchparams" class="sidebar-link reco-side-urlsearchparams" data-v-b57cc07c>URLSearchParams</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#打印" class="sidebar-link reco-side-打印" data-v-b57cc07c>打印</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#file" class="sidebar-link reco-side-file" data-v-b57cc07c>File</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#生成文件并下载" class="sidebar-link reco-side-生成文件并下载" data-v-b57cc07c>生成文件并下载</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#filereader" class="sidebar-link reco-side-filereader" data-v-b57cc07c>FileReader</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#封装filereader" class="sidebar-link reco-side-封装filereader" data-v-b57cc07c>封装FileReader</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#formdata" class="sidebar-link reco-side-formdata" data-v-b57cc07c>FormData</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#mutationobserver" class="sidebar-link reco-side-mutationobserver" data-v-b57cc07c>MutationObserver</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#intersectionobserver" class="sidebar-link reco-side-intersectionobserver" data-v-b57cc07c>IntersectionObserver</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#requestanimationframe" class="sidebar-link reco-side-requestanimationframe" data-v-b57cc07c>requestAnimationFrame</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#blob" class="sidebar-link reco-side-blob" data-v-b57cc07c>Blob</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#crypto" class="sidebar-link reco-side-crypto" data-v-b57cc07c>crypto</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#textencoder-和-textdecoder" class="sidebar-link reco-side-textencoder-和-textdecoder" data-v-b57cc07c>TextEncoder 和 TextDecoder</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#uint8array" class="sidebar-link reco-side-uint8array" data-v-b57cc07c>Uint8Array</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#es6-简介" class="sidebar-link reco-side-es6-简介" data-v-b57cc07c>ES6 简介</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#es6-的新增语法" class="sidebar-link reco-side-es6-的新增语法" data-v-b57cc07c>ES6 的新增语法</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#let-和-const" class="sidebar-link reco-side-let-和-const" data-v-b57cc07c>let 和 const</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#var、let、const-的区别" class="sidebar-link reco-side-var、let、const-的区别" data-v-b57cc07c>var、let、const 的区别</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#严格模式" class="sidebar-link reco-side-严格模式" data-v-b57cc07c>严格模式</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#严格模式中的变化" class="sidebar-link reco-side-严格模式中的变化" data-v-b57cc07c>严格模式中的变化:</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#箭头函数" class="sidebar-link reco-side-箭头函数" data-v-b57cc07c>箭头函数</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#高阶函数-和-函数柯里化" class="sidebar-link reco-side-高阶函数-和-函数柯里化" data-v-b57cc07c>高阶函数 和 函数柯里化</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#高阶函数" class="sidebar-link reco-side-高阶函数" data-v-b57cc07c>高阶函数</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数的柯里化" class="sidebar-link reco-side-函数的柯里化" data-v-b57cc07c>函数的柯里化</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数组合" class="sidebar-link reco-side-函数组合" data-v-b57cc07c>函数组合</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#闭包" class="sidebar-link reco-side-闭包" data-v-b57cc07c>闭包</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#递归" class="sidebar-link reco-side-递归" data-v-b57cc07c>递归</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#拷贝" class="sidebar-link reco-side-拷贝" data-v-b57cc07c>拷贝</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#浅拷贝" class="sidebar-link reco-side-浅拷贝" data-v-b57cc07c>浅拷贝</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#深拷贝" class="sidebar-link reco-side-深拷贝" data-v-b57cc07c>深拷贝</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#捕获错误" class="sidebar-link reco-side-捕获错误" data-v-b57cc07c>捕获错误</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#throw-语句" class="sidebar-link reco-side-throw-语句" data-v-b57cc07c>throw 语句</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#try-catch-finally-语句" class="sidebar-link reco-side-try-catch-finally-语句" data-v-b57cc07c>try/catch/finally 语句</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#解构赋值" class="sidebar-link reco-side-解构赋值" data-v-b57cc07c>解构赋值</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#数组解构" class="sidebar-link reco-side-数组解构" data-v-b57cc07c>数组解构</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#对象解构" class="sidebar-link reco-side-对象解构" data-v-b57cc07c>对象解构</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#解构赋值交换变量" class="sidebar-link reco-side-解构赋值交换变量" data-v-b57cc07c>解构赋值交换变量</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#函数形参初始值和解构赋值" class="sidebar-link reco-side-函数形参初始值和解构赋值" data-v-b57cc07c>函数形参初始值和解构赋值</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#剩余参数" class="sidebar-link reco-side-剩余参数" data-v-b57cc07c>剩余参数</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#剩余参数和解构配合使用" class="sidebar-link reco-side-剩余参数和解构配合使用" data-v-b57cc07c>剩余参数和解构配合使用</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#symbol-数据类型" class="sidebar-link reco-side-symbol-数据类型" data-v-b57cc07c>Symbol 数据类型</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#公认符号" class="sidebar-link reco-side-公认符号" data-v-b57cc07c>公认符号</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#set-数据结构" class="sidebar-link reco-side-set-数据结构" data-v-b57cc07c>Set 数据结构</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#weakset" class="sidebar-link reco-side-weakset" data-v-b57cc07c>WeakSet</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#map" class="sidebar-link reco-side-map" data-v-b57cc07c>Map</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#weakmap" class="sidebar-link reco-side-weakmap" data-v-b57cc07c>WeakMap</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#object扩展的功能和方法" class="sidebar-link reco-side-object扩展的功能和方法" data-v-b57cc07c>Object扩展的功能和方法</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#简写对象的属性和方法" class="sidebar-link reco-side-简写对象的属性和方法" data-v-b57cc07c>简写对象的属性和方法</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#属性名关联外界变量" class="sidebar-link reco-side-属性名关联外界变量" data-v-b57cc07c>属性名关联外界变量</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#对象常用方法-包括es5和es6" class="sidebar-link reco-side-对象常用方法-包括es5和es6" data-v-b57cc07c>对象常用方法(包括ES5和ES6)</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#string的扩展功能和方法" class="sidebar-link reco-side-string的扩展功能和方法" data-v-b57cc07c>String的扩展功能和方法</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#模板字符串" class="sidebar-link reco-side-模板字符串" data-v-b57cc07c>模板字符串</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#string-raw" class="sidebar-link reco-side-string-raw" data-v-b57cc07c>String.raw()</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#字符串方法-包括es5和es6" class="sidebar-link reco-side-字符串方法-包括es5和es6" data-v-b57cc07c>字符串方法(包括ES5和ES6)</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#正则表达式的扩展功能和方法" class="sidebar-link reco-side-正则表达式的扩展功能和方法" data-v-b57cc07c>正则表达式的扩展功能和方法</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#命名捕获分组" class="sidebar-link reco-side-命名捕获分组" data-v-b57cc07c>命名捕获分组</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#正向断言" class="sidebar-link reco-side-正向断言" data-v-b57cc07c>正向断言</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#反向断言" class="sidebar-link reco-side-反向断言" data-v-b57cc07c>反向断言</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#dotall模式" class="sidebar-link reco-side-dotall模式" data-v-b57cc07c>dotAll模式</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#array的扩展功能和方法" class="sidebar-link reco-side-array的扩展功能和方法" data-v-b57cc07c>Array的扩展功能和方法</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#展开运算符" class="sidebar-link reco-side-展开运算符" data-v-b57cc07c>展开运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#数组常用方法-包括es5和es6" class="sidebar-link reco-side-数组常用方法-包括es5和es6" data-v-b57cc07c>数组常用方法(包括ES5和ES6)</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#迭代器-iterator" class="sidebar-link reco-side-迭代器-iterator" data-v-b57cc07c>迭代器 (Iterator)</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#迭代器协议和可迭代协议" class="sidebar-link reco-side-迭代器协议和可迭代协议" data-v-b57cc07c>迭代器协议和可迭代协议</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#生成器-generator" class="sidebar-link reco-side-生成器-generator" data-v-b57cc07c>生成器 (Generator)</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#基本使用" class="sidebar-link reco-side-基本使用" data-v-b57cc07c>基本使用</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#生成器交替迭代" class="sidebar-link reco-side-生成器交替迭代" data-v-b57cc07c>生成器交替迭代</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#yield-与递归生成器" class="sidebar-link reco-side-yield-与递归生成器" data-v-b57cc07c>yield*与递归生成器</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#生成器函数的返回值" class="sidebar-link reco-side-生成器函数的返回值" data-v-b57cc07c>生成器函数的返回值</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#生成器的-return-和-throw-方法" class="sidebar-link reco-side-生成器的-return-和-throw-方法" data-v-b57cc07c>生成器的 return 和 throw 方法</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#promise" class="sidebar-link reco-side-promise" data-v-b57cc07c>Promise</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#promise的特点" class="sidebar-link reco-side-promise的特点" data-v-b57cc07c>Promise的特点</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#创建promise实例" class="sidebar-link reco-side-创建promise实例" data-v-b57cc07c>创建Promise实例</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#promise请求失败重试效果" class="sidebar-link reco-side-promise请求失败重试效果" data-v-b57cc07c>Promise请求失败重试效果</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#promise的优缺点" class="sidebar-link reco-side-promise的优缺点" data-v-b57cc07c>Promise的优缺点</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#promise的方法" class="sidebar-link reco-side-promise的方法" data-v-b57cc07c>Promise的方法</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#async函数" class="sidebar-link reco-side-async函数" data-v-b57cc07c>async函数</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#async-捕获错误" class="sidebar-link reco-side-async-捕获错误" data-v-b57cc07c>async 捕获错误</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#async-实现非阻塞的暂停" class="sidebar-link reco-side-async-实现非阻塞的暂停" data-v-b57cc07c>async 实现非阻塞的暂停</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#for-await循环-异步迭代器" class="sidebar-link reco-side-for-await循环-异步迭代器" data-v-b57cc07c>for/await循环(异步迭代器)</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#async-控制并发数" class="sidebar-link reco-side-async-控制并发数" data-v-b57cc07c>async 控制并发数</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#转移promise执行函数" class="sidebar-link reco-side-转移promise执行函数" data-v-b57cc07c>转移Promise执行函数</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#代理和反射" class="sidebar-link reco-side-代理和反射" data-v-b57cc07c>代理和反射</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#class" class="sidebar-link reco-side-class" data-v-b57cc07c>class</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#constructor-构造器" class="sidebar-link reco-side-constructor-构造器" data-v-b57cc07c>constructor(构造器)</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#私有属性" class="sidebar-link reco-side-私有属性" data-v-b57cc07c>私有属性</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#类里面也可以使用迭代器" class="sidebar-link reco-side-类里面也可以使用迭代器" data-v-b57cc07c>类里面也可以使用迭代器</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#class-的-getter和setter" class="sidebar-link reco-side-class-的-getter和setter" data-v-b57cc07c>class 的 getter和setter</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#class-的一些关键字" class="sidebar-link reco-side-class-的一些关键字" data-v-b57cc07c>class 的一些关键字</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#es5继承和es6继承的区别" class="sidebar-link reco-side-es5继承和es6继承的区别" data-v-b57cc07c>ES5继承和ES6继承的区别</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#模块化" class="sidebar-link reco-side-模块化" data-v-b57cc07c>模块化</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#es6-module" class="sidebar-link reco-side-es6-module" data-v-b57cc07c>ES6 module</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#commonjs-module" class="sidebar-link reco-side-commonjs-module" data-v-b57cc07c>commonjs module</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#amd-module" class="sidebar-link reco-side-amd-module" data-v-b57cc07c>AMD module</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#import-meta" class="sidebar-link reco-side-import-meta" data-v-b57cc07c>import.meta</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#时间复杂度和空间复杂度" class="sidebar-link reco-side-时间复杂度和空间复杂度" data-v-b57cc07c>时间复杂度和空间复杂度</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#复杂度的表示方式" class="sidebar-link reco-side-复杂度的表示方式" data-v-b57cc07c>复杂度的表示方式</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#时间复杂度" class="sidebar-link reco-side-时间复杂度" data-v-b57cc07c>时间复杂度</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#空间复杂度" class="sidebar-link reco-side-空间复杂度" data-v-b57cc07c>空间复杂度</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#复杂度的优化" class="sidebar-link reco-side-复杂度的优化" data-v-b57cc07c>复杂度的优化</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#运行时和编译时" class="sidebar-link reco-side-运行时和编译时" data-v-b57cc07c>运行时和编译时</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#编译时" class="sidebar-link reco-side-编译时" data-v-b57cc07c>编译时</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#运行时" class="sidebar-link reco-side-运行时" data-v-b57cc07c>运行时</a></li><li class="level-2" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#chrome高级调试技巧" class="sidebar-link reco-side-chrome高级调试技巧" data-v-b57cc07c>Chrome高级调试技巧</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#一键重新发起请求" class="sidebar-link reco-side-一键重新发起请求" data-v-b57cc07c>一键重新发起请求</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#快速发起请求" class="sidebar-link reco-side-快速发起请求" data-v-b57cc07c>快速发起请求</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#复制javascript变量" class="sidebar-link reco-side-复制javascript变量" data-v-b57cc07c>复制JavaScript变量</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#复制打印对象" class="sidebar-link reco-side-复制打印对象" data-v-b57cc07c>复制打印对象</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#快速复制属性路径" class="sidebar-link reco-side-快速复制属性路径" data-v-b57cc07c>快速复制属性路径</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#复制请求响应" class="sidebar-link reco-side-复制请求响应" data-v-b57cc07c>复制请求响应</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#获取elements面板选中的元素" class="sidebar-link reco-side-获取elements面板选中的元素" data-v-b57cc07c>获取Elements面板选中的元素</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#复制dom元素的信息" class="sidebar-link reco-side-复制dom元素的信息" data-v-b57cc07c>复制DOM元素的信息</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#截取一张全屏的网页" class="sidebar-link reco-side-截取一张全屏的网页" data-v-b57cc07c>截取一张全屏的网页</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#一键展开所有dom元素" class="sidebar-link reco-side-一键展开所有dom元素" data-v-b57cc07c>一键展开所有DOM元素</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#控制台引用上一次执行的结果" class="sidebar-link reco-side-控制台引用上一次执行的结果" data-v-b57cc07c>控制台引用上一次执行的结果</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#快速切换主题" class="sidebar-link reco-side-快速切换主题" data-v-b57cc07c>快速切换主题</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#和-选择器" class="sidebar-link reco-side-和-选择器" data-v-b57cc07c>\$ 和 \$\$ 选择器</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#i直接在控制台安装npm包" class="sidebar-link reco-side-i直接在控制台安装npm包" data-v-b57cc07c>\$i直接在控制台安装npm包</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#添加条件断点" class="sidebar-link reco-side-添加条件断点" data-v-b57cc07c>添加条件断点</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#文件跳转和源代码行数跳转" class="sidebar-link reco-side-文件跳转和源代码行数跳转" data-v-b57cc07c>文件跳转和源代码行数跳转</a></li><li class="level-3" data-v-b57cc07c><a href="/note-sites/guide/JavaScript/JavaScript.html#本地浏览去除跨域" class="sidebar-link reco-side-本地浏览去除跨域" data-v-b57cc07c>本地浏览去除跨域</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/note-sites/assets/js/app.c55294e5.js" defer></script><script src="/note-sites/assets/js/7.6eb17415.js" defer></script><script src="/note-sites/assets/js/2.abf597c5.js" defer></script><script src="/note-sites/assets/js/1.fb780807.js" defer></script><script src="/note-sites/assets/js/23.d752123f.js" defer></script>
  </body>
</html>
